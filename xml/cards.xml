<?xml version="1.0" encoding="utf-8"?>
<!--MArcomage cards database (XML)-->
<cards xmlns="http://arcomage.net">
  <card id="0">
    <name>Empty</name>
    <rarity>None</rarity>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <level>0</level>
    <keywords/>
    <effect/>
    <code/>
    <created>None</created>
    <modified>None</modified>
  </card>
  <card id="1">
    <name>Basic wall</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>1</bricks>
    </cost>
    <level>0</level>
    <effect><![CDATA[If Wall = 0<br />Wall: +10<br />else<br />Wall: +3]]></effect>
    <code><![CDATA[if ($t->myData()->Wall == 0) { $t->myData()->addWall(10); } else { $t->myData()->addWall(3); }]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="2">
    <name>Foundations</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>1</bricks>
    </cost>
    <level>1</level>
    <effect><![CDATA[Tower: +2<br />If Tower was damaged during opponent's last round<br />Tower: +5]]></effect>
    <code><![CDATA[$t->myData()->addTower(($t->myChange('Tower') < 0) ? 7 : 2);]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="3">
    <name>Lightning strike</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>11</gems>
    </cost>
    <level>0</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy quarry: -1]]></effect>
    <code><![CDATA[$t->hisData()->addQuarry(-1);]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="4">
    <name>Great Wall of China</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>40</bricks>
    </cost>
    <level>0</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Wall: +N<br />N = Max wall / 2]]></effect>
    <code><![CDATA[$t->myData()->addWall(round($t->config('max_wall') / 2));]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="5">
    <name>Curse</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>48</gems>
    </cost>
    <level>0</level>
    <keywords>Demonic,Illusion</keywords>
    <effect><![CDATA[Facilities: +1<br />Enemy facilities: -1]]></effect>
    <code><![CDATA[$t->myData()->addFacilities(1); $t->hisData()->addFacilities(-1);]]></code>
    <created>2006-05-01</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="6">
    <name>Red dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>30</recruits>
    </cost>
    <level>2</level>
    <keywords>Dragon,Charge (25)</keywords>
    <effect><![CDATA[Attack: 30<br />Enemy wall: -20]]></effect>
    <code><![CDATA[$t->hisData()->attack(30)->addWall(-20);]]></code>
    <created>2006-05-01</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="7">
    <name>Knight</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>0</level>
    <keywords>Soldier,Charge (3)</keywords>
    <effect><![CDATA[Attack: 7]]></effect>
    <code><![CDATA[$t->hisData()->attack(7);]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="8">
    <name>Soulstealer</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>0</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Steals 7 gems]]></effect>
    <code><![CDATA[$t->stealResource('my', 'Gems', 7);]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="9">
    <name>Stonehenge</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>17</bricks>
      <gems>13</gems>
    </cost>
    <level>2</level>
    <effect><![CDATA[Wall: +15<br />Magic: +2<br />Summons a rare <b>Mage</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(15)->addMagic(2);
    $t->nextCard($t->drawCard($t->getList(['rarity'=>'Rare', 'keyword'=>'Mage']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-05-01</created>
    <modified>2013-03-31</modified>
  </card>
  <card id="10">
    <name>Iron golem</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>18</bricks>
      <recruits>12</recruits>
    </cost>
    <modes>2</modes>
    <level>0</level>
    <keywords>Unliving,Skirmisher</keywords>
    <effect><![CDATA[Attack: 21<br />Mode1:<br />Bricks: +8<br />Mode2:<br />Recruits: +6]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(21);
    if ($t->mode() == 1) {
      $t->myData()->addBricks(8);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addRecruits(6);
    }
]]></code>
    <created>2006-11-14</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="11">
    <name>Meditation</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>12</gems>
    </cost>
    <level>5</level>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Gems: +17<br />If last card played was a <b>Mage</b><br />Gems: +5]]></effect>
    <code><![CDATA[
    $t->myData()->addGems(17);
    if ($t->myLastCard()->hasKeyword('Mage') && $t->myLastAction() == 'play') {
      $t->myData()->addGems(5);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="12">
    <name>Blacksmith</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>4</level>
    <effect><![CDATA[Dungeon: +1]]></effect>
    <code><![CDATA[$t->myData()->addDungeons(1);]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="13">
    <name>Goblin flanker</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>9</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 3<br />If matching card doesn't cost recruits<br />Steals 3 random resources]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(3);
    if ($t->getCard($t->hisData()->Hand[$t->cardPos()])->getResources('Recruits') == 0) {
      $t->stealRandomResources('my', 3);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="14">
    <name>Immolation</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>13</gems>
    </cost>
    <level>2</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy magic: -1]]></effect>
    <code><![CDATA[$t->hisData()->addMagic(-1);]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="15">
    <name>Plague</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>4</gems>
    </cost>
    <level>6</level>
    <effect><![CDATA[Highest facility: -1<br />Enemy highest facility: -1]]></effect>
    <code><![CDATA[$t->myData()->addHighestFacility(-1); $t->hisData()->addHighestFacility(-1);]]></code>
    <created>2006-05-01</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="16">
    <name>Mage guild</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>2</gems>
    </cost>
    <level>6</level>
    <effect><![CDATA[Tower: +3<br />Stock: +1<br />Summons a <b>Mage</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(3)->addStock(1);
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Mage']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-11-14</created>
    <modified>2007-09-26</modified>
  </card>
  <card id="17">
    <name>Earthquake</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>28</gems>
    </cost>
    <level>6</level>
    <keywords>Nature</keywords>
    <effect><![CDATA[Enemy tower and Enemy wall is halved (min 10 damage)]]></effect>
    <code><![CDATA[
    $t->hisData()->addTower(-max(round($t->hisData()->Tower / 2), 10))->addWall(-max(round($t->hisData()->Wall / 2), 10));
]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="18">
    <name>Scout tower</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>4</bricks>
    </cost>
    <level>0</level>
    <effect><![CDATA[Tower: +5]]></effect>
    <code><![CDATA[$t->myData()->addTower(5);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="19">
    <name>Fortification</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <level>0</level>
    <effect><![CDATA[Wall: +25]]></effect>
    <code><![CDATA[$t->myData()->addWall(25);]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="20">
    <name>Duelist</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>10</level>
    <keywords>Soldier</keywords>
    <effect><![CDATA[Recruits: +10<br />Discard highest cost non-rare Recruits only card from opponent's hand]]></effect>
    <code><![CDATA[
    $t->myData()->addRecruits(10);
    $card_costs = $max_cards = array(); $max = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->hisData()->Hand[$i]);
      if ($cur_card->getRarity() != 'Rare' && $cur_card->getResources('Bricks') == 0
        && $cur_card->getResources('Gems') == 0 && $cur_card->getResources('Recruits') > 0) {
        $cur_cost = $card_costs[$i] = $cur_card->getResources('Recruits');
        if ($cur_cost > $max) {
          $max = $cur_cost;
        }
      }
    }
    if (count($card_costs) > 0) {
      foreach ($card_costs as $i => $cost) {
        if ($cost == $max) {
          $max_cards[] = $i;
        }
      }
      $dis_pos = $max_cards[$t->arrayRand($max_cards)];
      $t->setCard('his', $dis_pos, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $dis_pos, 'drawCardDifferent'));
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="21">
    <name>Stronghold</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>24</bricks>
    </cost>
    <level>0</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Tower: +30]]></effect>
    <code><![CDATA[$t->myData()->addTower(30);]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="22">
    <name>Sculptor</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>9</bricks>
    </cost>
    <level>3</level>
    <effect><![CDATA[Quarry: +1]]></effect>
    <code><![CDATA[$t->myData()->addQuarry(1);]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="23">
    <name>Caravan</name>
    <rarity>Common</rarity>
    <level>0</level>
    <effect><![CDATA[Stock: +1<br />If opponent lowered your stock last round<br />Stock: +1]]></effect>
    <code><![CDATA[
    $tmp = ($t->myChange('Bricks') < 0 || $t->myChange('Gems') < 0 || $t->myChange('Recruits') < 0) ? 2 : 1;
    $t->myData()->addStock($tmp);
]]></code>
    <created>2006-05-01</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="24">
    <name>Minotaur</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>3</recruits>
    </cost>
    <level>6</level>
    <keywords>Beast,Skirmisher</keywords>
    <effect><![CDATA[Attack: 5<br />If Tower < 30<br />Tower: +4]]></effect>
    <code><![CDATA[$t->hisData()->attack(5); if ($t->myData()->Tower < 30) { $t->myData()->addTower(4); }]]></code>
    <created>2006-05-01</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="25">
    <name>Griffin</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>4</bricks>
      <recruits>7</recruits>
    </cost>
    <level>5</level>
    <keywords>Beast,Runic,Far sight</keywords>
    <effect><![CDATA[Attack: 14]]></effect>
    <code><![CDATA[$t->hisData()->attack(14);]]></code>
    <created>2006-05-01</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="26">
    <name>Thief</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>3</recruits>
    </cost>
    <level>0</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Attack: 1<br />Steals 1 stock]]></effect>
    <code><![CDATA[$t->hisData()->attack(1); $t->stealStock('my', 1);]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="27">
    <name>Fairy</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>9</level>
    <keywords>Holy,Quick</keywords>
    <effect><![CDATA[Stock: +#<b>Holy</b> in hand]]></effect>
    <code><![CDATA[$t->myData()->addStock($t->keywordCount($t->myData()->Hand, 'Holy'));]]></code>
    <created>2006-05-01</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="28">
    <name>Vampire</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>17</gems>
    </cost>
    <level>0</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 29<br />Gems: -7<br />If #<b>Undead</b> in hand < 4<br />Magic: -1]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(29); $t->myData()->addGems(-7);
    if ($t->keywordCount($t->myData()->Hand, 'Undead') < 4) {
      $t->myData()->addMagic(-1);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="29">
    <name>Night raid</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>12</gems>
    </cost>
    <level>0</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy dungeon: -1]]></effect>
    <code><![CDATA[$t->hisData()->addDungeons(-1);]]></code>
    <created>2006-05-01</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="30">
    <name>Magic maelstrom</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <modes>2</modes>
    <level>6</level>
    <effect><![CDATA[Magic: +2<br />Gems: +30<br />Mode1:<br />Quarry: -1<br />Mode2:<br />Dungeon: -1]]></effect>
    <code><![CDATA[
    $t->myData()->addMagic(2)->addGems(30);
    if ($t->mode() == 1) {
      $t->myData()->addQuarry(-1);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addDungeons(-1);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="31">
    <name>Risen angel</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>9</gems>
      <recruits>11</recruits>
    </cost>
    <level>6</level>
    <keywords>Undead,Cursed</keywords>
    <effect><![CDATA[Attack: 22 + N<br />Gems: +N<br />N = #<b>Holy</b> in opponent's hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->hisData()->Hand, 'Holy');
    $t->hisData()->attack(22 + $tmp);
    $t->myData()->addGems($tmp);
]]></code>
    <created>2006-05-01</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="32">
    <name>Crimson hawk</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>8</recruits>
    </cost>
    <level>0</level>
    <keywords>Beast,Far sight</keywords>
    <effect><![CDATA[Attack: 16]]></effect>
    <code><![CDATA[$t->hisData()->attack(16);]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="33">
    <name>Beast farm</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>10</bricks>
      <recruits>5</recruits>
    </cost>
    <level>4</level>
    <effect><![CDATA[Wall: +13<br />Summons a rare <b>Beast</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(13);
    $t->nextCard($t->drawCard($t->getList(['rarity'=>'Rare', 'keyword'=>'Beast']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-11-14</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="34">
    <name>Book of magic</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>12</gems>
    </cost>
    <level>5</level>
    <effect><![CDATA[Magic: +1]]></effect>
    <code><![CDATA[$t->myData()->addMagic(1);]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="35">
    <name>Magical tower</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>15</bricks>
    </cost>
    <level>0</level>
    <effect><![CDATA[Tower: +15<br />If matching card in opponent's hand costs gems<br />Gems: +10]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(15);
    if ($t->getCard($t->hisData()->Hand[$t->cardPos()])->getResources('Gems') > 0) {
      $t->myData()->addGems(10);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="36">
    <name>Light cavalry</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>15</recruits>
    </cost>
    <level>0</level>
    <keywords>Soldier,Charge (9)</keywords>
    <effect><![CDATA[Attack: 16]]></effect>
    <code><![CDATA[$t->hisData()->attack(16);]]></code>
    <created>2006-05-01</created>
    <modified>2007-09-26</modified>
  </card>
  <card id="37">
    <name>Mystic strike</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>4</level>
    <keywords>Destruction,Banish</keywords>
    <effect><![CDATA[Enemy gems: -12]]></effect>
    <code><![CDATA[$t->hisData()->addGems(-12);]]></code>
    <created>2006-05-01</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="38">
    <name>Master thief</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>15</recruits>
    </cost>
    <level>10</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Steals N stock<br />N = #<b>Brigand</b> in hand]]></effect>
    <code><![CDATA[$t->stealStock('my', $t->keywordCount($t->myData()->Hand, 'Brigand'));]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="39">
    <name>Reinforced wall</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
    </cost>
    <level>2</level>
    <keywords>Skirmisher</keywords>
    <effect><![CDATA[Tower: +2<br />Wall: +3]]></effect>
    <code><![CDATA[$t->myData()->addTower(2)->addWall(3);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="40">
    <name>Sorrow</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>12</gems>
    </cost>
    <level>3</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Enemy recruits: -20]]></effect>
    <code><![CDATA[$t->hisData()->addRecruits(-20);]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="41">
    <name>Stone golem</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>8</bricks>
    </cost>
    <modes>2</modes>
    <level>9</level>
    <keywords>Unliving,Skirmisher</keywords>
    <effect><![CDATA[Mode1:<br />Wall: +8<br />Mode2:<br />Enemy wall: -9]]></effect>
    <code><![CDATA[if ($t->mode() == 1) { $t->myData()->addWall(8); } elseif ($t->mode() == 2) { $t->hisData()->addWall(-9); }]]></code>
    <created>2006-11-14</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="42">
    <name>Lady Ellena</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>3</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Attack: 2<br />Summons a <b>Far sight</b>]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(2);
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Far sight']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="43">
    <name>Blood sacrifice</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>4</level>
    <keywords>Demonic</keywords>
    <effect><![CDATA[Magic: -1<br />Gems: +25]]></effect>
    <code><![CDATA[$t->myData()->addMagic(-1)->addGems(25);]]></code>
    <created>2006-05-01</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="44">
    <name>Angel</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>8</gems>
    </cost>
    <level>6</level>
    <keywords>Holy,Swift</keywords>
    <effect><![CDATA[Stock: +3N<br />N = #<b>Holy</b> in hand]]></effect>
    <code><![CDATA[$t->myData()->addStock(3 * $t->keywordCount($t->myData()->Hand, 'Holy'));]]></code>
    <created>2006-05-01</created>
    <modified>2007-09-26</modified>
  </card>
  <card id="45">
    <name>Marauder</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>3</recruits>
    </cost>
    <level>0</level>
    <keywords>Barbarian,Siege</keywords>
    <effect><![CDATA[Attack: 4<br />Enemy tower: -1]]></effect>
    <code><![CDATA[$t->hisData()->attack(4)->addTower(-1);]]></code>
    <created>2006-05-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="46">
    <name>Ogre</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>8</recruits>
    </cost>
    <level>0</level>
    <keywords>Horde,Charge (7),Siege</keywords>
    <effect><![CDATA[Enemy wall: -8]]></effect>
    <code><![CDATA[$t->hisData()->addWall(-8);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="47">
    <name>City walls</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>20</bricks>
    </cost>
    <level>0</level>
    <effect><![CDATA[Wall: +35<br />Bricks: +5]]></effect>
    <code><![CDATA[$t->myData()->addWall(35)->addBricks(5);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="48">
    <name>School of Restoration</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>2</gems>
    </cost>
    <level>6</level>
    <effect><![CDATA[Tower: +4<br />Stock: +1<br />Summons a <b>Restoration</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(4)->addStock(1);
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Restoration']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-11-14</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="49">
    <name>Living clay</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>5</gems>
    </cost>
    <level>0</level>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Bricks: +10<br />If last card played was a <b>Mage</b><br />Bricks: +5]]></effect>
    <code><![CDATA[
    $t->myData()->addBricks(10);
    if ($t->myLastCard()->hasKeyword('Mage') && $t->myLastAction() == 'play') {
      $t->myData()->addBricks(5);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="50">
    <name>Magical steel</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>8</level>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Recruits: +10<br />If last card played was a <b>Mage</b><br />Recruits: +5]]></effect>
    <code><![CDATA[
    $t->myData()->addRecruits(10);
    if ($t->myLastCard()->hasKeyword('Mage') && $t->myLastAction() == 'play') {
      $t->myData()->addRecruits(5);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="51">
    <name>Samurai</name>
    <rarity>Uncommon</rarity>
    <level>10</level>
    <effect><![CDATA[Discard highest cost non-<b>Durable</b> keyword card from opponent's hand]]></effect>
    <code><![CDATA[
    $card_costs = $max_cards = array(); $max = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->hisData()->Hand[$i]);
      if (!$cur_card->hasKeyword('Durable') && $cur_card->hasKeyword('any')) {
        $cur_cost = $card_costs[$i] = $cur_card->getResources();
        if ($cur_cost > $max) {
          $max = $cur_cost;
        }
      }
    }
    if (count($card_costs) > 0) {
      foreach ($card_costs as $i => $cost) {
        if ($cost == $max) {
          $max_cards[] = $i;
        }
      }
      $dis_pos = $max_cards[$t->arrayRand($max_cards)];
      $t->setCard('his', $dis_pos, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $dis_pos, 'drawCardDifferent'));
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="52">
    <name>Pirates</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>0</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Attack: 9<br />Enemy stock: -3]]></effect>
    <code><![CDATA[$t->hisData()->attack(9)->addStock(-3);]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="53">
    <name>Sorceress</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>11</gems>
    </cost>
    <level>0</level>
    <keywords>Mage,Swift</keywords>
    <effect><![CDATA[Attack: 6 + #Magic]]></effect>
    <code><![CDATA[$t->hisData()->attack(6 + $t->myData()->Magic);]]></code>
    <created>2006-05-01</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="54">
    <name>Battering ram</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>0</level>
    <keywords>Siege</keywords>
    <effect><![CDATA[Enemy wall: -10]]></effect>
    <code><![CDATA[$t->hisData()->addWall(-10);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="55">
    <name>School of Nature</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>6</bricks>
      <gems>3</gems>
    </cost>
    <level>8</level>
    <effect><![CDATA[Tower: +5<br />Stock: +1<br />Summons a <b>Nature</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(5)->addStock(1);
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Nature']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-11-14</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="56">
    <name>Parapet</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>7</bricks>
    </cost>
    <level>2</level>
    <effect><![CDATA[Tower: +12]]></effect>
    <code><![CDATA[$t->myData()->addTower(12);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="57">
    <name>Gate</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>3</bricks>
    </cost>
    <level>0</level>
    <effect><![CDATA[Wall: +7]]></effect>
    <code><![CDATA[$t->myData()->addWall(7);]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="58">
    <name>Academy of Destruction</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>8</bricks>
      <gems>5</gems>
    </cost>
    <level>0</level>
    <effect><![CDATA[Tower: +6<br />Stock: +2<br />Summons non-common <b>Destruction</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(6)->addStock(2);
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Destruction']);
    $rare = $t->getList(['rarity'=>'Rare', 'keyword'=>'Destruction']);
    $t->nextCard($t->drawCard(array_merge($uncommon, $rare), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-11-14</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="59">
    <name>Flame spitter</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>8</recruits>
    </cost>
    <level>4</level>
    <effect><![CDATA[Enemy tower: -9]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-9);]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="60">
    <name>Dwarven warriors</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>3</recruits>
    </cost>
    <level>0</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Attack: 4<br />Bricks: +3]]></effect>
    <code><![CDATA[$t->hisData()->attack(4); $t->myData()->addBricks(3);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="61">
    <name>Ether dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>25</gems>
      <recruits>15</recruits>
    </cost>
    <level>0</level>
    <keywords>Dragon,Banish</keywords>
    <effect><![CDATA[Attack: 50]]></effect>
    <code><![CDATA[$t->hisData()->attack(50);]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="62">
    <name>Catapult</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>16</recruits>
    </cost>
    <level>1</level>
    <keywords>Siege</keywords>
    <effect><![CDATA[Enemy tower: -14]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-14);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="63">
    <name>Dark ritual</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>15</gems>
    </cost>
    <level>5</level>
    <keywords>Demonic</keywords>
    <effect><![CDATA[Facilities: -1<br />Enemy tower: -24]]></effect>
    <code><![CDATA[$t->myData()->addFacilities(-1); $t->hisData()->addTower(-24);]]></code>
    <created>2006-05-01</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="64">
    <name>Enlightenment</name>
    <rarity>Rare</rarity>
    <level>8</level>
    <effect><![CDATA[Tower: +25<br />Facilities: +1<br />Enemy tower: +25<br />Enemy facilities: +1]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(25)->addFacilities(1);
    $t->hisData()->addTower(25)->addFacilities(1);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="65">
    <name>Academy of Illusion</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>9</bricks>
      <gems>6</gems>
    </cost>
    <level>6</level>
    <effect><![CDATA[Tower: +7<br />Stock: +3<br />Summons non-common <b>Illusion</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(7)->addStock(3);
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Illusion']);
    $rare = $t->getList(['rarity'=>'Rare', 'keyword'=>'Illusion']);
    $t->nextCard($t->drawCard(array_merge($uncommon, $rare), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-11-14</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="66">
    <name>Manticore</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>0</level>
    <keywords>Beast,Frenzy</keywords>
    <effect><![CDATA[Attack: 18]]></effect>
    <code><![CDATA[$t->hisData()->attack(18);]]></code>
    <created>2006-05-01</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="67">
    <name>Magical palace</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>35</gems>
    </cost>
    <level>0</level>
    <effect><![CDATA[Tower: +40]]></effect>
    <code><![CDATA[$t->myData()->addTower(40);]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="68">
    <name>Gladiator</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>6</level>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[Attack: 3<br />Recruits: +2<br />Summons a non-common <b>Barbarian</b>]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(3);
    $t->myData()->addRecruits(2);
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Barbarian']);
    $rare = $t->getList(['rarity'=>'Rare', 'keyword'=>'Barbarian']);
    $t->nextCard($t->drawCard(array_merge($uncommon, $rare), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-05-01</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="69">
    <name>Beast mistress</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>0</level>
    <keywords>Beast,Frenzy</keywords>
    <effect><![CDATA[Recruits prod x2<br />Replace adjacent cards with <b>Beast</b> and <b>Frenzy</b> (can't summon self)]]></effect>
    <code><![CDATA[
    $t->production()->multiplyRecruits(2);
    $list = array_diff(array_intersect($t->getList(['keyword'=>'Beast']), $t->getList(['keyword'=>'Frenzy'])), [$t->card()->id()]);
    if ($t->cardPos() > 1) {
      $t->setCard('my', $t->cardPos() - 1, $t->drawCard($list, $t->myData()->Hand, $t->cardPos() - 1, 'drawCardList'));
    }
    if ($t->cardPos() < $t->handSize()) {
      $t->setCard('my', $t->cardPos() + 1, $t->drawCard($list, $t->myData()->Hand, $t->cardPos() + 1, 'drawCardList'));
    }
    ]]></code>
    <created>2006-05-01</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="70">
    <name>Stormwind</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>15</bricks>
      <gems>10</gems>
    </cost>
    <level>0</level>
    <effect><![CDATA[Tower: +20<br />Magic: +2]]></effect>
    <code><![CDATA[$t->myData()->addTower(20)->addMagic(2);]]></code>
    <created>2006-05-01</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="71">
    <name>Dwarven miners</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>3</bricks>
      <recruits>2</recruits>
    </cost>
    <level>0</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Attack: 3<br />Wall: +5]]></effect>
    <code><![CDATA[$t->hisData()->attack(3); $t->myData()->addWall(5);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="72">
    <name>Tower guards</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>9</recruits>
    </cost>
    <level>7</level>
    <keywords>Soldier,Far sight</keywords>
    <effect><![CDATA[Tower: +10]]></effect>
    <code><![CDATA[$t->myData()->addTower(10);]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="73">
    <name>Giant spider</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>7</recruits>
    </cost>
    <level>2</level>
    <keywords>Horde,Frenzy</keywords>
    <effect><![CDATA[Attack: 10<br />Wall: +5<br />Enemy bricks: -5]]></effect>
    <code><![CDATA[$t->hisData()->attack(10); $t->myData()->addWall(5); $t->hisData()->addBricks(-5);]]></code>
    <created>2006-05-01</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="74">
    <name>Highlander</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>14</recruits>
    </cost>
    <level>0</level>
    <keywords>Barbarian,Skirmisher</keywords>
    <effect><![CDATA[Attack: 25]]></effect>
    <code><![CDATA[$t->hisData()->attack(25);]]></code>
    <created>2006-05-01</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="75">
    <name>White crocodile</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>7</recruits>
    </cost>
    <level>0</level>
    <keywords>Beast,Frenzy</keywords>
    <effect><![CDATA[Attack: 15]]></effect>
    <code><![CDATA[$t->hisData()->attack(15);]]></code>
    <created>2006-05-01</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="76">
    <name>Ninja</name>
    <rarity>Uncommon</rarity>
    <modes>8</modes>
    <level>8</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Production x0<br />Enemy tower: -3<br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $t->production()->multiply(0);
    $t->hisData()->addTower(-3);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
    else {
      $t->replaceCard('my', $t->mode(), $t->card()->id());
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="77">
    <name>Amazon tribe</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
      <gems>2</gems>
      <recruits>2</recruits>
    </cost>
    <level>8</level>
    <keywords>Barbarian,Skirmisher</keywords>
    <effect><![CDATA[Attack: 6<br />Recruits: +N<br />N = #<b>Barbarian</b> in hand (max 4)]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(6);
    $t->myData()->addRecruits(min($t->keywordCount($t->myData()->Hand, 'Barbarian'), 4));
]]></code>
    <created>2006-05-01</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="78">
    <name>Unicorn</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>6</level>
    <keywords>Banish,Charge (2)</keywords>
    <effect><![CDATA[Attack: 5<br />Gems: +3]]></effect>
    <code><![CDATA[$t->hisData()->attack(5); $t->myData()->addGems(3);]]></code>
    <created>2006-05-01</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="79">
    <name>Erosion</name>
    <rarity>Common</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>0</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy bricks: -10]]></effect>
    <code><![CDATA[$t->hisData()->addBricks(-10);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="80">
    <name>Catastrophe</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>25</gems>
    </cost>
    <level>9</level>
    <keywords>Destruction,Nature</keywords>
    <effect><![CDATA[Each player suffers 4 damage for each facility and 10 resources he has]]></effect>
    <code><![CDATA[
    $my_fac = $t->myData()->Quarry + $t->myData()->Magic + $t->myData()->Dungeons;
    $his_fac = $t->hisData()->Quarry + $t->hisData()->Magic + $t->hisData()->Dungeons;
    $my_res = $t->myData()->Bricks + $t->myData()->Gems + $t->myData()->Recruits;
    $his_res = $t->hisData()->Bricks + $t->hisData()->Gems + $t->hisData()->Recruits;
    $t->myData()->attack(($my_fac + floor($my_res / 10)) * 4);
    $t->hisData()->attack(($his_fac + floor($his_res / 10)) * 4);
]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="81">
    <name>New era</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>7</level>
    <effect><![CDATA[Facilities: +2<br />Stock: = 0<br />Enemy facilities: +2<br />Enemy stock: = 0]]></effect>
    <code><![CDATA[
    $t->myData()->addFacilities(2)->setStock(0);
    $t->hisData()->addFacilities(2)->setStock(0);
]]></code>
    <created>2006-05-01</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="82">
    <name>Wizard</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>2</level>
    <keywords>Mage,Far sight</keywords>
    <effect><![CDATA[Attack: #Magic]]></effect>
    <code><![CDATA[$t->hisData()->attack($t->myData()->Magic);]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="83">
    <name>Valkyrie</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>14</recruits>
    </cost>
    <level>0</level>
    <keywords>Banish,Charge (7)</keywords>
    <effect><![CDATA[Attack: 15<br />Dungeon: +1<br />Enemy dungeon: +1]]></effect>
    <code><![CDATA[
    $t->myData()->addDungeons(1);
    $t->hisData()->attack(15)->addDungeons(1);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="84">
    <name>Cold arrow</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>8</gems>
    </cost>
    <level>0</level>
    <keywords>Destruction,Banish</keywords>
    <effect><![CDATA[Attack: 8<br />Enemy gems: -8]]></effect>
    <code><![CDATA[$t->hisData()->attack(8)->addGems(-8);]]></code>
    <created>2006-05-01</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="85">
    <name>Heavenly warrior</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>6</level>
    <keywords>Holy,Far sight</keywords>
    <effect><![CDATA[Attack: 10<br />Enemy gems: -8]]></effect>
    <code><![CDATA[$t->hisData()->attack(10)->addGems(-8);]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="86">
    <name>Bone dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>30</gems>
      <recruits>10</recruits>
    </cost>
    <level>0</level>
    <keywords>Dragon,Undead</keywords>
    <effect><![CDATA[Attack: 40<br />Enemy gems: -20]]></effect>
    <code><![CDATA[$t->hisData()->attack(40)->addGems(-20);]]></code>
    <created>2006-05-01</created>
    <modified>2007-05-08</modified>
  </card>
  <card id="87">
    <name>Pyramids</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>60</bricks>
    </cost>
    <level>10</level>
    <effect><![CDATA[Tower: +60<br />If Wall < 40<br />Wall:= 40]]></effect>
    <code><![CDATA[$t->myData()->addTower(60); if ($t->myData()->Wall < 40) { $t->myData()->setWall(40); }]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="88">
    <name>Undead host</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>35</gems>
      <recruits>35</recruits>
    </cost>
    <level>9</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 35 + 7N<br />N = #<b>Undead</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = ($t->keywordCount($t->myData()->Hand, 'Undead') * 7) + 35;
    $t->hisData()->attack($tmp);
]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="89">
    <name>Orc regiment</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>60</recruits>
    </cost>
    <level>0</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 80<br />If matching card or its adjacent cards are zero cost<br />Attack: 20]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(80);
    $hisHand = $t->hisData()->Hand;
    if ($t->getCard($hisHand[$t->cardPos()])->getResources() == 0 ||
      (isset($hisHand[$t->cardPos() + 1]) && $t->getCard($hisHand[$t->cardPos() + 1])->getResources() == 0) || 
      (isset($hisHand[$t->cardPos() - 1]) && $t->getCard($hisHand[$t->cardPos() - 1])->getResources() == 0)) {
      $t->hisData()->attack(20);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="90">
    <name>Paladin</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>5</level>
    <keywords>Holy,Soldier,Banish</keywords>
    <effect><![CDATA[Attack: 10<br />Gems: +6]]></effect>
    <code><![CDATA[$t->hisData()->attack(10); $t->myData()->addGems(6);]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="91">
    <name>Corrosion</name>
    <rarity>Common</rarity>
    <cost>
      <gems>3</gems>
    </cost>
    <level>0</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy recruits: -6]]></effect>
    <code><![CDATA[$t->hisData()->addRecruits(-6);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="92">
    <name>Dragon golem</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>45</bricks>
    </cost>
    <modes>2</modes>
    <level>6</level>
    <keywords>Dragon,Unliving,Charge (16)</keywords>
    <effect><![CDATA[Mode1:<br />Attack: 55<br />Mode2:<br />Wall: +65]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->hisData()->attack(55);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addWall(65);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="93">
    <name>Clay golem</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>30</bricks>
    </cost>
    <modes>3</modes>
    <level>10</level>
    <keywords>Unliving,Siege</keywords>
    <effect><![CDATA[Mode1:<br />Attack: 25<br />Mode2:<br />Wall: +32<br />Mode3:<br />Enemy wall: -35]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->hisData()->attack(25);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addWall(32);
    }
    elseif ($t->mode() == 3) {
      $t->hisData()->addWall(-35);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="94">
    <name>Stone gargoyle</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>16</bricks>
    </cost>
    <modes>2</modes>
    <level>10</level>
    <keywords>Unliving,Far sight</keywords>
    <effect><![CDATA[Mode1:<br />Attack: 12<br />Mode2:<br />Enemy tower: -7]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->hisData()->attack(12);
    }
    elseif ($t->mode() == 2) {
      $t->hisData()->addTower(-7);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="95">
    <name>Archer</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>2</recruits>
    </cost>
    <level>2</level>
    <keywords>Soldier</keywords>
    <effect><![CDATA[Enemy tower: -3]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-3);]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="96">
    <name>Pegasus</name>
    <rarity>Uncommon</rarity>
    <level>0</level>
    <keywords>Quick,Aria</keywords>
    <effect><![CDATA[Gems: +2]]></effect>
    <code><![CDATA[$t->myData()->addGems(2);]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="97">
    <name>Conscript</name>
    <rarity>Common</rarity>
    <level>2</level>
    <effect><![CDATA[Attack: 1<br />If last card played was a zero cost card<br />Summons a non-common zero cost card]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(1);
    if ($t->myLastCard()->getResources() == 0 && $t->myLastAction() == 'play' && $t->myLastCard()->id() > 0) {
      $uncommon = $t->getList(['rarity'=>'Uncommon', 'cost'=>'Zero']);
      $rare = $t->getList(['rarity'=>'Rare', 'cost'=>'Zero']);
      $t->nextCard($t->drawCard(array_merge($uncommon, $rare), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    }
 ]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="98">
    <name>Murderer</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>18</recruits>
    </cost>
    <level>0</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 10<br />Enemy magic: -1]]></effect>
    <code><![CDATA[$t->hisData()->attack(10)->addMagic(-1);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="99">
    <name>Magic rift</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>12</gems>
    </cost>
    <level>7</level>
    <effect><![CDATA[Dungeon: +1<br />Magic: +1<br />Gems: +25<br />Enemy dungeon: +1<br />Enemy magic: +1<br />Enemy gems: -25]]></effect>
    <code><![CDATA[
    $t->myData()->addDungeons(1)->addMagic(1)->addGems(25);
    $t->hisData()->addDungeons(1)->addMagic(1)->addGems(-25);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="100">
    <name>Wonder</name>
    <rarity>Rare</rarity>
    <level>5</level>
    <effect><![CDATA[Quarry: +5<br />Enemy quarry: +5]]></effect>
    <code><![CDATA[$t->myData()->addQuarry(5); $t->hisData()->addQuarry(5);]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="101">
    <name>Crypt sentry</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>6</bricks>
      <recruits>4</recruits>
    </cost>
    <level>9</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Stock: +#<b>Undead</b> in hand (max 6)]]></effect>
    <code><![CDATA[
    $t->myData()->addStock(min($t->keywordCount($t->myData()->Hand, 'Undead'), 6));
]]></code>
    <created>2006-11-14</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="102">
    <name>Honor guard</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>20</recruits>
    </cost>
    <level>2</level>
    <keywords>Soldier</keywords>
    <effect><![CDATA[Tower: +10<br />Recruits: +20]]></effect>
    <code><![CDATA[$t->myData()->addTower(10)->addRecruits(20);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="103">
    <name>Vampire countess</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>3</gems>
    </cost>
    <level>10</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Stock: +N<br />If N > 6<br />Magic: +1<br />N = #<b>Undead</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Undead');
    $t->myData()->addStock($tmp);
    if ($tmp > 6) {
      $t->myData()->addMagic(1);
    }
]]></code>
    <created>2006-11-14</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="104">
    <name>Moat</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <level>8</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Wall: +15<br />If last card played wasn't Moat<br />Wall: +5]]></effect>
    <code><![CDATA[$t->myData()->addWall(($t->myLastAction() == 'play' && $t->myLastCard()->id() == $t->card()->id()) ? 15 : 20);]]></code>
    <created>2006-05-01</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="105">
    <name>Rejuvenation</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>8</gems>
    </cost>
    <level>7</level>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Summons the last card]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->id() > 0) {
      $t->nextCard($t->myLastCard()->id(), true);
    }
    ]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="106">
    <name>Troll</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <level>8</level>
    <keywords>Durable,Horde,Enduring (9)</keywords>
    <effect><![CDATA[Attack: 5]]></effect>
    <code><![CDATA[$t->hisData()->attack(5);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="107">
    <name>Alchemy</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>7</level>
    <keywords>Restoration,Durable</keywords>
    <effect><![CDATA[Bricks: +2<br />Recruits: +2]]></effect>
    <code><![CDATA[$t->myData()->addBricks(2)->addRecruits(2);]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="108">
    <name>Archmage</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>16</gems>
    </cost>
    <modes>2</modes>
    <level>0</level>
    <keywords>Mage</keywords>
    <effect><![CDATA[Tower: +20<br />Evoke last card or [card=425/]]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(20);
    $t->nextCard(($t->mode() == 1 && $t->myLastCard()->id() > 0) ? $t->myLastCard()->id() : 425, true);
]]></code>
    <created>2006-05-01</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="109">
    <name>Red mage</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>14</gems>
    </cost>
    <level>0</level>
    <keywords>Mage,Swift</keywords>
    <effect><![CDATA[Attack: 8<br />Enemy stock: -3]]></effect>
    <code><![CDATA[$t->hisData()->attack(8)->addStock(-3);]]></code>
    <created>2006-05-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="110">
    <name>Dark knight</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>15</gems>
      <recruits>15</recruits>
    </cost>
    <level>0</level>
    <keywords>Undead,Skirmisher</keywords>
    <effect><![CDATA[Attack: 35<br />Enemy recruits: -10]]></effect>
    <code><![CDATA[$t->hisData()->attack(35)->addRecruits(-10);]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="111">
    <name>Elven fighter</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>1</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Attack: 7<br />Gems: +2]]></effect>
    <code><![CDATA[$t->hisData()->attack(7); $t->myData()->addGems(2);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="112">
    <name>Ghoul</name>
    <rarity>Common</rarity>
    <cost>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <level>3</level>
    <keywords>Undead,Frenzy</keywords>
    <effect><![CDATA[Attack: 10]]></effect>
    <code><![CDATA[$t->hisData()->attack(10);]]></code>
    <created>2006-05-01</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="113">
    <name>Skeleton warriors</name>
    <rarity>Common</rarity>
    <cost>
      <gems>3</gems>
      <recruits>3</recruits>
    </cost>
    <level>0</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 7<br />If Wall < 12<br />Wall: +4]]></effect>
    <code><![CDATA[$t->hisData()->attack(7); if ($t->myData()->Wall < 12) { $t->myData()->addWall(4); }]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="114">
    <name>Drowner</name>
    <rarity>Common</rarity>
    <cost>
      <gems>2</gems>
      <recruits>2</recruits>
    </cost>
    <level>4</level>
    <keywords>Aqua,Undead</keywords>
    <effect><![CDATA[Attack: 5<br />Wall: +2]]></effect>
    <code><![CDATA[$t->hisData()->attack(5); $t->myData()->addWall(2);]]></code>
    <created>2006-05-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="115">
    <name>Angel of destruction</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <level>0</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Attack: 30<br />Stock: = 0<br />Enemy stock: = 0]]></effect>
    <code><![CDATA[
    $t->myData()->setStock(0);
    $t->hisData()->attack(30)->setStock(0);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="116">
    <name>Telekinesis</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>9</gems>
    </cost>
    <level>1</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Tower: +5<br />Enemy tower: -5]]></effect>
    <code><![CDATA[$t->myData()->addTower(5); $t->hisData()->addTower(-5);]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="117">
    <name>Mummy</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>8</level>
    <keywords>Undead,Banish</keywords>
    <effect><![CDATA[Tower: +4<br />If #<b>Undead</b> in hand < 4<br />Gems: -3]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(4);
    if ($t->keywordCount($t->myData()->Hand, 'Undead') < 4) {
      $t->myData()->addGems(-3);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="118">
    <name>Gateway</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>60</gems>
    </cost>
    <level>2</level>
    <effect><![CDATA[Facilities: +3<br />Wall: +25]]></effect>
    <code><![CDATA[$t->myData()->addFacilities(3)->addWall(25);]]></code>
    <created>2006-05-01</created>
    <modified>2014-12-24</modified>
  </card>
  <card id="119">
    <name>Haste</name>
    <rarity>Common</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>0</level>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Production x2]]></effect>
    <code><![CDATA[$t->production()->multiply(2);]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="120">
    <name>Stalker</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>11</gems>
      <recruits>5</recruits>
    </cost>
    <level>6</level>
    <keywords>Undead,Far sight</keywords>
    <effect><![CDATA[Attack: 11<br />Steals 5 gems]]></effect>
    <code><![CDATA[$t->hisData()->attack(11); $t->stealResource('my', 'Gems', 5);]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="121">
    <name>Luna the Sorceress</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>25</gems>
    </cost>
    <level>0</level>
    <keywords>Mage,Far sight</keywords>
    <effect><![CDATA[Attack: 30<br />Magic: +1]]></effect>
    <code><![CDATA[$t->hisData()->attack(30); $t->myData()->addMagic(1);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="122">
    <name>Elven scout</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>2</recruits>
    </cost>
    <level>0</level>
    <keywords>Alliance,Banish</keywords>
    <effect><![CDATA[Attack: 3<br />Gems: +1]]></effect>
    <code><![CDATA[$t->hisData()->attack(3); $t->myData()->addGems(1);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="123">
    <name>Magic fountain</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
    </cost>
    <level>0</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Tower: +7<br />Production x2]]></effect>
    <code><![CDATA[$t->myData()->addTower(7); $t->production()->multiply(2);]]></code>
    <created>2006-05-01</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="124">
    <name>Cannoneer</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>7</gems>
      <recruits>7</recruits>
    </cost>
    <level>0</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Wall: -70<br />Attack: N<br />N = wall lost]]></effect>
    <code><![CDATA[
    $lowered = $t->myData()->Wall - max($t->myData()->Wall - 70, 0);
    $t->myData()->addWall(-$lowered);
    $t->hisData()->attack($lowered);
]]></code>
    <created>2006-05-01</created>
    <modified>2013-03-31</modified>
  </card>
  <card id="125">
    <name>Archangel</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>40</gems>
    </cost>
    <level>6</level>
    <keywords>Restoration,Far sight</keywords>
    <effect><![CDATA[Tower: +15<br />Wall: +15<br />Stock: +15]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(15)->addWall(15);
    $t->myData()->addStock(15);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="126">
    <name>Green dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>25</recruits>
    </cost>
    <level>0</level>
    <keywords>Dragon,Far sight</keywords>
    <effect><![CDATA[Attack: 40]]></effect>
    <code><![CDATA[$t->hisData()->attack(40);]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="127">
    <name>Black dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>43</recruits>
    </cost>
    <level>0</level>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Attack: 60<br />Enemy recruits: -15]]></effect>
    <code><![CDATA[$t->hisData()->attack(60)->addRecruits(-15);]]></code>
    <created>2006-05-01</created>
    <modified>2007-09-26</modified>
  </card>
  <card id="128">
    <name>Ice dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>10</gems>
      <recruits>25</recruits>
    </cost>
    <level>0</level>
    <keywords>Dragon,Skirmisher</keywords>
    <effect><![CDATA[Attack: 45<br />Enemy gems: -10]]></effect>
    <code><![CDATA[$t->hisData()->attack(45)->addGems(-10);]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="129">
    <name>Wealth</name>
    <rarity>Common</rarity>
    <level>6</level>
    <effect><![CDATA[Stock: +8<br />Enemy stock: +8]]></effect>
    <code><![CDATA[
    $t->myData()->addStock(8);
    $t->hisData()->addStock(8);
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="130">
    <name>Sea monster</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>30</recruits>
    </cost>
    <level>7</level>
    <keywords>Aqua,Charge (8)</keywords>
    <effect><![CDATA[Attack: 30<br />Recruits: +N<br />N = enemy wall destroyed (max 20)]]></effect>
    <code><![CDATA[
    $wall = $t->hisData()->Wall;
    $t->hisData()->attack(30);
    $t->myData()->addRecruits(min($wall - max($t->hisData()->Wall, 0), 20));
]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="131">
    <name>Dragon egg</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>13</gems>
    </cost>
    <level>8</level>
    <effect><![CDATA[Summons a <b>Dragon</b><br />If #<b>Dragon</b> in hand > 0<br />it will be a rare <b>Dragon</b>]]></effect>
    <code><![CDATA[
    $filters = ($t->keywordCount($t->myData()->Hand, 'Dragon') > 0) ? ['rarity'=>'Rare', 'keyword'=>'Dragon'] : ['keyword'=>'Dragon'];
    $t->nextCard($t->drawCard($t->getList($filters), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="132">
    <name>Tubular bells</name>
    <rarity>Rare</rarity>
    <level>6</level>
    <effect><![CDATA[If #Facilities >= #Enemy facilities<br />Stock: -15<br />Always:<br />Facilities: +1]]></effect>
    <code><![CDATA[
    if (($t->myData()->Quarry + $t->myData()->Magic + $t->myData()->Dungeons) >= ($t->hisData()->Quarry + $t->hisData()->Magic + $t->hisData()->Dungeons)) {
      $t->myData()->addStock(-15);
    }
    $t->myData()->addFacilities(1);
]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="133">
    <name>Banshee</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>10</gems>
      <recruits>10</recruits>
    </cost>
    <level>8</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 4N + 4<br />N = #<b>Undead</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Undead');
    $t->hisData()->attack((($tmp * 4) + 4));
]]></code>
    <created>2006-11-14</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="134">
    <name>Centaur trainer</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>13</gems>
      <recruits>17</recruits>
    </cost>
    <level>4</level>
    <keywords>Beast,Horde</keywords>
    <effect><![CDATA[Dungeon: +2<br />Summons a rare <b>Beast</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addDungeons(2);
    $t->nextCard($t->drawCard($t->getList(['rarity'=>'Rare', 'keyword'=>'Beast']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-11-14</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="135">
    <name>Stone atronarch</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
      <gems>5</gems>
    </cost>
    <level>5</level>
    <keywords>Unliving</keywords>
    <effect><![CDATA[If Bricks > Enemy bricks<br />Attack: 10<br />else<br/>Bricks: +8]]></effect>
    <code><![CDATA[
    if ($t->myData()->Bricks > $t->hisData()->Bricks) {
      $t->hisData()->attack(10);
    }
    else {
      $t->myData()->addBricks(8);
    }
]]></code>
    <created>2007-03-26</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="136">
    <name>Elven enchantress</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>10</gems>
    </cost>
    <level>0</level>
    <keywords>Alliance,Mage</keywords>
    <effect><![CDATA[Attack: 9<br />Production x2]]></effect>
    <code><![CDATA[$t->hisData()->attack(9); $t->production()->multiply(2);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="137">
    <name>Seraphim</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>17</recruits>
    </cost>
    <level>3</level>
    <keywords>Holy,Far sight</keywords>
    <effect><![CDATA[Attack: 10<br />Tower: +10]]></effect>
    <code><![CDATA[$t->hisData()->attack(10); $t->myData()->addTower(10);]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="138">
    <name>Devil</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>28</gems>
      <recruits>30</recruits>
    </cost>
    <level>0</level>
    <keywords>Demonic</keywords>
    <effect><![CDATA[Attack: 50<br />Enemy stock: -50]]></effect>
    <code><![CDATA[$t->hisData()->attack(50)->addStock(-50);]]></code>
    <created>2006-05-01</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="139">
    <name>Avenger</name>
    <rarity>Common</rarity>
    <cost>
      <gems>5</gems>
      <recruits>2</recruits>
    </cost>
    <level>4</level>
    <keywords>Holy</keywords>
    <effect><![CDATA[If Recruits > Enemy recruits<br />Attack: 10<br />else<br/>Recruits: +7]]></effect>
    <code><![CDATA[
    if ($t->myData()->Recruits > $t->hisData()->Recruits) {
      $t->hisData()->attack(10);
    }
    else {
      $t->myData()->addRecruits(7);
    }
]]></code>
    <created>2007-03-26</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="140">
    <name>Poacher</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>0</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Attack: 3<br />Enemy stock: -2]]></effect>
    <code><![CDATA[$t->hisData()->attack(3)->addStock(-2);]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="141">
    <name>Tower of Babylon</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <level>0</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Tower: +10]]></effect>
    <code><![CDATA[$t->myData()->addTower(10);]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="142">
    <name>Basilisk</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>7</level>
    <keywords>Beast</keywords>
    <effect><![CDATA[Attack: 20<br />Wall: +10<br />Quarry: +1<br />Enemy wall: +10<br />Enemy quarry: +1]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(10)->addQuarry(1);
    $t->hisData()->attack(20)->addWall(10)->addQuarry(1);
]]></code>
    <created>2006-05-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="143">
    <name>Clay valley</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>11</gems>
      <recruits>11</recruits>
    </cost>
    <level>3</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Bricks prod x15]]></effect>
    <code><![CDATA[$t->production()->multiplyBricks(15);]]></code>
    <created>2006-05-01</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="144">
    <name>Necromancer</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>19</gems>
      <recruits>13</recruits>
    </cost>
    <level>4</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 20<br />Summons rare <b>Undead</b><br />Gain cost of the summoned card (max 13)]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(20);
    $t->nextCard($t->drawCard($t->getList(['rarity'=>'Rare', 'keyword'=>'Undead']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    $cur_card = $t->getCard($t->nextCard());
    $t->myData()
      ->addBricks(min($cur_card->getResources('Bricks'), 13))
      ->addGems(min($cur_card->getResources('Gems'), 13))
      ->addRecruits(min($cur_card->getResources('Recruits'), 13));
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="145">
    <name>Necromancy</name>
    <rarity>Common</rarity>
    <cost>
      <gems>4</gems>
    </cost>
    <level>10</level>
    <effect><![CDATA[Summons <b>Undead</b> of a rarity based on #<b>Undead</b> in hand (C - 0 to 3, U - 4 to 6, R - 7)]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Undead');
    $rarity = ($tmp == 7) ? 'Rare' : (($tmp < 7 && $tmp > 3) ? 'Uncommon' : 'Common');
    $t->nextCard($t->drawCard($t->getList(['rarity'=>$rarity, 'keyword'=>'Undead']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="146">
    <name>Ancient ruins</name>
    <rarity>Uncommon</rarity>
    <level>0</level>
    <keywords>Runic,Cursed</keywords>
    <effect><![CDATA[Bricks: +5<br />Gems: +2<br />Recruits: +1]]></effect>
    <code><![CDATA[$t->myData()->addBricks(5)->addGems(2)->addRecruits(1);]]></code>
    <created>2006-05-01</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="147">
    <name>Werewolf</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>8</recruits>
    </cost>
    <level>8</level>
    <keywords>Beast,Far sight</keywords>
    <effect><![CDATA[If matching card is Revealed<br />Wall: +12<br />else<br />Attack: 12]]></effect>
    <code><![CDATA[if (!$t->hiddenCards() || isset($t->hisData()->Revealed[$t->cardPos()])) { $t->myData()->addWall(12); } else { $t->hisData()->attack(12); }]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="148">
    <name>Two towers</name>
    <rarity>Rare</rarity>
    <level>0</level>
    <effect><![CDATA[Wall: +50<br />Enemy wall: +50]]></effect>
    <code><![CDATA[$t->myData()->addWall(50); $t->hisData()->addWall(50);]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="149">
    <name>Double wall</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>6</bricks>
    </cost>
    <level>0</level>
    <effect><![CDATA[Wall: +10]]></effect>
    <code><![CDATA[$t->myData()->addWall(10);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="150">
    <name>Conscript army</name>
    <rarity>Uncommon</rarity>
    <level>2</level>
    <effect><![CDATA[Attack: 12<br />Stock: -5<br />Replace matching card and up to two common cards in opponent's hand with Conscript]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(12);
    $t->myData()->addStock(-5);
    $t->setCard('his', $t->cardPos(), 97, ['reveal' => true]);
    $storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->hisData()->Hand[$i])->getRarity() == 'Common') {
        $storage[] = $i;
      }
    }
    $count = min(count($storage), 2);
    if ($count > 0) {
      shuffle($storage);
      for ($k = 0; $k < $count; $k++) {
        $i = $storage[$k];
        $t->setCard('his', $i, 97, ['reveal' => true]);
      }
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="151">
    <name>Trebuchet</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>6</bricks>
      <recruits>9</recruits>
    </cost>
    <level>0</level>
    <keywords>Durable,Siege</keywords>
    <effect><![CDATA[Enemy tower: -6]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-6);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="152">
    <name>Micramix</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>10</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Switches your hand with opponent's hand (shuffles both hands)]]></effect>
    <code><![CDATA[
    $t->setCard('my', $t->cardPos(), $t->drawCard($t->myDeck(), $t->myData()->Hand, $t->cardPos(), 'drawCardRandom'));
    $tmp = $t->myData()->Hand;
    $t->setHandShuffled('my', $t->hisData()->Hand);
    $t->setHandShuffled('his', $tmp);
    $t->noNextCard();
]]></code>
    <created>2006-05-01</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="153">
    <name>Acolyte</name>
    <rarity>Common</rarity>
    <cost>
      <gems>2</gems>
      <recruits>5</recruits>
    </cost>
    <level>1</level>
    <keywords>Mage</keywords>
    <effect><![CDATA[If Gems > Enemy gems<br />Attack: 10<br />else<br/>Gems: +7]]></effect>
    <code><![CDATA[
    if ($t->myData()->Gems > $t->hisData()->Gems) {
      $t->hisData()->attack(10);
    }
    else {
      $t->myData()->addGems(7);
    }
]]></code>
    <created>2007-03-26</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="154">
    <name>Dwarven fortification</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>32</bricks>
    </cost>
    <level>0</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Wall: +40<br />Summons non-common <b>Runic</b> (can't summon self)]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(40);
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Runic']);
    $uncommon = array_diff($uncommon, [$t->card()->id()]);
    $rare = $t->getList(['rarity'=>'Rare', 'keyword'=>'Runic']);
    $t->nextCard($t->drawCard(array_merge($uncommon, $rare), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-05-01</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="155">
    <name>Citadel</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>20</bricks>
    </cost>
    <level>8</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Tower: +18<br />Wall: +6]]></effect>
    <code><![CDATA[$t->myData()->addTower(18)->addWall(6);]]></code>
    <created>2006-05-01</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="156">
    <name>Magic barrier</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>15</bricks>
      <gems>10</gems>
    </cost>
    <level>0</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Tower: +#Bricks<br />Wall: +#Gems<br />Bricks: = 0<br />Gems: = 0]]></effect>
    <code><![CDATA[$t->myData()->addTower($t->myData()->Bricks)->addWall($t->myData()->Gems)->setBricks(0)->setGems(0);]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="157">
    <name>Volcano</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>32</gems>
    </cost>
    <level>5</level>
    <keywords>Nature</keywords>
    <effect><![CDATA[Enemy tower: -15<br />Enemy wall: -15<br />Enemy stock: -15]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-15)->addWall(-15)->addStock(-15);]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="158">
    <name>Flood</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>20</gems>
    </cost>
    <level>7</level>
    <keywords>Nature</keywords>
    <effect><![CDATA[Enemy wall: -N<br />N = 45 - #Enemy bricks<br />Enemy bricks: -45]]></effect>
    <code><![CDATA[
    $lowered = $t->hisData()->Bricks - max($t->hisData()->Bricks - 45, 0);
    $t->hisData()->addBricks(-$lowered)->addWall(-(45 - $lowered));
]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="159">
    <name>Scepter of summoning</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>15</gems>
    </cost>
    <level>4</level>
    <effect><![CDATA[Summons a rare card from your deck]]></effect>
    <code><![CDATA[$t->nextCard($t->drawCard($t->myDeck()->Rare, $t->myData()->Hand, $t->cardPos(), 'drawCardList'));]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="160">
    <name>Gnome thief</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>3</recruits>
    </cost>
    <level>0</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Steals 2 gems<br />Steals 1 recruit]]></effect>
    <code><![CDATA[$t->stealResource('my', 'Gems', 2); $t->stealResource('my', 'Recruits', 1);]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="161">
    <name>Damnation</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>60</gems>
    </cost>
    <level>0</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy tower: -20<br />Enemy wall: -20<br />Enemy facilities: -2<br />Enemy stock: -20]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-20)->addWall(-20)->addFacilities(-2)->addStock(-20);]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="162">
    <name>Apprentice</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>6</gems>
      <recruits>6</recruits>
    </cost>
    <level>0</level>
    <effect><![CDATA[Magic: +1]]></effect>
    <code><![CDATA[$t->myData()->addMagic(1);]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="163">
    <name>Architect</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
    </cost>
    <level>0</level>
    <effect><![CDATA[Quarry: +1]]></effect>
    <code><![CDATA[$t->myData()->addQuarry(1);]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="164">
    <name>Legendary smith</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>6</bricks>
      <recruits>6</recruits>
    </cost>
    <level>0</level>
    <effect><![CDATA[Dungeon: +1]]></effect>
    <code><![CDATA[$t->myData()->addDungeons(1);]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="165">
    <name>Preparations</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>6</bricks>
      <recruits>6</recruits>
    </cost>
    <level>2</level>
    <effect><![CDATA[If Dungeon < Enemy dungeon<br />Dungeon: +1<br />else<br />Recruits: +11]]></effect>
    <code><![CDATA[
    if ($t->myData()->Dungeons < $t->hisData()->Dungeons) {
      $t->myData()->addDungeons(1);
    }
    else {
      $t->myData()->addRecruits(11);
    }
]]></code>
    <created>2007-03-26</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="166">
    <name>Royal dragoons</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>40</recruits>
    </cost>
    <level>10</level>
    <keywords>Soldier,Charge (15)</keywords>
    <effect><![CDATA[Attack: 25 + 8N<br />N = #<b>Charge</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Charge');
    $t->hisData()->attack(25 + (8 * $tmp));
]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="167">
    <name>Dragon squadron</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>70</recruits>
    </cost>
    <level>0</level>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Attack: 200]]></effect>
    <code><![CDATA[$t->hisData()->attack(200);]]></code>
    <created>2006-05-01</created>
    <modified>2007-05-08</modified>
  </card>
  <card id="168">
    <name>Mirror strike</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>8</gems>
    </cost>
    <level>7</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Summons opponent's last card]]></effect>
    <code><![CDATA[
    if ($t->hisLastCard()->id() > 0) {
      $t->nextCard($t->hisLastCard()->id(), true);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="169">
    <name>Valhalla</name>
    <rarity>Rare</rarity>
    <level>0</level>
    <effect><![CDATA[Tower: -20<br />Wall: +70<br/>Won't lower tower below 1]]></effect>
    <code><![CDATA[$t->myData()->addTower(-20)->setTower(max(1, $t->myData()->Tower))->addWall(70);]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="170">
    <name>Miracle</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>8</level>
    <keywords>Holy</keywords>
    <effect><![CDATA[Player(s) with most <b>Holy</b> in hand gains<br />Stock: +8<br />His opponent gains<br />Stock: +2]]></effect>
    <code><![CDATA[
    $my_count = $t->keywordCount($t->myData()->Hand, 'Holy');
    $his_count = $t->keywordCount($t->hisData()->Hand, 'Holy');
    if ($my_count >= $his_count) {
      $t->myData()->addStock(8);
      $t->hisData()->addStock(2);
    }
    if ($my_count <= $his_count) {
      $t->myData()->addStock(2);
      $t->hisData()->addStock(8);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="171">
    <name>Master of the past</name>
    <rarity>Rare</rarity>
    <level>10</level>
    <keywords>Mage</keywords>
    <effect><![CDATA[Negates the negative effect of opponent's last round on your tower, wall, facilities and stock]]></effect>
    <code><![CDATA[
    $t->myData()
      ->addTower(-min(0, $t->myChange('Tower')))
      ->addWall(-min(0, $t->myChange('Wall')))
      ->addQuarry(-min(0, $t->myChange('Quarry')))
      ->addMagic(-min(0, $t->myChange('Magic')))
      ->addDungeons(-min(0, $t->myChange('Dungeons')))
      ->addBricks(-min(0, $t->myChange('Bricks')))
      ->addGems(-min(0, $t->myChange('Gems')))
      ->addRecruits(-min(0, $t->myChange('Recruits')));
]]></code>
    <created>2006-05-01</created>
    <modified>2013-03-31</modified>
  </card>
  <card id="172">
    <name>Knight of time</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>9</gems>
      <recruits>9</recruits>
    </cost>
    <level>2</level>
    <keywords>Mage,Swift</keywords>
    <effect><![CDATA[Attack: 14]]></effect>
    <code><![CDATA[$t->hisData()->attack(14);]]></code>
    <created>2006-05-01</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="173">
    <name>Lord of time</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>23</gems>
      <recruits>12</recruits>
    </cost>
    <level>4</level>
    <keywords>Mage,Swift,Rebirth</keywords>
    <effect><![CDATA[Attack: 20<br /><b>Mage</b> tokens = 0]]></effect>
    <code><![CDATA[$t->hisData()->attack(20); $t->myData()->setToken('Mage', 0);]]></code>
    <created>2006-05-01</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="174">
    <name>Time warp</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>11</gems>
    </cost>
    <level>0</level>
    <keywords>Swift</keywords>
    <effect><![CDATA[Production x2]]></effect>
    <code><![CDATA[$t->production()->multiply(2);]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="175">
    <name>Cathedral</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>27</bricks>
    </cost>
    <level>0</level>
    <keywords>Holy</keywords>
    <effect><![CDATA[Tower: +13<br />Stock: +7]]></effect>
    <code><![CDATA[$t->myData()->addTower(13)->addStock(7);]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="176">
    <name>Chapel</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
    </cost>
    <level>0</level>
    <keywords>Holy</keywords>
    <effect><![CDATA[Tower: +3<br />Stock: +1]]></effect>
    <code><![CDATA[$t->myData()->addTower(3)->addStock(1);]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="177">
    <name>Prayer</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>6</level>
    <effect><![CDATA[Gain 1 random resource for each <b>Holy</b> in hand (max 5)<br />Summons <b>Holy</b>]]></effect>
    <code><![CDATA[
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Holy']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    $resources = min($t->keywordCount($t->myData()->Hand, 'Holy'),5);
    $t->myData()->addRandomResources($resources);
]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="178">
    <name>Army of darkness</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>13</gems>
    </cost>
    <level>8</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: N * M<br />Recruits: = 0<br />N = #Recruits<br />M = #<b>Undead</b> rare cards in hand / 2]]></effect>
    <code><![CDATA[
    $rares = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->myData()->Hand[$i]);
      if ($cur_card->hasKeyword('Undead') && $cur_card->getRarity() == 'Rare') {
        $rares++;
      }
    }
    $t->hisData()->attack($t->myData()->Recruits * round($rares / 2));
    $t->myData()->setRecruits(0);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="179">
    <name>Redesign</name>
    <rarity>Rare</rarity>
    <level>9</level>
    <effect><![CDATA[Tower: +Wall / 2<br />Enemy tower: +Enemy wall / 2<br />Both walls are halved]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(round($t->myData()->Wall / 2))->addWall(-round($t->myData()->Wall / 2));
    $t->hisData()->addTower(round($t->hisData()->Wall / 2))->addWall(-round($t->hisData()->Wall / 2));
]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="180">
    <name>Mercenaries</name>
    <rarity>Uncommon</rarity>
    <level>1</level>
    <effect><![CDATA[Production x0<br />Attack: 9 + 9N<br />N = #Facilities that were lowered to 1]]></effect>
    <code><![CDATA[
    $t->production()->multiply(0);
    $tmp = 0;
    if ($t->myData()->Quarry == 1) {
      $tmp++;
    }
    if ($t->myData()->Magic == 1) {
      $tmp++;
    }
    if ($t->myData()->Dungeons == 1) {
      $tmp++;
    }
    $t->hisData()->attack(9 + 9 * $tmp);
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="181">
    <name>Genie</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>30</gems>
      <recruits>10</recruits>
    </cost>
    <level>0</level>
    <effect><![CDATA[Attack: 35<br />Steals 5 stock]]></effect>
    <code><![CDATA[$t->hisData()->attack(35); $t->stealStock('my', 5);]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="182">
    <name>Efreet</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>35</gems>
      <recruits>15</recruits>
    </cost>
    <level>2</level>
    <keywords>Burning</keywords>
    <effect><![CDATA[Enemy stock: -20<br />Opponent suffers 1 damage for each resource lost]]></effect>
    <code><![CDATA[
    $res = ['Bricks', 'Gems', 'Recruits']; $dmg = 0;
    foreach ($res as $resource) {
      $lowered = $t->hisData()->$resource - max($t->hisData()->$resource - 20, 0);
      $t->hisData()->$resource-= $lowered; $dmg+= $lowered;
    }
    $t->hisData()->attack($dmg);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="183">
    <name>Magic lamp</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <level>9</level>
    <effect><![CDATA[If New<br />Summons [card=181/] or [card=182/]<br />else<br />Gain 18 random resources]]></effect>
    <code><![CDATA[
    if ($t->isMyNew($t->cardPos())) {
      $t->nextCard($t->drawCard([181, 182], $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    }
    else {
      $t->myData()->addRandomResources(18);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="184">
    <name>Lost city</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>10</bricks>
      <gems>5</gems>
    </cost>
    <level>4</level>
    <effect><![CDATA[Tower: +5<br />Stock: +4<br />Summons [card=181/], [card=520/], [card=182/] or [card=159/]]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(5)->addStock(4);
    $t->nextCard($t->drawCard([181, 520, 182, 159], $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="185">
    <name>Magic well</name>
    <rarity>Common</rarity>
    <cost>
      <gems>6</gems>
      <recruits>6</recruits>
    </cost>
    <level>4</level>
    <effect><![CDATA[If Magic < Enemy magic<br />Magic: +1<br />else<br />Gems: +11]]></effect>
    <code><![CDATA[
    if ($t->myData()->Magic < $t->hisData()->Magic) {
      $t->myData()->addMagic(1);
    }
    else {
      $t->myData()->addGems(11);
    }
]]></code>
    <created>2007-03-26</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="186">
    <name>Ent</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>14</gems>
      <recruits>7</recruits>
    </cost>
    <level>2</level>
    <keywords>Alliance,Nature</keywords>
    <effect><![CDATA[Enemy wall: -40]]></effect>
    <code><![CDATA[$t->hisData()->addWall(-40);]]></code>
    <created>2006-05-01</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="187">
    <name>Mithril mine</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
    </cost>
    <level>5</level>
    <effect><![CDATA[If Quarry < Enemy quarry<br />Quarry: +1<br />else<br />Bricks: +11]]></effect>
    <code><![CDATA[
    if ($t->myData()->Quarry < $t->hisData()->Quarry) {
      $t->myData()->addQuarry(1);
    }
    else {
      $t->myData()->addBricks(11);
    }
]]></code>
    <created>2007-03-26</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="188">
    <name>Crenellation</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
    </cost>
    <level>3</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Wall: +5<br />Enemy recruits: -1]]></effect>
    <code><![CDATA[$t->myData()->addWall(5); $t->hisData()->addRecruits(-1);]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="189">
    <name>Foundry</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <level>0</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Tower: +5<br />Recruits prod x3]]></effect>
    <code><![CDATA[$t->myData()->addTower(5); $t->production()->multiplyRecruits(3);]]></code>
    <created>2006-05-01</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="190">
    <name>Elven ranger</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>11</recruits>
    </cost>
    <level>5</level>
    <keywords>Alliance,Far sight,Skirmisher</keywords>
    <effect><![CDATA[Attack: 11<br />Gems prod x2]]></effect>
    <code><![CDATA[$t->hisData()->attack(11); $t->production()->multiplyGems(2);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="191">
    <name>Ivory tower</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>16</bricks>
    </cost>
    <level>0</level>
    <effect><![CDATA[Tower: +20]]></effect>
    <code><![CDATA[$t->myData()->addTower(20);]]></code>
    <created>2006-05-01</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="192">
    <name>Fortified castle</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>40</bricks>
    </cost>
    <level>0</level>
    <effect><![CDATA[Tower: +45<br />Wall: +25]]></effect>
    <code><![CDATA[$t->myData()->addTower(45)->addWall(25);]]></code>
    <created>2006-05-01</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="193">
    <name>Royal pikemen</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>18</recruits>
    </cost>
    <level>3</level>
    <keywords>Soldier,Skirmisher</keywords>
    <effect><![CDATA[Attack: 10<br />Wall: +10<br />Recruits: +4]]></effect>
    <code><![CDATA[$t->hisData()->attack(10); $t->myData()->addWall(10)->addRecruits(4);]]></code>
    <created>2006-05-01</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="194">
    <name>Draft</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Summons a <b>Soldier</b><br />If <b>Soldier</b> tokens are set gain recruits cost of the summoned card (max 6)]]></effect>
    <code><![CDATA[
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Soldier']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    if ($t->myData()->findToken('Soldier')) {
      $t->myData()->addRecruits(min($t->getCard($t->nextCard())->getResources('Recruits'), 6));
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="195">
    <name>Fairy dragon</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>15</gems>
    </cost>
    <level>5</level>
    <keywords>Dragon,Quick</keywords>
    <effect><![CDATA[Moves all <b>Dragon</b> cards from opponent's hand to your hand (to matching positions)<br />If there are none<br />Stock: +6]]></effect>
    <code><![CDATA[
    if ($t->keywordCount($t->hisData()->Hand, 'Dragon') == 0) {
      $t->myData()->addStock(6);
    }
    else {
      for ($i = 1; $i <= $t->handSize(); $i++) {
        if ($t->getCard($t->hisData()->Hand[$i])->hasKeyword('Dragon')) {
          $t->setCard('my', $i, $t->hisData()->Hand[$i], ['reveal' => true]);
          $t->setCard('his', $i, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $i, 'drawCardDifferent'));
          if ($t->cardPos() == $i) {
            $t->noNextCard();
          }
        }
      }
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="196">
    <name>Monastery</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <level>10</level>
    <keywords>Holy</keywords>
    <effect><![CDATA[Tower: +12<br />Summons non-common <b>Holy</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(12);
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Holy']);
    $rare = $t->getList(['rarity'=>'Rare', 'keyword'=>'Holy']);
    $t->nextCard($t->drawCard(array_merge($uncommon, $rare), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2006-05-01</created>
    <modified>2010-10-03</modified>
  </card>
  <card id="197">
    <name>Pit fiend</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>12</gems>
      <recruits>13</recruits>
    </cost>
    <level>0</level>
    <keywords>Demonic,Far sight,Charge (10)</keywords>
    <effect><![CDATA[Attack: 20<br />Enemy quarry: -1]]></effect>
    <code><![CDATA[$t->hisData()->attack(20)->addQuarry(-1);]]></code>
    <created>2006-05-01</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="198">
    <name>Demolition troop</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>19</gems>
      <recruits>19</recruits>
    </cost>
    <level>4</level>
    <effect><![CDATA[Enemy wall: -60<br />If Enemy wall = 0<br />Enemy facilities: -1]]></effect>
    <code><![CDATA[
    $t->hisData()->addWall(-60);
    if ($t->hisData()->Wall <= 0) {
      $t->hisData()->addFacilities(-1);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="199">
    <name>Duplication</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>35</gems>
    </cost>
    <level>0</level>
    <keywords>Illusion,Swift</keywords>
    <effect><![CDATA[Stock x2]]></effect>
    <code><![CDATA[$t->myData()->setBricks($t->myData()->Bricks * 2)->setGems($t->myData()->Gems * 2)->setRecruits($t->myData()->Recruits * 2);]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="200">
    <name>Inspiration</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>5</bricks>
    </cost>
    <level>3</level>
    <effect><![CDATA[Tower: +20<br />Enemy tower: +30]]></effect>
    <code><![CDATA[$t->myData()->addTower(20); $t->hisData()->addTower(30);]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="201">
    <name>Ballistae</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>15</bricks>
      <recruits>15</recruits>
    </cost>
    <level>0</level>
    <keywords>Siege</keywords>
    <effect><![CDATA[Wall: +30<br />If #<b>Siege</b> in hand > 1<br />Enemy tower: -10]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(30);
    if ($t->keywordCount($t->myData()->Hand, 'Siege') > 1) {
      $t->hisData()->addTower(-10);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="202">
    <name>Roc</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>15</recruits>
    </cost>
    <level>6</level>
    <keywords>Beast,Horde,Aria</keywords>
    <effect><![CDATA[Attack: 17<br />Steals 5 bricks]]></effect>
    <code><![CDATA[$t->hisData()->attack(17); $t->stealResource('my', 'Bricks', 5);]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="203">
    <name>Crypt</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>17</bricks>
    </cost>
    <level>10</level>
    <effect><![CDATA[Summons non-common <b>Undead</b><br />If <b>Undead</b> tokens > 50<br />Gain cost of the summoned card (max 10)]]></effect>
    <code><![CDATA[
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Undead']);
    $rare = $t->getList(['rarity'=>'Rare', 'keyword'=>'Undead']);
    $t->nextCard($t->drawCard(array_merge($uncommon, $rare), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    if ($t->myData()->getToken('Undead') > 50) {
      $cur_card = $t->getCard($t->nextCard());
      $t->myData()
        ->addBricks(min($cur_card->getResources('Bricks'), 10))
        ->addGems(min($cur_card->getResources('Gems'), 10))
        ->addRecruits(min($cur_card->getResources('Recruits'), 10));
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="204">
    <name>Air elemental</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>10</gems>
    </cost>
    <level>0</level>
    <keywords>Unliving,Aria</keywords>
    <effect><![CDATA[Enemy tower: -9]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-9);]]></code>
    <created>2006-05-01</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="205">
    <name>Danai present</name>
    <rarity>Rare</rarity>
    <level>6</level>
    <effect><![CDATA[Enemy stock: +10<br />Replace opponent's hand with non-rare zero cost cards]]></effect>
    <code><![CDATA[
    $t->hisData()->addStock(10);
    $common = $t->getList(['rarity'=>'Common', 'cost'=>'Zero']);
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'cost'=>'Zero']);
    $t->setHand('his', $t->drawHandList(array_merge($common, $uncommon)));
]]></code>
    <created>2006-05-01</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="206">
    <name>Drought</name>
    <rarity>Common</rarity>
    <level>5</level>
    <effect><![CDATA[Stock: -8<br />Enemy stock: -8]]></effect>
    <code><![CDATA[$t->myData()->addStock(-8); $t->hisData()->addStock(-8);]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="207">
    <name>Shapeshifter</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>7</gems>
    </cost>
    <modes>8</modes>
    <level>8</level>
    <effect><![CDATA[Evoke a card from opponent's hand]]></effect>
    <code><![CDATA[$t->nextCard($t->hisData()->Hand[$t->mode()], true);]]></code>
    <created>2007-03-26</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="208">
    <name>Overseer</name>
    <rarity>Uncommon</rarity>
    <level>0</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Wall: +30<br />Quarry: -1]]></effect>
    <code><![CDATA[$t->myData()->addWall(30)->addQuarry(-1);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="209">
    <name>Overlord</name>
    <rarity>Rare</rarity>
    <modes>2</modes>
    <level>4</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Wall: +70<br />Mode1:<br />Quarry: -1<br />Mode2:<br />Dungeon: -1]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(70);
    if ($t->mode() == 1) {
      $t->myData()->addQuarry(-1);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addDungeons(-1);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="210">
    <name>Rescue and resistance</name>
    <rarity>Uncommon</rarity>
    <level>6</level>
    <effect><![CDATA[If Enemy tower < Tower<br />Tower: -10<br />Enemy tower: -10<br />else<br />Tower: +10<br />Enemy tower: +10]]></effect>
    <code><![CDATA[
    $amount = ($t->hisData()->Tower < $t->myData()->Tower) ? -10 : 10;
    $t->myData()->addTower($amount); $t->hisData()->addTower($amount);
]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="211">
    <name>Hectic offensive</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>0</level>
    <effect><![CDATA[If Enemy wall - Wall > 10<br />Attack: 25<br />else<br />Attack: 15]]></effect>
    <code><![CDATA[
    if (($t->hisData()->Wall - $t->myData()->Wall) > 10) {
      $t->hisData()->attack(25);
    }
    else {
      $t->hisData()->attack(15);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="212">
    <name>Rogue</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <level>5</level>
    <keywords>Brigand,Far sight</keywords>
    <effect><![CDATA[Attack: 2<br />Enemy recruits: -1<br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(2)->addRecruits(-1);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
    else {
      $t->replaceCard('my', $t->mode(), $t->card()->id());
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="213">
    <name>Kidnapping</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>6</gems>
      <recruits>7</recruits>
    </cost>
    <level>4</level>
    <effect><![CDATA[Quarry: +1<br />If Enemy quarry > 3<br />Enemy quarry: -1]]></effect>
    <code><![CDATA[$t->myData()->addQuarry(1); if ($t->hisData()->Quarry > 3) { $t->hisData()->addQuarry(-1); }]]></code>
    <created>2006-05-01</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="214">
    <name>Elder shrine</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>9</bricks>
      <recruits>8</recruits>
    </cost>
    <level>3</level>
    <effect><![CDATA[Magic: +1<br />If Enemy magic > 3<br />Enemy magic: -1]]></effect>
    <code><![CDATA[$t->myData()->addMagic(1); if ($t->hisData()->Magic > 3) { $t->hisData()->addMagic(-1); }]]></code>
    <created>2006-05-01</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="215">
    <name>Harpist</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>9</bricks>
      <gems>8</gems>
    </cost>
    <level>3</level>
    <effect><![CDATA[Dungeon: +1<br />If Enemy dungeon > 3<br />Enemy dungeon: -1]]></effect>
    <code><![CDATA[$t->myData()->addDungeons(1); if ($t->hisData()->Dungeons > 3) { $t->hisData()->addDungeons(-1); }]]></code>
    <created>2006-05-01</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="216">
    <name>Salvation</name>
    <rarity>Uncommon</rarity>
    <level>0</level>
    <keywords>Quick</keywords>
    <effect><![CDATA[If Tower < 15<br />Tower: +15<br />else<br />Tower: +3]]></effect>
    <code><![CDATA[if ($t->myData()->Tower < 15) { $t->myData()->addTower(15); } else { $t->myData()->addTower(3); }]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="217">
    <name>Auxilia</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <level>9</level>
    <effect><![CDATA[Wall: +2<br />Production x0<br />Discard your hand except the selected card]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(2);
    $t->production()->multiply(0);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->mode() && $i != $t->cardPos()) {
        $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardRandom'));
      }
    }
]]></code>
    <created>2007-03-26</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="218">
    <name>Mana burn</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>20</gems>
    </cost>
    <level>8</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy tower: -N/2<br />Enemy wall: -N<br />Enemy gems: -N<br />N = #Enemy gems (max 30)]]></effect>
    <code><![CDATA[$tmp = min($t->hisData()->Gems, 30); $t->hisData()->addTower(-round($tmp / 2))->addWall(-$tmp)->addGems(-$tmp);]]></code>
    <created>2006-11-14</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="219">
    <name>Rock biter</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>12</bricks>
      <recruits>8</recruits>
    </cost>
    <modes>2</modes>
    <level>5</level>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Mode1:<br />Attack: 16<br />Mode2:<br />Wall: +13<br />Enemy wall: -13]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->hisData()->attack(16);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addWall(13);
      $t->hisData()->addWall(-13);
    }
]]></code>
    <created>2007-03-26</created>
    <modified>2014-04-21</modified>
  </card>
  <card id="220">
    <name>Enforcer</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>15</recruits>
    </cost>
    <modes>2</modes>
    <level>4</level>
    <effect><![CDATA[Attack: 26<br />Mode1:<br />Stock: -2<br />Mode2:<br />Tower: -5<br />Wall: -5]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(26);
    if ($t->mode() == 1) {
      $t->myData()->addStock(-2);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addTower(-5)->addWall(-5);
    }
]]></code>
    <created>2007-03-26</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="221">
    <name>Implosion</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>35</gems>
      <recruits>25</recruits>
    </cost>
    <level>8</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy tower: -N<br />Enemy wall: -N<br />N = 7#Enemy quarry + #Enemy bricks]]></effect>
    <code><![CDATA[
    $tmp = ($t->hisData()->Quarry * 7) + $t->hisData()->Bricks;
    $t->hisData()->addTower(-$tmp)->addWall(-$tmp);
]]></code>
    <created>2007-03-26</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="222">
    <name>Water elemental</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>19</gems>
    </cost>
    <level>3</level>
    <keywords>Aqua,Unliving</keywords>
    <effect><![CDATA[If #Facilities > #Enemy facilities<br />Enemy wall = 0<br />Always:<br />Attack: #Stock - #Enemy stock]]></effect>
    <code><![CDATA[
    $tmp = max(0, $t->myData()->Quarry + $t->myData()->Magic + $t->myData()->Dungeons
      - $t->hisData()->Quarry - $t->hisData()->Magic - $t->hisData()->Dungeons);
    if ($tmp > 0) {
      $t->hisData()->setWall(0);
    }
    $tmp = max(0, $t->myData()->Bricks + $t->myData()->Gems + $t->myData()->Recruits
      - $t->hisData()->Bricks - $t->hisData()->Gems - $t->hisData()->Recruits);
    $t->hisData()->attack($tmp);
]]></code>
    <created>2007-03-26</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="223">
    <name>Phoenix</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>31</gems>
      <recruits>22</recruits>
    </cost>
    <level>10</level>
    <keywords>Burning,Rebirth,Flare blitz</keywords>
    <effect><![CDATA[Attack: 10N<br />N = #<b>Burning</b> in game]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Burning') + $t->keywordCount($t->hisData()->Hand, 'Burning');
    $t->hisData()->attack(10 * $tmp);
]]></code>
    <created>2007-05-08</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="224">
    <name>Tidal wave</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>17</gems>
    </cost>
    <level>7</level>
    <effect><![CDATA[Player(s) with lowest wall suffers<br />Quarry: -1<br />Dungeon: -1]]></effect>
    <code><![CDATA[
    if ($t->myData()->Wall <= $t->hisData()->Wall) {
      $t->myData()->addQuarry(-1)->addDungeons(-1);
    }
    if ($t->hisData()->Wall <= $t->myData()->Wall) {
      $t->hisData()->addQuarry(-1)->addDungeons(-1);
    }
]]></code>
    <created>2007-05-08</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="225">
    <name>Cultists</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>9</level>
    <effect><![CDATA[If Dungeon < Enemy dungeon<br />Enemy dungeon: -2<br />else<br />Dungeon: = 4]]></effect>
    <code><![CDATA[
    if ($t->myData()->Dungeons < $t->hisData()->Dungeons) {
      $t->hisData()->addDungeons(-2);
    }
    else {
      $t->myData()->setDungeons(4);
    }
]]></code>
    <created>2007-05-08</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="226">
    <name>Soul cleaver</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>10</gems>
    </cost>
    <level>6</level>
    <effect><![CDATA[If Magic < Enemy magic<br />Enemy magic: -2<br />else<br />Magic: = 4]]></effect>
    <code><![CDATA[
    if ($t->myData()->Magic < $t->hisData()->Magic) {
      $t->hisData()->addMagic(-2);
    }
    else {
      $t->myData()->setMagic(4);
    }
]]></code>
    <created>2007-05-08</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="227">
    <name>Earth elemental</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>15</bricks>
    </cost>
    <level>9</level>
    <keywords>Unliving</keywords>
    <effect><![CDATA[If Quarry < Enemy quarry<br />Enemy quarry: -2<br />else<br />Quarry: = 4]]></effect>
    <code><![CDATA[
    if ($t->myData()->Quarry < $t->hisData()->Quarry) {
      $t->hisData()->addQuarry(-2);
    }
    else {
      $t->myData()->setQuarry(4);
    }
]]></code>
    <created>2007-05-08</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="228">
    <name>Ancient castle</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>46</bricks>
    </cost>
    <level>9</level>
    <keywords>Runic,Cursed</keywords>
    <effect><![CDATA[Tower: +35<br/>Stock: +10]]></effect>
    <code><![CDATA[$t->myData()->addTower(35)->addStock(10);]]></code>
    <created>2007-05-08</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="229">
    <name>Apocalyptic rain</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>34</gems>
    </cost>
    <level>3</level>
    <keywords>Destruction,Nature</keywords>
    <effect><![CDATA[Attack: N * M / 3<br />N = #Bricks<br />M = #Magic<br />Bricks: = 0]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(round(($t->myData()->Bricks * $t->myData()->Magic) / 3));
    $t->myData()->setBricks(0);
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="230">
    <name>Locust swarm</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>16</recruits>
    </cost>
    <level>0</level>
    <effect><![CDATA[If Enemy wall < 5<br />Attack: 35<br />else<br />Attack: 11]]></effect>
    <code><![CDATA[
    if ($t->hisData()->Wall < 5) {
      $t->hisData()->attack(35);
    }
    else {
      $t->hisData()->attack(11);
    }
]]></code>
    <created>2007-05-08</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="231">
    <name>Blind guardian</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>4</bricks>
      <gems>4</gems>
      <recruits>4</recruits>
    </cost>
    <level>4</level>
    <effect><![CDATA[Tower: +12]]></effect>
    <code><![CDATA[$t->myData()->addTower(12);]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="232">
    <name>Governour</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>20</recruits>
    </cost>
    <level>0</level>
    <effect><![CDATA[Attack: 20<br />Tower: +10<br />Wall: +10<br />Production x2]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(20);
    $t->myData()->addTower(10)->addWall(10);
    $t->production()->multiply(2);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="233">
    <name>Magic academy</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>15</bricks>
      <gems>15</gems>
    </cost>
    <level>0</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Tower: +15<br />Magic: +1]]></effect>
    <code><![CDATA[$t->myData()->addTower(15)->addMagic(1);]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="234">
    <name>Manufactory</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>15</bricks>
      <recruits>15</recruits>
    </cost>
    <level>3</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Tower: +15<br />Dungeon: +1]]></effect>
    <code><![CDATA[$t->myData()->addTower(15)->addDungeons(1);]]></code>
    <created>2006-05-01</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="235">
    <name>Architect academy</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>30</bricks>
    </cost>
    <level>0</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Tower: +15<br />Quarry: +1]]></effect>
    <code><![CDATA[$t->myData()->addTower(15)->addQuarry(1);]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="236">
    <name>Centaur tribe</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <modes>2</modes>
    <level>0</level>
    <keywords>Beast,Horde</keywords>
    <effect><![CDATA[Attack: 12<br />Mode1:<br />Tower: -2<br />Mode2:<br />Wall: -4]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(12);
    if ($t->mode() == 1) {
      $t->myData()->addTower(-2);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addWall(-4);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="237">
    <name>Guard post</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
    </cost>
    <level>2</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Tower: +3<br />Recruits: +1]]></effect>
    <code><![CDATA[$t->myData()->addTower(3)->addRecruits(1);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="238">
    <name>Fortified wall</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>4</bricks>
    </cost>
    <level>0</level>
    <effect><![CDATA[Wall: +8]]></effect>
    <code><![CDATA[$t->myData()->addWall(8);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="239">
    <name>Golden dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>35</gems>
      <recruits>35</recruits>
    </cost>
    <level>6</level>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Attack: 110]]></effect>
    <code><![CDATA[$t->hisData()->attack(110);]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="240">
    <name>Orc grunt</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <level>0</level>
    <keywords>Horde,Frenzy</keywords>
    <effect><![CDATA[Attack: 8]]></effect>
    <code><![CDATA[$t->hisData()->attack(8);]]></code>
    <created>2006-05-01</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="241">
    <name>Blizzard</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>32</gems>
    </cost>
    <level>3</level>
    <keywords>Nature,Aria</keywords>
    <effect><![CDATA[Enemy stock: -20]]></effect>
    <code><![CDATA[$t->hisData()->addStock(-20);]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="242">
    <name>Tornado</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>37</gems>
    </cost>
    <level>0</level>
    <keywords>Nature</keywords>
    <effect><![CDATA[Enemy stock: = 0]]></effect>
    <code><![CDATA[$t->hisData()->setStock(0);]]></code>
    <created>2006-05-01</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="243">
    <name>Thieves with honor</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>7</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Enemy tower: -6<br />Enemy stock: +2]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-6)->addStock(2);]]></code>
    <created>2006-05-01</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="244">
    <name>Assassins</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>7</recruits>
    </cost>
    <level>3</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Enemy tower: -5<br />Enemy stock: -2]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-5)->addStock(-2);]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="245">
    <name>Sabotage tunnel</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>35</bricks>
    </cost>
    <level>7</level>
    <effect><![CDATA[Enemy tower: -20<br />Enemy bricks: -10<br />Enemy recruits: -10]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-20)->addBricks(-10)->addRecruits(-10);]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="246">
    <name>Siege golem</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>24</bricks>
    </cost>
    <level>7</level>
    <keywords>Unliving,Durable,Siege</keywords>
    <effect><![CDATA[Enemy tower: -10<br />Enemy wall: -10]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-10)->addWall(-10);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="247">
    <name>Wind</name>
    <rarity>Common</rarity>
    <level>0</level>
    <keywords>Aria</keywords>
    <effect><![CDATA[Enemy wall: -1<br />Enemy stock: -1]]></effect>
    <code><![CDATA[$t->hisData()->addWall(-1)->addStock(-1);]]></code>
    <created>2006-05-01</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="248">
    <name>Searing fire</name>
    <rarity>Common</rarity>
    <level>8</level>
    <keywords>Burning,Cursed,Forbidden</keywords>
    <effect><![CDATA[Tower: -1<br />Wall: +5<br />Bricks prod x0]]></effect>
    <code><![CDATA[$t->myData()->addTower(-1)->addWall(5); $t->production()->multiplyBricks(0);]]></code>
    <created>2007-05-08</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="249">
    <name>Wall shift</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>10</gems>
    </cost>
    <level>0</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Switches wall with enemy wall]]></effect>
    <code><![CDATA[$tmp = $t->myData()->Wall; $t->myData()->setWall($t->hisData()->Wall); $t->hisData()->setWall($tmp);]]></code>
    <created>2006-11-14</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="250">
    <name>Dragon whelp</name>
    <rarity>Common</rarity>
    <cost>
      <gems>3</gems>
    </cost>
    <level>0</level>
    <keywords>Burning,Dragon</keywords>
    <effect><![CDATA[Attack: 5]]></effect>
    <code><![CDATA[$t->hisData()->attack(5);]]></code>
    <created>2007-05-08</created>
    <modified>2007-05-08</modified>
  </card>
  <card id="251">
    <name>Tribute</name>
    <rarity>Common</rarity>
    <level>8</level>
    <effect><![CDATA[Players discard up to 3 non-rare cards (can't draw rare cards)]]></effect>
    <code><![CDATA[
    $my_storage = $his_storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->myData()->Hand[$i])->getRarity() != 'Rare') {
        $my_storage[] = $i;
      }
      if ($t->getCard($t->hisData()->Hand[$i])->getRarity() != 'Rare') {
        $his_storage[] = $i;
      }
    }
    $my_count = min(count($my_storage), 3);
    if ($my_count > 0) {
      shuffle($my_storage);
      for ($k = 0; $k < $my_count; $k++) {
        $i = $my_storage[$k];
        $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardNoRare'));
      }
    }
    $his_count = min(count($his_storage), 3);
    if ($his_count > 0) {
      shuffle($his_storage);
      for ($k = 0; $k < $his_count; $k++) {
        $i = $his_storage[$k];
        $t->setCard('his', $i, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $i, 'drawCardNoRare'));
      }
    }
]]></code>
    <created>2007-05-08</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="252">
    <name>Black market</name>
    <rarity>Common</rarity>
    <modes>8</modes>
    <level>9</level>
    <effect><![CDATA[Production x0<br />Switches selected non-rare card with its matching non-rare card (can't target self)]]></effect>
    <code><![CDATA[
    $t->production()->multiply(0);
    if ($t->mode() != $t->cardPos() && $t->getCard($t->myData()->Hand[$t->mode()])->getRarity() != 'Rare'
      && $t->getCard($t->hisData()->Hand[$t->mode()])->getRarity() != 'Rare') {
      $tmp = $t->myData()->Hand[$t->mode()];
      $t->setCard('my', $t->mode(), $t->hisData()->Hand[$t->mode()], ['reveal' => true]);
      $t->setCard('his', $t->mode(), $tmp, ['reveal' => true]);
    }
]]></code>
    <created>2007-05-08</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="253">
    <name>Necropolis</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>30</bricks>
    </cost>
    <level>10</level>
    <effect><![CDATA[Tower: +10<br />Gems: +10<br />Replace your hand with 4 common, 3 uncommon and 1 rare <b>Undead</b> cards]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(10)->addGems(10);
    $trans = ['Common', 'Common', 'Common', 'Common', 'Uncommon', 'Uncommon', 'Uncommon', 'Rare'];
    shuffle($trans);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $t->setCard('my', $i, $t->drawCard($t->getList(['rarity'=>$trans[$i-1], 'keyword'=>'Undead']), $t->myData()->Hand, $i, 'drawCardList'));
    }
    $t->noNextCard();
]]></code>
    <created>2006-11-14</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="254">
    <name>Lava spectre</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>13</gems>
    </cost>
    <level>9</level>
    <keywords>Burning</keywords>
    <effect><![CDATA[Attack: 10<br />If #<b>Burning</b> in hand > 3<br />Magic: +1]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(10);
    if ($t->keywordCount($t->myData()->Hand, 'Burning') > 3) {
      $t->myData()->addMagic(1);
    }
]]></code>
    <created>2007-05-08</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="255">
    <name>Evolution</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>8</level>
    <keywords>Quick</keywords>
    <effect><![CDATA[Discard opponent's hand (can't draw rare cards)<br />If not New<br />Discard your hand]]></effect>
    <code><![CDATA[
    $t->setHand('his', $t->drawHandNoRare($t->hisDeck()));
    if (!$t->isMyNew($t->cardPos())) {
      $t->setHand('my', $t->drawHandRandom($t->myDeck()));
      $t->noNextCard();
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="256">
    <name>Bronze golem</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>4</bricks>
    </cost>
    <level>0</level>
    <keywords>Unliving,Banish</keywords>
    <effect><![CDATA[Enemy wall: -6]]></effect>
    <code><![CDATA[$t->hisData()->addWall(-6);]]></code>
    <created>2007-08-19</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="257">
    <name>Will o' wisp</name>
    <rarity>Common</rarity>
    <level>3</level>
    <keywords>Undead,Aria</keywords>
    <effect><![CDATA[Attack: N<br />N = #non-common cards in opponent's hand]]></effect>
    <code><![CDATA[
    $noncommon =  0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->hisData()->Hand[$i])->getRarity() != 'Common') {
        $noncommon++;
      }
    }
    $t->hisData()->attack($noncommon);
]]></code>
    <created>2007-08-19</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="258">
    <name>Giant bear</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>4</recruits>
    </cost>
    <level>4</level>
    <keywords>Beast,Runic</keywords>
    <effect><![CDATA[Attack: 4<br />Recruits: +3]]></effect>
    <code><![CDATA[$t->hisData()->attack(4); $t->myData()->addRecruits(3);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="259">
    <name>Dire wolves</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>9</recruits>
    </cost>
    <level>0</level>
    <keywords>Beast,Horde</keywords>
    <effect><![CDATA[Attack: 9<br />Recruits prod x2]]></effect>
    <code><![CDATA[$t->hisData()->attack(9); $t->production()->multiplyRecruits(2);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="260">
    <name>Burglar</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>8</recruits>
    </cost>
    <level>0</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Attack: 2<br />Steals 2 stock]]></effect>
    <code><![CDATA[$t->hisData()->attack(2); $t->stealStock('my', 2);]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="261">
    <name>Absorption</name>
    <rarity>Common</rarity>
    <cost>
      <gems>4</gems>
    </cost>
    <level>0</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Steals 4 recruits]]></effect>
    <code><![CDATA[$t->stealResource('my', 'Recruits', 4);]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="262">
    <name>Magical forge</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <level>4</level>
    <effect><![CDATA[Wall: +7]]></effect>
    <code><![CDATA[$t->myData()->addWall(7);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="263">
    <name>Saints day</name>
    <rarity>Common</rarity>
    <level>5</level>
    <effect><![CDATA[Stock: +4<br />Production x0]]></effect>
    <code><![CDATA[$t->myData()->addStock(4); $t->production()->multiply(0);]]></code>
    <created>2006-05-01</created>
    <modified>2007-09-26</modified>
  </card>
  <card id="264">
    <name>Second chance</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <level>1</level>
    <effect><![CDATA[Discard all cards in hand]]></effect>
    <code><![CDATA[$t->setHand('my', $t->drawHandRandom($t->myDeck())); $t->noNextCard();]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="265">
    <name>Residence of Gods</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>50</bricks>
      <gems>50</gems>
      <recruits>50</recruits>
    </cost>
    <level>9</level>
    <effect><![CDATA[Instant resource accumulation victory]]></effect>
    <code><![CDATA[$t->myData()->setStock(ceil($t->config('res_victory') / 3));]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="266">
    <name>Defense improvement</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <modes>2</modes>
    <level>0</level>
    <effect><![CDATA[Mode1:<br />Wall: +20<br />Mode2:<br />Tower: +10]]></effect>
    <code><![CDATA[if ($t->mode() == 1) { $t->myData()->addWall(20); } elseif ($t->mode() == 2) { $t->myData()->addTower(10); }]]></code>
    <created>2006-05-01</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="267">
    <name>University</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>6</bricks>
      <gems>6</gems>
      <recruits>6</recruits>
    </cost>
    <modes>3</modes>
    <level>0</level>
    <effect><![CDATA[Mode1:<br />Quarry: +1<br />Mode2:<br />Magic: +1<br />Mode3:<br />Dungeon: +1]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->myData()->addQuarry(1);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addMagic(1);
    }
    elseif ($t->mode() == 3) {
      $t->myData()->addDungeons(1);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="268">
    <name>Reserve forces</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>17</bricks>
      <recruits>17</recruits>
    </cost>
    <modes>2</modes>
    <level>6</level>
    <effect><![CDATA[Mode1:<br />Attack: 34<br />Mode2:<br />Wall: +38]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->hisData()->attack(34);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addWall(38);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="269">
    <name>Militia</name>
    <rarity>Common</rarity>
    <modes>8</modes>
    <level>0</level>
    <effect><![CDATA[Wall: +1<br />Discard a card from hand]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(1);
    if ($t->mode() != $t->cardPos()) {
      $t->setCard('my', $t->mode(), $t->drawCard($t->myDeck(), $t->myData()->Hand, $t->mode(), 'drawCardRandom'));
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="270">
    <name>Intrigue</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>6</bricks>
      <gems>6</gems>
      <recruits>6</recruits>
    </cost>
    <modes>8</modes>
    <level>0</level>
    <effect><![CDATA[Replace a card in opponent's hand with a common card from your deck]]></effect>
    <code><![CDATA[$t->setCard('his', $t->mode(), $t->drawCard($t->myDeck()->Common, $t->hisData()->Hand, $t->mode(), 'drawCardList'));]]></code>
    <created>2006-05-01</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="271">
    <name>Stone archer</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>3</bricks>
    </cost>
    <level>0</level>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Enemy tower: -2<br />Stock: +1]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-2); $t->myData()->addStock(1);]]></code>
    <created>2007-08-19</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="272">
    <name>Elven archer</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>0</level>
    <keywords>Alliance,Far sight</keywords>
    <effect><![CDATA[If Wall > Enemy wall<br />Enemy tower: -7<br />else<br />Attack: 6]]></effect>
    <code><![CDATA[
    if ($t->myData()->Wall > $t->hisData()->Wall) {
      $t->hisData()->addTower(-7);
    }
    else {
      $t->hisData()->attack(6);
    }
]]></code>
    <created>2007-08-19</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="273">
    <name>Merchant</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>3</modes>
    <level>4</level>
    <effect><![CDATA[Mode1:<br />Bricks: +6<br />Mode2:<br />Gems: +4<br />Mode3:<br />Recruits: +5]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->myData()->addBricks(6);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addGems(4);
    }
    elseif ($t->mode() == 3) {
      $t->myData()->addRecruits(5);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="274">
    <name>Hidden treasure</name>
    <rarity>Common</rarity>
    <level>0</level>
    <effect><![CDATA[Gems: +2<br />Recruits: +1<br />If last card played was a zero cost card<br />Gems: +1<br />Recruits: +1]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->getResources() == 0 && $t->myLastAction() == 'play' && $t->myLastCard()->id() > 0) {
      $t->myData()->addGems(3)->addRecruits(2);
    }
    else {
      $t->myData()->addGems(2)->addRecruits(1);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="275">
    <name>Clay pit</name>
    <rarity>Common</rarity>
    <level>0</level>
    <effect><![CDATA[Bricks prod x2]]></effect>
    <code><![CDATA[$t->production()->multiplyBricks(2);]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="276">
    <name>Border fortress</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>45</bricks>
    </cost>
    <level>7</level>
    <effect><![CDATA[Tower: +25<br />Wall: +50]]></effect>
    <code><![CDATA[$t->myData()->addTower(25)->addWall(50);]]></code>
    <created>2006-05-01</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="277">
    <name>Kingsguard</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>30</recruits>
    </cost>
    <level>0</level>
    <keywords>Soldier</keywords>
    <effect><![CDATA[Tower: +35]]></effect>
    <code><![CDATA[$t->myData()->addTower(35);]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="278">
    <name>Guard tower</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
    </cost>
    <modes>2</modes>
    <level>1</level>
    <effect><![CDATA[Mode1:<br />Wall: +8<br />Mode2:<br />Tower: +5]]></effect>
    <code><![CDATA[if ($t->mode() == 1) { $t->myData()->addWall(8); } elseif ($t->mode() == 2) { $t->myData()->addTower(5); }]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="279">
    <name>Heavy infantry</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <modes>2</modes>
    <level>3</level>
    <keywords>Soldier,Skirmisher</keywords>
    <effect><![CDATA[Mode1:<br />Attack: 7<br />Mode2:<br />Wall: +7]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->hisData()->attack(7);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addWall(7);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="280">
    <name>Avatar of vengeance</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>16</gems>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Demonic,Rebirth</keywords>
    <effect><![CDATA[Move selected card from opponent's hand to matching position in hand (can't discard self)<br />If targeting self<br />Gems: +16]]></effect>
    <code><![CDATA[
    if ($t->mode() == $t->cardPos()) {
      $t->myData()->addGems(16);
    }
    else {
      $t->setCard('my', $t->mode(), $t->hisData()->Hand[$t->mode()], ['reveal' => true]);
    }
    $t->setCard('his', $t->mode(), $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $t->mode(), 'drawCardDifferent'));
]]></code>
    <created>2006-05-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="281">
    <name>Berserker</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>5</level>
    <keywords>Barbarian,Frenzy</keywords>
    <effect><![CDATA[Attack: 13 - 5N<br />N = Tower / Max tower]]></effect>
    <code><![CDATA[$t->hisData()->attack(13 - round(5 * ($t->myData()->Tower / $t->config('max_tower'))));]]></code>
    <created>2006-05-01</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="282">
    <name>Luxury tax</name>
    <rarity>Uncommon</rarity>
    <level>10</level>
    <effect><![CDATA[Players lose N% of each resource<br />N is relative tower height]]></effect>
    <code><![CDATA[
    $my_ratio = $t->myData()->Tower / $t->config('max_tower');
    $t->myData()
      ->addBricks(-round($t->myData()->Bricks * $my_ratio))
      ->addGems(-round($t->myData()->Gems * $my_ratio))
      ->addRecruits(-round($t->myData()->Recruits * $my_ratio));
    $his_ratio = $t->hisData()->Tower / $t->config('max_tower');
    $t->hisData()
      ->addBricks(-round($t->hisData()->Bricks * $his_ratio))
      ->addGems(-round($t->hisData()->Gems * $his_ratio))
      ->addRecruits(-round($t->hisData()->Recruits * $his_ratio));
]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="283">
    <name>Regulator</name>
    <rarity>Rare</rarity>
    <level>1</level>
    <effect><![CDATA[Tower and Wall of both players are set to the same height as was at the start of the game]]></effect>
    <code><![CDATA[
    $t->myData()->setTower($t->config('init_tower'))->setWall($t->config('init_wall'));
    $t->hisData()->setTower($t->config('init_tower'))->setWall($t->config('init_wall'));
]]></code>
    <created>2006-05-01</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="284">
    <name>Jealousy</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>13</gems>
    </cost>
    <level>5</level>
    <effect><![CDATA[If Tower < 50 and Enemy tower > 60<br />Enemy tower: -25<br />else<br />Enemy tower: -10]]></effect>
    <code><![CDATA[
    if ($t->myData()->Tower < 50 && $t->hisData()->Tower > 60) {
      $t->hisData()->addTower(-25);
    }
    else {
      $t->hisData()->addTower(-10);
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="285">
    <name>All-elemental attack</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>18</bricks>
      <gems>18</gems>
      <recruits>18</recruits>
    </cost>
    <level>7</level>
    <keywords>Destruction,Nature</keywords>
    <effect><![CDATA[Attack: #Stock<br />Stock: = 0]]></effect>
    <code><![CDATA[$t->hisData()->attack($t->myData()->Bricks + $t->myData()->Gems + $t->myData()->Recruits); $t->myData()->setStock(0);]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="286">
    <name>Sabotage</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>25</recruits>
    </cost>
    <level>1</level>
    <effect><![CDATA[Enemy tower is halved]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-round($t->hisData()->Tower / 2));]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="287">
    <name>Revolt</name>
    <rarity>Uncommon</rarity>
    <level>9</level>
    <effect><![CDATA[Recruits: +12<br />Replace your hand with non-rare Recruits only no support keyword attack cards]]></effect>
    <code><![CDATA[
    $common = $t->getList(['rarity'=>'Common', 'cost'=>'Green', 'advanced'=>'Attack:', 'support'=>'No keywords']);
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'cost'=>'Green', 'advanced'=>'Attack:', 'support'=>'No keywords']);
    $t->setHand('my', $t->drawHandList(array_merge($common, $uncommon)));
    $t->myData()->addRecruits(12); $t->noNextCard();
]]></code>
    <created>2006-05-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="288">
    <name>Cursed amulet</name>
    <rarity>Uncommon</rarity>
    <modes>8</modes>
    <level>10</level>
    <keywords>Cursed</keywords>
    <effect><![CDATA[Replace a card in opponent's hand with self<br />Opponent gains N random resources<br />N based on replaced card rarity (C-1, U-4, R-10)]]></effect>
    <code><![CDATA[
    $rarities = ['Common' => 1, 'Uncommon' => 4, 'Rare' => 10];
    $rarity = $t->getCard($t->hisData()->Hand[$t->mode()])->getRarity();
    $t->hisData()->addRandomResources($rarities[$rarity]);
    $t->setCard('his', $t->mode(), $t->card()->id(), ['reveal' => true]);
]]></code>
    <created>2006-05-01</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="289">
    <name>Baron's keep</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <level>0</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Tower: +3<br />Wall: +7]]></effect>
    <code><![CDATA[$t->myData()->addTower(3)->addWall(7);]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="290">
    <name>Warlord's keep</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>30</bricks>
    </cost>
    <level>6</level>
    <keywords>Barbarian,Far sight</keywords>
    <effect><![CDATA[Tower: +15<br />Wall: +30]]></effect>
    <code><![CDATA[$t->myData()->addTower(15)->addWall(30);]]></code>
    <created>2006-05-01</created>
    <modified>2013-03-31</modified>
  </card>
  <card id="291">
    <name>Army of the King</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>20</recruits>
    </cost>
    <level>0</level>
    <effect><![CDATA[Recruits: +35<br />Replace your hand with 3 common and 5 uncommon <b>Soldier</b> cards]]></effect>
    <code><![CDATA[
    $t->myData()->addRecruits(35);
    $trans = ['Common', 'Common', 'Common', 'Uncommon', 'Uncommon', 'Uncommon', 'Uncommon', 'Uncommon'];
    shuffle($trans);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $t->setCard('my', $i, $t->drawCard($t->getList(['rarity'=>$trans[$i-1], 'keyword'=>'Soldier']), $t->myData()->Hand, $i, 'drawCardList'));
    }
    $t->noNextCard();
]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="292">
    <name>Sacred forest</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>6</level>
    <effect><![CDATA[Replace your hand with [card=526/], [card=687/] and Elven: [card=136]enchantress[/card], [card=190]ranger[/card], [card=527]priestesses[/card], [card=653]sorceress[/card], [card=599]warlock[/card], [card=655]market[/card]]]></effect>
    <code><![CDATA[$t->setHandShuffled('my', [687, 653, 655, 527, 190, 136, 526, 599]); $t->noNextCard();]]></code>
    <created>2006-05-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="293">
    <name>Plague thrower</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>13</recruits>
    </cost>
    <level>0</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Recruits prod x0<br />Enemy stock: -1<br />Enemy tower: -12]]></effect>
    <code><![CDATA[$t->production()->multiplyRecruits(0); $t->hisData()->addStock(-1)->addTower(-12);]]></code>
    <created>2006-05-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="294">
    <name>Plan of salvation</name>
    <rarity>Rare</rarity>
    <level>9</level>
    <effect><![CDATA[Bricks: +25<br />Replace your hand with Bricks only Wall + no support keyword cards]]></effect>
    <code><![CDATA[
    $t->setHand('my', $t->drawHandList($t->getList(['cost'=>'Red', 'advanced'=>'Wall: +', 'support'=>'No keywords'])));
    $t->myData()->addBricks(25); $t->noNextCard();
]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="295">
    <name>Architectural improvement</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>25</bricks>
    </cost>
    <level>4</level>
    <effect><![CDATA[Bricks: +40<br />Replace your hand with no keyword Bricks only Tower + no support keyword cards]]></effect>
    <code><![CDATA[
    $t->setHand('my', $t->drawHandList($t->getList(['keyword'=>'No keywords', 'cost'=>'Red', 'advanced'=>'Tower: +', 'support'=>'No keywords'])));
    $t->myData()->addBricks(40); $t->noNextCard();
]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="296">
    <name>Hidden traps</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>5</bricks>
    </cost>
    <level>6</level>
    <keywords>Skirmisher</keywords>
    <effect><![CDATA[Wall: +14]]></effect>
    <code><![CDATA[$t->myData()->addWall(14);]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="297">
    <name>Palisade</name>
    <rarity>Common</rarity>
    <level>1</level>
    <effect><![CDATA[Wall: +3]]></effect>
    <code><![CDATA[$t->myData()->addWall(3);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="298">
    <name>Vampire lord</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>10</gems>
      <recruits>20</recruits>
    </cost>
    <modes>8</modes>
    <level>6</level>
    <keywords>Undead,Durable,Quick</keywords>
    <effect><![CDATA[Attack: 25<br />Magic: -1<br />Replace a card in hand with [card=28/]]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(25);
    $t->myData()->addMagic(-1);
    $t->setCard('my', $t->mode(), 28, ['reveal' => true]);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="299">
    <name>Angry mob</name>
    <rarity>Common</rarity>
    <level>6</level>
    <effect><![CDATA[Attack: #Facilities<br />Stock: -2]]></effect>
    <code><![CDATA[$t->hisData()->attack($t->myData()->Quarry + $t->myData()->Magic + $t->myData()->Dungeons); $t->myData()->addStock(-2);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="300">
    <name>Tremors</name>
    <rarity>Common</rarity>
    <cost>
      <gems>2</gems>
    </cost>
    <level>0</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy tower: -1<br />Enemy wall: -2<br />Enemy bricks: -4]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-1)->addWall(-2)->addBricks(-4);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="301">
    <name>Lookout towers</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>8</bricks>
    </cost>
    <level>3</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[If Tower < Wall and Tower < 45<br />Tower: +12<br />else<br />Tower: +6]]></effect>
    <code><![CDATA[
    if ($t->myData()->Tower < $t->myData()->Wall && $t->myData()->Tower < 45) {
      $t->myData()->addTower(12);
    }
    else {
      $t->myData()->addTower(6);
    }
]]></code>
    <created>2007-08-19</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="302">
    <name>Titan's left arm</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>7</bricks>
    </cost>
    <level>10</level>
    <keywords>Titan,Unliving</keywords>
    <effect><![CDATA[Stock: +#<b>Unliving</b> in hand]]></effect>
    <code><![CDATA[$t->myData()->addStock($t->keywordCount($t->myData()->Hand, 'Unliving'));]]></code>
    <created>2007-08-19</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="303">
    <name>Titan's right arm</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>7</bricks>
    </cost>
    <level>10</level>
    <keywords>Titan,Unliving</keywords>
    <effect><![CDATA[Tower: +N<br />Wall: +N<br />N = #<b>Unliving</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Unliving');
    $t->myData()->addTower($tmp)->addWall($tmp);
]]></code>
    <created>2007-08-19</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="304">
    <name>Nightmare</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>13</gems>
      <recruits>13</recruits>
    </cost>
    <level>2</level>
    <keywords>Burning,Charge (10)</keywords>
    <effect><![CDATA[Attack: 20]]></effect>
    <code><![CDATA[$t->hisData()->attack(20);]]></code>
    <created>2007-08-19</created>
    <modified>2009-11-12</modified>
  </card>
  <card id="305">
    <name>Crusader</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>13</recruits>
    </cost>
    <level>8</level>
    <keywords>Holy,Soldier</keywords>
    <effect><![CDATA[Attack: 12<br />If #<b>Soldier</b> in hand > 3<br />Dungeon: +1]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(12);
    if ($t->keywordCount($t->myData()->Hand, 'Soldier') > 3) {
      $t->myData()->addDungeons(1);
    }
]]></code>
    <created>2007-08-19</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="306">
    <name>Obsidian gargoyle</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>15</bricks>
    </cost>
    <level>9</level>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Attack: 13<br />If #<b>Unliving</b> in hand > 4<br />Quarry: +1]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(13);
    if ($t->keywordCount($t->myData()->Hand, 'Unliving') > 4) {
      $t->myData()->addQuarry(1);
    }
]]></code>
    <created>2007-08-19</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="307">
    <name>Necromancy amplifier</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>9</bricks>
      <gems>9</gems>
      <recruits>9</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Stock: +2<br />Replace non-rare <b>Undead</b> in hand with <b>Undead</b> cards of upgraded rarity]]></effect>
    <code><![CDATA[
    $t->myData()->addStock(2);
    $rarities = array();
    $upgrades = ['Common' => 'Uncommon', 'Uncommon' => 'Rare'];
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->myData()->Hand[$i]);
      if ($cur_card->hasKeyword('Undead')) {
        $rarities[$i] = $cur_card->getRarity();
      }
    }
    foreach ($rarities as $i => $rarity) {
      if (in_array($rarity, ['Common', 'Uncommon'])) {
        $t->setCard('my', $i, $t->drawCard($t->getList(['rarity'=>$upgrades[$rarity], 'keyword'=>'Undead']), $t->myData()->Hand, $i, 'drawCardList'));
      }
    }
]]></code>
    <created>2007-08-19</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="308">
    <name>Mud elemental</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>18</bricks>
    </cost>
    <level>10</level>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Wall: +9N<br />N = #<b>Unliving</b> in hand (max 5)]]></effect>
    <code><![CDATA[$tmp = min(5, $t->keywordCount($t->myData()->Hand, 'Unliving')); $t->myData()->addWall(9 * $tmp);]]></code>
    <created>2007-08-19</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="309">
    <name>Rock elemental</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>20</bricks>
    </cost>
    <level>10</level>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Tower: +5N<br />N = #<b>Unliving</b> in hand (max 6)]]></effect>
    <code><![CDATA[$tmp = min(6, $t->keywordCount($t->myData()->Hand, 'Unliving')); $t->myData()->addTower(5 * $tmp);]]></code>
    <created>2007-08-19</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="310">
    <name>Titan's head</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
    </cost>
    <level>10</level>
    <keywords>Titan,Unliving,Far sight</keywords>
    <effect><![CDATA[Tower: +8<br />If #<b>Unliving</b> in hand > 4<br />Magic: +1]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(8);
    if ($t->keywordCount($t->myData()->Hand, 'Unliving') > 4) {
      $t->myData()->addMagic(1);
    }
]]></code>
    <created>2007-08-19</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="311">
    <name>Titan's legs</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>12</bricks>
      <gems>12</gems>
      <recruits>12</recruits>
    </cost>
    <level>10</level>
    <keywords>Titan,Unliving</keywords>
    <effect><![CDATA[Tower: +11<br />Wall: +16<br />Stock: +2]]></effect>
    <code><![CDATA[$t->myData()->addTower(11)->addWall(16)->addStock(2);]]></code>
    <created>2007-08-19</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="312">
    <name>Titan's heart</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>7</bricks>
      <gems>7</gems>
      <recruits>7</recruits>
    </cost>
    <level>10</level>
    <keywords>Titan,Unliving</keywords>
    <effect><![CDATA[Tower: +6<br />Wall: +9<br />If #<b>Unliving</b> in hand > 4<br />Quarry: +1]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(6)->addWall(9);
    if ($t->keywordCount($t->myData()->Hand, 'Unliving') > 4) {
      $t->myData()->addQuarry(1);
    }
]]></code>
    <created>2007-08-19</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="313">
    <name>Tartarus gate</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>4</bricks>
      <gems>4</gems>
      <recruits>4</recruits>
    </cost>
    <level>8</level>
    <effect><![CDATA[Summons a non-common <b>Titan</b>]]></effect>
    <code><![CDATA[
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Titan']);
    $rare = $t->getList(['rarity'=>'Rare', 'keyword'=>'Titan']);
    $t->nextCard($t->drawCard(array_merge($uncommon, $rare), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2007-08-19</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="314">
    <name>Crugg the Destroyer</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>26</recruits>
    </cost>
    <level>8</level>
    <keywords>Barbarian,Siege</keywords>
    <effect><![CDATA[Enemy tower: -6N<br />Enemy wall: -9N<br />N = #<b>Barbarian</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Barbarian');
    $t->hisData()->addTower(-6 * $tmp)->addWall(-9 * $tmp);
]]></code>
    <created>2007-08-19</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="315">
    <name>Completion ritual</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>11</gems>
    </cost>
    <level>10</level>
    <keywords>Titan</keywords>
    <effect><![CDATA[If all <b>Titan</b> cards are present in hand<br />Instant destruction victory<br />else<br /><b>Titan</b> tokens: +60]]></effect>
    <code><![CDATA[
    if (in_array(302, $t->myData()->Hand) && in_array(303, $t->myData()->Hand) && in_array(310, $t->myData()->Hand)
      && in_array(311, $t->myData()->Hand) && in_array(312, $t->myData()->Hand)) {
      $t->hisData()->setTower(0)->setWall(0);
    }
    else {
      $t->myData()->addToken('Titan', 60);
    }
]]></code>
    <created>2007-08-19</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="316">
    <name>Lich</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>9</bricks>
      <gems>9</gems>
      <recruits>9</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Discard a card from opponent's hand<br />Summons <b>Undead</b> of the same rarity as discarded card]]></effect>
    <code><![CDATA[
    $rarity = $t->getCard($t->hisData()->Hand[$t->mode()])->getRarity();
    $t->setCard('his', $t->mode(), $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $t->mode(), 'drawCardDifferent'));
    $t->nextCard($t->drawCard($t->getList(['rarity'=>$rarity, 'keyword'=>'Undead']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2007-10-04</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="317">
    <name>Heavy cavalry</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>25</recruits>
    </cost>
    <level>6</level>
    <keywords>Soldier,Charge (18)</keywords>
    <effect><![CDATA[Attack: 22]]></effect>
    <code><![CDATA[$t->hisData()->attack(22);]]></code>
    <created>2007-10-04</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="318">
    <name>Fallen knight</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>14</recruits>
    </cost>
    <modes>8</modes>
    <level>9</level>
    <keywords>Undead,Enduring (6),Charge (7)</keywords>
    <effect><![CDATA[Attack: 10<br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(10);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
    else {
      $t->replaceCard('my', $t->mode(), $t->card()->id());
    }
]]></code>
    <created>2007-10-04</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="319">
    <name>Fire guardian</name>
    <rarity>Common</rarity>
    <cost>
      <gems>2</gems>
    </cost>
    <level>7</level>
    <keywords>Burning,Mage</keywords>
    <effect><![CDATA[Wall: +10<br />If last card played wasn't <b>Burning</b> or a <b>Mage</b><br />Gems: -4]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(10);
    if (!(($t->myLastCard()->hasKeyword('Burning') || $t->myLastCard()->hasKeyword('Mage')) && ($t->myLastAction() == 'play'))) {
      $t->myData()->addGems(-4);
    }
]]></code>
    <created>2007-10-04</created>
    <modified>2013-03-31</modified>
  </card>
  <card id="320">
    <name>Last hope</name>
    <rarity>Uncommon</rarity>
    <level>0</level>
    <keywords>Quick</keywords>
    <effect><![CDATA[If Tower < 10 and Wall = 0<br />Tower:= 25<br />Wall:= 15<br />else<br />Stock: +1]]></effect>
    <code><![CDATA[
    if ($t->myData()->Tower < 10 && $t->myData()->Wall == 0) {
      $t->myData()->setTower(25)->setWall(15);
    }
    else {
      $t->myData()->addStock(1);
    }
]]></code>
    <created>2007-10-04</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="321">
    <name>Unholy shrine</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>26</bricks>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Discard up to 5 <b>Undead</b> from hand except the selected card<br />Wall: +10N<br />N = #discarded cards]]></effect>
    <code><![CDATA[
    $storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->hasKeyword('Undead') && $i != $t->mode() && $i != $t->cardPos()) {
        $storage[$i] = $i;
      }
    }
    shuffle($storage); $tmp = 0;
    for ($i = 0; ($i < count($storage) && $i < 5); $i++) {
      $t->setCard('my', $storage[$i], $t->drawCard($t->myDeck(), $t->myData()->Hand, $storage[$i], 'drawCardRandom'));
      $tmp++;
    }
    $t->myData()->addWall(10 * $tmp);
]]></code>
    <created>2007-11-25</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="322">
    <name>Siege breakers</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>20</recruits>
    </cost>
    <level>9</level>
    <keywords>Soldier,Siege</keywords>
    <effect><![CDATA[Attack: 8N<br />If N > 4<br />Wall: +15<br />N = #<b>Soldier</b> in hand (max 4)]]></effect>
    <code><![CDATA[
    $soldiers = $t->keywordCount($t->myData()->Hand, 'Soldier');
    $tmp = min(4, $soldiers);
    $t->hisData()->attack(8 * $tmp);
    if ($soldiers > 4) {
      $t->myData()->addWall(15);
    }
]]></code>
    <created>2007-10-04</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="323">
    <name>Beastmaster</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>10</gems>
      <recruits>15</recruits>
    </cost>
    <level>8</level>
    <keywords>Beast,Durable</keywords>
    <effect><![CDATA[Replace a non-<b>Beast</b> highest rarity card in opponent's hand with common <b>Beast</b><br />Attack: 5N<br />N = #<b>Beast</b> in game]]></effect>
    <code><![CDATA[
    $storage = ['Common' => array(), 'Uncommon' => array(), 'Rare' => array()];
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->hisData()->Hand[$i]);
      $rarity = $cur_card->getRarity();
      if (!$cur_card->hasKeyword('Beast')) {
        $storage[$rarity][] = $i;
      }
    }
    if ((count($storage['Common']) + count($storage['Uncommon']) + count($storage['Rare'])) > 0) {
      shuffle($storage['Common']); shuffle($storage['Uncommon']); shuffle($storage['Rare']);
      $storage_temp = array_merge($storage['Common'], $storage['Uncommon'], $storage['Rare']);
      $discarded_pos = array_pop($storage_temp);
      $t->setCard('his', $discarded_pos, $t->drawCard($t->getList(['rarity'=>'Common', 'keyword'=>'Beast']), $t->hisData()->Hand, $discarded_pos, 'drawCardList'));
    }
    $tmp = $t->keywordCount($t->myData()->Hand, 'Beast') + $t->keywordCount($t->hisData()->Hand, 'Beast');
    $t->hisData()->attack(5 * $tmp);
]]></code>
    <created>2007-10-04</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="324">
    <name>Wolf raiders</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>12</recruits>
    </cost>
    <modes>2</modes>
    <level>9</level>
    <keywords>Beast,Horde</keywords>
    <effect><![CDATA[Mode1:<br />Recruits: +3N<br />Mode2:<br />Attack: 3N<br />N = #<b>Beast</b> + #<b>Horde</b> in hand (max 7)]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Beast') + $t->keywordCount($t->myData()->Hand, 'Horde');
    $tmp = min(7, $tmp);
    if ($t->mode() == 1) {
      $t->myData()->addRecruits(3 * $tmp);
    }
    elseif ($t->mode() == 2) {
      $t->hisData()->attack(3 * $tmp);
    }
]]></code>
    <created>2007-10-04</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="325">
    <name>Cleansing</name>
    <rarity>Common</rarity>
    <cost>
      <gems>5</gems>
    </cost>
    <level>9</level>
    <keywords>Holy</keywords>
    <effect><![CDATA[Replace up to N common non-<b>Holy</b> keyword cards in opponent's hand with common <b>Holy</b><br />N = #<b>Holy</b> in hand (max 4)]]></effect>
    <code><![CDATA[
    $count = min(4, $t->keywordCount($t->myData()->Hand, 'Holy'));
    $storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->hisData()->Hand[$i]);
      if ($cur_card->hasKeyword('any') && !$cur_card->hasKeyword('Holy') && $cur_card->getRarity() == 'Common') {
        $storage[] = $i;
      }
    }
    if (count($storage) > 0) {
      shuffle($storage);
      for ($i = 0; ($i < count($storage)) && ($i < $count); $i++) {
        $cur_pos = $storage[$i];
        $t->setCard('his', $cur_pos, $t->drawCard($t->getList(['rarity'=>'Common', 'keyword'=>'Holy']), $t->hisData()->Hand, $cur_pos, 'drawCardList'));
      }
    }
]]></code>
    <created>2007-11-25</created>
    <modified>2010-10-03</modified>
  </card>
  <card id="326">
    <name>Guardian angel</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>16</gems>
      <recruits>12</recruits>
    </cost>
    <level>8</level>
    <keywords>Holy</keywords>
    <effect><![CDATA[Attack: 2N<br />Wall: +4N<br />N = #<b>Soldier</b> + #<b>Holy</b> in hand (max 8)]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Soldier') + $t->keywordCount($t->myData()->Hand, 'Holy');
    $tmp = min(8 ,$tmp);
    $t->hisData()->attack(2 * $tmp); $t->myData()->addWall(4 * $tmp);
]]></code>
    <created>2007-11-25</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="327">
    <name>Temple of light</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>6</bricks>
    </cost>
    <modes>8</modes>
    <level>5</level>
    <keywords>Holy</keywords>
    <effect><![CDATA[Tower: +4<br />Replace a card in hand with <b>Holy</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(4);
    $t->setCard('my', $t->mode(), $t->drawCard($t->getList(['keyword'=>'Holy']), $t->myData()->Hand, $t->mode(), 'drawCardList'));
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2007-10-04</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="328">
    <name>Tribes of east</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
      <gems>2</gems>
      <recruits>2</recruits>
    </cost>
    <level>9</level>
    <effect><![CDATA[Summons a <b>Barbarian</b><br />If <b>Barbarian</b> tokens are set<br />Stock: +3]]></effect>
    <code><![CDATA[
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Barbarian']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    if ($t->myData()->findToken('Barbarian')) {
      $t->myData()->addStock(3);
    }
]]></code>
    <created>2007-10-04</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="329">
    <name>Conjurer</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <modes>8</modes>
    <level>6</level>
    <keywords>Mage,Nature</keywords>
    <effect><![CDATA[Gems: +6<br />Wall: +3<br />Production x0<br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $t->myData()->addGems(6)->addWall(3);
    $t->production()->multiply(0);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
    else {
      $t->replaceCard('my', $t->mode(), $t->card()->id());
    }
]]></code>
    <created>2007-10-04</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="330">
    <name>Emissary of the afterlife</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>16</bricks>
      <recruits>12</recruits>
    </cost>
    <level>10</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 14<br />Tower: +16<br />Gain N random resources<br />N = #<b>Undead</b> in your graveyard]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(14);
    $t->myData()->addTower(16);
    $dis_cards = array();
    if (count($t->myDiscardedCards()[0]) > 0) {
      $dis_cards = array_merge($t->myDiscardedCards()[0], $dis_cards);
    }
    if (count($t->hisData()->DisCards[1]) > 0) {
      $dis_cards = array_merge($t->hisData()->DisCards[1], $dis_cards);
    }
    $undead = 0;
    for ($i = 0; $i < count($dis_cards); $i++) {
      if ($t->getCard($dis_cards[$i])->hasKeyword('Undead')) {
        $undead++;
      }
    }
    if ($undead > 0) {
      $t->myData()->addRandomResources($undead);
    }
]]></code>
    <created>2007-11-25</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="331">
    <name>Benediction</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>8</level>
    <keywords>Holy,Restoration</keywords>
    <effect><![CDATA[Each player's stock raised by #<b>Holy</b> in his hand (max 4)]]></effect>
    <code><![CDATA[
    $t->myData()->addStock(min(4, $t->keywordCount($t->myData()->Hand, 'Holy')));
    $t->hisData()->addStock(min(4, $t->keywordCount($t->hisData()->Hand, 'Holy')));
]]></code>
    <created>2007-11-25</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="332">
    <name>Retribution</name>
    <rarity>Common</rarity>
    <cost>
      <gems>2</gems>
    </cost>
    <level>10</level>
    <effect><![CDATA[Recruits prod x2<br />If Tower or Wall was damaged during opponent's last round<br />Enemy stock: -2]]></effect>
    <code><![CDATA[
    $t->production()->multiplyRecruits(2);
    if ($t->myChange('Tower') < 0 || $t->myChange('Wall') < 0) {
      $t->hisData()->addStock(-2);
    }
]]></code>
    <created>2007-11-25</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="333">
    <name>Death wave</name>
    <rarity>Common</rarity>
    <cost>
      <gems>7</gems>
    </cost>
    <level>9</level>
    <effect><![CDATA[Enemy wall: -4N<br />N = #<b>Undead</b> in hand (max 6) - #<b>Holy</b> in opponent's hand]]></effect>
    <code><![CDATA[
    $undead = $t->keywordCount($t->myData()->Hand, 'Undead');
    $holy = $t->keywordCount($t->hisData()->Hand, 'Holy');
    $t->hisData()->addWall(-max(min($undead, 6) - $holy, 0) * 4);
]]></code>
    <created>2007-11-25</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="334">
    <name>Tarkhan</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>7</recruits>
    </cost>
    <level>8</level>
    <keywords>Barbarian,Siege</keywords>
    <effect><![CDATA[If last card played was a <b>Barbarian</b><br />Enemy wall: -7<br />Always:<br />Attack: 7]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->hasKeyword('Barbarian') && $t->myLastAction() == 'play') {
      $t->hisData()->addWall(-7);
    }
    $t->hisData()->attack(7);
]]></code>
    <created>2007-11-25</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="335">
    <name>Flaming mirage</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>11</gems>
      <recruits>11</recruits>
    </cost>
    <level>10</level>
    <keywords>Burning</keywords>
    <effect><![CDATA[Attack: 21<br />If last card was <b>Burning</b> up to 2 copies of that card will replace non-rare non-<b>Burning</b> cards in hand]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(21);
    if ($t->myLastCard()->hasKeyword('Burning')) {
      $storage = array();
      for ($i = 1; $i <= $t->handSize(); $i++) {
        $cur_card = $t->getCard($t->myData()->Hand[$i]);
        if (!$cur_card->hasKeyword('Burning') && $cur_card->getRarity() != 'Rare') {
          $storage[] = $i;
        }
      }
      $count = min(count($storage), 2);
      if ($count > 0) {
        shuffle($storage);
        for ($k = 0; $k < $count; $k++) {
          $i = $storage[$k];
          $t->setCard('my', $i, $t->myData()->LastCard[$t->myLastCardIndex()], ['reveal' => true]);
        }
      }
    }
]]></code>
    <created>2007-11-25</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="336">
    <name>Eternal flame</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
      <gems>2</gems>
      <recruits>2</recruits>
    </cost>
    <level>10</level>
    <keywords>Burning</keywords>
    <effect><![CDATA[Summons <b>Burning</b><br />If last card played was <b>Burning</b> it will be that card]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->hasKeyword('Burning') && $t->myLastAction() == 'play') {
      $t->nextCard($t->myData()->LastCard[$t->myLastCardIndex()]);
    }
    else {
      $t->nextCard($t->drawCard($t->getList(['keyword'=>'Burning']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    }
]]></code>
    <created>2007-11-25</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="337">
    <name>Warlord</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>19</recruits>
    </cost>
    <level>9</level>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[If last card played was a <b>Barbarian</b><br />Enemy wall: -17<br />Always:<br />Attack: 20]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->hasKeyword('Barbarian') && $t->myLastAction() == 'play') {
      $t->hisData()->addWall(-17);
    }
    $t->hisData()->attack(20);
]]></code>
    <created>2007-11-25</created>
    <modified>2008-01-29</modified>
  </card>
  <card id="338">
    <name>Moonlight unicorn</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>30</gems>
    </cost>
    <level>9</level>
    <keywords>Legend,Swift</keywords>
    <effect><![CDATA[Attack: 26<br />If last card played was a <b>Mage</b><br />Gems prod x4]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->hasKeyword('Mage') && $t->myLastAction() == 'play') {
      $t->production()->multiplyGems(4);
    }
    $t->hisData()->attack(26);
]]></code>
    <created>2007-11-25</created>
    <modified>2009-12-24</modified>
  </card>
  <card id="339">
    <name>Prince of thieves</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>5</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[If not New<br />Steals the difference between opponent's stock and stock (max 15, min 5)]]></effect>
    <code><![CDATA[
    if (!$t->isMyNew($t->cardPos())) {
      $tmp = min(15, max(5, $t->hisData()->Bricks - $t->myData()->Bricks));
      $t->myData()->addBricks($tmp);
      $t->hisData()->addBricks(-$tmp);
      $tmp = min(15, max(5, $t->hisData()->Gems - $t->myData()->Gems));
      $t->myData()->addGems($tmp);
      $t->hisData()->addGems(-$tmp);
      $tmp = min(15, max(5, $t->hisData()->Recruits - $t->myData()->Recruits));
      $t->myData()->addRecruits($tmp);
      $t->hisData()->addRecruits(-$tmp);
    }
]]></code>
    <created>2007-11-25</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="340">
    <name>Fanatic</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>8</recruits>
    </cost>
    <level>3</level>
    <keywords>Soldier,Frenzy</keywords>
    <effect><![CDATA[Attack: 6<br />Recruits prod x2]]></effect>
    <code><![CDATA[$t->hisData()->attack(6); $t->production()->multiplyRecruits(2);]]></code>
    <created>2008-02-12</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="341">
    <name>Zealot</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>11</gems>
      <recruits>15</recruits>
    </cost>
    <level>9</level>
    <keywords>Holy,Soldier</keywords>
    <effect><![CDATA[Attack: 10 + 3N<br />N = #<b>Soldier</b> + #<b>Holy</b> in hand (max 7)]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Soldier') + $t->keywordCount($t->myData()->Hand, 'Holy');
    $t->hisData()->attack(10 + 3 * min(7, $tmp));
]]></code>
    <created>2008-02-12</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="342">
    <name>Heresy</name>
    <rarity>Common</rarity>
    <level>10</level>
    <effect><![CDATA[Replace up to 3 non-<b>Frenzy</b> common cards in hand with [card=340]Fanatics[/card]]]></effect>
    <code><![CDATA[
    $temp_array = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->myData()->Hand[$i]);
      if (!$cur_card->hasKeyword('Frenzy') && $cur_card->getRarity() == 'Common' && $i != $t->cardPos()) {
        $temp_array[] = $i;
      }
    }
    if (count($temp_array) > 0) {
      shuffle($temp_array);
      for ($i = 0; $i < count($temp_array) && $i < 3; $i++) {
        $t->setCard('my', $temp_array[$i], 340, ['reveal' => true]);
      }
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="343">
    <name>Death before dishonor</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <level>9</level>
    <effect><![CDATA[Discard all non-rare <b>Barbarian</b> or <b>Soldier</b> from hand<br />Wall: +8N<br />N = #discarded cards (max 5)]]></effect>
    <code><![CDATA[
    $discarded = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $my_card = $t->getCard($t->myData()->Hand[$i]);
      if ($i != $t->cardPos() && $my_card->getRarity() != 'Rare' && ($my_card->hasKeyword('Barbarian') || $my_card->hasKeyword('Soldier'))) {
        $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardRandom'));
        $discarded++;
      }
    }
    $t->myData()->addWall(min($discarded, 5) * 8);
]]></code>
    <created>2008-02-12</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="344">
    <name>Warchief</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>15</recruits>
    </cost>
    <level>10</level>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[Wall: +20<br />If last card played was a <b>Barbarian</b><br />Attack: 5 + N<br />N = recruits cost of last card played (max 15)]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(20);
    if ($t->myLastCard()->hasKeyword('Barbarian') && $t->myLastAction() == 'play') {
      $t->hisData()->attack(5 + min(15, $t->myLastCard()->getResources('Recruits')));
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="345">
    <name>Devastator</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>46</recruits>
    </cost>
    <level>9</level>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[Enemy wall: -10N<br />N = #<b>Barbarian</b> in hand<br />Attack: 40]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Barbarian');
    $t->hisData()->addWall(-$tmp * 10)->attack(40);
]]></code>
    <created>2008-02-12</created>
    <modified>2008-02-12</modified>
  </card>
  <card id="346">
    <name>Overpower</name>
    <rarity>Uncommon</rarity>
    <level>6</level>
    <effect><![CDATA[Summons a <b>Frenzy</b><br />Gems: -N<br />Recruits: +N<br />N = recruits cost of the summoned card (max 10)]]></effect>
    <code><![CDATA[
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Frenzy']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    $cost = min(10, $t->getCard($t->nextCard())->getResources('Recruits'));
    $t->myData()->addGems(-$cost)->addRecruits($cost);
]]></code>
    <created>2008-02-12</created>
    <modified>2013-03-31</modified>
  </card>
  <card id="347">
    <name>Call of the wilds</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Replace non-rare <b>Beast</b> in hand with <b>Beast</b> cards of upgraded rarity<br />Production x0]]></effect>
    <code><![CDATA[
    $t->production()->multiply(0);
    $rarities = array();
    $upgrades = ['Common' => 'Uncommon', 'Uncommon' => 'Rare'];
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->hasKeyword('Beast')) {
        $rarities[$i] = $t->getCard($t->myData()->Hand[$i])->getRarity();
      }
    }
    foreach ($rarities as $i => $val) {
      if (in_array($val, ['Common', 'Uncommon'])) {
        $t->setCard('my', $i, $t->drawCard($t->getList(['rarity'=>$upgrades[$val], 'keyword'=>'Beast']), $t->myData()->Hand, $i, 'drawCardList'));
      }
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="348">
    <name>Time lock</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>10</gems>
    </cost>
    <level>9</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Enemy stock: -5<br />If opponent played <b>Swift</b> last round<br />Enemy stock: -7]]></effect>
    <code><![CDATA[
    $t->hisData()->addStock(-5);
    for ($i = 1; $i <= $t->hisLastCardIndex(); $i++) {
      if ($t->getCard($t->hisData()->LastCard[$i])->hasKeyword('Swift') && $t->hisData()->LastAction[$i] == 'play') {
        $t->hisData()->addStock(-7); break;
      }
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="349">
    <name>Reuse the rubble</name>
    <rarity>Common</rarity>
    <level>10</level>
    <effect><![CDATA[If last card was <b>Unliving</b><br />Tower: +N / 3<br />Wall: +N / 2<br />N = bricks cost of last card (max 40)]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->hasKeyword('Unliving')) {
      $tmp = min(40, $t->myLastCard()->getResources('Bricks'));
      $t->myData()->addTower(round($tmp / 3))->addWall(round($tmp / 2));
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="350">
    <name>Eternal guardian</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <keywords>Undead,Durable</keywords>
    <effect><![CDATA[If last card played was <b>Undead</b><br />Tower: +N / 3<br />Wall: +N / 2<br />N = cost of last card played]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->hasKeyword('Undead') && $t->myLastAction() == 'play') {
      $tmp = $t->myLastCard()->getResources();
      $t->myData()->addTower(round($tmp / 3))->addWall(round($tmp / 2));
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="351">
    <name>Golden scepter</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <level>9</level>
    <effect><![CDATA[Summons<br />If New<br />[card=159/]<br />else<br />Golden scepter]]></effect>
    <code><![CDATA[$t->nextCard(($t->isMyNew($t->cardPos())) ? 159 : 351, true);]]></code>
    <created>2008-02-12</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="352">
    <name>Azure unicorn</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>12</gems>
      <recruits>15</recruits>
    </cost>
    <level>7</level>
    <keywords>Legend</keywords>
    <effect><![CDATA[Attack: 15<br />If Magic > Enemy magic<br />Attack: 19]]></effect>
    <code><![CDATA[
    if ($t->myData()->Magic > $t->hisData()->Magic) {
      $t->hisData()->attack(34);
    }
    else {
      $t->hisData()->attack(15);
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="353">
    <name>Glacial temple</name>
    <rarity>Uncommon</rarity>
    <modes>2</modes>
    <level>3</level>
    <effect><![CDATA[Magic: -1<br />Mode1:<br />Quarry: +1<br />Mode2:<br />Dungeon: +1]]></effect>
    <code><![CDATA[
    $t->myData()->addMagic(-1);
    if ($t->mode() == 1) {
      $t->myData()->addQuarry(1);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addDungeons(1);
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="354">
    <name>Sorcerer's outpost</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>10</bricks>
      <gems>10</gems>
    </cost>
    <level>7</level>
    <effect><![CDATA[Tower: +9<br />Wall: +15<br />If #<b>Legend</b> in hand > 0<br />Magic: +1]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(9)->addWall(15);
    if ($t->keywordCount($t->myData()->Hand, 'Legend') > 0) {
      $t->myData()->addMagic(1);
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="355">
    <name>Witcher</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Players discard all keyword cards<br />Players suffer 7 damage for each card they discarded]]></effect>
    <code><![CDATA[
    $j = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->hasKeyword('any') && $i != $t->cardPos()) {
        $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardRandom'));
        $j++;
      }
    }
    $t->myData()->attack($j * 7);
    $j = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->hisData()->Hand[$i])->hasKeyword('any')) {
        $t->setCard('his', $i, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $i, 'drawCardRandom'));
        $j++;
      }
    }
    $t->hisData()->attack($j * 7);
]]></code>
    <created>2008-02-12</created>
    <modified>2008-02-12</modified>
  </card>
  <card id="356">
    <name>Abyssal viper</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <level>4</level>
    <keywords>Beast</keywords>
    <effect><![CDATA[If targeting self, gain recruits cost of the matching card (max 10), else replace a card in hand with self]]></effect>
    <code><![CDATA[
    if ($t->mode() == $t->cardPos()) {
      $t->myData()->addRecruits(min($t->getCard($t->hisData()->Hand[$t->cardPos()])->getResources('Recruits'), 10));
    }
    else {
      $t->replaceCard('my', $t->mode(), $t->card()->id());
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="357">
    <name>Warlock</name>
    <rarity>Common</rarity>
    <cost>
      <gems>6</gems>
      <recruits>6</recruits>
    </cost>
    <modes>2</modes>
    <level>8</level>
    <keywords>Mage,Undead</keywords>
    <effect><![CDATA[Tower: +2<br />Wall: +2<br />Mode1:<br />Gems: +6<br />Mode2:<br />Recruits: +6]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(2)->addWall(2);
    if ($t->mode() == 1) {
      $t->myData()->addGems(6);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addRecruits(6);
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="358">
    <name>Sandworm</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>18</bricks>
      <recruits>18</recruits>
    </cost>
    <level>3</level>
    <keywords>Siege</keywords>
    <effect><![CDATA[Enemy tower: -16<br />Enemy wall: -20]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-16)->addWall(-20);]]></code>
    <created>2008-02-12</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="359">
    <name>Determined defense</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>8</bricks>
      <recruits>2</recruits>
    </cost>
    <level>0</level>
    <effect><![CDATA[Wall: +10<br />If #<b>Charge</b> in opponent's hand > 0 or #<b>Enduring</b> in hand > 0<br />Wall: +8]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Enduring') + $t->keywordCount($t->hisData()->Hand, 'Charge');
    $t->myData()->addWall(($tmp > 0) ? 18 : 10);
]]></code>
    <created>2008-02-12</created>
    <modified>2010-10-11</modified>
  </card>
  <card id="360">
    <name>Wildfire gem</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>3</level>
    <keywords>Flare blitz</keywords>
    <effect><![CDATA[Gems: +3]]></effect>
    <code><![CDATA[$t->myData()->addGems(3);]]></code>
    <created>2008-07-30</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="361">
    <name>Devilkin</name>
    <rarity>Common</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>6</level>
    <keywords>Burning,Aria</keywords>
    <effect><![CDATA[Attack: 5<br />If last card played was <b>Burning</b> or a <b>Mage</b><br />Enemy stock: -3]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(5);
    if (($t->myLastCard()->hasKeyword('Burning') || $t->myLastCard()->hasKeyword('Mage')) && $t->myLastAction() == 'play') {
      $t->hisData()->addStock(-3);
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="362">
    <name>Petrified minotaur</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>7</bricks>
      <recruits>5</recruits>
    </cost>
    <level>0</level>
    <keywords>Beast,Unliving</keywords>
    <effect><![CDATA[Wall: +5<br />Enemy wall: -5<br />Attack: 5]]></effect>
    <code><![CDATA[$t->myData()->addWall(5); $t->hisData()->addWall(-5)->attack(5);]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="363">
    <name>Supply units</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Discard lowest recruits cost lowest rarity <b>Barbarian</b> or <b>Soldier</b> from hand to gain<br />Stock: +3]]></effect>
    <code><![CDATA[
    $min = 1000;
    $storage = $min_array = ['Common' => array(), 'Uncommon' => array(), 'Rare' => array()];
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->myData()->Hand[$i]);
      $rarity = $cur_card->getRarity();
      if ($i != $t->cardPos() && ($cur_card->hasKeyword('Barbarian') || $cur_card->hasKeyword('Soldier'))) {
        $recruits_cost = $cur_card->getResources('Recruits');
        $storage[$rarity][$i] = $recruits_cost;
        $min = min($recruits_cost, $min);
      }
    }
    if ((count($storage['Common']) + count($storage['Uncommon']) + count($storage['Rare'])) > 0) {
      foreach ($storage as $rarity => $rarity_cards) {
        foreach ($rarity_cards as $c_pos => $c_cost) {
          if ($c_cost == $min) {
            $min_array[$rarity][] = $c_pos;
          }
        }
      }

      shuffle($min_array['Common']);
      shuffle($min_array['Uncommon']);
      shuffle($min_array['Rare']);
      $min_array = array_merge($min_array['Common'], $min_array['Uncommon'], $min_array['Rare']);
      $discarded_pos = array_shift($min_array);
      $t->setCard('my', $discarded_pos, $t->drawCard($t->myDeck(), $t->myData()->Hand, $discarded_pos, 'drawCardRandom'));
      $t->myData()->addStock(3);
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="364">
    <name>Judge</name>
    <rarity>Common</rarity>
    <level>10</level>
    <effect><![CDATA[If opponent lowered your stock last round he loses twice the amount of lost stock (max 8)<br />No effect on Judge]]></effect>
    <code><![CDATA[
    if (($t->myChange('Bricks') < 0 || $t->myChange('Gems') < 0 || $t->myChange('Recruits') < 0) && $t->hisLastCard()->id() != 364) {
      $t->hisData()
        ->addBricks(min(0, max(-8, 2 * $t->myChange('Bricks'))))
        ->addGems(min(0, max(-8, 2 * $t->myChange('Gems'))))
        ->addRecruits(min(0, max(-8, 2 * $t->myChange('Recruits'))));
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="365">
    <name>Infiltrator</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <modes>2</modes>
    <level>5</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Mode1:<br />Enemy tower: -5<br />Mode2:<br />Recruits: +4<br />Enemy recruits: -6]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->hisData()->addTower(-5);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addRecruits(4);
      $t->hisData()->addRecruits(-6);
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="366">
    <name>Graceful charity</name>
    <rarity>Common</rarity>
    <level>10</level>
    <keywords>Holy</keywords>
    <effect><![CDATA[If opponent lowered your stock last round you regain lost stock (max 6)]]></effect>
    <code><![CDATA[
    if ($t->myChange('Bricks') < 0 || $t->myChange('Gems') < 0 || $t->myChange('Recruits') < 0) {
      $t->myData()
        ->addBricks(-min(0, max(-6, $t->myChange('Bricks'))))
        ->addGems(-min(0, max(-6, $t->myChange('Gems'))))
        ->addRecruits(-min(0, max(-6, $t->myChange('Recruits'))));
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="367">
    <name>Light infantry</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>5</level>
    <keywords>Soldier</keywords>
    <effect><![CDATA[If #<b>Charge</b> in opponent's hand > 0<br />Attack: 4<br />else<br />Attack: 10]]></effect>
    <code><![CDATA[$t->hisData()->attack((($t->keywordCount($t->hisData()->Hand, 'Charge') > 0) ? 4 : 10));]]></code>
    <created>2008-07-30</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="368">
    <name>Goblin saboteur</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>7</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 4<br />If opponent raised his wall by more than 8 last round<br />Enemy wall: -12]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(4);
    if ($t->hisChange('Wall') > 8) {
      $t->hisData()->addWall(-12);
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="369">
    <name>Keeper of souls</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>16</gems>
      <recruits>10</recruits>
    </cost>
    <level>9</level>
    <keywords>Beast,Burning</keywords>
    <effect><![CDATA[Attack: 13 + 2N<br />Recruits: + N<br />N = #<b>Burning</b> + #<b>Beast</b> in game]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Beast') + $t->keywordCount($t->myData()->Hand, 'Burning') + $t->keywordCount($t->hisData()->Hand, 'Beast') + $t->keywordCount($t->hisData()->Hand, 'Burning');
    $t->hisData()->attack(13 + 2 * $tmp);
    $t->myData()->addRecruits($tmp);
]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="370">
    <name>Dragon patrol</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>16</gems>
      <recruits>16</recruits>
    </cost>
    <level>9</level>
    <keywords>Dragon,Soldier</keywords>
    <effect><![CDATA[Attack: 35<br />If #<b>Dragon</b> in hand > 1<br />Gems prod x2]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(35);
    if ($t->keywordCount($t->myData()->Hand, 'Dragon') > 1) {
      $t->production()->multiplyGems(2);
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="371">
    <name>Frost unicorn</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>32</gems>
    </cost>
    <level>10</level>
    <keywords>Legend</keywords>
    <effect><![CDATA[Attack: 35<br />If #<b>Legend</b> in hand > 1 and #<b>Mage</b> in hand > 0<br />Gems: +20<br />Magic: +1]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(35);
    if ($t->keywordCount($t->myData()->Hand, 'Legend') > 1 && $t->keywordCount($t->myData()->Hand, 'Mage') > 0) {
      $t->myData()->addMagic(1)->addGems(20);
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="372">
    <name>Corpses behemoth</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>22</gems>
      <recruits>22</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Discard all <b>Undead</b> from hand except the selected card<br />Attack: 9N<br />N = #discarded cards]]></effect>
    <code><![CDATA[
    $tmp = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->hasKeyword('Undead') && $i != $t->mode() && $i != $t->cardPos()) {
        $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardRandom'));
        $tmp++;
      }
    }
    $t->hisData()->attack(9 * $tmp);
]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="373">
    <name>Sphinx</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>16</bricks>
      <gems>12</gems>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Discard a card from opponent's hand<br />If #<b>Unliving</b> in hand > 3<br />Gain half cost of the discarded card (max 20)]]></effect>
    <code><![CDATA[
    if ($t->keywordCount($t->myData()->Hand, 'Unliving') > 3) {
      $hisCard = $t->getCard($t->hisData()->Hand[$t->mode()]);
      $t->myData()
        ->addBricks(min(round($hisCard->getResources('Bricks') / 2) , 20))
        ->addGems(min(round($hisCard->getResources('Gems') / 2) , 20))
        ->addRecruits(min(round($hisCard->getResources('Recruits') / 2) , 20));
    }
    $t->setCard('his', $t->mode(), $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $t->mode(), 'drawCardDifferent'));
]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="374">
    <name>Chain lightning</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>16</gems>
    </cost>
    <level>9</level>
    <keywords>Destruction,Nature</keywords>
    <effect><![CDATA[Enemy tower: -11<br />If last card played was a <b>Mage</b><br />Enemy stock: -5]]></effect>
    <code><![CDATA[
    $t->hisData()->addTower(-11);
    if ($t->myLastCard()->hasKeyword('Mage') && $t->myLastAction() == 'play') {
      $t->hisData()->addStock(-5);
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="375">
    <name>Stilshrine of Miriam</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>13</bricks>
      <gems>12</gems>
    </cost>
    <level>5</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Tower: +7<br />Wall: +11<br />Production x3]]></effect>
    <code><![CDATA[$t->myData()->addTower(7)->addWall(11); $t->production()->multiply(3);]]></code>
    <created>2008-07-30</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="376">
    <name>Imperial griffin</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>30</recruits>
    </cost>
    <level>8</level>
    <keywords>Beast,Soldier</keywords>
    <effect><![CDATA[Attack: 30<br />If #<b>Beast</b> in hand > 1<br />Recruits: +12]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(30);
    if ($t->keywordCount($t->myData()->Hand, 'Beast') > 1) {
      $t->myData()->addRecruits(12);
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="377">
    <name>Mountain king</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>14</gems>
      <recruits>16</recruits>
    </cost>
    <level>6</level>
    <keywords>Runic,Durable</keywords>
    <effect><![CDATA[Attack: 24<br />Negates the negative effect of opponent's last round on tower and wall]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(24);
    $t->myData()->addTower(-min(0, $t->myChange('Tower')))->addWall(-min(0, $t->myChange('Wall')));
]]></code>
    <created>2008-07-30</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="378">
    <name>Ice revenant</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>28</gems>
      <recruits>28</recruits>
    </cost>
    <level>7</level>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 60<br />If last card played was summoning or replacing <b>Undead</b> support card<br />Attack: 45]]></effect>
    <code><![CDATA[
    $bonus = false;
    $target_cards = array_merge($t->getList(['advanced'=>"Summons", 'support'=>'Undead']), $t->getList(['advanced'=>'Replace ', 'support'=>'Undead']));
    if (in_array($t->myData()->LastCard[$t->myLastCardIndex()], $target_cards) && $t->myLastAction() == 'play') {
      $bonus = true;
    }
    $t->hisData()->attack(60 + (($bonus) ? 45 : 0));
]]></code>
    <created>2008-07-30</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="379">
    <name>Castle beyond looking glass</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>20</bricks>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <level>2</level>
    <effect><![CDATA[Tower: = Max tower / 2<br />Wall: = Max wall / 2<br />Stock: +5]]></effect>
    <code><![CDATA[
    $t->myData()->setTower(round($t->config('max_tower') / 2))->setWall(round($t->config('max_wall') / 2));
    $t->myData()->addStock(5);
]]></code>
    <created>2008-07-30</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="380">
    <name>Order of the White Lotus</name>
    <rarity>Rare</rarity>
    <level>10</level>
    <effect><![CDATA[If not New<br />Balances (average) both players' tower, wall, facilities and stock]]></effect>
    <code><![CDATA[
    if (!$t->isMyNew($t->cardPos())) {
      $temp_array = ['Tower', 'Wall', 'Quarry', 'Magic', 'Dungeons', 'Bricks', 'Gems', 'Recruits'];
      foreach ($temp_array as $attribute) {
        $t->myData()->$attribute = $t->hisData()->$attribute = round(($t->myData()->$attribute + $t->hisData()->$attribute) / 2);
      }
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="381">
    <name>Pile of ashes</name>
    <rarity>Common</rarity>
    <level>4</level>
    <keywords>Cursed,Forbidden</keywords>
    <effect><![CDATA[Gain 1 random resource]]></effect>
    <code><![CDATA[$t->myData()->addRandomResources(1);]]></code>
    <created>2008-12-24</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="382">
    <name>Priest</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>7</level>
    <keywords>Holy,Banish</keywords>
    <effect><![CDATA[If #<b>Holy</b> in hand > 1<br />Gems: +3<br />If #<b>Soldier</b> in hand > 1<br />Recruits: +3]]></effect>
    <code><![CDATA[
      if ($t->keywordCount($t->myData()->Hand, 'Holy') > 1) {
        $t->myData()->addGems(3);
      }
      if ($t->keywordCount($t->myData()->Hand, 'Soldier') > 1) {
        $t->myData()->addRecruits(3);
      }
]]></code>
    <created>2008-12-24</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="383">
    <name>Mountain of faith</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>12</bricks>
      <gems>12</gems>
      <recruits>12</recruits>
    </cost>
    <level>5</level>
    <effect><![CDATA[Replace your hand with [card=503/], [card=27/], [card=85/], [card=90/], [card=175/], [card=473/], [card=137/] and [card=44/]]]></effect>
    <code><![CDATA[$t->setHandShuffled('my', [503, 27, 85, 90, 175, 473, 137, 44]); $t->noNextCard();]]></code>
    <created>2008-12-24</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="384">
    <name>Last order</name>
    <rarity>Uncommon</rarity>
    <modes>3</modes>
    <level>9</level>
    <effect><![CDATA[Evoke [card=227/], [card=226/] or [card=225/]]]></effect>
    <code><![CDATA[$summons = [1 => 227, 226, 225]; $t->nextCard($summons[$t->mode()], true);]]></code>
    <created>2008-12-24</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="385">
    <name>Sharpshooters</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>13</recruits>
    </cost>
    <modes>2</modes>
    <level>10</level>
    <keywords>Soldier,Far sight</keywords>
    <effect><![CDATA[Mode1:<br />Enemy recruits: -15<br />Mode2:<br />Enemy tower: -10]]></effect>
    <code><![CDATA[if ($t->mode() == 1) { $t->hisData()->addRecruits(-15); } elseif ($t->mode() == 2) { $t->hisData()->addTower(-10); }]]></code>
    <created>2008-12-24</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="386">
    <name>Sheath your swords</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Replace all non-rare recruits or mixed cost attack cards with [card=263/], [card=273/], [card=23/] or [card=660/]]]></effect>
    <code><![CDATA[
    $green_c = $t->getList(['rarity'=>'Common', 'cost'=>'Green', 'advanced'=>'Attack:']);
    $green_u = $t->getList(['rarity'=>'Uncommon', 'cost'=>'Green', 'advanced'=>'Attack:']);
    $mixed_c = $t->getList(['rarity'=>'Common', 'cost'=>"Mixed", 'advanced'=>'Attack:']);
    $mixed_u = $t->getList(['rarity'=>'Uncommon', 'cost'=>"Mixed", 'advanced'=>'Attack:']);
    $attack_cards = array_unique(array_merge($green_c, $green_u, $mixed_c, $mixed_u));
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if (in_array($t->myData()->Hand[$i], $attack_cards) && $i != $t->cardPos()) {
        $t->setCard('my', $i, $t->drawCard([263, 273, 23, 660], $t->myData()->Hand, $i, 'drawCardList'));
      }
    }
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if (in_array($t->hisData()->Hand[$i], $attack_cards)) {
        $t->setCard('his', $i, $t->drawCard([263, 273, 23, 660], $t->hisData()->Hand, $i, 'drawCardList'));
      }
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="387">
    <name>Corrosion cloud</name>
    <rarity>Common</rarity>
    <cost>
      <gems>4</gems>
    </cost>
    <level>0</level>
    <keywords>Destruction,Aria</keywords>
    <effect><![CDATA[If Enemy wall = 0<br />Enemy stock: -4<br />else<br />Enemy wall: -9]]></effect>
    <code><![CDATA[
    if ($t->hisData()->Wall <= 0) {
      $t->hisData()->addStock(-4);
    }
    else {
      $t->hisData()->addWall(-9);
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="388">
    <name>Greed is good</name>
    <rarity>Uncommon</rarity>
    <level>10</level>
    <effect><![CDATA[Player(s) with highest stock (total sum) gains 25% of his current stock]]></effect>
    <code><![CDATA[
    $my_res = $t->myData()->Bricks + $t->myData()->Gems + $t->myData()->Recruits;
    $his_res = $t->hisData()->Bricks + $t->hisData()->Gems + $t->hisData()->Recruits;
    if ($my_res >= $his_res) {
      $t->myData()
        ->addBricks(round($t->myData()->Bricks * 0.25))
        ->addGems(round($t->myData()->Gems * 0.25))
        ->addRecruits(round($t->myData()->Recruits * 0.25));
    }
    if ($my_res <= $his_res) {
      $t->hisData()
        ->addBricks(round($t->hisData()->Bricks * 0.25))
        ->addGems(round($t->hisData()->Gems * 0.25))
        ->addRecruits(round($t->hisData()->Recruits * 0.25));
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="389">
    <name>Iron bank</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>10</bricks>
      <recruits>4</recruits>
    </cost>
    <level>8</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Gain 25% of your stock (max 25 of each)]]></effect>
    <code><![CDATA[
    $t->myData()
      ->addBricks(min(round($t->myData()->Bricks * 0.25), 25))
      ->addGems(min(round($t->myData()->Gems * 0.25), 25))
      ->addRecruits(min(round($t->myData()->Recruits * 0.25), 25));
]]></code>
    <created>2008-12-24</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="390">
    <name>Anomaly sphere</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>10</gems>
    </cost>
    <level>9</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Negates the positive effect of opponent's last round on his tower, wall, facilities and stock]]></effect>
    <code><![CDATA[
    $t->hisData()
      ->addTower(-max(0, $t->hisChange('Tower')))
      ->addWall(-max(0, $t->hisChange('Wall')))
      ->addQuarry(-max(0, $t->hisChange('Quarry')))
      ->addMagic(-max(0, $t->hisChange('Magic')))
      ->addDungeons(-max(0, $t->hisChange('Dungeons')))
      ->addBricks(-max(0, $t->hisChange('Bricks')))
      ->addGems(-max(0, $t->hisChange('Gems')))
      ->addRecruits(-max(0, $t->hisChange('Recruits')));
]]></code>
    <created>2008-12-24</created>
    <modified>2013-03-31</modified>
  </card>
  <card id="391">
    <name>Road to Valhalla</name>
    <rarity>Common</rarity>
    <level>4</level>
    <effect><![CDATA[Tower: -10<br />Wall: +20]]></effect>
    <code><![CDATA[$t->myData()->addTower(-10)->addWall(20);]]></code>
    <created>2008-12-24</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="392">
    <name>Road to Tartarus</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <effect><![CDATA[Replace a card in hand with [card=313/]]]></effect>
    <code><![CDATA[$t->setCard('my', $t->mode(), 313, ['reveal' => true]); if ($t->mode() == $t->cardPos()) { $t->noNextCard(); }]]></code>
    <created>2008-12-24</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="393">
    <name>Druid</name>
    <rarity>Common</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <modes>2</modes>
    <level>9</level>
    <keywords>Alliance,Mage</keywords>
    <effect><![CDATA[Attack: 5<br />Summons<br />Mode1:<br /><b>Nature</b><br />Mode2:<br /><b>Restoration</b>]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(5);
    $selected = ($t->mode() == 1) ? 'Nature' : 'Restoration';
    $t->nextCard($t->drawCard($t->getList(['keyword'=>$selected]), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2008-12-24</created>
    <modified>2013-03-31</modified>
  </card>
  <card id="394">
    <name>Ranger</name>
    <rarity>Common</rarity>
    <cost>
      <gems>6</gems>
      <recruits>4</recruits>
    </cost>
    <modes>8</modes>
    <level>7</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Attack: 7<br />Recruits prod x2<br />Replace a card in hand with <b>Alliance</b>]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(7);
    $t->production()->multiplyRecruits(2);
    $t->setCard('my', $t->mode(), $t->drawCard($t->getList(['keyword'=>'Alliance']), $t->myData()->Hand, $t->mode(), 'drawCardList'));
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="395">
    <name>Frontier outpost</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>6</bricks>
    </cost>
    <level>10</level>
    <effect><![CDATA[If Wall > 7<br />Tower: +10<br />Wall: -7<br />else<br />Wall: +7]]></effect>
    <code><![CDATA[if ($t->myData()->Wall > 7) { $t->myData()->addWall(-7)->addTower(10); } else { $t->myData()->addWall(7); }]]></code>
    <created>2008-12-24</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="396">
    <name>Crystal golem</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <level>9</level>
    <keywords>Holy,Unliving</keywords>
    <effect><![CDATA[Gain N random resources<br />Wall: +2N<br />N = #<b>Holy</b> + #<b>Unliving</b> in hand]]></effect>
    <code><![CDATA[
    $count = $t->keywordCount($t->myData()->Hand, 'Holy') + $t->keywordCount($t->myData()->Hand, 'Unliving');
    $t->myData()->addRandomResources($count)->addWall(2 * $count);
]]></code>
    <created>2008-12-24</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="397">
    <name>Rainbow dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>26</gems>
      <recruits>26</recruits>
    </cost>
    <level>8</level>
    <keywords>Dragon,Legend</keywords>
    <effect><![CDATA[Attack: 8N<br />Stock: +2N<br />N = #different keywords in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->countDistinctKeywords($t->myData()->Hand);
    $t->hisData()->attack($tmp * 8);
    $t->myData()->addStock($tmp * 2);
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="398">
    <name>Shadow unicorn</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>15</gems>
      <recruits>15</recruits>
    </cost>
    <level>5</level>
    <keywords>Legend</keywords>
    <effect><![CDATA[Attack: 25<br />Magic: +1<br />Enemy magic: -1<br />Discard a <b>Mage</b> from hand to gain<br />Gems: +30]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(25)->addMagic(-1); $t->myData()->addMagic(1);
    $storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->hasKeyword('Mage')) {
        $storage[] = $i;
      }
    }
    if (count($storage) > 0) {
      $discarded_pos = $storage[$t->arrayRand($storage)];
      $t->setCard('my', $discarded_pos, $t->drawCard($t->myDeck(), $t->myData()->Hand, $discarded_pos, 'drawCardRandom'));
      $t->myData()->addGems(30);
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="399">
    <name>Wizard's cottage</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>3</bricks>
      <gems>1</gems>
    </cost>
    <modes>8</modes>
    <level>7</level>
    <effect><![CDATA[Tower: +2<br />Wall: +3<br />Replace a card in hand with non-rare <b>Mage</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(2)->addWall(3);
    $common = $t->getList(['rarity'=>'Common', 'keyword'=>'Mage']);
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Mage']);
    $t->setCard('my', $t->mode(), $t->drawCard(array_merge($common, $uncommon), $t->myData()->Hand, $t->mode(), 'drawCardList'));
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2013-03-31</modified>
  </card>
  <card id="400">
    <name>Mask of the phantasm</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>8</gems>
    </cost>
    <modes>8</modes>
    <level>8</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Summons selected card in hand]]></effect>
    <code><![CDATA[if ($t->mode() != $t->cardPos()) { $t->nextCard($t->myData()->Hand[$t->mode()]); }]]></code>
    <created>2008-12-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="401">
    <name>Invocation</name>
    <rarity>Rare</rarity>
    <level>8</level>
    <effect><![CDATA[Tower: +N<br />Wall: +N<br />N = #Bricks / 5<br />Enemy stock: -M<br />M = #Gems / 5]]></effect>
    <code><![CDATA[
    $tmp = round($t->myData()->Bricks / 5);
    $t->myData()->addTower($tmp)->addWall($tmp);
    $t->hisData()->addStock(-round($t->myData()->Gems / 5));
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="402">
    <name>Abyssal scavenger</name>
    <rarity>Common</rarity>
    <level>9</level>
    <keywords>Demonic,Far sight</keywords>
    <effect><![CDATA[Returns 1/3 of cost of opponent's last card (max 4)]]></effect>
    <code><![CDATA[
    $tmp_card = $t->hisLastCard();
    $t->myData()
      ->addBricks(min(round($tmp_card->getResources('Bricks') / 3), 4))
      ->addGems(min(round($tmp_card->getResources('Gems') / 3), 4))
      ->addRecruits(min(round($tmp_card->getResources('Recruits') / 3), 4));
]]></code>
    <created>2008-12-24</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="403">
    <name>Dark legion</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>40</recruits>
    </cost>
    <level>8</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Recruits: +80<br />Replace your hand with <b>Horde</b> cards (can't summon self)]]></effect>
    <code><![CDATA[
    $t->myData()->addRecruits(80);
    $horde = $t->getList(['keyword'=>'Horde']);
    $horde = array_diff($horde, [$t->card()->id()]);
    $t->setHand('my', $t->drawHandList($horde));
    $t->noNextCard();
]]></code>
    <created>2008-12-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="404">
    <name>Thor</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>12</gems>
      <recruits>21</recruits>
    </cost>
    <level>6</level>
    <keywords>Barbarian,Mage,Swift</keywords>
    <effect><![CDATA[Attack: 20<br />Enemy tower: -15<br />Summons [card=374/]]]></effect>
    <code><![CDATA[$t->hisData()->attack(20)->addTower(-15); $t->nextCard(374);]]></code>
    <created>2008-12-24</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="405">
    <name>Mountain sentry</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>4</bricks>
      <gems>4</gems>
      <recruits>4</recruits>
    </cost>
    <level>8</level>
    <keywords>Runic,Durable,Skirmisher</keywords>
    <effect><![CDATA[Production x0<br />Negates the negative effect of opponent's last round on wall (max 20)]]></effect>
    <code><![CDATA[$t->production()->multiply(0); $t->myData()->addWall(-min(0, max(-20, $t->myChange('Wall'))));]]></code>
    <created>2008-12-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="406">
    <name>War elephant</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>38</recruits>
    </cost>
    <level>7</level>
    <keywords>Barbarian,Beast,Frenzy</keywords>
    <effect><![CDATA[Attack: 35<br />Recruits prod x2]]></effect>
    <code><![CDATA[$t->hisData()->attack(35); $t->production()->multiplyRecruits(2);]]></code>
    <created>2008-12-24</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="407">
    <name>Dwarven fortress</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>32</bricks>
    </cost>
    <level>10</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Tower: = 40<br />Wall: +50<br />If last card played was non-common <b>Runic</b><br />Wall: = Max wall]]></effect>
    <code><![CDATA[
    $t->myData()->setTower(40);
    if ($t->myLastCard()->hasKeyword('Runic') && $t->myLastAction() == 'play' && $t->myLastCard()->getRarity() != 'Common') {
      $t->myData()->setWall($t->config('max_wall'));
    }
    else {
      $t->myData()->addWall(50);
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="408">
    <name>Bounty hunter</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>14</recruits>
    </cost>
    <level>9</level>
    <keywords>Barbarian,Banish</keywords>
    <effect><![CDATA[Attack: 13<br />Discard a <b>Legend</b> from opponent's hand to gain<br />Enemy magic: -1]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(13);
    $storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->hisData()->Hand[$i])->hasKeyword('Legend')) {
        $storage[] = $i;
      }
    }
    if (count($storage) > 0) {
      $discarded_pos = $storage[$t->arrayRand($storage)];
      $t->setCard('his', $discarded_pos, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $discarded_pos, 'drawCardDifferent'));
      $t->hisData()->addMagic(-1);
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="409">
    <name>Monster slayer</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>15</recruits>
    </cost>
    <level>10</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Attack: 16<br />Discard highest rarity <b>Unliving</b>, <b>Undead</b> or <b>Dragon</b> from opponent's hand]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(16);
    $storage = ['Common' => array(), 'Uncommon' => array(), 'Rare' => array()];
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->hisData()->Hand[$i]);
      $rarity = $cur_card->getRarity();
      if ($cur_card->hasKeyword('Dragon') || $cur_card->hasKeyword('Undead') || $cur_card->hasKeyword('Unliving')) {
        $storage[$rarity][] = $i;
      }
    }
    if ((count($storage['Common']) + count($storage['Uncommon']) + count($storage['Rare'])) > 0) {
      shuffle($storage['Common']);
      shuffle($storage['Uncommon']);
      shuffle($storage['Rare']);
      $storage_temp = array_merge($storage['Common'], $storage['Uncommon'], $storage['Rare']);
      $discarded_pos = array_pop($storage_temp);
      $t->setCard('his', $discarded_pos, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $discarded_pos, 'drawCardDifferent'));
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="410">
    <name>Shadow fairy</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>8</level>
    <keywords>Holy,Far sight</keywords>
    <effect><![CDATA[If #<b>Holy</b> in opponent's hand > 0<br />Enemy tower: -1<br />else<br />Steals 1 stock]]></effect>
    <code><![CDATA[
    if ($t->keywordCount($t->hisData()->Hand, 'Holy') > 0) {
      $t->hisData()->addTower(-1);
    }
    else {
      $t->stealStock('my', 1);
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="411">
    <name>Wolf spirit</name>
    <rarity>Common</rarity>
    <cost>
      <gems>4</gems>
    </cost>
    <level>8</level>
    <keywords>Beast,Illusion</keywords>
    <effect><![CDATA[Attack: 5<br />If last card played was a <b>Beast</b><br />Recruits: +3]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(5);
    if ($t->myLastCard()->hasKeyword('Beast') && $t->myLastAction() == 'play') {
      $t->myData()->addRecruits(3);
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="412">
    <name>Hungry dead</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <level>6</level>
    <keywords>Brigand,Undead,Durable,Enduring (12)</keywords>
    <effect><![CDATA[Opponent loses 10 random resources]]></effect>
    <code><![CDATA[$t->hisData()->addRandomResources(-10);]]></code>
    <created>2009-04-11</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="413">
    <name>Colonialism</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>3</bricks>
      <recruits>2</recruits>
    </cost>
    <level>7</level>
    <effect><![CDATA[If Recruits < 11<br />Recruits x2<br />else<br />Recruits: +6]]></effect>
    <code><![CDATA[
    if ($t->myData()->Recruits < 11) {
      $t->myData()->setRecruits(2 * $t->myData()->Recruits);
    }
    else {
      $t->myData()->addRecruits(6);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="414">
    <name>Mediator</name>
    <rarity>Uncommon</rarity>
    <modes>8</modes>
    <level>6</level>
    <effect><![CDATA[Discard a card from opponent's hand and pay half its cost<br />If not enough stock<br />Highest facility: -1]]></effect>
    <code><![CDATA[
    $dis_card = $t->getCard($t->hisData()->Hand[$t->mode()]);
    $t->setCard('his', $t->mode(), $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $t->mode(), 'drawCardDifferent'));
    $resources = ['Quarry' => 'Bricks', 'Magic' => 'Gems', 'Dungeons' => 'Recruits'];
    foreach ($resources as $facility => $resource) {
      $t->myData()->$resource-= round($dis_card->getResources($resource) / 2);
    }
    foreach ($resources as $facility => $resource) {
      if ($t->myData()->$resource < 0) {
        $t->myData()->addHighestFacility(-1);
        break;
      }
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="415">
    <name>Goblin intruder</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Replace a non-rare highest rarity card in opponent's hand with Goblin intruder]]></effect>
    <code><![CDATA[
    $storage = ['Common' => array(), 'Uncommon' => array()];
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->hisData()->Hand[$i]);
      $rarity = $cur_card->getRarity();
      if ($rarity != 'Rare' && $cur_card->id() != 415) {
        $storage[$rarity][] = $i;
      }
    }
    if ((count($storage['Common']) + count($storage['Uncommon'])) > 0) {
      shuffle($storage['Common']);
      shuffle($storage['Uncommon']);
      $storage_temp = array_merge($storage['Common'], $storage['Uncommon']);
      $discarded_pos = array_pop($storage_temp);
      $t->setCard('his', $discarded_pos, 415, ['reveal' => true]);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="416">
    <name>Perfect shot</name>
    <rarity>Common</rarity>
    <cost>
      <gems>7</gems>
    </cost>
    <level>7</level>
    <keywords>Destruction,Siege</keywords>
    <effect><![CDATA[If New<br />Enemy tower: -6<br />else<br />Attack: 6]]></effect>
    <code><![CDATA[
    if ($t->isMyNew($t->cardPos())) {
      $t->hisData()->addTower(-6);
    }
    else {
      $t->hisData()->attack(6);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="417">
    <name>New development</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <level>6</level>
    <effect><![CDATA[Tower: +7<br />If New<br />Tower: +3<br />Bricks: +3]]></effect>
    <code><![CDATA[
    if ($t->isMyNew($t->cardPos())) {
      $t->myData()->addTower(10)->addBricks(3);
    }
    else {
      $t->myData()->addTower(7);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="418">
    <name>Power surge</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>4</level>
    <effect><![CDATA[Tower: -8<br />If New<br />Magic: +1<br />else<br />Gems: +12]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(-8);
    if ($t->isMyNew($t->cardPos())) {
      $t->myData()->addMagic(1);
    }
    else {
      $t->myData()->addGems(12);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="419">
    <name>Elementalist</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>11</gems>
    </cost>
    <level>10</level>
    <keywords>Mage,Swift,Banish</keywords>
    <effect><![CDATA[Players discard up to 6 <b>Unliving</b> cards<br />Players lose 10 bricks and 1 quarry for each card they discarded above 4]]></effect>
    <code><![CDATA[
    $my_temp = $his_temp = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->hasKeyword('Unliving')) {
        $my_temp[$i] = $i;
      }
      if ($t->getCard($t->hisData()->Hand[$i])->hasKeyword('Unliving')) {
        $his_temp[$i] = $i;
      }
    }
    shuffle($my_temp); shuffle($his_temp);
    if (count($my_temp) > 0) {
      for ($i = 0; $i < count($my_temp) && $i < 6; $i++) {
        $t->setCard('my', $my_temp[$i], $t->drawCard($t->myDeck(), $t->myData()->Hand, $my_temp[$i], 'drawCardRandom'));
      }
      $amount = max(($i - 4), 0); $t->myData()->addBricks(-$amount * 10)->addQuarry(-$amount);
    }
    if (count($his_temp) > 0) {
      for ($j = 0; $j < count($his_temp) && $j < 6; $j++) {
        $t->setCard('his', $his_temp[$j], $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $his_temp[$j], 'drawCardRandom'));
      }
      $amount = max(($j - 4), 0); $t->hisData()->addBricks(-$amount * 10)->addQuarry(-$amount);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="420">
    <name>Shrine</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
      <gems>1</gems>
    </cost>
    <level>10</level>
    <effect><![CDATA[If Wall is divisible by 5<br />Wall: +9<br />Gems: +4<br />else<br />Wall: +4]]></effect>
    <code><![CDATA[
    if (($t->myData()->Wall % 5) == 0) {
      $t->myData()->addWall(9)->addGems(4);
    }
    else {
      $t->myData()->addWall(4);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="421">
    <name>Gleaners</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Gain resources equal to opponent's lowest and highest facility prod]]></effect>
    <code><![CDATA[
    $maximum = max($t->hisData()->Quarry, $t->hisData()->Magic, $t->hisData()->Dungeons);
    $minimum = min($t->hisData()->Quarry, $t->hisData()->Magic, $t->hisData()->Dungeons);
    $facilities = ['Quarry' => 'Bricks', 'Magic' => 'Gems', 'Dungeons' => 'Recruits'];
    $top = $bottom = array();
    foreach ($facilities as $facility => $resource) {
      if ($t->hisData()->$facility == $maximum) {
        $top[] = $facility;
      }
      if ($t->hisData()->$facility == $minimum) {
        $bottom[] = $facility;
      }
    }
    if (count($top) == 3) {
      shuffle($top);
      $chosen_facility_max = array_pop($top);
      $chosen_facility_min = array_pop($top);
    }
    else {
      $chosen_facility_max = $top[$t->arrayRand($top)];
      $chosen_facility_min = $bottom[$t->arrayRand($bottom)];
    }
    $facility_name_max = $facilities[$chosen_facility_max];
    $facility_name_min = $facilities[$chosen_facility_min];
    $t->myData()->$facility_name_max+= $t->hisData()->$chosen_facility_max;
    $t->myData()->$facility_name_min+= $t->hisData()->$chosen_facility_min;
]]></code>
    <created>2009-04-11</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="422">
    <name>Death prophet</name>
    <rarity>Common</rarity>
    <level>9</level>
    <effect><![CDATA[Production x0<br />Summons [card=15/], [card=80/] or Death prophet]]></effect>
    <code><![CDATA[$t->production()->multiply(0); $t->nextCard($t->drawCard([15, 80, 422], $t->myData()->Hand, $t->cardPos(), 'drawCardList'));]]></code>
    <created>2009-04-11</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="423">
    <name>Pirate ghostship</name>
    <rarity>Common</rarity>
    <cost>
      <gems>5</gems>
    </cost>
    <level>9</level>
    <keywords>Brigand,Undead</keywords>
    <effect><![CDATA[Enemy stock: -2<br />If #<b>Brigand</b> in hand + #<b>Undead</b> in hand > 3<br />Stock: +2]]></effect>
    <code><![CDATA[
    $t->hisData()->addStock(-2);
    if (($t->keywordCount($t->myData()->Hand, 'Brigand') + $t->keywordCount($t->myData()->Hand, 'Undead')) > 3) {
      $t->myData()->addStock(2);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="424">
    <name>Corsairs</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>4</gems>
      <recruits>13</recruits>
    </cost>
    <level>9</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Attack: 11<br />Steals resources equal to opponent's normal production<br />Summons a <b>Brigand</b>]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(11);
    $resources = ['Quarry' => 'Bricks', 'Magic' => 'Gems', 'Dungeons' => 'Recruits'];
    foreach ($resources as $facility => $resource) {
      $t->stealResource('my', $resource, $t->hisData()->$facility);
    }
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Brigand']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2009-04-11</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="425">
    <name>Ice queen</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>12</gems>
    </cost>
    <level>10</level>
    <keywords>Cursed</keywords>
    <effect><![CDATA[Discard all <b>Mage</b> cards<br />Players gain 4 gems, 4 tower and 8 wall for each card they discarded]]></effect>
    <code><![CDATA[
    $my_counter = $his_counter = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->hasKeyword('Mage') && $i != $t->cardPos()) {
        $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardRandom'));
        $my_counter++;
      }
      if ($t->getCard($t->hisData()->Hand[$i])->hasKeyword('Mage')) {
        $t->setCard('his', $i, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $i, 'drawCardRandom'));
        $his_counter++;
      }
    }
    $t->myData()->addTower($my_counter * 4)->addWall($my_counter * 8)->addGems($my_counter * 4);
    $t->hisData()->addTower($his_counter * 4)->addWall($his_counter * 8)->addGems($his_counter * 4);
]]></code>
    <created>2009-04-11</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="426">
    <name>Arthoria the Saber</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Legend,Swift,Enduring (10)</keywords>
    <effect><![CDATA[Attack: 30<br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(30);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
    else {
      $t->replaceCard('my', $t->mode(), $t->card()->id());
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2012-01-06</modified>
  </card>
  <card id="427">
    <name>Darkforge</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>18</bricks>
      <gems>9</gems>
    </cost>
    <level>5</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Tower: +7<br />Recruits prod x10]]></effect>
    <code><![CDATA[$t->myData()->addTower(7); $t->production()->multiplyRecruits(10);]]></code>
    <created>2009-04-11</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="428">
    <name>Spectral dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>40</gems>
      <recruits>50</recruits>
    </cost>
    <level>2</level>
    <keywords>Dragon,Undead</keywords>
    <effect><![CDATA[Attack: 150<br />Gems: +20]]></effect>
    <code><![CDATA[$t->hisData()->attack(150); $t->myData()->addGems(20);]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="429">
    <name>Valley of thousand rivers</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>7</level>
    <effect><![CDATA[Player(s) with most <b>Alliance</b>, <b>Legend</b> and <b>Mage</b> gains<br />Lowest facility: +1]]></effect>
    <code><![CDATA[
    $myHand = $t->myData()->Hand;
    $hisHand = $t->hisData()->Hand;
    $myCount = $t->keywordCount($myHand, 'Alliance') + $t->keywordCount($myHand, 'Legend') + $t->keywordCount($myHand, 'Mage');
    $hisCount = $t->keywordCount($hisHand, 'Alliance') + $t->keywordCount($hisHand, 'Legend') + $t->keywordCount($hisHand, 'Mage');
    if ($myCount >= $hisCount) {
      $t->myData()->addLowestFacility(1);
    }
    if ($myCount <= $hisCount) {
      $t->hisData()->addLowestFacility(1);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="430">
    <name>Messenger</name>
    <rarity>Common</rarity>
    <level>10</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Summons an uncommon card not from your deck]]></effect>
    <code><![CDATA[$t->nextCard($t->drawCard(array_diff($t->getList(['rarity'=>'Uncommon']), $t->myDeck()->Uncommon), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));]]></code>
    <created>2009-04-11</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="431">
    <name>Divine intervention</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>10</gems>
    </cost>
    <level>6</level>
    <effect><![CDATA[Player(s) with most <b>Holy</b> in hand gains<br />Tower: +9<br />Wall: +17]]></effect>
    <code><![CDATA[
    $my_count = $t->keywordCount($t->myData()->Hand, 'Holy');
    $his_count = $t->keywordCount($t->hisData()->Hand, 'Holy');
    if ($my_count >= $his_count) {
      $t->myData()->addTower(9)->addWall(17);
    }
    if ($my_count <= $his_count) {
      $t->hisData()->addTower(9)->addWall(17);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="432">
    <name>Fair trade</name>
    <rarity>Uncommon</rarity>
    <level>10</level>
    <effect><![CDATA[Player(s) with lowest stock gains<br />Stock: +15<br />His opponent gains<br />Facilities: +1]]></effect>
    <code><![CDATA[
    $my_count = $t->myData()->Bricks + $t->myData()->Gems + $t->myData()->Recruits;
    $his_count = $t->hisData()->Bricks + $t->hisData()->Gems + $t->hisData()->Recruits;
    if ($my_count >= $his_count) {
      $t->myData()->addFacilities(1);
      $t->hisData()->addStock(15);
    }
    if ($my_count <= $his_count) {
      $t->hisData()->addFacilities(1);
      $t->myData()->addStock(15);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="433">
    <name>Moon priestess</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>9</level>
    <effect><![CDATA[Replace highest and lowest cost card in opponent's hand with [card=487/], [card=583/] or [card=486/]]]></effect>
    <code><![CDATA[
    $low = $high = $costs = array();
    $min = 1000; $max = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_cost = $costs[$i] = $t->getCard($t->hisData()->Hand[$i])->getResources();
      if ($cur_cost < $min) {
        $min = $cur_cost;
      }
      if ($cur_cost > $max) {
        $max = $cur_cost;
      }
    }
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_cost = $costs[$i];
      if ($cur_cost == $min) {
        $low[] = $i;
      }
      if ($cur_cost == $max) {
        $high[] = $i;
      }
    }

    if ($min == $max) {
      shuffle($high);
      $low_dis = array_pop($high);
      $high_dis = array_pop($high);
    }
    else {
      $low_dis = $low[$t->arrayRand($low)];
      $high_dis = $high[$t->arrayRand($high)];
    }
    $storage = [487, 583, 486];
    $chosen = $storage[$t->arrayRand($storage)];
    $storage = array_diff($storage, [$chosen]);
    $t->setCard('his', $low_dis, $chosen);
    $t->setCard('his', $high_dis, $storage[$t->arrayRand($storage)]);
]]></code>
    <created>2009-04-11</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="434">
    <name>Outnumbered and outmatched</name>
    <rarity>Rare</rarity>
    <level>10</level>
    <effect><![CDATA[If Recruits - Enemy recruits > 35<br />Recruits: -35<br />Enemy tower: = 1<br />Enemy wall: = 0]]></effect>
    <code><![CDATA[
    if (($t->myData()->Recruits - $t->hisData()->Recruits) > 35) {
      $t->myData()->addRecruits(-35);
      $t->hisData()->setTower(1)->setWall(0);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="435">
    <name>Alastor flame of heavens</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>25</gems>
    </cost>
    <level>7</level>
    <keywords>Burning,Holy,Banish</keywords>
    <effect><![CDATA[Gems: +50<br />Magic: +1]]></effect>
    <code><![CDATA[$t->myData()->addGems(50)->addMagic(1);]]></code>
    <created>2009-04-11</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="436">
    <name>Watchtower</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>18</bricks>
      <recruits>13</recruits>
    </cost>
    <level>8</level>
    <effect><![CDATA[Tower: +16<br />Enemy tower: -6<br />If #<b>Far sight</b> in hand > 0 and #<b>Siege</b> in hand > 0<br />Enemy tower: -10]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(16);
    if ($t->keywordCount($t->myData()->Hand, 'Far sight') > 0 && $t->keywordCount($t->myData()->Hand, 'Siege') > 0) {
      $t->hisData()->addTower(-16);
    }
    else {
      $t->hisData()->addTower(-6);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="437">
    <name>Battlements</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>7</bricks>
      <recruits>2</recruits>
    </cost>
    <level>6</level>
    <effect><![CDATA[Tower: +7<br />If #<b>Siege</b> in hand > 0<br />Enemy tower: -4]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(7);
    if ($t->keywordCount($t->myData()->Hand, 'Siege') > 0) {
      $t->hisData()->addTower(-4);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="438">
    <name>Phoenix feather</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>6</bricks>
      <gems>6</gems>
      <recruits>6</recruits>
    </cost>
    <level>10</level>
    <keywords>Burning</keywords>
    <effect><![CDATA[If #<b>Burning</b> in hand = 2<br />Summons [card=223/]<br />else<br />Gems: +14]]></effect>
    <code><![CDATA[
    if ($t->keywordCount($t->myData()->Hand, 'Burning') == 2) {
      $t->nextCard(223, true);
    }
    else {
      $t->myData()->addGems(14);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="439">
    <name>Revenge of the fallen</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>9</gems>
    </cost>
    <level>8</level>
    <effect><![CDATA[Player(s) with fewest <b>Brigand</b> or <b>Undead</b> in hand suffers<br />Highest facility: -1]]></effect>
    <code><![CDATA[
    $my_count = $t->keywordCount($t->myData()->Hand, 'Brigand') + $t->keywordCount($t->myData()->Hand, 'Undead');
    $his_count = $t->keywordCount($t->hisData()->Hand, 'Brigand') + $t->keywordCount($t->hisData()->Hand, 'Undead');
    if ($my_count <= $his_count) {
      $t->myData()->addHighestFacility(-1);
    }
    if ($my_count >= $his_count) {
      $t->hisData()->addHighestFacility(-1);
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="440">
    <name>Dragonling</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>2</recruits>
    </cost>
    <level>3</level>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Gems prod x2]]></effect>
    <code><![CDATA[$t->production()->multiplyGems(2);]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="441">
    <name>Troll bridge</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>22</bricks>
    </cost>
    <level>10</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Wall: +15<br />Dungeon: +1<br />If #[card=106/] in hand > 0<br />Attack: 15]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(15)->addDungeons(1);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->myData()->Hand[$i] == 106) {
        $t->hisData()->attack(15);
        break;
      }
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="442">
    <name>Dark forest</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>10</gems>
      <recruits>9</recruits>
    </cost>
    <level>10</level>
    <keywords>Nature</keywords>
    <effect><![CDATA[Wall: +24<br />Gems: +#<b>Nature</b> in hand<br />Recruits: +#<b>Beast</b> in hand]]></effect>
    <code><![CDATA[
    $t->myData()
      ->addWall(24)->addGems($t->keywordCount($t->myData()->Hand, 'Nature'))
      ->addRecruits($t->keywordCount($t->myData()->Hand, 'Beast'));
]]></code>
    <created>2009-07-22</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="443">
    <name>Vulture</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>11</recruits>
    </cost>
    <level>10</level>
    <keywords>Beast,Aria</keywords>
    <effect><![CDATA[Attack: 10<br />If last card was discarded bonus attack based on discarded card rarity (C-8, U-16, R-28)]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(10);
    if ($t->myLastAction() == 'discard') {
      $damage = ['Common' => 8, 'Uncommon' => 16, 'Rare' => 28];
      $t->hisData()->attack($damage[$t->myLastCard()->getRarity()]);
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="444">
    <name>Firewall</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>30</gems>
    </cost>
    <level>10</level>
    <keywords>Burning</keywords>
    <effect><![CDATA[Wall: +35<br />Attack: 5N<br />N = #<b>Burning</b> in hand]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(35);
    $t->hisData()->attack(5 * $t->keywordCount($t->myData()->Hand, 'Burning'));
]]></code>
    <created>2009-07-22</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="445">
    <name>Poltergeist</name>
    <rarity>Common</rarity>
    <cost>
      <gems>5</gems>
    </cost>
    <level>8</level>
    <keywords>Illusion,Undead</keywords>
    <effect><![CDATA[Opponent's lowest resource: -7]]></effect>
    <code><![CDATA[$t->hisData()->addLowestResource(-7);]]></code>
    <created>2009-07-22</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="446">
    <name>Treant</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>25</recruits>
    </cost>
    <level>7</level>
    <keywords>Nature,Siege</keywords>
    <effect><![CDATA[Enemy wall: -22<br />Attack: 18]]></effect>
    <code><![CDATA[$t->hisData()->addWall(-22)->attack(18);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="447">
    <name>Imperial army</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>45</recruits>
    </cost>
    <level>4</level>
    <keywords>Soldier,Charge (45),Siege</keywords>
    <effect><![CDATA[Attack: 45]]></effect>
    <code><![CDATA[$t->hisData()->attack(45);]]></code>
    <created>2009-07-22</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="448">
    <name>Giant</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>25</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Attack: 35<br />Discard all common cards (opponent can't draw rare cards)]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(35);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->myData()->Hand[$i])->getRarity() == 'Common') {
        $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardRandom'));
      }
    }
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->hisData()->Hand[$i])->getRarity() == 'Common') {
        $t->setCard('his', $i, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $i, 'drawCardNoRare'));
      }
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="449">
    <name>Halfling rogue</name>
    <rarity>Common</rarity>
    <modes>8</modes>
    <level>10</level>
    <effect><![CDATA[Summons selected zero cost card in hand (can't summon self)]]></effect>
    <code><![CDATA[
    if ($t->cardPos() != $t->mode() && $t->getCard($t->myData()->Hand[$t->mode()])->getResources() == 0) {
      $revealed = $t->hiddenCards() && isset($t->myData()->Revealed[$t->mode()]);
      $t->nextCard($t->myData()->Hand[$t->mode()], $revealed);
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="450">
    <name>White shrine</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>14</bricks>
      <gems>11</gems>
    </cost>
    <level>6</level>
    <keywords>Holy,Restoration</keywords>
    <effect><![CDATA[Tower: +10<br />Highest facility: +1<br />Lowest facility: +1]]></effect>
    <code><![CDATA[$t->myData()->addTower(10)->addHighestFacility(1)->addLowestFacility(1);]]></code>
    <created>2009-07-22</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="451">
    <name>Siege preparations</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>2</recruits>
    </cost>
    <level>5</level>
    <effect><![CDATA[Recruits: +9<br />Enemy wall: +8]]></effect>
    <code><![CDATA[$t->myData()->addRecruits(9); $t->hisData()->addWall(8);]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="452">
    <name>Invaders</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>2</recruits>
    </cost>
    <modes>8</modes>
    <level>6</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 3<br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(3);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
    else {
      $t->replaceCard('my', $t->mode(), $t->card()->id());
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="453">
    <name>Ancient sage</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <level>8</level>
    <keywords>Legend,Nature</keywords>
    <effect><![CDATA[Production xN<br />N = #<b>Alliance</b> + #<b>Nature</b> in hand (max 5)]]></effect>
    <code><![CDATA[$t->production()->multiply(min(5, $t->keywordCount($t->myData()->Hand, 'Alliance') + $t->keywordCount($t->myData()->Hand, 'Nature')));]]></code>
    <created>2009-07-22</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="454">
    <name>Dryad</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>2</recruits>
    </cost>
    <level>0</level>
    <keywords>Nature,Banish</keywords>
    <effect><![CDATA[Enemy wall: -6]]></effect>
    <code><![CDATA[$t->hisData()->addWall(-6);]]></code>
    <created>2009-07-22</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="455">
    <name>Imp</name>
    <rarity>Common</rarity>
    <cost>
      <gems>4</gems>
    </cost>
    <level>9</level>
    <keywords>Demonic</keywords>
    <effect><![CDATA[Gems: +N<br />Enemy gems: -2N<br />N = #Enemy magic]]></effect>
    <code><![CDATA[$t->myData()->addGems($t->hisData()->Magic); $t->hisData()->addGems(-2 * $t->hisData()->Magic);]]></code>
    <created>2009-07-22</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="456">
    <name>Prosperity</name>
    <rarity>Rare</rarity>
    <level>10</level>
    <keywords>Restoration</keywords>
    <effect><![CDATA[If Stock < Enemy stock<br />Stock: +12<br />else<br />Stock: +6<br />Enemy stock: +6]]></effect>
    <code><![CDATA[
    $my_count = $t->myData()->Bricks + $t->myData()->Gems + $t->myData()->Recruits;
    $his_count = $t->hisData()->Bricks + $t->hisData()->Gems + $t->hisData()->Recruits;
    if ($my_count < $his_count) {
      $t->myData()->addStock(12);
    }
    else {
      $t->myData()->addStock(6);
      $t->hisData()->addStock(6);
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="457">
    <name>Chaos wizard</name>
    <rarity>Common</rarity>
    <cost>
      <gems>4</gems>
    </cost>
    <level>4</level>
    <keywords>Mage,Durable</keywords>
    <effect><![CDATA[Attack: 5<br />Discard a common card from hand]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(5);
    $storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->myData()->Hand[$i])->getRarity() == 'Common') {
        $storage[] = $i;
      }
    }
    if (count($storage) > 0) {
      $dis_index = $storage[$t->arrayRand($storage)];
      $t->setCard('my', $dis_index, $t->drawCard($t->myDeck(), $t->myData()->Hand, $dis_index, 'drawCardRandom'));
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="458">
    <name>Dark warrior</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <level>8</level>
    <keywords>Frenzy</keywords>
    <effect><![CDATA[Attack: Opponent's lowest resource (max 12)]]></effect>
    <code><![CDATA[$t->hisData()->attack(min($t->hisData()->Bricks, $t->hisData()->Gems, $t->hisData()->Recruits, 12));]]></code>
    <created>2009-07-22</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="459">
    <name>Dark flame</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>9</level>
    <keywords>Burning</keywords>
    <effect><![CDATA[Discard all common zero cost cards (can't draw rare cards)]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos()) {
        $cur_card = $t->getCard($t->myData()->Hand[$i]);
        if ($cur_card->getResources() == 0 && $cur_card->getRarity() == 'Common') {
          $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardNoRare'));
        }
      }
    }
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->hisData()->Hand[$i]);
      if ($cur_card->getResources() == 0 && $cur_card->getRarity() == 'Common') {
        $t->setCard('his', $i, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $i, 'drawCardNoRare'));
      }
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="460">
    <name>Work in progress</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>3</bricks>
    </cost>
    <level>6</level>
    <keywords>Runic,Durable,Far sight</keywords>
    <effect><![CDATA[Tower: +3]]></effect>
    <code><![CDATA[$t->myData()->addTower(3);]]></code>
    <created>2009-07-22</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="461">
    <name>Avenging angel</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>25</gems>
      <recruits>30</recruits>
    </cost>
    <level>7</level>
    <keywords>Holy,Banish</keywords>
    <effect><![CDATA[Attack: Max tower - Tower]]></effect>
    <code><![CDATA[$t->hisData()->attack($t->config('max_tower') - $t->myData()->Tower);]]></code>
    <created>2009-07-22</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="462">
    <name>Relic hunter</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[If #<b>Titan</b> in hand > 0<br />Discard all cards from hand except <b>Titan</b> and <b>Titan</b> support cards]]></effect>
    <code><![CDATA[
    if ($t->keywordCount($t->myData()->Hand, 'Titan') > 0) {
      $support = $t->getList(['support'=>'Titan']);

      for ($i = 1; $i <= $t->handSize(); $i++) {
        if ($i != $t->cardPos() && !$t->getCard($t->myData()->Hand[$i])->hasKeyword('Titan')
          && !in_array($t->myData()->Hand[$i], $support)) {
          $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardRandom'));
        }
      }
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="463">
    <name>Fire elemental</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>18</gems>
      <recruits>8</recruits>
    </cost>
    <level>7</level>
    <keywords>Burning,Rebirth,Enduring (8)</keywords>
    <effect><![CDATA[Attack: 17<br />Gems prod x2]]></effect>
    <code><![CDATA[$t->hisData()->attack(17); $t->production()->multiplyGems(2);]]></code>
    <created>2009-07-22</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="464">
    <name>Chimera</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>30</gems>
      <recruits>20</recruits>
    </cost>
    <level>3</level>
    <keywords>Beast,Frenzy</keywords>
    <effect><![CDATA[Enemy tower: -20<br />Enemy wall: -20<br />Attack: 20]]></effect>
    <code><![CDATA[
    $t->hisData()->addTower(-20)->addWall(-20)->attack(20);
]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="465">
    <name>Merchant ship</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>7</bricks>
      <gems>7</gems>
      <recruits>7</recruits>
    </cost>
    <level>5</level>
    <effect><![CDATA[Lowest facility: +1<br />Lowest resource prod x3]]></effect>
    <code><![CDATA[$t->myData()->addLowestFacility(1); $t->production()->multiply(3, $t->myData()->detectLowestResource());]]></code>
    <created>2009-07-22</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="466">
    <name>Oasis</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>3</gems>
    </cost>
    <level>1</level>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Player(s) with lowest wall gains<br />Stock: +6]]></effect>
    <code><![CDATA[
    if ($t->myData()->Wall <= $t->hisData()->Wall) {
      $t->myData()->addStock(6);
    }
    if ($t->myData()->Wall >= $t->hisData()->Wall) {
      $t->hisData()->addStock(6);
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="467">
    <name>Wind witch</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>24</gems>
    </cost>
    <modes>8</modes>
    <level>7</level>
    <keywords>Mage,Swift,Aria</keywords>
    <effect><![CDATA[Attack: 18<br />Gems prod x3<br />Replace a card in opponent's hand with [card=247/]]]></effect>
    <code><![CDATA[$t->hisData()->attack(18); $t->production()->multiplyGems(3); $t->setCard('his', $t->mode(), 247, ['reveal' => true]);]]></code>
    <created>2009-10-24</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="468">
    <name>Strive for height</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>4</bricks>
    </cost>
    <level>10</level>
    <effect><![CDATA[If Wall is not divisible by 15<br />Wall is raised up to the next height that is divisible by 15]]></effect>
    <code><![CDATA[$t->myData()->setWall(ceil($t->myData()->Wall / 15) * 15);]]></code>
    <created>2009-10-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="469">
    <name>Soul sacrifice</name>
    <rarity>Uncommon</rarity>
    <modes>2</modes>
    <level>4</level>
    <keywords>Demonic</keywords>
    <effect><![CDATA[Mode1:<br />Tower: -5<br />Stock: +4<br />Mode2:<br />Tower: -10<br />Stock: +8]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->myData()->addTower(-5)->addStock(4);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addTower(-10)->addStock(8);
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="470">
    <name>Dark templar</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>10</gems>
    </cost>
    <level>10</level>
    <effect><![CDATA[Discard all cards with cost below 10 (can't draw rare cards)<br />Stock: +N/2<br />N = #discarded cards]]></effect>
    <code><![CDATA[
    $discarded = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->myData()->Hand[$i])->getResources() < 10) {
        $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardNoRare'));
        $discarded++;
      }
      if ($t->getCard($t->hisData()->Hand[$i])->getResources() < 10) {
        $t->setCard('his', $i, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $i, 'drawCardNoRare'));
        $discarded++;
      }
    }
    $t->myData()->addStock(round($discarded / 2));
]]></code>
    <created>2009-10-24</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="471">
    <name>Mysterious egg</name>
    <rarity>Uncommon</rarity>
    <level>7</level>
    <effect><![CDATA[Stock: +2<br />Summons [card=25/], [card=202/], [card=195/], [card=32/], [card=679/] or [card=517/]]]></effect>
    <code><![CDATA[$t->myData()->addStock(2); $t->nextCard($t->drawCard([25, 202, 195, 32, 679, 517], $t->myData()->Hand, $t->cardPos(), 'drawCardList'));]]></code>
    <created>2009-10-24</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="472">
    <name>Pirate bay</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>25</bricks>
    </cost>
    <level>10</level>
    <effect><![CDATA[Wall: +10<br />Enemy stock: -3<br />Replace up to 3 non-<b>Brigand</b> non-rare cards in hand with non-common <b>Brigand</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(10);
    $t->hisData()->addStock(-3);
    $storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->myData()->Hand[$i]);
      if (!$cur_card->hasKeyword('Brigand') && $cur_card->getRarity() != 'Rare' && $i != $t->cardPos()) {
        $storage[] = $i;
      }
    }
    if (count($storage) > 0) {
      shuffle($storage);
      $brigand_list = array_merge($t->getList(['rarity'=>'Uncommon', 'keyword'=>'Brigand']), $t->getList(['rarity'=>'Rare', 'keyword'=>'Brigand']));
      for ($i = 0; $i < count($storage) && $i < 3; $i++) {
        $t->setCard('my', $storage[$i], $t->drawCard($brigand_list, $t->myData()->Hand, $storage[$i], 'drawCardList'));
      }
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2009-10-24</modified>
  </card>
  <card id="473">
    <name>Knight templar</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>27</recruits>
    </cost>
    <level>8</level>
    <keywords>Holy,Soldier</keywords>
    <effect><![CDATA[Attack: 48<br />Won't lower enemy tower below 15]]></effect>
    <code><![CDATA[
    $tmp = min($t->hisData()->Tower, 15);
    $t->hisData()->attack(48); $t->hisData()->setTower(max($t->hisData()->Tower, $tmp));
]]></code>
    <created>2009-10-24</created>
    <modified>2009-10-24</modified>
  </card>
  <card id="474">
    <name>Market week</name>
    <rarity>Rare</rarity>
    <level>5</level>
    <effect><![CDATA[Replace your hand with [card=273/], [card=23/], [card=129/], [card=465/], [card=432/], [card=388/], [card=456/] and [card=389/]]]></effect>
    <code><![CDATA[$t->setHandShuffled('my', [273, 23, 129, 465, 432, 388, 456, 389]); $t->noNextCard();]]></code>
    <created>2009-10-24</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="475">
    <name>Wishing lagoon</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>6</bricks>
      <gems>6</gems>
      <recruits>6</recruits>
    </cost>
    <modes>3</modes>
    <level>10</level>
    <effect><![CDATA[Evoke [card=87/], [card=118/] or [card=89/]]]></effect>
    <code><![CDATA[$summons = [1 => 87, 118, 89]; $t->nextCard($summons[$t->mode()], true);]]></code>
    <created>2009-10-24</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="476">
    <name>Doppelganger</name>
    <rarity>Common</rarity>
    <cost>
      <gems>5</gems>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[If targeting self and not New, summons the matching card, else replace a card in hand with self]]></effect>
    <code><![CDATA[
    if (!$t->isMyNew($t->cardPos()) && $t->mode() == $t->cardPos()) {
      $t->nextCard($t->hisData()->Hand[$t->cardPos()], true);
    }
    else {
      if ($t->mode() == $t->cardPos()) {
        $t->noNextCard();
      }
      else {
        $t->replaceCard('my', $t->mode(), $t->card()->id());
      }
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="477">
    <name>Trigger trap</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
    </cost>
    <level>10</level>
    <effect><![CDATA[Enemy tower: -3<br />If not New and matching card is New<br />Enemy tower: -5]]></effect>
    <code><![CDATA[$t->hisData()->addTower((!$t->isMyNew($t->cardPos()) && $t->isHisNew($t->cardPos())) ? -8 : -3);]]></code>
    <created>2009-10-24</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="478">
    <name>Renewal</name>
    <rarity>Common</rarity>
    <modes>8</modes>
    <level>10</level>
    <keywords>Restoration,Aria</keywords>
    <effect><![CDATA[Adds New flag to the selected card in hand<br />Gems: +2]]></effect>
    <code><![CDATA[$t->myData()->NewCards[$t->mode()] = 1; $t->myData()->addGems(2);]]></code>
    <created>2009-10-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="479">
    <name>Mirror golem</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
    </cost>
    <level>10</level>
    <keywords>Illusion,Unliving</keywords>
    <effect><![CDATA[Attack: 5 + N<br />N based on matching card rarity (C-2, U-9, R-16)]]></effect>
    <code><![CDATA[
    $damage = ['Common' => 7, 'Uncommon' => 14, 'Rare' => 21];
    $t->hisData()->attack($damage[$t->getCard($t->hisData()->Hand[$t->cardPos()])->getRarity()]);
]]></code>
    <created>2009-10-24</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="480">
    <name>Ambush</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>4</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <effect><![CDATA[If targeting self and not New, discard the matching card, else replace a card in hand with self]]></effect>
    <code><![CDATA[
    if (!$t->isMyNew($t->cardPos()) && $t->mode() == $t->cardPos()) {
      $t->setCard('his', $t->cardPos(), $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $t->cardPos(), 'drawCardDifferent'));
    }
    else {
      if ($t->mode() == $t->cardPos()) {
        $t->noNextCard();
      }
      else {
        $t->replaceCard('my', $t->mode(), $t->card()->id());
      }
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="481">
    <name>Ghost rider</name>
    <rarity>Common</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>6</level>
    <keywords>Illusion,Undead,Charge (1)</keywords>
    <effect><![CDATA[If Enemy wall > 20<br />Gems: +3<br />Always:<br />Attack: 7]]></effect>
    <code><![CDATA[
    if ($t->hisData()->Wall > 20) {
      $t->myData()->addGems(3);
    }
    $t->hisData()->attack(7);
]]></code>
    <created>2009-10-24</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="482">
    <name>Wicked ritual</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>18</gems>
      <recruits>14</recruits>
    </cost>
    <level>9</level>
    <effect><![CDATA[Discard all <b>Titan</b> cards from hand<br />Attack: 30N<br />N = #unique discarded cards]]></effect>
    <code><![CDATA[
    $storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->myData()->Hand[$i])->hasKeyword('Titan')) {
        $storage[] = $t->myData()->Hand[$i];
        $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardRandom'));
      }
    }
    if (count($storage) > 0) {
      $storage = array_unique($storage);
      $discarded = count($storage);
      $t->hisData()->attack(30 * $discarded);
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="483">
    <name>Mentor</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>2</gems>
    </cost>
    <level>5</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Magic: +1<br />Enemy magic: +1]]></effect>
    <code><![CDATA[$t->myData()->addMagic(1); $t->hisData()->addMagic(1);]]></code>
    <created>2009-10-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="484">
    <name>Treant sapling</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <level>7</level>
    <keywords>Nature</keywords>
    <effect><![CDATA[Enemy wall: -6<br />Attack: 5]]></effect>
    <code><![CDATA[$t->hisData()->addWall(-6)->attack(5);]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="485">
    <name>Undead cavalry</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>18</gems>
      <recruits>18</recruits>
    </cost>
    <level>7</level>
    <keywords>Undead,Charge (16)</keywords>
    <effect><![CDATA[Attack: 29]]></effect>
    <code><![CDATA[$t->hisData()->attack(29);]]></code>
    <created>2009-10-24</created>
    <modified>2009-10-24</modified>
  </card>
  <card id="486">
    <name>Magic sanctuary</name>
    <rarity>Common</rarity>
    <level>8</level>
    <effect><![CDATA[Player(s) with lowest gems gains<br />Gems: +6<br />His opponent gains<br />Gems: +2]]></effect>
    <code><![CDATA[
    if ($t->myData()->Gems < $t->hisData()->Gems) {
      $t->myData()->addGems(6);
      $t->hisData()->addGems(2);
    }
    elseif ($t->hisData()->Gems < $t->myData()->Gems) {
      $t->hisData()->addGems(6);
      $t->myData()->addGems(2);
    }
    else {
      $t->myData()->addGems(8);
      $t->hisData()->addGems(8);
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="487">
    <name>Moon shrine</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>10</level>
    <effect><![CDATA[Players gain 1 stock for each zero cost card and lose 1 stock for each non zero cost card in their hand]]></effect>
    <code><![CDATA[
    $my_gain = $his_gain = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos()) {
        if ($t->getCard($t->myData()->Hand[$i])->getResources() == 0) {
          $my_gain++;
        }
        else {
          $my_gain--;
        }
      }
      if ($t->getCard($t->hisData()->Hand[$i])->getResources() == 0) {
        $his_gain++;
      }
      else {
        $his_gain--;
      }
    }
    $t->myData()->addStock($my_gain);
    $t->hisData()->addStock($his_gain);
]]></code>
    <created>2009-10-24</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="488">
    <name>Gate guardian</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>16</bricks>
      <recruits>16</recruits>
    </cost>
    <level>1</level>
    <keywords>Horde,Cursed</keywords>
    <effect><![CDATA[Attack: 24<br />Wall: +16]]></effect>
    <code><![CDATA[$t->hisData()->attack(24); $t->myData()->addWall(16);]]></code>
    <created>2009-10-24</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="489">
    <name>Imp cache</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
    </cost>
    <level>4</level>
    <effect><![CDATA[Wall: +4<br />Highest resource: -3<br />Lowest resource: +4]]></effect>
    <code><![CDATA[$t->myData()->addWall(4)->addHighestResource(-3)->addLowestResource(4);]]></code>
    <created>2009-10-24</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="490">
    <name>Magic portal</name>
    <rarity>Common</rarity>
    <cost>
      <gems>5</gems>
    </cost>
    <modes>8</modes>
    <level>9</level>
    <effect><![CDATA[Move selected card in hand to current position<br />Summons uncommon card from your deck to selected position]]></effect>
    <code><![CDATA[
    if ($t->mode() != $t->cardPos()) {
      $t->setCard('my', $t->cardPos(), $t->drawCard($t->myDeck()->Uncommon, $t->myData()->Hand, $t->mode(), 'drawCardList'));
      $t->myData()->switchCards($t->cardPos(), $t->mode());
      $t->noNextCard();
    }
    else {
      $t->nextCard($t->drawCard($t->myDeck()->Uncommon, $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="491">
    <name>Dark pegasus</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>13</gems>
    </cost>
    <level>9</level>
    <keywords>Swift,Aria</keywords>
    <effect><![CDATA[If Wall > Enemy wall<br />Enemy tower: -8<br />else<br />Gems prod x2]]></effect>
    <code><![CDATA[
    if ($t->myData()->Wall > $t->hisData()->Wall) {
      $t->hisData()->addTower(-8);
    }
    else {
      $t->production()->multiplyGems(2);
    }
]]></code>
    <created>2009-11-16</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="492">
    <name>Lighthouse</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <level>10</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Tower: +6<br />If matching card is Revealed<br />Tower: +6<br />else<br />Reveal matching card]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(6);
    if (!$t->hiddenCards() || isset($t->hisData()->Revealed[$t->cardPos()])) {
      $t->myData()->addTower(6);
    }
    else {
      $t->revealCard('his', $t->cardPos());
    }
]]></code>
    <created>2010-01-20</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="493">
    <name>Oracle</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>4</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Gems: +#revealed cards in opponent's hand (max 4)]]></effect>
    <code><![CDATA[
    $tmp = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if (!$t->hiddenCards() || isset($t->hisData()->Revealed[$i])) {
        $tmp++;
      }
    }
    $t->myData()->addGems(min($tmp, 4));
]]></code>
    <created>2010-01-20</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="494">
    <name>Scepter of evolution</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <level>8</level>
    <effect><![CDATA[Replace your hand with 4 commons, 3 uncommons and 1 rare from your deck]]></effect>
    <code><![CDATA[
    $trans = ['Common', 'Common', 'Common', 'Common', 'Uncommon', 'Uncommon', 'Uncommon', 'Rare'];
    shuffle($trans);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $rarity = $trans[$i-1];
      $t->setCard('my', $i, $t->drawCard($t->myDeck()->$rarity, $t->myData()->Hand, $i, 'drawCardList'));
    }
    $t->noNextCard();
]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="495">
    <name>Globe of Myr</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <modes>8</modes>
    <level>9</level>
    <keywords>Rebirth</keywords>
    <effect><![CDATA[Replace a card in hand with <b>Swift</b>]]></effect>
    <code><![CDATA[
    $t->setCard('my', $t->mode(), $t->drawCard($t->getList(['keyword'=>'Swift']), $t->myData()->Hand, $t->mode(), 'drawCardList'));
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2010-01-20</created>
    <modified>2013-03-31</modified>
  </card>
  <card id="496">
    <name>Spring wood</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <keywords>Nature,Restoration</keywords>
    <effect><![CDATA[Wall: +3<br />If opponent lowered your stock last round<br />Production x2]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(3);
    if ($t->myChange('Bricks') < 0 || $t->myChange('Gems') < 0 || $t->myChange('Recruits') < 0) {
      $t->production()->multiply(2);
    }
]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="497">
    <name>Elemental storm</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>13</gems>
    </cost>
    <level>10</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Replace matching card in opponent's hand and its neigbouring cards with Wind]]></effect>
    <code><![CDATA[
    $t->setCard('his', $t->cardPos(), 247, ['reveal' => true]);
    if ($t->cardPos() > 1) {
      $t->setCard('his', $t->cardPos() - 1, 247, ['reveal' => true]);
    }
    if ($t->cardPos() < $t->handSize()) {
      $t->setCard('his', $t->cardPos() + 1, 247, ['reveal' => true]);
    }
]]></code>
    <created>2010-01-20</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="498">
    <name>Thief hideout</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>20</bricks>
    </cost>
    <level>2</level>
    <effect><![CDATA[Tower: +10<br />Wall: +15<br />Enemy stock: -3]]></effect>
    <code><![CDATA[$t->myData()->addTower(10)->addWall(15); $t->hisData()->addStock(-3);]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="499">
    <name>Citadel of Myr</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>38</gems>
    </cost>
    <level>1</level>
    <effect><![CDATA[Tower x2]]></effect>
    <code><![CDATA[$t->myData()->Tower*= 2;]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="500">
    <name>Forest dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>30</recruits>
    </cost>
    <level>9</level>
    <keywords>Dragon,Nature</keywords>
    <effect><![CDATA[Attack: 15 + 7N<br />N = #<b>Nature</b> in game]]></effect>
    <code><![CDATA[$t->hisData()->attack(15 + 7 * ($t->keywordCount($t->myData()->Hand, 'Nature') + $t->keywordCount($t->hisData()->Hand, 'Nature')));]]></code>
    <created>2010-01-20</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="501">
    <name>Secret temple</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>4</bricks>
    </cost>
    <modes>3</modes>
    <level>4</level>
    <effect><![CDATA[Mode1:<br />Wall: +6<br />Mode2:<br />Gems: +4<br />Mode3:<br />Enemy recruits: -3]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->myData()->addWall(6);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addGems(4);
    }
    elseif ($t->mode() == 3) {
      $t->hisData()->addRecruits(-3);
    }
]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="502">
    <name>Orc brute</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>6</level>
    <keywords>Horde,Siege</keywords>
    <effect><![CDATA[Enemy tower: -3<br />Enemy wall: -4]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-3)->addWall(-4);]]></code>
    <created>2010-01-20</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="503">
    <name>Temple guard</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <level>8</level>
    <keywords>Holy,Soldier</keywords>
    <effect><![CDATA[Wall: +5<br />If #<b>Holy</b> in hand > 1<br />Tower: +3<br />If #<b>Soldier</b> in hand > 1<br />Attack: 5]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(5);
    if ($t->keywordCount($t->myData()->Hand, 'Holy') > 1) {
      $t->myData()->addTower(3);
    }
    if ($t->keywordCount($t->myData()->Hand, 'Soldier') > 1) {
      $t->hisData()->attack(5);
    }
]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="504">
    <name>Piranhas</name>
    <rarity>Common</rarity>
    <level>7</level>
    <keywords>Aqua,Skirmisher</keywords>
    <effect><![CDATA[Attack: 1<br />If New<br />Attack: 4]]></effect>
    <code><![CDATA[$t->hisData()->attack((($t->isMyNew($t->cardPos())) ? 5 : 1));]]></code>
    <created>2010-01-20</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="505">
    <name>Kraken</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>25</recruits>
    </cost>
    <level>6</level>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Attack: 25<br />Enemy highest facility: -1]]></effect>
    <code><![CDATA[$t->hisData()->attack(25)->addHighestFacility(-1);]]></code>
    <created>2010-01-20</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="506">
    <name>Water dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>30</gems>
    </cost>
    <level>0</level>
    <keywords>Aqua,Dragon</keywords>
    <effect><![CDATA[Attack: 40<br />Stock: +10]]></effect>
    <code><![CDATA[$t->hisData()->attack(40); $t->myData()->addStock(10);]]></code>
    <created>2010-01-20</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="507">
    <name>Sea lord</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <level>3</level>
    <keywords>Aqua,Far sight</keywords>
    <effect><![CDATA[Attack: 20<br />Gems: +15<br />Recruits: +15]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(20);
    $t->myData()->addGems(15)->addRecruits(15);
]]></code>
    <created>2010-01-20</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="508">
    <name>Javeliner</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>7</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Enemy tower: -N<br />N = 2 + #Enemy tower / 10]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-(round($t->hisData()->Tower / 10) + 2));]]></code>
    <created>2010-01-20</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="509">
    <name>Breeze</name>
    <rarity>Common</rarity>
    <level>10</level>
    <keywords>Aria</keywords>
    <effect><![CDATA[Gain 1 random resource for each New card in game]]></effect>
    <code><![CDATA[
    $count = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->isMyNew($i)) {
        $count++;
      }
      if ($t->isHisNew($i)) {
        $count++;
      }
    }
    $t->myData()->addRandomResources($count);
]]></code>
    <created>2010-01-20</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="510">
    <name>Master hunter</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>13</recruits>
    </cost>
    <level>10</level>
    <keywords>Far sight,Banish</keywords>
    <effect><![CDATA[Attack: 13<br />Discard highest cost Recruits only card from opponent's hand]]></effect>
    <code><![CDATA[$t->hisData()->attack(13);
    $card_costs = $max_cards = array(); $max = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->hisData()->Hand[$i]);
      if ($cur_card->getResources('Bricks') == 0 && $cur_card->getResources('Gems') == 0 && $cur_card->getResources('Recruits') > 0) {
        $cur_cost = $card_costs[$i] = $cur_card->getResources('Recruits');
        if ($cur_cost > $max) {
          $max = $cur_cost;
        }
      }
    }
    if (count($card_costs) > 0) {
      foreach ($card_costs as $i => $cost) {
        if ($cost == $max) {
          $max_cards[] = $i;
        }
      }
      $dis_pos = $max_cards[$t->arrayRand($max_cards)];
      $t->setCard('his', $dis_pos, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $dis_pos, 'drawCardDifferent'));
    }
]]></code>
    <created>2010-01-20</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="511">
    <name>Farm</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
      <recruits>2</recruits>
    </cost>
    <level>5</level>
    <effect><![CDATA[Tower: +2<br />Wall: +2<br />If last card was discarded<br />Stock: +4]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(2)->addWall(2);
    if ($t->myLastAction() == 'discard') {
      $t->myData()->addStock(4);
    }
]]></code>
    <created>2010-01-20</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="512">
    <name>Reinforced gate</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>7</bricks>
    </cost>
    <level>7</level>
    <effect><![CDATA[Wall: +12<br />If Wall > 30<br />Tower: -2]]></effect>
    <code><![CDATA[$t->myData()->addWall(12); if ($t->myData()->Wall > 30) { $t->myData()->addTower(-2); }]]></code>
    <created>2010-03-14</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="513">
    <name>Veteran militia</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <modes>8</modes>
    <level>5</level>
    <keywords>Quick</keywords>
    <effect><![CDATA[Replace a card in hand with a card from your deck of the same rarity (can't summon self)]]></effect>
    <code><![CDATA[
    $rarity = $t->getCard($t->myData()->Hand[$t->mode()])->getRarity();
    $list = array_diff($t->myDeck()->$rarity, [$t->card()->id(), $t->myData()->Hand[$t->mode()]]);
    $t->setCard('my', $t->mode(), $t->drawCard($list, $t->myData()->Hand, $t->mode(), 'drawCardList'));
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2010-03-14</created>
    <modified>2014-12-24</modified>
  </card>
  <card id="514">
    <name>Firestorm</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>24</gems>
    </cost>
    <level>10</level>
    <keywords>Burning,Destruction</keywords>
    <effect><![CDATA[Player(s) with fewest <b>Burning</b> cards gains<br />Stock: -7<br />Respective player suffers 1 damage for each resource lost]]></effect>
    <code><![CDATA[
    $my_count = $t->keywordCount($t->myData()->Hand, 'Burning');
    $his_count = $t->keywordCount($t->hisData()->Hand, 'Burning');
    $res = ['Bricks', 'Gems', 'Recruits'];
    $my_dmg = $his_dmg = 0;
    if ($my_count <= $his_count) {
      foreach ($res as $resource) {
        $lowered = $t->myData()->$resource - max($t->myData()->$resource - 7, 0);
        $t->myData()->$resource-= $lowered;
        $my_dmg+= $lowered;
      }
    }
    if ($my_count >= $his_count) {
      foreach ($res as $resource) {
        $lowered = $t->hisData()->$resource - max($t->hisData()->$resource - 7, 0);
        $t->hisData()->$resource-= $lowered;
        $his_dmg+= $lowered;
      }
    }
    if ($my_dmg > 0) {
      $t->myData()->attack($my_dmg);
    }
    if ($his_dmg > 0) {
      $t->hisData()->attack($his_dmg);
    }
]]></code>
    <created>2010-03-14</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="515">
    <name>Koschei the Deathless</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>17</recruits>
    </cost>
    <level>5</level>
    <keywords>Legend,Undead,Durable</keywords>
    <effect><![CDATA[Attack: 20]]></effect>
    <code><![CDATA[$t->hisData()->attack(20);]]></code>
    <created>2010-03-14</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="516">
    <name>Frozen flame</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>10</level>
    <keywords>Burning</keywords>
    <effect><![CDATA[If last card played was <b>Burning</b><br />Returns half of its cost (max 5)]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->hasKeyword('Burning') && $t->myLastAction() == 'play') {
      $t->myData()
        ->addBricks(min(round($t->myLastCard()->getResources('Bricks') / 2), 5))
        ->addGems(min(round($t->myLastCard()->getResources('Gems') / 2), 5))
        ->addRecruits(min(round($t->myLastCard()->getResources('Recruits') / 2), 5));
    }
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="517">
    <name>Cockatrice</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>25</recruits>
    </cost>
    <level>4</level>
    <keywords>Beast</keywords>
    <effect><![CDATA[Attack: 20<br />Bricks: +N<br />N = #Enemy recruits / 2<br />Enemy recruits: = 0]]></effect>
    <code><![CDATA[
    $t->myData()->addBricks(round($t->hisData()->Recruits / 2));
    $t->hisData()->attack(20)->setRecruits(0);
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="518">
    <name>Thieves guild</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
      <recruits>2</recruits>
    </cost>
    <level>3</level>
    <effect><![CDATA[Tower: +3<br />Enemy stock: -1<br />Summons a <b>Brigand</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(3);
    $t->hisData()->addStock(-1);
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Brigand']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="519">
    <name>Lake fairy</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Nature</keywords>
    <effect><![CDATA[Gems: +N<br />N = #<b>Nature</b> in hand (max 4)<br />Replace a card in hand with common <b>Nature</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addGems(min($t->keywordCount($t->myData()->Hand, 'Nature'), 4));
    $t->setCard('my', $t->mode(), $t->drawCard($t->getList(['rarity'=>'Common', 'keyword'=>'Nature']), $t->myData()->Hand, $t->mode(), 'drawCardList'));
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2010-03-14</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="520">
    <name>Desert outpost</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>18</bricks>
    </cost>
    <level>1</level>
    <effect><![CDATA[Tower: +5<br />Wall: +10<br />Gems: +4<br />Recruits: +4]]></effect>
    <code><![CDATA[$t->myData()->addTower(5)->addWall(10)->addGems(4)->addRecruits(4);]]></code>
    <created>2010-03-14</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="521">
    <name>Mermaid</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>7</level>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Enemy tower: -2<br />Enemy wall: -2<br />Enemy stock: -2]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-2)->addWall(-2)->addStock(-2);]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="522">
    <name>Sunken ruins</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>3B</bricks>
    </cost>
    <level>10</level>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Tower: +N / 2<br />Wall: +N<br />N = #<b>Aqua</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Aqua');
    $t->myData()->addTower(round($tmp / 2))->addWall($tmp);
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="523">
    <name>Whale</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>30</recruits>
    </cost>
    <level>8</level>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Enemy tower: -10<br />Enemy wall: -10<br />Enemy stock: -10]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-10)->addWall(-10)->addStock(-10);]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="524">
    <name>Sea serpent</name>
    <rarity>Common</rarity>
    <cost>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <level>7</level>
    <keywords>Aqua,Siege</keywords>
    <effect><![CDATA[If Enemy wall = 0<br />Enemy stock: -7<br />else<br />Enemy tower: -3<br />Enemy wall: -7]]></effect>
    <code><![CDATA[
    if ($t->hisData()->Wall == 0) {
      $t->hisData()->addStock(-7);
    }
    else {
      $t->hisData()->addTower(-3)->addWall(-7);
    }
]]></code>
    <created>2010-03-14</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="525">
    <name>Poseidon's wrath</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>30</gems>
    </cost>
    <level>10</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Player(s) with fewest <b>Aqua</b> in hand suffers<br />Tower: -15<br />Wall: -15<br />Stock: -10]]></effect>
    <code><![CDATA[
    $my_count = $t->keywordCount($t->myData()->Hand, 'Aqua');
    $his_count = $t->keywordCount($t->hisData()->Hand, 'Aqua');
    if ($my_count <= $his_count) {
      $t->myData()->addTower(-15)->addWall(-15)->addStock(-10);
    }
    if ($my_count >= $his_count) {
      $t->hisData()->addTower(-15)->addWall(-15)->addStock(-10);
    }
]]></code>
    <created>2010-03-14</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="526">
    <name>Princess of elves</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>5</gems>
    </cost>
    <level>10</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Stock: +5<br />Summons a rare card from opponent's deck]]></effect>
    <code><![CDATA[
    $t->myData()->addStock(5);
    $t->nextCard($t->drawCard($t->hisDeck()->Rare, $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2010-03-14</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="527">
    <name>Elven priestesses</name>
    <rarity>Common</rarity>
    <level>7</level>
    <keywords>Alliance,Holy</keywords>
    <effect><![CDATA[Lowest facility prod x2]]></effect>
    <code><![CDATA[$t->production()->multiply(2, $t->myData()->detectLowestFacility());]]></code>
    <created>2010-03-14</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="528">
    <name>Legacy of Barbz</name>
    <rarity>Uncommon</rarity>
    <level>10</level>
    <effect><![CDATA[Replace a common card in hand of player(s) with most common cards with a rare card from his deck]]></effect>
    <code><![CDATA[
    $my_storage = $his_storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->getRarity() == 'Common') {
        $my_storage[] = $i;
      }
      if ($t->getCard($t->hisData()->Hand[$i])->getRarity() == 'Common') {
        $his_storage[] = $i;
      }
    }
    if (count($my_storage) > 0 && count($my_storage) >= count($his_storage)) {
      $pos = $my_storage[$t->arrayRand($my_storage)];
      $t->setCard('my', $pos, $t->drawCard($t->myDeck()->Rare, $t->myData()->Hand, $pos, 'drawCardList'));
    }
    if (count($his_storage) > 0 && count($my_storage) <= count($his_storage)) {
      $pos = $his_storage[$t->arrayRand($his_storage)];
      $t->setCard('his', $pos, $t->drawCard($t->hisDeck()->Rare, $t->hisData()->Hand, $pos, 'drawCardList'));
    }
]]></code>
    <created>2010-03-14</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="529">
    <name>Waterfall</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>1</level>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Wall: -5<br />Stock: +3]]></effect>
    <code><![CDATA[$t->myData()->addWall(-5)->addStock(3);]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="530">
    <name>Ocean queen</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <level>7</level>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Attack: 40<br />If last card played was an <b>Aqua</b><br />Bonus attack based on card rarity (C-10, U-25, R-50)]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->hasKeyword('Aqua') && $t->myLastAction() == 'play') {
      $dmg = ['Common' => 10, 'Uncommon' => 25, 'Rare' => 50];
      $bonus = $dmg[$t->myLastCard()->getRarity()];
    }
    else {
      $bonus = 0;
    }
    $t->hisData()->attack(40 + $bonus);
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="531">
    <name>Exiled</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>9</level>
    <keywords>Aqua,Brigand</keywords>
    <effect><![CDATA[Attack: 7<br />If #<b>Aqua</b> in opponent's hand > 0<br />Enemy stock: -3]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(7);
    $tmp = $t->keywordCount($t->hisData()->Hand, 'Aqua');
    if ($tmp > 0) {
      $t->hisData()->addStock(-3);
    }
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="532">
    <name>Pixie</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>10</level>
    <effect><![CDATA[Stock: +N/2 - 1<br />N = #common cards in hand]]></effect>
    <code><![CDATA[
    $tmp = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->getRarity() == 'Common') {
        $tmp++;
      }
    }
    $t->myData()->addStock(max(round($tmp / 2) - 1, 0));
]]></code>
    <created>2010-03-14</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="533">
    <name>Chaos gargoyle</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>6</bricks>
    </cost>
    <level>10</level>
    <keywords>Unliving,Durable</keywords>
    <effect><![CDATA[Attack: 5<br />Discard a common card from hand<br />If discarded card wasn't <b>Unliving</b><br />Wall: +5]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(5);
    $storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->myData()->Hand[$i])->getRarity() == 'Common') {
        $storage[] = $i;
      }
    }
    if (count($storage) > 0) {
      $dis_index = $storage[$t->arrayRand($storage)];
      if (!$t->getCard($t->myData()->Hand[$dis_index])->hasKeyword('Unliving')) {
        $t->myData()->addWall(5);
      }
      $t->setCard('my', $dis_index, $t->drawCard($t->myDeck(), $t->myData()->Hand, $dis_index, 'drawCardRandom'));
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="534">
    <name>Sniper</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <level>10</level>
    <keywords>Soldier,Far sight</keywords>
    <effect><![CDATA[Attack: 6<br />If #<b>Quick</b> + #<b>Swift</b> in opponent's hand > 0<br />Enemy tower: -6]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(6);
    if ($t->keywordCount($t->hisData()->Hand, 'Quick') > 0 || $t->keywordCount($t->hisData()->Hand, 'Swift') > 0) {
      $t->hisData()->addTower(-6);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="535">
    <name>Urk the Conqueror</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>30</recruits>
    </cost>
    <level>7</level>
    <keywords>Barbarian,Durable,Banish</keywords>
    <effect><![CDATA[If last card played was a non-common <b>Barbarian</b><br />Enemy wall: -20<br />Always:<br />Attack: 35]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->hasKeyword('Barbarian') && $t->myLastAction() == 'play' && $t->myLastCard()->getRarity() != 'Common') {
      $t->hisData()->addWall(-20);
    }
    $t->hisData()->attack(35);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="536">
    <name>Rage of Urk</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>18</recruits>
    </cost>
    <level>5</level>
    <keywords>Barbarian,Frenzy</keywords>
    <effect><![CDATA[If New<br />Enemy wall: -13<br />Always:<br />Attack: 22]]></effect>
    <code><![CDATA[
    if ($t->isMyNew($t->cardPos())) {
      $t->hisData()->addWall(-13);
    }
    $t->hisData()->attack(22);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="537">
    <name>Minaret</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
    </cost>
    <level>9</level>
    <effect><![CDATA[Player(s) with fewest different keywords in hand gains<br />Tower: +10]]></effect>
    <code><![CDATA[
    $mine = $t->countDistinctKeywords($t->myData()->Hand);
    $his = $t->countDistinctKeywords($t->hisData()->Hand);
    if ($mine <= $his) {
      $t->myData()->addTower(10);
    }
    if ($mine >= $his) {
      $t->hisData()->addTower(10);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="538">
    <name>Forest guardian</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <level>9</level>
    <keywords>Beast,Nature</keywords>
    <effect><![CDATA[Attack: #<b>Beast</b> + #<b>Nature</b> in hand (min 6)]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Beast') + $t->keywordCount($t->myData()->Hand, 'Nature');
    $t->hisData()->attack(max(6, $tmp));
]]></code>
    <created>2010-06-21</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="539">
    <name>Book of life</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>4</recruits>
    </cost>
    <level>9</level>
    <keywords>Nature</keywords>
    <effect><![CDATA[Summons a <b>Beast</b> or a <b>Nature</b><br />If New<br />non-common<br />else<br />non-rare]]></effect>
    <code><![CDATA[
    $tmp = ($t->isMyNew($t->cardPos())) ? 'Rare' : 'Common';
    $uncommon_b = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Beast']);
    $other_b = $t->getList(['rarity'=>$tmp, 'keyword'=>'Beast']);
    $uncommon_n = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Nature']);
    $other_n = $t->getList(['rarity'=>$tmp, 'keyword'=>'Nature']);
    $t->nextCard($t->drawCard(array_unique(array_merge($uncommon_b, $other_b, $uncommon_n, $other_n)), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="540">
    <name>White lady</name>
    <rarity>Common</rarity>
    <level>7</level>
    <effect><![CDATA[Player(s) with highest tower gains<br />Stock: +2]]></effect>
    <code><![CDATA[
    if ($t->myData()->Tower >= $t->hisData()->Tower) {
      $t->myData()->addStock(2);
    }
    if ($t->myData()->Tower <= $t->hisData()->Tower) {
      $t->hisData()->addStock(2);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="541">
    <name>Forest spirit</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>15</recruits>
    </cost>
    <level>10</level>
    <keywords>Beast,Nature</keywords>
    <effect><![CDATA[Attack: 12 + N<br />Wall: +2N<br />N = #<b>Beast</b> + #<b>Nature</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Beast') + $t->keywordCount($t->myData()->Hand, 'Nature');
    $t->hisData()->attack(12 + $tmp); $t->myData()->addWall(2 * $tmp);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="542">
    <name>Seth</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>15</gems>
      <recruits>15</recruits>
    </cost>
    <modes>3</modes>
    <level>0</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Mode1:<br />Enemy tower: -20<br />Mode2:<br />Enemy wall: -50<br />Mode3:<br />Enemy stock: -15]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->hisData()->addTower(-20);
    }
    elseif ($t->mode() == 2) {
      $t->hisData()->addWall(-50);
    }
    elseif ($t->mode() == 3) {
      $t->hisData()->addStock(-15);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="543">
    <name>Deathwood shaman</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>12</gems>
      <recruits>13</recruits>
    </cost>
    <level>10</level>
    <keywords>Nature,Undead</keywords>
    <effect><![CDATA[Stock: +2N<br />Enemy wall: -5M<br />N = #<b>Nature</b> in hand<br />M = #<b>Undead</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Undead');
    $t->hisData()->addWall(-5 * $tmp);
    $tmp = $t->keywordCount($t->myData()->Hand, 'Nature');
    $t->myData()->addStock(2 * $tmp);
]]></code>
    <created>2010-06-21</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="544">
    <name>Black unicorn</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>16</recruits>
    </cost>
    <level>8</level>
    <keywords>Legend,Banish</keywords>
    <effect><![CDATA[If #rare cards in hand > 0<br />Attack: 15<br />else<br />Attack: 25]]></effect>
    <code><![CDATA[
    $found = false;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->getRarity() == 'Rare') {
        $found = true;
      }
    }
    $t->hisData()->attack((!$found) ? 25 : 15);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="545">
    <name>Elven marksman</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <level>8</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Gems prod x2<br />Enemy tower: -N<br />Attack: 8 - N<br />N = #<b>Alliance</b> in hand]]></effect>
    <code><![CDATA[
    $t->production()->multiplyGems(2);
    $tmp = $t->keywordCount($t->myData()->Hand, 'Alliance');
    $t->hisData()->addTower(-$tmp);
    if ($tmp < 8) {
      $t->hisData()->attack(8 - $tmp);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="546">
    <name>Dwarven elder</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>12</bricks>
      <gems>12</gems>
      <recruits>12</recruits>
    </cost>
    <level>9</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Attack: N<br />Wall: +3N<br />N = sum of all facilities in game]]></effect>
    <code><![CDATA[
    $facilities = $t->myData()->Quarry + $t->myData()->Magic + $t->myData()->Dungeons
      + $t->hisData()->Quarry + $t->hisData()->Magic + $t->hisData()->Dungeons;
    $t->hisData()->attack($facilities);
    $t->myData()->addWall(3 * $facilities);
]]></code>
    <created>2010-06-21</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="547">
    <name>Flame lord</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>15</gems>
    </cost>
    <level>4</level>
    <keywords>Burning,Far sight</keywords>
    <effect><![CDATA[Attack: 25<br />Summons [card=336/]]]></effect>
    <code><![CDATA[$t->hisData()->attack(25); $t->nextCard(336, true);]]></code>
    <created>2010-06-21</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="548">
    <name>War wolf</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>7</level>
    <keywords>Beast,Horde</keywords>
    <effect><![CDATA[Attack: 8<br />Recruits: +6]]></effect>
    <code><![CDATA[$t->hisData()->attack(8); $t->myData()->addRecruits(6);]]></code>
    <created>2010-06-21</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="549">
    <name>Goblin regiment</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>23</recruits>
    </cost>
    <level>10</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 30<br />Replace all common cards in hand with [card=13]Goblin flankers[/card]<br />Recruits: +2N<br />N = #replaced cards]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(30); $tmp = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->myData()->Hand[$i])->getRarity() == 'Common') {
        $t->setCard('my', $i, 13, ['reveal' => true]); $tmp++;
      }
    }
    $t->myData()->addRecruits($tmp * 2);
]]></code>
    <created>2010-06-21</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="550">
    <name>Sea priestess</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>10</level>
    <keywords>Aqua,Restoration</keywords>
    <effect><![CDATA[Summons an <b>Aqua</b><br />If last card played was an <b>Aqua</b><br />Stock: +1]]></effect>
    <code><![CDATA[
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Aqua']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    if ($t->myLastCard()->hasKeyword('Aqua') && $t->myLastAction() == 'play') {
      $t->myData()->addStock(1);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="551">
    <name>Spectral siren</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>12</gems>
    </cost>
    <level>7</level>
    <keywords>Aqua,Undead</keywords>
    <effect><![CDATA[Attack: 12<br />Enemy recruits: -2N<br />N = #<b>Aqua</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Aqua');
    $t->hisData()->attack(12)->addRecruits(-2 * $tmp);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="552">
    <name>Leviathan</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>30</gems>
      <recruits>50</recruits>
    </cost>
    <level>10</level>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Enemy tower: -80<br />Enemy wall: -100]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-80)->addWall(-100);]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="553">
    <name>Hidden lagoon</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>8</level>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Wall: +N / 2<br />Stock: +N / 3<br />N = #<b>Aqua</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Aqua');
    $t->myData()->addWall(round($tmp / 2))->addStock(round($tmp / 3));
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="554">
    <name>Northern fortress</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>35</bricks>
    </cost>
    <level>10</level>
    <effect><![CDATA[Wall: +40<br />If not New and adjacent card is New<br />Tower: +20]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(40);
    if (!$t->isMyNew($t->cardPos()) && ($t->isMyNew($t->cardPos() - 1) || $t->isMyNew($t->cardPos() + 1))) {
      $t->myData()->addTower(20);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="555">
    <name>Trickster</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>3</gems>
      <recruits>3</recruits>
    </cost>
    <level>10</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Opponent's tokens are destroyed<br />Gain 1 random resource for each 10 destroyed tokens of the same kind]]></effect>
    <code><![CDATA[
    $tmp = 0;
    foreach ($t->hisData()->TokenValues as $i => $value) {
      if ($value > 0) {
        $tmp+= floor($value / 10); $t->hisData()->TokenValues[$i] = 0;
      }
    }
    $t->myData()->addRandomResources($tmp);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="556">
    <name>Dwarven watchtower</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>8</bricks>
    </cost>
    <level>10</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Tower: +6<br />Summons <b>Runic</b> of the same rarity as matching card]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(6);
    $rarity = $t->getCard($t->hisData()->Hand[$t->cardPos()])->getRarity();
    $list = $t->getList(['rarity'=>$rarity, 'keyword'=>'Runic']);
    $t->nextCard($t->drawCard($list, $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2010-06-21</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="557">
    <name>Confusion</name>
    <rarity>Uncommon</rarity>
    <modes>8</modes>
    <level>9</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Stock: +4<br />Replace a card in opponent's hand with a rare card from your deck]]></effect>
    <code><![CDATA[
    $t->myData()->addStock(4);
    $t->setCard('his', $t->mode(), $t->drawCard($t->myDeck()->Rare, $t->hisData()->Hand, $t->mode(), 'drawCardList'));
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="558">
    <name>Magic spring</name>
    <rarity>Common</rarity>
    <level>10</level>
    <effect><![CDATA[Gain 1 random resource for each different keyword in hand]]></effect>
    <code><![CDATA[$t->myData()->addRandomResources($t->countDistinctKeywords($t->myData()->Hand));]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="559">
    <name>River thief</name>
    <rarity>Common</rarity>
    <cost>
      <gems>4</gems>
      <recruits>4</recruits>
    </cost>
    <level>8</level>
    <keywords>Aqua,Brigand</keywords>
    <effect><![CDATA[Attack: 4<br />Enemy stock: -2<br />If #<b>Aqua</b> in hand > 2<br />Stock: +2]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(4)->addStock(-2);
    if ($t->keywordCount($t->myData()->Hand, 'Aqua') > 2) {
      $t->myData()->addStock(2);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="560">
    <name>Sea gate</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <level>10</level>
    <keywords>Aqua,Far sight</keywords>
    <effect><![CDATA[Wall: +15<br />Discard highest rarity <b>Aqua</b> from opponent's hand]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(15);
    $storage = ['Common' => array(), 'Uncommon' => array(), 'Rare' => array()];
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->hisData()->Hand[$i]);
      $rarity = $cur_card->getRarity();
      if ($cur_card->hasKeyword('Aqua')) {
        $storage[$rarity][] = $i;
      }
    }
    if ((count($storage['Common']) + count($storage['Uncommon']) + count($storage['Rare'])) > 0) {
      shuffle($storage['Common']);
      shuffle($storage['Uncommon']);
      shuffle($storage['Rare']);
      $storage_temp = array_merge($storage['Common'], $storage['Uncommon'], $storage['Rare']);
      $discarded_pos = array_pop($storage_temp);
      $t->setCard('his', $discarded_pos, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $discarded_pos, 'drawCardDifferent'));
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="561">
    <name>Arcane bolt</name>
    <rarity>Common</rarity>
    <cost>
      <gems>5</gems>
    </cost>
    <level>10</level>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy stock: -2<br />If <b>Mage</b> tokens > 60<br />Enemy stock: -3]]></effect>
    <code><![CDATA[$reduction = ($t->myData()->getToken('Mage') > 60) ? 5 : 2; $t->hisData()->addStock(-$reduction);]]></code>
    <created>2010-06-21</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="562">
    <name>Divine guidance</name>
    <rarity>Common</rarity>
    <cost>
      <gems>7</gems>
    </cost>
    <modes>2</modes>
    <level>1</level>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Mode1:<br />Wall: +10<br />Mode2:<br />Recruits: +7]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->myData()->addWall(10);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addRecruits(7);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="563">
    <name>Lancer</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>9</level>
    <keywords>Barbarian,Frenzy</keywords>
    <effect><![CDATA[Attack: 15<br />Discard all <b>Quick</b> and <b>Swift</b> from opponent's hand]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(15);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->hisData()->Hand[$i]);
      if ($cur_card->hasKeyword('Quick') || $cur_card->hasKeyword('Swift')) {
        $t->setCard('his', $i, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $i, 'drawCardRandom'));
      }
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="564">
    <name>Master summoner</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>10</level>
    <keywords>Mage</keywords>
    <effect><![CDATA[If <b>Mage</b> tokens > 60<br />Summons a <b>Legend</b><br /><b>Mage</b> tokens: = 0<br />else<br /><b>Mage</b> tokens: +40]]></effect>
    <code><![CDATA[
    if ($t->myData()->getToken('Mage') > 60) {
      $t->nextCard($t->drawCard($t->getList(['keyword'=>'Legend']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
      $t->myData()->setToken('Mage', 0);
    }
    else {
      $t->myData()->addToken('Mage', 40);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="565">
    <name>Titan's worshipper</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>10</gems>
    </cost>
    <level>9</level>
    <effect><![CDATA[Summons a <b>Titan</b> not present in hand]]></effect>
    <code><![CDATA[
    $titans = array_diff($t->getList(['keyword'=>'Titan']), $t->myData()->Hand);
    if (count($titans) > 0) {
      $t->nextCard($t->drawCard($titans, $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="566">
    <name>Wheat farm</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Stock: +2N<br />N = #Wheat farm in hand]]></effect>
    <code><![CDATA[
    $tmp = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->myData()->Hand[$i] == 566) {
        $tmp++;
      }
    }
    $t->myData()->addStock(2 * $tmp);
]]></code>
    <created>2010-06-21</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="567">
    <name>Jungle river</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <level>9</level>
    <keywords>Aqua,Nature</keywords>
    <effect><![CDATA[Recruits: +3<br />Enemy wall: -3<br />Replace a card in hand with [card=504/]]]></effect>
    <code><![CDATA[
    $t->myData()->addRecruits(3);
    $t->hisData()->addWall(-3);
    $t->setCard('my', $t->mode(), 504, ['reveal' => true]);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="568">
    <name>Flesh golem</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>8</bricks>
      <recruits>6</recruits>
    </cost>
    <modes>2</modes>
    <level>5</level>
    <keywords>Undead,Unliving</keywords>
    <effect><![CDATA[Attack: 6<br />Wall: +4<br />Mode1:<br />Bricks: +8<br />Mode2:<br />Recruits: +6]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(6);
    $t->myData()->addWall(4);
    if ($t->mode() == 1) {
      $t->myData()->addBricks(8);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addRecruits(6);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="569">
    <name>Dream shift</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>9</gems>
    </cost>
    <level>10</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Replace your hand with cards from your deck of the same rarity as replaced cards]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos()) {
        $rarity = $t->getCard($t->myData()->Hand[$i])->getRarity();
        $list = array_diff($t->myDeck()->$rarity, [569, $t->myData()->Hand[$i]]);
        $t->setCard('my', $i, $t->drawCard($list, $t->myData()->Hand, $i, 'drawCardList'));
      }
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="570">
    <name>Swamp</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>4</bricks>
      <gems>3</gems>
    </cost>
    <level>6</level>
    <keywords>Aqua,Skirmisher</keywords>
    <effect><![CDATA[Wall: +8<br />Enemy stock: -1]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(8);
    $t->hisData()->addStock(-1);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="571">
    <name>Flame obelisk</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>12</bricks>
    </cost>
    <level>10</level>
    <keywords>Burning</keywords>
    <effect><![CDATA[Tower: +15<br />Replace adjacent cards with <b>Burning</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(15);
    if ($t->cardPos() > 1) {
      $t->setCard('my', $t->cardPos() - 1, $t->drawCard($t->getList(['keyword'=>'Burning']), $t->myData()->Hand, $t->cardPos() - 1, 'drawCardList'));
    }
    if ($t->cardPos() < $t->handSize()) {
      $t->setCard('my', $t->cardPos() + 1, $t->drawCard($t->getList(['keyword'=>'Burning']), $t->myData()->Hand, $t->cardPos() + 1, 'drawCardList'));
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="572">
    <name>Stables</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>4</bricks>
      <recruits>1</recruits>
    </cost>
    <level>7</level>
    <effect><![CDATA[Tower: +2<br />Wall: +4<br />Summons non-rare <b>Charge</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(2)->addWall(4);
    $common = $t->getList(['rarity'=>'Common', 'keyword'=>'Charge']);
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Charge']);
    $t->nextCard($t->drawCard(array_merge($common, $uncommon), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2010-06-21</created>
    <modified>2014-12-24</modified>
  </card>
  <card id="573">
    <name>Laputa the Flying fortress</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>18</bricks>
      <gems>18</gems>
      <recruits>18</recruits>
    </cost>
    <level>9</level>
    <keywords>Aria</keywords>
    <effect><![CDATA[Tower:= Max tower - Tower<br />If Wall > 35<br />Wall:= Max wall - Wall]]></effect>
    <code><![CDATA[
    $t->myData()->setTower($t->config('max_tower') - $t->myData()->Tower);
    if ($t->myData()->Wall > 35) {
      $t->myData()->setWall($t->config('max_wall') - $t->myData()->Wall);
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="574">
    <name>Alucard</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <level>8</level>
    <keywords>Far sight,Banish,Skirmisher</keywords>
    <effect><![CDATA[Attack: 35<br />If #different keywords in hand > #different keywords in opponent's hand<br />Attack: 30]]></effect>
    <code><![CDATA[
    $tmp = ($t->countDistinctKeywords($t->myData()->Hand) > $t->countDistinctKeywords($t->hisData()->Hand)) ? 65 : 35;
    $t->hisData()->attack($tmp);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="575">
    <name>Chateau</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <level>8</level>
    <effect><![CDATA[If Tower < 15 or Wall < 15<br />Tower: +5<br />Wall: +12<br />else<br />Tower: +3<br />Wall: +8]]></effect>
    <code><![CDATA[
    if ($t->myData()->Tower < 15 || $t->myData()->Wall < 15) {
      $t->myData()->addTower(5)->addWall(12);
    }
    else {
      $t->myData()->addTower(3)->addWall(8);
    }
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="576">
    <name>Necroent</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <level>10</level>
    <keywords>Nature,Undead</keywords>
    <effect><![CDATA[Enemy wall: -23<br />Attack: 15<br />If #<b>Nature</b> in hand > 4<br />Gems: +20<br />If #<b>Undead</b> in hand > 4<br />Recruits: +20]]></effect>
    <code><![CDATA[
    $t->hisData()->addWall(-23)->attack(15);
    if ($t->keywordCount($t->myData()->Hand, 'Nature') > 4) {
      $t->myData()->addGems(20);
    }
    if ($t->keywordCount($t->myData()->Hand, 'Undead') > 4) {
      $t->myData()->addRecruits(20);
    }
]]></code>
    <created>2010-09-10</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="577">
    <name>Seiryu</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>50</gems>
    </cost>
    <level>8</level>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Attack: 10N<br />N = #Magic + #Enemy magic]]></effect>
    <code><![CDATA[
    $tmp = $t->myData()->Magic + $t->hisData()->Magic;
    $t->hisData()->attack(10 * $tmp);
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="578">
    <name>Deathwood necromancer</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <keywords>Nature,Undead</keywords>
    <effect><![CDATA[Gems: +#<b>Nature</b> in hand (max 4)<br />Recruits: +#<b>Undead</b> in hand (max 4)]]></effect>
    <code><![CDATA[
    $t->myData()
      ->addGems(min(4, $t->keywordCount($t->myData()->Hand, 'Nature')))
      ->addRecruits(min(4, $t->keywordCount($t->myData()->Hand, 'Undead')));
]]></code>
    <created>2010-09-10</created>
    <modified>2013-12-24</modified>
  </card>
  <card id="579">
    <name>Citadel towers</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>17</bricks>
    </cost>
    <level>9</level>
    <keywords>Far sight</keywords>
    <effect><![CDATA[If Tower < Wall<br />Tower: +25<br />else<br />Tower: +12]]></effect>
    <code><![CDATA[if ($t->myData()->Tower < $t->myData()->Wall) { $t->myData()->addTower(25); } else { $t->myData()->addTower(12); }]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="580">
    <name>Wizard's tower</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
      <gems>3</gems>
    </cost>
    <level>5</level>
    <effect><![CDATA[Tower: +N<br />N = 3 + #Magic]]></effect>
    <code><![CDATA[$t->myData()->addTower(3 + $t->myData()->Magic);]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="581">
    <name>Mountain berserker</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>8</recruits>
    </cost>
    <level>2</level>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[Attack: 7<br />Stock: +2]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(7);
    $t->myData()->addStock(2);
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="582">
    <name>Magical defense</name>
    <rarity>Common</rarity>
    <cost>
      <gems>7</gems>
    </cost>
    <level>2</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Wall: +7<br />Bricks: +5]]></effect>
    <code><![CDATA[$t->myData()->addWall(7)->addBricks(5);]]></code>
    <created>2010-09-10</created>
    <modified>2010-10-03</modified>
  </card>
  <card id="583">
    <name>Moon castle</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>10</level>
    <effect><![CDATA[Players gain 1 stock for each non-keyword card and lose 1 stock for each different keyword in their hand]]></effect>
    <code><![CDATA[
    $mine = $his = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if (!$t->getCard($t->myData()->Hand[$i])->hasKeyword('any')) {
        $mine++;
      }
      if (!$t->getCard($t->hisData()->Hand[$i])->hasKeyword('any')) {
        $his++;
      }
    }
    $my_gain = $mine - $t->countDistinctKeywords($t->myData()->Hand);
    $his_gain = $his - $t->countDistinctKeywords($t->hisData()->Hand);
    $t->myData()->addStock($my_gain);
    $t->hisData()->addStock($his_gain);
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="584">
    <name>Chaos dwarf</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>3</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Replace a card in hand with self<br />Raises wall based on replaced card rarity (C-2, U-6, R-14)]]></effect>
    <code><![CDATA[
    $rarities = ['Common' => 2, 'Uncommon' => 6, 'Rare' => 14];
    $cur_rarity = $t->getCard($t->myData()->Hand[$t->mode()])->getRarity();
    $t->myData()->addWall($rarities[$cur_rarity]);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
    else {
      $t->replaceCard('my', $t->mode(), $t->card()->id());
    }
]]></code>
    <created>2010-09-10</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="585">
    <name>Barbz's pupil</name>
    <rarity>Common</rarity>
    <modes>8</modes>
    <level>9</level>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Summons selected non-rare card in opponent's hand]]></effect>
    <code><![CDATA[
    if ($t->getCard($t->hisData()->Hand[$t->mode()])->getRarity() != 'Rare') {
      $t->nextCard($t->hisData()->Hand[$t->mode()], true);
    }
]]></code>
    <created>2010-09-10</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="586">
    <name>Mithril miner</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <level>2</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Highest facility prod x2]]></effect>
    <code><![CDATA[$t->production()->multiply(2, $t->myData()->detectHighestFacility());]]></code>
    <created>2010-09-10</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="587">
    <name>Working together</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
      <recruits>1</recruits>
    </cost>
    <level>8</level>
    <effect><![CDATA[Tower: +#common cards in hand]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->getRarity() == 'Common') {
        $t->myData()->Tower++;
      }
    }
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="588">
    <name>Harvest fairy</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>2</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Replace adjacent cards with [card=566/]]]></effect>
    <code><![CDATA[
    if ($t->cardPos() > 1) {
      $t->setCard('my', $t->cardPos() - 1, 566, ['reveal' => true]);
    }
    if ($t->cardPos() < $t->handSize()) {
      $t->setCard('my', $t->cardPos() + 1, 566, ['reveal' => true]);
    }
]]></code>
    <created>2010-09-10</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="589">
    <name>Librarian</name>
    <rarity>Common</rarity>
    <cost>
      <gems>7</gems>
    </cost>
    <level>10</level>
    <keywords>Mage</keywords>
    <effect><![CDATA[Tower: +3<br /><b>Mage</b> tokens: +30]]></effect>
    <code><![CDATA[$t->myData()->addTower(3)->addToken('Mage', 30);]]></code>
    <created>2010-09-10</created>
    <modified>2013-03-31</modified>
  </card>
  <card id="590">
    <name>Golem Messenger</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>9</bricks>
    </cost>
    <level>10</level>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Tower: +4<br />Wall: +6<br />Summons <b>Unliving</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(4)->addWall(6);
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Unliving']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="591">
    <name>Colossus of Kran</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>40</bricks>
    </cost>
    <level>10</level>
    <keywords>Unliving,Siege</keywords>
    <effect><![CDATA[Attack: 30 + 4N<br />Quarry: +N / 2<br />N = #<b>Unliving</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Unliving');
    $t->hisData()->attack(30 + 4 * $tmp);
    $t->myData()->addQuarry(round($tmp / 2));
]]></code>
    <created>2010-09-10</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="592">
    <name>Eternal dream</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>4</gems>
    </cost>
    <level>9</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[If last card played was a rare<br />Summons a rare card]]></effect>
    <code><![CDATA[
    if ($t->myLastCard()->getRarity() == 'Rare') {
      $t->nextCard($t->drawCard($t->getList(['rarity'=>'Rare']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    }
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="593">
    <name>Witch rider</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>20</gems>
      <recruits>12</recruits>
    </cost>
    <level>5</level>
    <effect><![CDATA[Gems: +8<br />If #<b>Far sight</b> in hand > 0<br />Enemy tower: -18<br />else<br />Attack: 20]]></effect>
    <code><![CDATA[
    $t->myData()->addGems(8);
    if ($t->keywordCount($t->myData()->Hand, 'Far sight') > 0) {
      $t->hisData()->addTower(-18);
    }
    else {
      $t->hisData()->attack(20);
    }
]]></code>
    <created>2010-09-10</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="594">
    <name>Desert traveler</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>8</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Attack: 8<br />Opponent loses 14 random resources<br />Replace matching card with [card=23/]]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(8)->addRandomResources(-14);
    $t->setCard('his', $t->cardPos(), 23, ['reveal' => true]);
]]></code>
    <created>2010-09-10</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="595">
    <name>Thug</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>4</recruits>
    </cost>
    <level>9</level>
    <effect><![CDATA[Opponent loses 5 random resources<br />Replace non-rare matching card with [card=297/]]]></effect>
    <code><![CDATA[
    $t->hisData()->addRandomResources(-5);
    if ($t->getCard($t->hisData()->Hand[$t->cardPos()])->getRarity() != 'Rare') {
      $t->setCard('his', $t->cardPos(), 297, ['reveal' => true]);
    }
]]></code>
    <created>2010-09-10</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="596">
    <name>Myr's academy</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>7</bricks>
      <gems>7</gems>
      <recruits>7</recruits>
    </cost>
    <level>7</level>
    <effect><![CDATA[Replace your hand with [card=109/], [card=329/], [card=82/], [card=564/], [card=589/], [card=457/], [card=467/] and [card=53/]<br />Gems prod x3]]></effect>
    <code><![CDATA[$t->setHandShuffled('my', [329, 82, 457, 589, 109, 564, 53, 467]); $t->noNextCard(); $t->production()->multiplyGems(3);]]></code>
    <created>2010-09-10</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="597">
    <name>Fireball</name>
    <rarity>Common</rarity>
    <cost>
      <gems>4</gems>
    </cost>
    <level>10</level>
    <keywords>Burning,Siege</keywords>
    <effect><![CDATA[Attack: 3 + N / 10<br />N = <b>Mage</b> tokens<br />If Enemy tower > 45<br />Enemy tower: -5]]></effect>
    <code><![CDATA[
    $dmg = ($t->myData()->findToken('Mage')) ? round($t->myData()->getToken('Mage') / 10) : 0;
    $t->hisData()->attack(3 + $dmg);
    if ($t->hisData()->Tower > 45) {
      $t->hisData()->addTower(-5);
    }
]]></code>
    <created>2010-09-10</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="598">
    <name>Urk's tribe</name>
    <rarity>Common</rarity>
    <level>9</level>
    <keywords>Barbarian,Charge (2)</keywords>
    <effect><![CDATA[Attack: 8<br />You lose 6 random resources]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(8);
    $t->myData()->addRandomResources(-6);
]]></code>
    <created>2010-09-10</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="599">
    <name>Elven warlock</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>24</gems>
      <recruits>18</recruits>
    </cost>
    <level>9</level>
    <keywords>Alliance,Mage</keywords>
    <effect><![CDATA[Attack: 8N<br />N = #Magic<br />Gems prod x6<br />]]></effect>
    <code><![CDATA[$t->hisData()->attack(8 * $t->myData()->Magic); $t->production()->multiplyGems(6);]]></code>
    <created>2010-10-03</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="600">
    <name>Battle rager</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>16</recruits>
    </cost>
    <level>8</level>
    <keywords>Barbarian,Skirmisher,Frenzy</keywords>
    <effect><![CDATA[If played card is a adjacent to a <b>Frenzy</b> card<br />Attack: 15<br />else<br />Attack: 21]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(
    (($t->cardPos() > 1 && $t->getCard($t->myData()->Hand[$t->cardPos() - 1])->hasKeyword('Frenzy')) || ($t->cardPos() < $t->handSize()
      && $t->getCard($t->myData()->Hand[$t->cardPos() + 1])->hasKeyword('Frenzy'))
    ) ? 15 : 21);
]]></code>
    <created>2010-10-03</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="601">
    <name>Whirlwind</name>
    <rarity>Uncommon</rarity>
    <level>8</level>
    <keywords>Quick,Aria</keywords>
    <effect><![CDATA[Enemy wall: -3<br />Enemy stock: -1<br />Shuffles your hand]]></effect>
    <code><![CDATA[
    $t->hisData()->addWall(-3)->addStock(-1);
    $t->setCard('my', $t->cardPos(), $t->drawCard($t->myDeck(), $t->myData()->Hand, $t->cardPos(), 'drawCardNoRare'));
    $t->myData()->shuffleHand(); $t->noNextCard(); 
]]></code>
    <created>2010-10-03</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="602">
    <name>Northern mountains</name>
    <rarity>Common</rarity>
    <level>10</level>
    <effect><![CDATA[Wall: +10<br />Enemy wall: +10<br />Summons a <b>Barbarian</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(10); $t->hisData()->addWall(10);
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Barbarian']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2010-10-03</created>
    <modified>2014-04-21</modified>
  </card>
  <card id="603">
    <name>Wolf mistress</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>8</recruits>
    </cost>
    <modes>8</modes>
    <level>8</level>
    <keywords>Barbarian,Beast,Frenzy</keywords>
    <effect><![CDATA[Attack: 8<br />Replace a card in hand with <b>Frenzy</b>]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(8);
    $t->setCard('my', $t->mode(), $t->drawCard($t->getList(['keyword'=>'Frenzy']), $t->myData()->Hand, $t->mode(), 'drawCardList'));
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2010-10-03</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="604">
    <name>Byakko</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>20</recruits>
    </cost>
    <level>10</level>
    <keywords>Beast,Durable</keywords>
    <effect><![CDATA[Dungeon: +1<br />Attack: 10N<br />N = #Dungeon - #Enemy dungeon<br />Recruits prod x0]]></effect>
    <code><![CDATA[
    $t->myData()->addDungeons(1);
    $tmp = max(0, $t->myData()->Dungeons - $t->hisData()->Dungeons);
    $t->hisData()->attack(10 * $tmp);
    $t->production()->multiplyRecruits(0);
]]></code>
    <created>2010-10-03</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="605">
    <name>Reinforcements</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <effect><![CDATA[Replace a card in hand with Recruits only no support keyword attack card<br />Gain half recruits cost of the summoned card (max 6)]]></effect>
    <code><![CDATA[
    $list = $t->getList(['cost'=>'Green', 'advanced'=>'Attack:', 'support'=>'No keywords']);
    $summoned = $t->drawCard($list, $t->myData()->Hand, $t->mode(), 'drawCardList');
    $t->setCard('my', $t->mode(), $summoned);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
    $t->myData()->addRecruits(min(round($t->getCard($summoned)->getResources('Recruits') / 2), 6));
]]></code>
    <created>2010-10-03</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="606">
    <name>Poison frog</name>
    <rarity>Common</rarity>
    <cost>
      <gems>2</gems>
      <recruits>3</recruits>
    </cost>
    <level>7</level>
    <keywords>Aqua,Quick</keywords>
    <effect><![CDATA[Attack: 2<br />Enemy recruits: -1]]></effect>
    <code><![CDATA[$t->hisData()->attack(2)->addRecruits(-1);]]></code>
    <created>2010-10-03</created>
    <modified>2010-10-03</modified>
  </card>
  <card id="607">
    <name>Fire fox</name>
    <rarity>Common</rarity>
    <cost>
      <gems>3</gems>
      <recruits>3</recruits>
    </cost>
    <level>10</level>
    <keywords>Beast,Burning</keywords>
    <effect><![CDATA[Gems: +#<b>Burning</b> in game (max 7)<br />Recruits: +#<b>Beast</b> in hand (max 7)]]></effect>
    <code><![CDATA[
    $t->myData()
      ->addGems(min(7, $t->keywordCount($t->myData()->Hand, 'Burning') + $t->keywordCount($t->hisData()->Hand, 'Burning')))
      ->addRecruits(min(7, $t->keywordCount($t->myData()->Hand, 'Beast')));
]]></code>
    <created>2010-10-03</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="608">
    <name>Purifying fire</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>10</level>
    <keywords>Burning</keywords>
    <effect><![CDATA[Players discard all non-rare cards not from their deck (can't draw rare cards)]]></effect>
    <code><![CDATA[
    $my_cards = array_merge($t->myDeck()->Common, $t->myDeck()->Uncommon);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->myData()->Hand[$i];
      if ($t->getCard($cur_card)->getRarity() != 'Rare' && !in_array($cur_card, $my_cards) && $i != $t->cardPos()) {
        $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardNoRare'));
      }
    }
    $his_cards = array_merge($t->hisDeck()->Common, $t->hisDeck()->Uncommon);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->hisData()->Hand[$i];
      if ($t->getCard($cur_card)->getRarity() != 'Rare' && !in_array($cur_card, $his_cards)) {
        $t->setCard('his', $i, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $i, 'drawCardNoRare'));
      }
    }
]]></code>
    <created>2010-10-03</created>
    <modified>2014-12-24</modified>
  </card>
  <card id="609">
    <name>Warhound</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>4</recruits>
    </cost>
    <level>7</level>
    <keywords>Beast,Soldier,Charge (2)</keywords>
    <effect><![CDATA[Wall: +6]]></effect>
    <code><![CDATA[$t->myData()->addWall(6);]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="610">
    <name>Succubus</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <modes>8</modes>
    <level>9</level>
    <keywords>Burning,Demonic</keywords>
    <effect><![CDATA[Attack: 16<br />Discard a non-rare card from opponent's hand<br />Summons the discarded card]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(16);
    if ($t->getCard($t->hisData()->Hand[$t->mode()])->getRarity() != 'Rare') {
      $t->nextCard($t->hisData()->Hand[$t->mode()], true);
      $t->setCard('his', $t->mode(), $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $t->mode(), 'drawCardDifferent'));
    }
]]></code>
    <created>2011-01-01</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="611">
    <name>Infinite weapon works</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Production x0<br />Recruits: +20]]></effect>
    <code><![CDATA[$t->production()->multiply(0); $t->myData()->addRecruits(20);]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="612">
    <name>Corrupted woods</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <level>9</level>
    <keywords>Nature,Undead</keywords>
    <effect><![CDATA[Wall: +5N<br />Enemy wall: -5M<br />Stock: +(N + M)<br />N = #<b>Nature</b> in hand<br />M = #<b>Undead</b> in hand]]></effect>
    <code><![CDATA[
    $nature = $t->keywordCount($t->myData()->Hand, 'Nature');
    $undead = $t->keywordCount($t->myData()->Hand, 'Undead');
    $tmp = $nature + $undead;
    $t->myData()->addWall(5 * $nature)->addStock($tmp);
    $t->hisData()->addWall(-5 * $undead);
]]></code>
    <created>2011-01-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="613">
    <name>Atlantis</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>12</gems>
    </cost>
    <level>9</level>
    <effect><![CDATA[Replace your hand with [card=521/], [card=553/], [card=550/], [card=560/], [card=507/], [card=505/], [card=530/] and [card=506/]]]></effect>
    <code><![CDATA[$t->setHandShuffled('my', [521, 553, 550, 560, 507, 505, 530, 506]); $t->noNextCard();]]></code>
    <created>2011-01-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="614">
    <name>Crystal cavern</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>15</bricks>
      <gems>15</gems>
      <recruits>15</recruits>
    </cost>
    <level>1</level>
    <effect><![CDATA[Facilities: +1<br />If Round > 35<br />Facilities: +1]]></effect>
    <code><![CDATA[$t->myData()->addFacilities(1); if ($t->round() > 35) { $t->myData()->addFacilities(1); }]]></code>
    <created>2011-01-01</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="615">
    <name>Ancient dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>18</gems>
      <recruits>18</recruits>
    </cost>
    <modes>2</modes>
    <level>1</level>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Attack: 45<br />Mode1:<br />Magic: +1<br />Mode2:<br />Dungeon: +1]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(45);
    if ($t->mode() == 1) {
      $t->myData()->addMagic(1);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addDungeons(1);
    }
]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="616">
    <name>Genbu</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>35</bricks>
    </cost>
    <level>10</level>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Attack: 10N<br />Tower: +10M<br />N = #Quarry<br />M = #Enemy quarry<br />Won't lower enemy tower below 10]]></effect>
    <code><![CDATA[
    $tmp = min($t->hisData()->Tower, 10);
    $t->hisData()->attack(10 * $t->myData()->Quarry)->setTower(max($t->hisData()->Tower, $tmp));
    $t->myData()->addTower(10 * $t->hisData()->Quarry);
]]></code>
    <created>2011-01-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="617">
    <name>Dwarven forge</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>15</bricks>
      <recruits>15</recruits>
    </cost>
    <level>4</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Tower: +4<br />Wall: +6<br />Lowest facility: +2]]></effect>
    <code><![CDATA[$t->myData()->addTower(4)->addWall(6)->addLowestFacility(2);]]></code>
    <created>2011-01-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="618">
    <name>Dwarven guard</name>
    <rarity>Uncommon</rarity>
    <cost>
      <recruits>16</recruits>
    </cost>
    <level>5</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Attack: 13<br />If N < 1<br />N = #<b>Runic</b> + #<b>Durable</b> in opponent's hand<br />Attack: 12]]></effect>
    <code><![CDATA[
    $tmp = ($t->keywordCount($t->hisData()->Hand, 'Runic') + $t->keywordCount($t->hisData()->Hand, 'Durable') < 1) ? 25 : 13;
    $t->hisData()->attack($tmp);
]]></code>
    <created>2011-01-01</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="619">
    <name>Dwarven wall</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>7</bricks>
    </cost>
    <level>9</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Wall: +N<br />N = #Facilities]]></effect>
    <code><![CDATA[$t->myData()->addWall($t->myData()->Quarry + $t->myData()->Magic + $t->myData()->Dungeons);]]></code>
    <created>2011-01-01</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="620">
    <name>Wish</name>
    <rarity>Common</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>7</level>
    <effect><![CDATA[Discard your hand and draw new starting hand]]></effect>
    <code><![CDATA[$t->setHand('my', $t->drawHandInitial($t->myDeck())); $t->noNextCard();]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="621">
    <name>Warpriest</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>9</gems>
      <recruits>9</recruits>
    </cost>
    <level>7</level>
    <keywords>Holy,Mage</keywords>
    <effect><![CDATA[Attack: 6 + 2N<br />N = #Magic + #Dungeon]]></effect>
    <code><![CDATA[
    $tmp = $t->myData()->Magic + $t->myData()->Dungeons;
    $t->hisData()->attack(6 + 2 * $tmp);
]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="622">
    <name>Dragon nest</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>11</bricks>
      <gems>11</gems>
      <recruits>11</recruits>
    </cost>
    <level>1</level>
    <effect><![CDATA[Magic: +1<br />Dungeon: +1<br />Summons a rare <b>Dragon</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addMagic(1)->addDungeons(1);
    $t->nextCard($t->drawCard($t->getList(['rarity'=>'Rare', 'keyword'=>'Dragon']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="623">
    <name>Reunion of the tribes</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>9</level>
    <effect><![CDATA[Recruits: +45<br />Enemy wall: +120<br />Replace your hand with [card=45/], [card=334/], [card=281/], [card=68/], [card=344/], [card=345/], [card=337/] and [card=535/]]]></effect>
    <code><![CDATA[
    $t->myData()->addRecruits(45);
    $t->hisData()->addWall(120);
    $t->setHandShuffled('my', [45, 334, 281, 68, 344, 345, 337, 535]);
    $t->noNextCard();
]]></code>
    <created>2011-01-01</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="624">
    <name>Dwarven dome</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>7</bricks>
    </cost>
    <level>9</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[If Tower < 65<br />Tower: +7<br />else<br />Wall: +9]]></effect>
    <code><![CDATA[if ($t->myData()->Tower < 65) { $t->myData()->addTower(7); } else { $t->myData()->addWall(9); }]]></code>
    <created>2011-04-24</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="625">
    <name>Shifting mass</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>3</bricks>
      <gems>3</gems>
      <recruits>3</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Summons highest cost card in game (can't summon self)]]></effect>
    <code><![CDATA[
    $high = $costs = array();
    $max = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->card()->id() != $t->myData()->Hand[$i]) {
        $cur_cost = $costs[$i] = $t->getCard($t->myData()->Hand[$i])->getResources();
        if ($cur_cost > $max) {
          $max = $cur_cost;
        }
      }
      if ($t->card()->id() != $t->hisData()->Hand[$i]) {
        $cur_cost = $costs[$i + 8] = $t->getCard($t->hisData()->Hand[$i])->getResources();
        if ($cur_cost > $max) {
          $max = $cur_cost;
        }
      }
    }
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->card()->id() != $t->myData()->Hand[$i] && $costs[$i] == $max) {
        $high[] = $t->myData()->Hand[$i];
      }
      if ($t->card()->id() != $t->hisData()->Hand[$i] && $costs[$i + 8] == $max) {
        $high[] = $t->hisData()->Hand[$i];
      }
    }
    if (count($high) > 0) {
      $t->nextCard($high[$t->arrayRand($high)]);
    }
]]></code>
    <created>2011-04-24</created>
    <modified>2014-12-24</modified>
  </card>
  <card id="626">
    <name>Petrify</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
      <gems>2</gems>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <effect><![CDATA[Tower: +3<br />Replace a non-<b>Unliving</b> card in hand with <b>Unliving</b> card of the same rarity]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(3);
    $selected = $t->getCard($t->myData()->Hand[$t->mode()]);
    if (!$selected->hasKeyword('Unliving')) {
      $t->setCard('my', $t->mode(), $t->drawCard($t->getList(['rarity'=>$selected->getRarity(), 'keyword'=>'Unliving']), $t->myData()->Hand, $t->mode(), 'drawCardList'));
    }
]]></code>
    <created>2011-04-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="627">
    <name>Shadow wolf</name>
    <rarity>Common</rarity>
    <cost>
      <gems>5</gems>
    </cost>
    <level>10</level>
    <keywords>Beast,Illusion</keywords>
    <effect><![CDATA[Attack: 4<br />Discard highest rarity discarding or replacing non-rare card from opponent's hand]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(4);
    $storage = ['Common' => array(), 'Uncommon' => array()];
    $target_cards = array_merge($t->getList(['advanced'=>"Discard "]), $t->getList(['advanced'=>'Replace ']));
    
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if (in_array($t->hisData()->Hand[$i], $target_cards)) {
        $dis_card = $t->getCard($t->hisData()->Hand[$i]);
        $dis_rarity = $dis_card->getRarity();
        if ($dis_rarity != 'Rare') {
          $storage[$dis_rarity][] = $i;
        }
      }
    }

    if ((count($storage['Common']) + count($storage['Uncommon'])) > 0) {
      shuffle($storage['Common']); shuffle($storage['Uncommon']);
      $storage_temp = array_merge($storage['Common'], $storage['Uncommon']);
      $discarded_pos = array_pop($storage_temp);
      $t->setCard('his', $discarded_pos, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $discarded_pos, 'drawCardDifferent'));
    }
]]></code>
    <created>2011-04-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="628">
    <name>Pet dragon</name>
    <rarity>Common</rarity>
    <cost>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <modes>2</modes>
    <level>6</level>
    <keywords>Alliance,Dragon</keywords>
    <effect><![CDATA[Attack: 5<br />Mode1:<br />Gems prod x2<br />Mode2:<br />Recruits prod x2]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(5);
    if ($t->mode() == 1) {
      $t->production()->multiplyGems(2);
    }
    elseif ($t->mode() == 2) {
      $t->production()->multiplyRecruits(2);
    }
]]></code>
    <created>2011-04-24</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="629">
    <name>Elven apprentice</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>4</bricks>
      <gems>4</gems>
      <recruits>4</recruits>
    </cost>
    <modes>3</modes>
    <level>9</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Evoke [card=22/], [card=34/] or [card=12/]]]></effect>
    <code><![CDATA[$summons = [1 => 22, 34, 12]; $t->nextCard($summons[$t->mode()], true);]]></code>
    <created>2011-04-24</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="630">
    <name>Goblin tower</name>
    <rarity>Common</rarity>
    <level>8</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Tower: +7<br />Production x0]]></effect>
    <code><![CDATA[$t->myData()->addTower(7); $t->production()->multiply(0);]]></code>
    <created>2011-04-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="631">
    <name>Dwarven castle</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>5</bricks>
    </cost>
    <modes>2</modes>
    <level>10</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Mode1:<br />Tower: = 21<br />Mode2:<br />Wall: = 21]]></effect>
    <code><![CDATA[if ($t->mode() == 1) { $t->myData()->setTower(21); } elseif ($t->mode() == 2) { $t->myData()->setWall(21); }]]></code>
    <created>2011-04-24</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="632">
    <name>Priestess of light</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>2</bricks>
      <gems>2</gems>
      <recruits>2</recruits>
    </cost>
    <modes>3</modes>
    <level>7</level>
    <keywords>Alliance,Holy</keywords>
    <effect><![CDATA[Mode1:<br />Bricks prod x3<br />Mode2:<br />Gems prod x3<br />Mode3:<br />Recruits prod x3]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->production()->multiplyBricks(3);
    }
    elseif ($t->mode() == 2) {
      $t->production()->multiplyGems(3);
    }
    elseif ($t->mode() == 3) {
      $t->production()->multiplyRecruits(3);
    }
]]></code>
    <created>2011-04-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="633">
    <name>Scylla</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>18</gems>
      <recruits>15</recruits>
    </cost>
    <level>8</level>
    <keywords>Aqua,Skirmisher</keywords>
    <effect><![CDATA[Enemy wall: -9<br />Attack: N<br />N = #Enemy tower (max 30)]]></effect>
    <code><![CDATA[$t->hisData()->addWall(-9)->attack(min(30, $t->hisData()->Tower));]]></code>
    <created>2011-04-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="634">
    <name>Suzaku</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>42</gems>
      <recruits>42</recruits>
    </cost>
    <level>9</level>
    <keywords>Burning</keywords>
    <effect><![CDATA[Attack: 10N<br />N = sum of three highest facilities in game]]></effect>
    <code><![CDATA[
    $facilities = [$t->myData()->Quarry, $t->myData()->Magic, $t->myData()->Dungeons, $t->hisData()->Quarry, $t->hisData()->Magic, $t->hisData()->Dungeons];
    sort($facilities);
    $sum = 0;
    for ($i = 1; $i <= 3; $i++) {
      $val = array_pop($facilities);
      $sum+= $val;
    }
    $t->hisData()->attack(10 * $sum);
]]></code>
    <created>2011-04-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="635">
    <name>Hydra</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>8</level>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Replace adjacent cards with Hydra<br />Attack: 5N<br />N = #Hydra cards in game]]></effect>
    <code><![CDATA[
    if ($t->cardPos() > 1) {
      $t->setCard('my', $t->cardPos() - 1, 635, ['reveal' => true]);
    }
    if ($t->cardPos() < $t->handSize()) {
      $t->setCard('my', $t->cardPos() + 1, 635, ['reveal' => true]);
    }
    $tmp = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->myData()->Hand[$i] == 635) {
        $tmp++;
      }
      if ($t->hisData()->Hand[$i] == 635) {
        $tmp++;
      }
    }
    $t->hisData()->attack(5 * $tmp);
]]></code>
    <created>2011-04-24</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="636">
    <name>Mirror elemental</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
    </cost>
    <modes>8</modes>
    <level>7</level>
    <keywords>Illusion,Unliving</keywords>
    <effect><![CDATA[Wall: +15<br />Replace a card in hand with [card=479/]]]></effect>
    <code><![CDATA[$t->myData()->addWall(15); $t->setCard('my', $t->mode(), 479, ['reveal' => true]); if ($t->mode() == $t->cardPos()) { $t->noNextCard(); }]]></code>
    <created>2011-04-24</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="637">
    <name>Bahamut</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>75</recruits>
    </cost>
    <level>10</level>
    <keywords>Dragon,Legend</keywords>
    <effect><![CDATA[Enemy wall: -80<br />Attack: 150]]></effect>
    <code><![CDATA[$t->hisData()->addWall(-80)->attack(150);]]></code>
    <created>2011-04-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="638">
    <name>Standstill</name>
    <rarity>Common</rarity>
    <level>3</level>
    <effect><![CDATA[Tower: +4<br />Wall: +8<br />Enemy tower: +4<br />Enemy wall: +8]]></effect>
    <code><![CDATA[$t->myData()->addTower(4)->addWall(8); $t->hisData()->addTower(4)->addWall(8);]]></code>
    <created>2011-09-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="639">
    <name>Goblin heap</name>
    <rarity>Common</rarity>
    <level>8</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Wall: +10<br />Bricks prod x0<br />Recruits prod x0]]></effect>
    <code><![CDATA[$t->myData()->addWall(10); $t->production()->multiplyBricks(0)->multiplyRecruits(0);]]></code>
    <created>2011-09-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="640">
    <name>Gorgon</name>
    <rarity>Common</rarity>
    <level>7</level>
    <effect><![CDATA[Bricks: +5<br />Recruits: -5<br />Enemy bricks: +5<br />Enemy recruits: -5]]></effect>
    <code><![CDATA[$t->myData()->addBricks(5)->addRecruits(-5); $t->hisData()->addBricks(5)->addRecruits(-5);]]></code>
    <created>2011-09-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="641">
    <name>Samurai princess</name>
    <rarity>Rare</rarity>
    <level>9</level>
    <effect><![CDATA[Discard all rare cards from opponent's hand (opponent can't draw rare cards)]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->hisData()->Hand[$i])->getRarity() == 'Rare') {
        $t->setCard('his', $i, $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $i, 'drawCardNoRare'));
      }
    }
]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="642">
    <name>Arcane tome</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <modes>8</modes>
    <level>5</level>
    <effect><![CDATA[Magic: +1<br />Replace a card in hand with [card=34/]]]></effect>
    <code><![CDATA[
    $t->myData()->addMagic(1);
    $t->setCard('my', $t->mode(), 34, ['reveal' => true]);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2011-09-24</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="643">
    <name>Mason</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>1</bricks>
    </cost>
    <modes>8</modes>
    <level>2</level>
    <effect><![CDATA[Quarry: +1<br />Replace a card in hand with [card=22/]]]></effect>
    <code><![CDATA[
    $t->myData()->addQuarry(1);
    $t->setCard('my', $t->mode(), 22, ['reveal' => true]);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2011-09-24</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="644">
    <name>Forge master</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <level>3</level>
    <effect><![CDATA[Dungeon: +1<br />Replace a card in hand with [card=12/]]]></effect>
    <code><![CDATA[
    $t->myData()->addDungeons(1);
    $t->setCard('my', $t->mode(), 12, ['reveal' => true]);
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2011-09-24</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="645">
    <name>Ancient power</name>
    <rarity>Common</rarity>
    <level>10</level>
    <effect><![CDATA[Players gain 1 stock for each rare card and each <b>Dragon</b> in their hand]]></effect>
    <code><![CDATA[
    $mine = $his = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->myData()->Hand[$i])->getRarity() == 'Rare') {
        $mine++;
      }
      if ($t->getCard($t->hisData()->Hand[$i])->getRarity() == 'Rare') {
        $his++;
      }
    }
    $mine+= $t->keywordCount($t->myData()->Hand, 'Dragon');
    $his+= $t->keywordCount($t->hisData()->Hand, 'Dragon');
    $t->myData()->addStock($mine);
    $t->hisData()->addStock($his);
]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="646">
    <name>Northern archer</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <keywords>Barbarian,Far sight</keywords>
    <effect><![CDATA[Enemy tower: -N<br />Enemy wall: +N<br />N = #<b>Barbarian</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Barbarian');
    $t->hisData()->addTower(-$tmp)->addWall($tmp);
]]></code>
    <created>2011-09-24</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="647">
    <name>Guardian spirit</name>
    <rarity>Common</rarity>
    <cost>
      <gems>2</gems>
    </cost>
    <level>6</level>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Tower: +2<br />If Tower or Wall was damaged during opponent's last round<br />Wall: +8]]></effect>
    <code><![CDATA[$t->myData()->addTower(2); if ($t->myChange('Tower') < 0 || $t->myChange('Wall') < 0) { $t->myData()->addWall(8); }]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="648">
    <name>Water ritual</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <level>3</level>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Summons [card=530/]]]></effect>
    <code><![CDATA[$t->nextCard(530);]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="649">
    <name>Zeus</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>30</gems>
      <recruits>30</recruits>
    </cost>
    <level>5</level>
    <effect><![CDATA[Enemy tower:= 10<br />Enemy wall:= 10]]></effect>
    <code><![CDATA[$t->hisData()->setTower(10)->setWall(10);]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="650">
    <name>Baku</name>
    <rarity>Common</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>8</level>
    <keywords>Beast,Illusion</keywords>
    <effect><![CDATA[Attack: 6<br />Summons a card from opponent's deck]]></effect>
    <code><![CDATA[$t->hisData()->attack(6); $t->nextCard($t->drawCard(array_merge($t->hisDeck()->Common, $t->hisDeck()->Uncommon, $t->hisDeck()->Rare), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));]]></code>
    <created>2011-09-24</created>
    <modified>2014-04-21</modified>
  </card>
  <card id="651">
    <name>Amazon warrior</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <level>7</level>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[If Enemy wall > 30<br />Enemy wall: -10<br />Always:<br />Attack: 7]]></effect>
    <code><![CDATA[if ($t->hisData()->Wall > 30) { $t->hisData()->addWall(-10); } $t->hisData()->attack(7);]]></code>
    <created>2011-09-24</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="652">
    <name>Tsunami</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>15</gems>
    </cost>
    <level>9</level>
    <keywords>Aqua,Durable</keywords>
    <effect><![CDATA[Discard opponent's hand (opponent can't draw rare cards)]]></effect>
    <code><![CDATA[$t->setHand('his', $t->drawHandNoRare($t->hisDeck()));]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="653">
    <name>Elven sorceress</name>
    <rarity>Common</rarity>
    <cost>
      <gems>3</gems>
    </cost>
    <level>5</level>
    <keywords>Alliance,Mage</keywords>
    <effect><![CDATA[Attack: 3<br />If Gems < Enemy gems<br />Gems prod x2]]></effect>
    <code><![CDATA[$t->hisData()->attack(3); if ($t->myData()->Gems < $t->hisData()->Gems) { $t->production()->multiplyGems(2); }]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="654">
    <name>Academy</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>10</bricks>
      <gems>10</gems>
      <recruits>10</recruits>
    </cost>
    <level>7</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Tower: +15<br />Lowest facility: +1<br />Highest facility prod x0]]></effect>
    <code><![CDATA[$t->myData()->addTower(15)->addLowestFacility(1); $t->production()->multiply(0, $t->myData()->detectHighestFacility());]]></code>
    <created>2011-09-24</created>
    <modified>2012-12-24</modified>
  </card>
  <card id="655">
    <name>Elven market</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Production x2<br />You lose 1 random resource for each non-<b>Alliance</b> card in hand]]></effect>
    <code><![CDATA[
    $t->production()->multiply(2);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && !$t->getCard($t->myData()->Hand[$i])->hasKeyword('Alliance')) {
        $t->myData()->addRandomResources(-1);
      }
    }
]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="656">
    <name>Orc engineer</name>
    <rarity>Uncommon</rarity>
    <level>7</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Tower: +17<br />Quarry: -1<br />Won't raise tower above 65]]></effect>
    <code><![CDATA[$tmp = max($t->myData()->Tower, 65); $t->myData()->addTower(17)->addQuarry(-1)->setTower(min($t->myData()->Tower, $tmp));]]></code>
    <created>2012-01-06</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="657">
    <name>Thunderbird</name>
    <rarity>Common</rarity>
    <cost>
      <gems>6</gems>
    </cost>
    <level>8</level>
    <keywords>Beast,Destruction</keywords>
    <effect><![CDATA[If last card played cost gems<br />Enemy stock: -3<br />else<br />Gems: +9]]></effect>
    <code><![CDATA[
    if ($t->myLastAction() == 'play' && $t->myLastCard()->getResources('Gems') > 0) {
      $t->hisData()->addStock(-3);
    }
    else {
      $t->myData()->addGems(9);
    }
]]></code>
    <created>2012-01-06</created>
    <modified>2012-01-06</modified>
  </card>
  <card id="658">
    <name>Orc banner</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <level>9</level>
    <effect><![CDATA[Tower: +2<br />Recruits prod x2<br />Replace a card in hand with non-rare <b>Horde</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addTower(2); $t->production()->multiplyRecruits(2);
    $common = $t->getList(['rarity'=>'Common', 'keyword'=>'Horde']);
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Horde']);
    $t->setCard('my', $t->mode(), $t->drawCard(array_merge($common, $uncommon), $t->myData()->Hand, $t->mode(), 'drawCardList'));
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2012-01-06</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="659">
    <name>Elven rogue</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <level>10</level>
    <keywords>Alliance,Brigand</keywords>
    <effect><![CDATA[Attack: 8 - N<br />Steals N random resources<br />N = #<b>Alliance</b> in opponent's hand]]></effect>
    <code><![CDATA[
    $count = $t->keywordCount($t->hisData()->Hand, 'Alliance');
    $t->hisData()->attack(8 - $count);
    $t->stealRandomResources('my', $count);
]]></code>
    <created>2012-01-06</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="660">
    <name>Ambassador</name>
    <rarity>Common</rarity>
    <level>9</level>
    <effect><![CDATA[Gain 1 stock for each card in hand not from your deck (max 4)]]></effect>
    <code><![CDATA[
    $deck_cards = array_merge($t->myDeck()->Common, $t->myDeck()->Uncommon, $t->myDeck()->Rare);
    $count = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if (!in_array($t->myData()->Hand[$i], $deck_cards) && $i != $t->cardPos()) {
        $count++;
      }
    }
    $t->myData()->addStock(min($count, 4));
]]></code>
    <created>2012-01-06</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="661">
    <name>River knight</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>4</recruits>
      <gems>4</gems>
    </cost>
    <level>9</level>
    <keywords>Aqua,Skirmisher</keywords>
    <effect><![CDATA[Attack: 5 + N<br />N = #<b>Aqua</b> in hand]]></effect>
    <code><![CDATA[$tmp = $t->keywordCount($t->myData()->Hand, 'Aqua'); $t->hisData()->attack(5 + $tmp);]]></code>
    <created>2012-01-06</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="662">
    <name>Moon empire</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>8</level>
    <effect><![CDATA[Replace your hand with [card=487/], [card=433/], [card=51/], [card=76/], [card=681/], [card=638/], [card=583/] and [card=641/]]]></effect>
    <code><![CDATA[$t->setHandShuffled('my', [487, 433, 51, 76, 681, 638, 583, 641]); $t->noNextCard();]]></code>
    <created>2012-01-06</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="663">
    <name>Mountain unicorn</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>12</bricks>
      <recruits>12</recruits>
      <gems>12</gems>
    </cost>
    <level>0</level>
    <keywords>Legend,Runic</keywords>
    <effect><![CDATA[Attack: 20<br />Wall: +20<br />Quarry: +1]]></effect>
    <code><![CDATA[$t->hisData()->attack(20); $t->myData()->addWall(20)->addQuarry(1);]]></code>
    <created>2012-01-06</created>
    <modified>2014-04-21</modified>
  </card>
  <card id="664">
    <name>Alchemist</name>
    <rarity>Rare</rarity>
    <level>8</level>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Bricks:= N<br />Gems:= N<br />Recruits:= N<br />N = #Stock / 3]]></effect>
    <code><![CDATA[$t->myData()->setStock(round(($t->myData()->Bricks + $t->myData()->Gems + $t->myData()->Recruits) / 3));]]></code>
    <created>2012-01-06</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="665">
    <name>Huo-Ryu</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>20</recruits>
      <gems>20</gems>
    </cost>
    <level>7</level>
    <keywords>Burning,Dragon</keywords>
    <effect><![CDATA[Attack: 30 + 10N<br />N = #<b>Dragon</b> in game]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Dragon') + $t->keywordCount($t->hisData()->Hand, 'Dragon');
    $t->hisData()->attack(30 + 10 * $tmp);
]]></code>
    <created>2012-01-06</created>
    <modified>2012-01-06</modified>
  </card>
  <card id="666">
    <name>Tavern</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>7</bricks>
    </cost>
    <level>10</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Wall: +8 - N<br />Recruits: +N<br />N = #<b>Barbarian</b> + #<b>Runic</b> + #<b>Soldier</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Barbarian') + $t->keywordCount($t->myData()->Hand, 'Runic') + $t->keywordCount($t->myData()->Hand, 'Soldier');
    $t->myData()->addWall(8 - $tmp)->addRecruits($tmp);
]]></code>
    <created>2012-01-06</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="667">
    <name>Prairie</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Gain 1 random resource for each non-attack card in hand]]></effect>
    <code><![CDATA[
    $attack_cards = $t->getList(['advanced'=>'Attack:']);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && !in_array($t->myData()->Hand[$i], $attack_cards)) {
        $t->myData()->addRandomResources(1);
      }
    }
]]></code>
    <created>2012-01-06</created>
    <modified>2012-04-07</modified>
  </card>
  <card id="668">
    <name>Reiji Maigo</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>10</level>
    <keywords>Restoration,Durable</keywords>
    <effect><![CDATA[If Round is divisible by 3<br />Gems: +15]]></effect>
    <code><![CDATA[if (($t->round() % 3) == 0) { $t->myData()->addGems(15); }]]></code>
    <created>2012-06-24</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="669">
    <name>Steelbeard</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <level>9</level>
    <keywords>Brigand,Durable</keywords>
    <effect><![CDATA[If last card played wasn't Steelbeard<br />Production x0<br />Replace highest rarity card in opponent's hand with [card=274/]]]></effect>
    <code><![CDATA[
    if ($t->myLastAction() != 'play' || $t->myLastCard()->id() != $t->card()->id()) {
      $t->production()->multiply(0);
      $storage = ['Common' => array(), 'Uncommon' => array(), 'Rare' => array()];
      for ($i = 1; $i <= $t->handSize(); $i++) {
        $cur_card = $t->getCard($t->hisData()->Hand[$i]);
        $rarity = $cur_card->getRarity();
        $storage[$rarity][] = $i;
      }
      if ((count($storage['Common']) + count($storage['Uncommon']) + count($storage['Rare'])) > 0) {
        shuffle($storage['Common']);
        shuffle($storage['Uncommon']);
        shuffle($storage['Rare']);
        $storage_temp = array_merge($storage['Common'], $storage['Uncommon'], $storage['Rare']);
        $discarded_pos = array_pop($storage_temp);
        $t->setCard('his', $discarded_pos, 274, ['reveal' => true]);
      }
    }
]]></code>
    <created>2012-06-24</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="670">
    <name>Mother of dragons</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>12</recruits>
    </cost>
    <modes>8</modes>
    <level>9</level>
    <keywords>Dragon,Legend</keywords>
    <effect><![CDATA[Replace a card in hand with a rare <b>Dragon</b>]]></effect>
    <code><![CDATA[
    $dragon = $t->getList(['rarity'=>'Rare', 'keyword'=>'Dragon']);
    $t->setCard('my', $t->mode(), $t->drawCard($dragon, $t->myData()->Hand, $t->mode(), 'drawCardList'));
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2012-06-24</created>
    <modified>2012-09-08</modified>
  </card>
  <card id="671">
    <name>Sellsword</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>40</recruits>
    </cost>
    <level>6</level>
    <keywords>Soldier,Horde</keywords>
    <effect><![CDATA[Attack: 30<br />If not from your deck<br />Attack: 60<br />else<br />Recruits: +20]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(30);
    if (!in_array($t->card()->id(), $t->myDeck()->Rare)) {
      $t->hisData()->attack(60);
    }
    else {
      $t->myData()->addRecruits(20);
    }
]]></code>
    <created>2012-06-24</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="672">
    <name>Dreamweaver</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>11</gems>
    </cost>
    <level>7</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Attack: 22<br />Summons [card=620/] or [card=592/]]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(22);
    $t->nextCard($t->drawCard([620, 592], $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2012-06-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="673">
    <name>Nightmare owl</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>10</gems>
    </cost>
    <level>8</level>
    <keywords>Illusion,Aria</keywords>
    <effect><![CDATA[Attack: 10<br />If last card was discarded<br />Summons a rare card]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(10);
    if ($t->myLastAction() == 'discard') {
      $t->nextCard($t->drawCard($t->getList(['rarity'=>'Rare']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
    }
]]></code>
    <created>2012-06-24</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="674">
    <name>Spirit of Air</name>
    <rarity>Rare</rarity>
    <level>10</level>
    <keywords>Quick,Aria</keywords>
    <effect><![CDATA[Replace adjacent cards with non-common <b>Aria</b> (can't summon self)]]></effect>
    <code><![CDATA[
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Aria']);
    $rare = $t->getList(['rarity'=>'Rare', 'keyword'=>'Aria']);
    $aria = array_merge($uncommon, $rare);
    $aria = array_diff($aria, [$t->card()->id()]);
    if ($t->cardPos() > 1) {
      $t->setCard('my', $t->cardPos() - 1, $t->drawCard($aria, $t->myData()->Hand, $t->cardPos() - 1, 'drawCardList'));
    }
    if ($t->cardPos() < $t->handSize()) {
      $t->setCard('my', $t->cardPos() + 1, $t->drawCard($aria, $t->myData()->Hand, $t->cardPos() + 1, 'drawCardList'));
    }
]]></code>
    <created>2012-06-24</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="675">
    <name>Spirit of Earth</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>10</bricks>
    </cost>
    <level>10</level>
    <keywords>Alliance,Unliving</keywords>
    <effect><![CDATA[Attack: 3<br />Wall: +7<br />If matching card is an attack card<br />Bricks prod x2]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(3);
    $t->myData()->addWall(7);
    $attack_cards = $t->getList(['advanced'=>'Attack:']);
    if (in_array($t->hisData()->Hand[$t->cardPos()], $attack_cards)) {
      $t->production()->multiplyBricks(2);
    }
]]></code>
    <created>2012-06-24</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="676">
    <name>Steam golem</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>42</bricks>
    </cost>
    <level>10</level>
    <keywords>Unliving,Charge (18)</keywords>
    <effect><![CDATA[Enemy wall: -38<br />Bricks: +21<br />Replace adjacent cards with [card=247/]<br />Summons [card=349/]]]></effect>
    <code><![CDATA[
    $t->hisData()->addWall(-38); $t->myData()->addBricks(21);
    if ($t->cardPos() > 1) {
      $t->setCard('my', $t->cardPos() - 1, 247, ['reveal' => true]);
    }
    if ($t->cardPos() < $t->handSize()) {
      $t->setCard('my', $t->cardPos() + 1, 247, ['reveal' => true]);
    }
    $t->setCard('my', $t->cardPos(), 349, ['reveal' => true]);
    $t->noNextCard();
]]></code>
    <created>2012-06-24</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="677">
    <name>Stymphalian birds</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>2</recruits>
    </cost>
    <level>8</level>
    <keywords>Banish,Aria</keywords>
    <effect><![CDATA[Attack: N<br />Enemy recruits: -N<br />N = #Enemy dungeon]]></effect>
    <code><![CDATA[$t->hisData()->attack($t->hisData()->Dungeons)->addRecruits(-$t->hisData()->Dungeons);]]></code>
    <created>2012-06-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="678">
    <name>Goblin emperor</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>30</recruits>
    </cost>
    <modes>8</modes>
    <level>8</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 25<br />Replace adjacent cards with <b>Horde</b><br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(25);
    if ($t->cardPos() > 1) {
      $t->setCard('my', $t->cardPos() - 1, $t->drawCard($t->getList(['keyword'=>'Horde']), $t->myData()->Hand, $t->cardPos() - 1, 'drawCardList'));
    }
    if ($t->cardPos() < $t->handSize()) {
      $t->setCard('my', $t->cardPos() + 1, $t->drawCard($t->getList(['keyword'=>'Horde']), $t->myData()->Hand, $t->cardPos() + 1, 'drawCardList'));
    }
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
    else {
      $t->replaceCard('my', $t->mode(), $t->card()->id());
    }
]]></code>
    <created>2012-06-24</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="679">
    <name>Wind dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>9</gems>
    </cost>
    <level>7</level>
    <keywords>Dragon,Swift,Aria</keywords>
    <effect><![CDATA[Attack: 10<br />If matching card is a zero cost card<br />Attack: 10]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(10);
    if ($t->getCard($t->hisData()->Hand[$t->cardPos()])->getResources() == 0) {
      $t->hisData()->attack(10);
    }
]]></code>
    <created>2012-06-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="680">
    <name>Iskander the Rider</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>60</recruits>
    </cost>
    <level>10</level>
    <keywords>Legend,Charge (40),Siege</keywords>
    <effect><![CDATA[Attack: 90]]></effect>
    <code><![CDATA[$t->hisData()->attack(90);]]></code>
    <created>2012-06-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="681">
    <name>Shogun</name>
    <rarity>Rare</rarity>
    <level>9</level>
    <effect><![CDATA[Tower: +N<br />Wall: +N<br />N = #Facilities<br />Enemy tower: -#Enemy facilities]]></effect>
    <code><![CDATA[
    $my_faciltities = $t->myData()->Quarry + $t->myData()->Magic + $t->myData()->Dungeons;
    $his_faciltities = $t->hisData()->Quarry + $t->hisData()->Magic + $t->hisData()->Dungeons;
    $t->myData()->addTower($my_faciltities)->addWall($my_faciltities);
    $t->hisData()->addTower(-$his_faciltities);
]]></code>
    <created>2012-06-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="682">
    <name>Windmill</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>2</bricks>
    </cost>
    <level>8</level>
    <keywords>Aria</keywords>
    <effect><![CDATA[Tower: +2<br />Gain N random resources<br />N = #<b>Aria</b> in hand]]></effect>
    <code><![CDATA[$t->myData()->addTower(2)->addRandomResources($t->keywordCount($t->myData()->Hand, 'Aria'));]]></code>
    <created>2012-06-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="683">
    <name>Harpy</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>10</recruits>
    </cost>
    <level>9</level>
    <keywords>Aria,Siege</keywords>
    <effect><![CDATA[Attack: 10<br />If #<b>Aria</b> in opponent's hand = 0<br />Recruits: +5]]></effect>
    <code><![CDATA[$t->hisData()->attack(10); if ($t->keywordCount($t->hisData()->Hand, 'Aria') == 0) { $t->myData()->addRecruits(5); }]]></code>
    <created>2012-06-24</created>
    <modified>2012-06-24</modified>
  </card>
  <card id="684">
    <name>Apostate</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>10</gems>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Replace a card in hand with a <b>Horde</b> of the same rarity<br />Recruits prod x3]]></effect>
    <code><![CDATA[
    $rarity = $t->getCard($t->myData()->Hand[$t->mode()])->getRarity();
    $t->setCard('my', $t->mode(), $t->drawCard(array_diff($t->getList(['rarity'=>$rarity, 'keyword'=>'Horde']), [$t->myData()->Hand[$t->mode()]]), $t->myData()->Hand, $t->mode(), 'drawCardList'));
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
    $t->production()->multiplyRecruits(3);
]]></code>
    <created>2012-06-24</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="685">
    <name>Faceless</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>5</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Replace a common card in opponent's hand with a common card from your deck<br />Attack: N<br />N = cost of the replaced card]]></effect>
    <code><![CDATA[
    $target_card = $t->getCard($t->hisData()->Hand[$t->mode()]);
    if ($target_card->getRarity() == 'Common') {
      $t->setCard('his', $t->mode(), $t->drawCard($t->myDeck()->Common, $t->hisData()->Hand, $t->mode(), 'drawCardList'));
      $attack = $target_card->getResources();
      $t->hisData()->attack($attack);
    }
]]></code>
    <created>2012-06-24</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="686">
    <name>Titan soldier</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>3</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Soldier,Unliving</keywords>
    <effect><![CDATA[Attack: 3<br /><b>Titan</b> tokens: +10<br />Discard a card from hand]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(3); $t->myData()->addToken('Titan', 10);
    if ($t->mode() != $t->cardPos()) {
      $t->setCard('my', $t->mode(), $t->drawCard($t->myDeck(), $t->myData()->Hand, $t->mode(), 'drawCardRandom'));
    }
]]></code>
    <created>2013-01-01</created>
    <modified>2014-12-24</modified>
  </card>
  <card id="687">
    <name>Miriam</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>16</recruits>
    </cost>
    <level>10</level>
    <keywords>Alliance,Legend</keywords>
    <effect><![CDATA[Production x4<br />Summons non-common <b>Alliance</b>]]></effect>
    <code><![CDATA[
    $t->production()->multiply(4);
    $uncommon = $t->getList(['rarity'=>'Uncommon', 'keyword'=>'Alliance']);
    $rare = $t->getList(['rarity'=>'Rare', 'keyword'=>'Alliance']);
    $t->nextCard($t->drawCard(array_merge($uncommon, $rare), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="688">
    <name>Elven woods</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>4</recruits>
    </cost>
    <level>10</level>
    <keywords>Alliance,Nature</keywords>
    <effect><![CDATA[Wall: +N<br />N = #<b>Alliance</b> in hand<br />Summons <b>Alliance</b>]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Alliance');
    $t->myData()->addWall($tmp); 
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Alliance']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="689">
    <name>Mountain dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>30</bricks>
      <recruits>25</recruits>
    </cost>
    <level>10</level>
    <keywords>Dragon,Runic</keywords>
    <effect><![CDATA[Attack: 38<br />Tower: +N / 2<br />Wall: +N<br />N = #Bricks (max 30)]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(38);
    $bricks = min(30, $t->myData()->Bricks);
    $t->myData()->addTower(round($bricks / 2))->addWall($bricks);
]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="690">
    <name>Dryad of Miriam</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>2</recruits>
    </cost>
    <level>10</level>
    <keywords>Alliance,Nature</keywords>
    <effect><![CDATA[Enemy wall: -3<br />If Enemy wall is divisible by 2<br />Recruits prod x2]]></effect>
    <code><![CDATA[$t->hisData()->addWall(-3); if ((max(0, $t->hisData()->Wall) % 2) == 0) { $t->production()->multiplyRecruits(2); }]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="691">
    <name>Barbz's hideout</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>30</bricks>
    </cost>
    <level>10</level>
    <effect><![CDATA[Quarry: +1 for each rare in hand<br />Tower: +5 for each uncommon in hand<br />Wall: +8 for each common in hand]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->myData()->Hand[$i]);
      if ($cur_card->getRarity() == 'Rare') {
        $t->myData()->addQuarry(1);
      }
      elseif ($cur_card->getRarity() == 'Uncommon') {
        $t->myData()->addTower(5);
      }
      elseif ($cur_card->getRarity() == 'Common') {
        $t->myData()->addWall(8);
      }
    }
]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="692">
    <name>Emerald unicorn</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>20</recruits>
    </cost>
    <level>10</level>
    <keywords>Legend,Nature</keywords>
    <effect><![CDATA[Attack: 28<br />Dungeon: +1<br />Discard a rare <b>Nature</b> from hand to gain<br />Recruits: +20]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(28); $t->myData()->addDungeons(1);
    $storage = array();
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->myData()->Hand[$i]);
      if ($i != $t->cardPos() && $cur_card->hasKeyword('Nature') && $cur_card->getRarity() == 'Rare') {
        $storage[] = $i;
      }
    }
    if (count($storage) > 0) {
      $discarded_pos = $storage[$t->arrayRand($storage)];
      $t->setCard('my', $discarded_pos, $t->drawCard($t->myDeck(), $t->myData()->Hand, $discarded_pos, 'drawCardRandom'));
      $t->myData()->addRecruits(20);
    }
]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="693">
    <name>Myth summoner</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>12</gems>
    </cost>
    <level>10</level>
    <keywords>Mage</keywords>
    <effect><![CDATA[Highest facility: +1<br />Summons [card=616/], [card=577/], [card=604/] or [card=634/]]]></effect>
    <code><![CDATA[
    $t->myData()->addHighestFacility(1);
    $t->nextCard($t->drawCard([616, 577, 604, 634], $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="694">
    <name>Harpy vanguard</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
      <recruits>2</recruits>
    </cost>
    <level>10</level>
    <keywords>Aria,Siege</keywords>
    <effect><![CDATA[Enemy tower: -1<br />Enemy wall: -1<br />Summons <b>Aria</b>]]></effect>
    <code><![CDATA[
    $t->hisData()->addTower(-1)->addWall(-1); 
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Aria']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="695">
    <name>Harpy warrior</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>5</gems>
      <recruits>6</recruits>
    </cost>
    <level>10</level>
    <keywords>Aria,Siege</keywords>
    <effect><![CDATA[Attack: 2N<br />N = #<b>Aria</b> + #non-common cards in hand]]></effect>
    <code><![CDATA[
    $aria = $t->keywordCount($t->myData()->Hand, 'Aria');
    $noncommon =  0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->myData()->Hand[$i])->getRarity() != 'Common') {
        $noncommon++;
      }
    }
    $t->hisData()->attack(2 * ($aria + $noncommon));
]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="696">
    <name>Harpy hag</name>
    <rarity>Common</rarity>
    <cost>
      <gems>3</gems>
      <recruits>3</recruits>
    </cost>
    <level>10</level>
    <keywords>Aria,Siege</keywords>
    <effect><![CDATA[Attack: 3<br />If all cards in hand are common<br />Discard your hand and draw new starting hand]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(3); $found = false;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->myData()->Hand[$i])->getRarity() != 'Common') {
        $found = true;
        break;
      }
    }
    if (!$found) {
      $t->setHand('my', $t->drawHandInitial($t->myDeck()));
      $t->noNextCard();
    }
]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="697">
    <name>Harpy queen</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>15</gems>
      <recruits>15</recruits>
    </cost>
    <level>10</level>
    <keywords>Aria,Siege</keywords>
    <effect><![CDATA[Attack: 15<br />Enemy tower: -10<br />Replace all tower+ and wall+ cards in opponent's hand with Wind]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(15)->addTower(-10);
    $target_cards = array_merge($t->getList(['advanced'=>'Tower: +']), $t->getList(['advanced'=>'Wall: +']));
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if (in_array($t->hisData()->Hand[$i], $target_cards)) {
        $t->setCard('his', $i, 247, ['reveal' => true]);
      }
    }
]]></code>
    <created>2013-01-01</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="698">
    <name>Justice</name>
    <rarity>Uncommon</rarity>
    <level>10</level>
    <effect><![CDATA[Player(s) with lowest tower gains<br />Tower: +10<br />Player(s) with lowest wall gains<br />Wall: +10]]></effect>
    <code><![CDATA[
    $my_tower = $t->myData()->Tower;
    $my_wall = $t->myData()->Wall;
    $his_tower = $t->hisData()->Tower;
    $his_wall = $t->hisData()->Wall;
    if ($my_tower <= $his_tower) {
      $t->myData()->addTower(10);
    }
    if ($my_wall <= $his_wall) {
      $t->myData()->addWall(10);
    }
    if ($my_tower >= $his_tower) {
      $t->hisData()->addTower(10);
    }
    if ($my_wall >= $his_wall) {
      $t->hisData()->addWall(10);
    }
]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="699">
    <name>Einzbern castle</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>17</bricks>
    </cost>
    <level>10</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Tower: +12<br />Wall: +3N<br />N = #<b>Illusion</b> + #rare cards in hand]]></effect>
    <code><![CDATA[
    $illusions = $t->keywordCount($t->myData()->Hand, 'Illusion');
    $t->myData()->addTower(12);
    $rares = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->myData()->Hand[$i])->getRarity() == 'Rare') {
        $rares++;
      }
    }
    $t->myData()->addWall(3 * ($illusions + $rares));
]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="700">
    <name>Templar castle</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>20</bricks>
    </cost>
    <level>10</level>
    <keywords>Holy,Soldier</keywords>
    <effect><![CDATA[Tower: +30<br />Won't raise tower above Max tower / 2<br />If Dungeon < 4<br />Dungeon: +1]]></effect>
    <code><![CDATA[
    $tmp = max($t->myData()->Tower, round($t->config('max_tower') / 2));
    $t->myData()->addTower(30)->setTower(min($t->myData()->Tower, $tmp));
    if ($t->myData()->Dungeons < 4) {
      $t->myData()->Dungeons++;
    }
]]></code>
    <created>2013-01-01</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="701">
    <name>Stone dragon</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>30</bricks>
    </cost>
    <level>10</level>
    <keywords>Dragon,Unliving</keywords>
    <effect><![CDATA[Attack: 20<br />Wall: +25<br />Bricks prod x3]]></effect>
    <code><![CDATA[$t->hisData()->attack(20); $t->myData()->addWall(25); $t->production()->multiplyBricks(3);]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="702">
    <name>Centaur champion</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>40</recruits>
    </cost>
    <level>10</level>
    <keywords>Beast,Horde,Charge (30)</keywords>
    <effect><![CDATA[Attack: 30<br />Recruits prod x4]]></effect>
    <code><![CDATA[$t->hisData()->attack(30); $t->production()->multiplyRecruits(4);]]></code>
    <created>2013-01-01</created>
    <modified>2013-10-19</modified>
  </card>
  <card id="703">
    <name>Northern scout</name>
    <rarity>Common</rarity>
    <level>10</level>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[Wall: +N<br />Recruits: +N<br />N = #Enemy wall / 10]]></effect>
    <code><![CDATA[$tmp = round($t->hisData()->Wall / 10); $t->myData()->addWall($tmp)->addRecruits($tmp);]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="704">
    <name>Gate of Babylon</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <level>10</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Replace adjacent cards with rare cards]]></effect>
    <code><![CDATA[
    if ($t->cardPos() > 1) {
      $t->setCard('my', $t->cardPos() - 1, $t->drawCard($t->getList(['rarity'=>'Rare']), $t->myData()->Hand, $t->cardPos() - 1, 'drawCardList'));
    }
    if ($t->cardPos() < $t->handSize()) {
      $t->setCard('my', $t->cardPos() + 1, $t->drawCard($t->getList(['rarity'=>'Rare']), $t->myData()->Hand, $t->cardPos() + 1, 'drawCardList'));
    }
]]></code>
    <created>2013-01-01</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="705">
    <name>Overlord's castle</name>
    <rarity>Rare</rarity>
    <level>10</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Tower: +4N<br />Wall: +15<br />Production x0<br />N = #<b>Horde</b> in hand]]></effect>
    <code><![CDATA[$t->myData()->addTower(4 * $t->keywordCount($t->myData()->Hand, 'Horde'))->addWall(15); $t->production()->multiply(0);]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="706">
    <name>Talos</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>15</bricks>
      <gems>15</gems>
      <recruits>15</recruits>
    </cost>
    <level>10</level>
    <keywords>Legend,Unliving</keywords>
    <effect><![CDATA[Attack: 10 + 4N<br />N = #Facilities]]></effect>
    <code><![CDATA[$t->hisData()->attack(10 + 4 * ($t->myData()->Quarry + $t->myData()->Magic + $t->myData()->Dungeons));]]></code>
    <created>2013-01-01</created>
    <modified>2013-01-01</modified>
  </card>
  <card id="707">
    <name>Dragon bard</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>6</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <effect><![CDATA[Replace selected <b>Dragon</b> in hand with a <b>Dragon</b> of the same rarity or replace selected [card=131/] in hand with a <b>Dragon</b>]]></effect>
    <code><![CDATA[
    if ($t->mode() != $t->cardPos()) {
      $cur_card = $t->getCard($t->myData()->Hand[$t->mode()]);
      if ($cur_card->id() == 131) {
        $t->setCard('my', $t->mode(), $t->drawCard($t->getList(['keyword'=>'Dragon']), $t->myData()->Hand, $t->mode(), 'drawCardList'));
      }
      elseif ($cur_card->hasKeyword('Dragon')) {
        $list = array_diff($t->getList(['rarity'=>$cur_card->getRarity(), 'keyword'=>'Dragon']), [$cur_card->id()]);
        $t->setCard('my', $t->mode(), $t->drawCard($list, $t->myData()->Hand, $t->mode(), 'drawCardList'));
      }
    }
]]></code>
    <created>2013-07-27</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="708">
    <name>Darkling</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Wall: +5 - N<br />Steals N random resources<br />N = #zero cost cards in opponent's hand]]></effect>
    <code><![CDATA[
    $count = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($t->getCard($t->hisData()->Hand[$i])->getResources() == 0) {
        $count++;
      }
    }
    $t->myData()->addWall(5 - $count);
    $t->stealRandomResources('my', $count);
]]></code>
    <created>2013-07-27</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="709">
    <name>Shield guard</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
      <recruits>2</recruits>
    </cost>
    <level>10</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Wall: +7<br />Summons a Bricks only no keyword Wall + card]]></effect>
    <code><![CDATA[$t->myData()->addWall(7); $t->nextCard($t->drawCard($t->getList(['cost'=>'Red', 'keyword'=>'No keywords', 'advanced'=>'Wall: +']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));]]></code>
    <created>2013-07-27</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="710">
    <name>Acnologia</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>45</recruits>
    </cost>
    <level>10</level>
    <keywords>Destruction,Dragon</keywords>
    <effect><![CDATA[Enemy tower: -35<br />Enemy highest facility: -1]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-35)->addHighestFacility(-1);]]></code>
    <created>2013-07-27</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="711">
    <name>Mana spring</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>10</level>
    <effect><![CDATA[Highest facility: +1<br />Highest resource: +10]]></effect>
    <code><![CDATA[$t->myData()->addHighestFacility(1)->addHighestResource(10);]]></code>
    <created>2013-07-27</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="712">
    <name>Cheshire</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>7</gems>
    </cost>
    <level>10</level>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Replace other rare cards in hand with rare cards from your deck<br />Summons rare <b>Illusion</b>]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos() && $t->getCard($t->myData()->Hand[$i])->getRarity() == 'Rare') {
        $t->setCard('my', $i, $t->drawCard($t->myDeck()->Rare, $t->myData()->Hand, $i, 'drawCardList'));
      }
    }
    $t->nextCard($t->drawCard($t->getList(['rarity'=>'Rare', 'keyword'=>'Illusion']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2013-07-27</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="713">
    <name>Ziz</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>27</gems>
      <recruits>27</recruits>
    </cost>
    <level>10</level>
    <keywords>Aria</keywords>
    <effect><![CDATA[Enemy tower: -10N<br />N = #<b>Aria</b> in hand]]></effect>
    <code><![CDATA[$t->hisData()->addTower(-10 * $t->keywordCount($t->myData()->Hand, 'Aria'));]]></code>
    <created>2013-07-27</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="714">
    <name>Kitsune</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>12</gems>
    </cost>
    <level>10</level>
    <keywords>Beast,Illusion</keywords>
    <effect><![CDATA[Attack: 26<br />Replace opponent's hand with cards from your deck of the same rarity]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(26);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $rarity = $t->getCard($t->hisData()->Hand[$i])->getRarity();
      $t->setCard('his', $i, $t->drawCard($t->myDeck()->$rarity, $t->hisData()->Hand, $i, 'drawCardList'));
    }
]]></code>
    <created>2013-07-27</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="715">
    <name>Phantom unicorn</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>13</gems>
      <recruits>13</recruits>
    </cost>
    <level>10</level>
    <keywords>Illusion,Legend</keywords>
    <effect><![CDATA[Attack: 25<br />Replace all discarding and replacing cards in opponent's hand with common cards from his deck]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(25);
    $target_cards = array_merge($t->getList(['advanced'=>"Discard "]), $t->getList(['advanced'=>'Replace ']));
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if (in_array($t->hisData()->Hand[$i], $target_cards)) {
        $t->setCard('his', $i, $t->drawCard($t->hisDeck()->Common, $t->hisData()->Hand, $i, 'drawCardList'));
      }
    }
]]></code>
    <created>2013-07-27</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="716">
    <name>Heimdall</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>14</gems>
      <recruits>16</recruits>
    </cost>
    <level>10</level>
    <keywords>Barbarian,Mage,Far sight</keywords>
    <effect><![CDATA[Attack: 30<br />Summons a rare <b>Far sight</b>]]></effect>
    <code><![CDATA[$t->hisData()->attack(30); $t->nextCard($t->drawCard($t->getList(['rarity'=>'Rare', 'keyword'=>'Far sight']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));]]></code>
    <created>2013-07-27</created>
    <modified>2013-07-27</modified>
  </card>
  <card id="717">
    <name>Book of eternity</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>4</bricks>
      <gems>4</gems>
      <recruits>4</recruits>
    </cost>
    <level>10</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Discard all other cards from hand]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= $t->handSize(); $i++) {
      if ($i != $t->cardPos()) {
        $t->setCard('my', $i, $t->drawCard($t->myDeck(), $t->myData()->Hand, $i, 'drawCardRandom'));
      }
    }
]]></code>
    <created>2014-01-01</created>
    <modified>2014-01-01</modified>
  </card>
  <card id="718">
    <name>Dwarven kingdom</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>5</bricks>
      <recruits>5</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Replace your hand with 3 common, 3 uncommon and 2 rare <b>Runic</b> cards]]></effect>
    <code><![CDATA[
    $trans = ['Common', 'Common', 'Common', 'Uncommon', 'Uncommon', 'Uncommon', 'Rare', 'Rare'];
    shuffle($trans);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $t->setCard('my', $i, $t->drawCard($t->getList(['rarity'=>$trans[$i-1], 'keyword'=>'Runic']), $t->myData()->Hand, $i, 'drawCardList'));
    }
    $t->noNextCard();
]]></code>
    <created>2014-01-01</created>
    <modified>2014-01-01</modified>
  </card>
  <card id="719">
    <name>Adamantine citadel</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>30</bricks>
    </cost>
    <level>10</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Wall: +30<br />If Wall = Max wall<br />Instant construction victory<br />else<br />Bricks: +15]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(30);
    if ($t->myData()->Wall >= $t->config('max_wall') ) {
      $t->myData()->setTower($t->config('max_tower'));
    }
    else {
      $t->myData()->addBricks(15);
    }
]]></code>
    <created>2014-01-01</created>
    <modified>2014-01-01</modified>
  </card>
  <card id="720">
    <name>Ocean king</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>30</bricks>
      <gems>30</gems>
      <recruits>30</recruits>
    </cost>
    <level>10</level>
    <keywords>Aqua,Far sight</keywords>
    <effect><![CDATA[Tower: +40<br />Wall: +40<br />Facilities: +1]]></effect>
    <code><![CDATA[$t->myData()->addTower(40)->addWall(40)->addFacilities(1);]]></code>
    <created>2014-01-01</created>
    <modified>2014-01-01</modified>
  </card>
  <card id="721">
    <name>Temptress</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>15</bricks>
      <recruits>15</recruits>
    </cost>
    <level>10</level>
    <keywords>Demonic</keywords>
    <effect><![CDATA[Attack: 30<br />If last card played was a rare<br />Enemy stock: -10<br />If last card played was <b>Demonic</b><br />Attack: 20]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(30);
    if ($t->myLastCard()->getRarity() == 'Rare') {
      $t->hisData()->addStock(-10);
    }
    if ($t->myLastCard()->hasKeyword('Demonic')) {
      $t->hisData()->attack(20);
    }
]]></code>
    <created>2014-01-01</created>
    <modified>2014-01-01</modified>
  </card>
  <card id="722">
    <name>Balrog</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <level>10</level>
    <keywords>Burning,Demonic</keywords>
    <effect><![CDATA[Attack: 50<br />Replace <b>Alliance</b>, <b>Mage</b>, <b>Runic</b> and <b>Soldier</b> in opponent's hand with [card=248/]]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(50);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $his_card = $t->getCard($t->hisData()->Hand[$i]);
      if ($his_card->hasKeyword('Alliance') || $his_card->hasKeyword('Mage') || $his_card->hasKeyword('Runic') || $his_card->hasKeyword('Soldier')) {
        $t->setCard('his', $i, 248, ['reveal' => true]);
      }
    }
]]></code>
    <created>2014-01-01</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="723">
    <name>Hell charger</name>
    <rarity>Common</rarity>
    <cost>
      <gems>3</gems>
      <recruits>3</recruits>
    </cost>
    <level>10</level>
    <keywords>Demonic,Charge (4)</keywords>
    <effect><![CDATA[Attack: 7]]></effect>
    <code><![CDATA[$t->hisData()->attack(7);]]></code>
    <created>2014-01-01</created>
    <modified>2014-01-01</modified>
  </card>
  <card id="724">
    <name>Quasit</name>
    <rarity>Common</rarity>
    <level>10</level>
    <keywords>Demonic</keywords>
    <effect><![CDATA[Gain 1 random resource for each unplayable card in game]]></effect>
    <code><![CDATA[
    $count = 0;
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->myData()->Hand[$i]);
      if ($i != $t->cardPos() && ($cur_card->getResources('Bricks') > $t->myData()->Bricks
        || $cur_card->getResources('Gems') > $t->myData()->Gems || $cur_card->getResources('Recruits') > $t->myData()->Recruits)) {
        $count++;
      }
    }
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->hisData()->Hand[$i]);
      if ($cur_card->getResources('Bricks') > $t->hisData()->Bricks || $cur_card->getResources('Gems') > $t->hisData()->Gems
        || $cur_card->getResources('Recruits') > $t->hisData()->Recruits) {
        $count++;
      }
    }
    $t->myData()->addRandomResources($count);
]]></code>
    <created>2014-01-01</created>
    <modified>2014-01-01</modified>
  </card>
  <card id="725">
    <name>Demon fruit</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <keywords>Demonic,Nature</keywords>
    <effect><![CDATA[Gain N random resources (min 4)<br />N = 25 - Tower]]></effect>
    <code><![CDATA[$t->myData()->addRandomResources(max(4, 25 - $t->myData()->Tower));]]></code>
    <created>2014-01-01</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="726">
    <name>Cerberus</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>28</recruits>
    </cost>
    <level>10</level>
    <keywords>Beast,Demonic</keywords>
    <effect><![CDATA[Attack 30<br />Recruits prod x2<br />Replace matching card in opponent's hand and its adjacent cards with [card=381/]]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(30);
    $t->production()->multiplyRecruits(2);
    $t->setCard('his', $t->cardPos(), 381, ['reveal' => true]);
    if ($t->cardPos() > 1) {
      $t->setCard('his', $t->cardPos() - 1, 381, ['reveal' => true]);
    }
    if ($t->cardPos() < $t->handSize()) {
      $t->setCard('his', $t->cardPos() + 1, 381, ['reveal' => true]);
    }
]]></code>
    <created>2014-01-01</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="727">
    <name>Owlverlord</name>
    <rarity>Common</rarity>
    <cost>
      <gems>2</gems>
      <recruits>2</recruits>
    </cost>
    <level>10</level>
    <keywords>Demonic,Aria</keywords>
    <effect><![CDATA[Attack: 3<br />Gems: +N<br />Recruits: +N<br />N = #<b>Demonic</b> in hand (max 4)]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(3);
    $tmp = min(4, $t->keywordCount($t->myData()->Hand, 'Demonic'));
    $t->myData()->addGems($tmp)->addRecruits($tmp);
]]></code>
    <created>2015-01-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="728">
    <name>Whirlpool</name>
    <rarity>Common</rarity>
    <cost>
      <gems>1</gems>
    </cost>
    <level>10</level>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Discard adjacent cards]]></effect>
    <code><![CDATA[
    if ($t->cardPos() > 1) {
       $t->setCard('my', $t->cardPos() - 1, $t->drawCard($t->myDeck(), $t->myData()->Hand, $t->cardPos() - 1, 'drawCardRandom'));
    }
    if ($t->cardPos() < $t->handSize()) {
      $t->setCard('my', $t->cardPos() + 1, $t->drawCard($t->myDeck(), $t->myData()->Hand, $t->cardPos() + 1, 'drawCardRandom'));
    }
]]></code>
    <created>2015-01-01</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="729">
    <name>Hydromancer</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>7</gems>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Aqua,Mage</keywords>
    <effect><![CDATA[Attack: 6<br />Replace a card in hand with [card=728/]]]></effect>
    <code><![CDATA[$t->hisData()->attack(6); $t->setCard('my', $t->mode(), 728, ['reveal' => true]); if ($t->mode() == $t->cardPos()) { $t->noNextCard(); }]]></code>
    <created>2015-01-01</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="730">
    <name>New growth</name>
    <rarity>Common</rarity>
    <cost>
      <recruits>1</recruits>
    </cost>
    <level>10</level>
    <keywords>Nature,Restoration</keywords>
    <effect><![CDATA[Stock: +1<br />If New<br />Stock: +1]]></effect>
    <code><![CDATA[$t->myData()->addStock(($t->isMyNew($t->cardPos())) ? 2 : 1);]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="731">
    <name>Ancient city</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>36</bricks>
    </cost>
    <level>10</level>
    <keywords>Legend</keywords>
    <effect><![CDATA[Wall: +40<br />Stock: +6<br />Summons a <b>Legend</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(40)->addStock(6);
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Legend']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="732">
    <name>Night demon</name>
    <rarity>Uncommon</rarity>
    <cost>
      <gems>7</gems>
      <recruits>9</recruits>
    </cost>
    <level>10</level>
    <keywords>Demonic</keywords>
    <effect><![CDATA[Attack: 20<br />If matching card in opponent's hand is unplayable<br />Discard the matching card]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(20);
    $hisCard = $t->getCard($t->hisData()->Hand[$t->cardPos()]);
    if ($hisCard->getResources('Bricks') > $t->hisData()->Bricks || $hisCard->getResources('Gems') > $t->hisData()->Gems
      || $hisCard->getResources('Recruits') > $t->hisData()->Recruits) {
      $t->setCard('his', $t->cardPos(), $t->drawCard($t->hisDeck(), $t->hisData()->Hand, $t->cardPos(), 'drawCardDifferent'));
    }
]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="733">
    <name>Treetop village</name>
    <rarity>Uncommon</rarity>
    <cost>
      <bricks>10</bricks>
      <gems>11</gems>
    </cost>
    <level>10</level>
    <keywords>Alliance,Far sight</keywords>
    <effect><![CDATA[Wall: +15<br />Production x2<br />Summons <b>Alliance</b>]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(15); 
    $t->production()->multiply(2);
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Alliance']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="734">
    <name>Darklord Vashna</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>19</gems>
      <recruits>19</recruits>
    </cost>
    <level>10</level>
    <keywords>Demonic</keywords>
    <effect><![CDATA[Attack: 30 + 5N<br />N = #<b>Demonic</b> in hand<br />Summons <b>Demonic</b>]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(30 + 5 * $t->keywordCount($t->myData()->Hand, 'Demonic'));
    $t->nextCard($t->drawCard($t->getList(['keyword'=>'Demonic']), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="735">
    <name>Geomancer</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
    </cost>
    <level>10</level>
    <keywords>Runic</keywords>
    <effect><![CDATA[Wall: +35<br />Enemy quarry: +2<br />Summons [card=100/], [card=616/] or [card=221/]]]></effect>
    <code><![CDATA[
    $t->myData()->addWall(35);
    $t->hisData()->addQuarry(2);
    $t->nextCard($t->drawCard([100, 616, 221], $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="736">
    <name>Reliquary</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>18</bricks>
      <gems>16</gems>
    </cost>
    <level>10</level>
    <keywords>Holy,Banish</keywords>
    <effect><![CDATA[Tower: +3N<br />Wall: +4N<br />Stock: +2N<br />N = #<b>Holy</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $t->keywordCount($t->myData()->Hand, 'Holy');
    $t->myData()->addTower(3 * $tmp)->addWall(4 * $tmp)->addStock(2 * $tmp);
]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="737">
    <name>Blood shrine</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>15</bricks>
    </cost>
    <level>10</level>
    <keywords>Demonic,Cursed</keywords>
    <effect><![CDATA[Tower: +9<br />Wall: +9]]></effect>
    <code><![CDATA[$t->myData()->addTower(9)->addWall(9);]]></code>
    <created>2015-01-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="738">
    <name>Sin city</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>22</bricks>
    </cost>
    <level>10</level>
    <keywords>Demonic</keywords>
    <effect><![CDATA[Tower: +16<br />Wall: +28<br />If last card played was <b>Demonic</b><br />Wall: +24]]></effect>
    <code><![CDATA[$t->myData()->addTower(16)->addWall(28);
    if ($t->myLastCard()->hasKeyword('Demonic') && $t->myLastAction() == 'play') {
      $t->myData()->addWall(24);
    }
]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="739">
    <name>Crystalline lotus</name>
    <rarity>Rare</rarity>
    <level>10</level>
    <effect><![CDATA[Stock: +9<br />Production x0]]></effect>
    <code><![CDATA[$t->myData()->addStock(9); $t->production()->multiply(0);]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="740">
    <name>Shadow warrior</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>26</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Banish</keywords>
    <effect><![CDATA[Attack: 25<br />Replace a card in hand with self<br />If last card played wasn't Shadow warrior<br />Attack: 30]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(25); 
    if ($t->myLastAction() != 'play' || $t->myLastCard()->id() != $t->card()->id()) {
      $t->hisData()->attack(30); 
    }
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
    else {
      $t->replaceCard('my', $t->mode(), $t->card()->id());
    }
]]></code>
    <created>2015-01-01</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="741">
    <name>Treasure cave</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>10</bricks>
      <gems>10</gems>
      <recruits>10</recruits>
    </cost>
    <modes>3</modes>
    <level>10</level>
    <effect><![CDATA[Mode1:<br />Bricks: +60<br />Mode2:<br />Gems: +40<br />Mode3:<br />Recruits: +50]]></effect>
    <code><![CDATA[
    if ($t->mode() == 1) {
      $t->myData()->addBricks(60);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addGems(40);
    }
    elseif ($t->mode() == 3) {
      $t->myData()->addRecruits(50);
    }
]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="742">
    <name>Goblin lair</name>
    <rarity>Uncommon</rarity>
    <level>10</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Quarry: -2<br />Dungeon: +2]]></effect>
    <code><![CDATA[$t->myData()->addQuarry(-2)->addDungeons(2);]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="743">
    <name>Storm temple</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>24</bricks>
      <gems>9</gems>
    </cost>
    <level>10</level>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Tower: +5<br />Wall: +15<br />Facilities: +1]]></effect>
    <code><![CDATA[$t->myData()->addTower(5)->addWall(15)->addFacilities(1);]]></code>
    <created>2015-01-01</created>
    <modified>2017-09-16</modified>
  </card>
  <card id="744">
    <name>Rainbow fairy</name>
    <rarity>Common</rarity>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <level>10</level>
    <effect><![CDATA[Summons a non-common card from your deck]]></effect>
    <code><![CDATA[$t->nextCard($t->drawCard(array_merge($t->myDeck()->Uncommon, $t->myDeck()->Rare), $t->myData()->Hand, $t->cardPos(), 'drawCardList'));]]></code>
    <created>2015-01-01</created>
    <modified>2015-01-01</modified>
  </card>
  <card id="745">
    <name>Foulhorn</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>23</bricks>
      <gems>24</gems>
    </cost>
    <modes>2</modes>
    <level>10</level>
    <keywords>Demonic,Legend,Rebirth</keywords>
    <effect><![CDATA[Attack: 36<br />Mode1:<br />Wall: +38<br />Mode2:<br />Gems: +18]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(36);
    if ($t->mode() == 1) {
      $t->myData()->addWall(38);
    }
    elseif ($t->mode() == 2) {
      $t->myData()->addGems(18);
    }
]]></code>
    <created>2015-08-01</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="746">
    <name>Marzanna</name>
    <rarity>Rare</rarity>
    <modes>8</modes>
    <level>10</level>
    <effect><![CDATA[Production x0<br />Opponent loses 20 random resources<br />Replace a card in hand with [card=241/], [card=304/] or [card=485/]]]></effect>
    <code><![CDATA[
    $t->production()->multiply(0);
    $t->hisData()->addRandomResources(-20);
    $t->setCard('my', $t->mode(), $t->drawCard([241, 304, 485], $t->myData()->Hand, $t->mode(), 'drawCardList'));
    if ($t->mode() == $t->cardPos()) {
      $t->noNextCard();
    }
]]></code>
    <created>2015-08-01</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="747">
    <name>Air nomad</name>
    <rarity>Rare</rarity>
    <level>10</level>
    <keywords>Quick,Aria</keywords>
    <effect><![CDATA[Replace matching card with [card=247/]<br />Summons [card=509/], [card=497/] or [card=679/]]]></effect>
    <code><![CDATA[
    $t->setCard('his', $t->cardPos(), 247, ['reveal' => true]);
    $t->nextCard($t->drawCard([509, 497, 679], $t->myData()->Hand, $t->cardPos(), 'drawCardList'));
]]></code>
    <created>2015-08-01</created>
    <modified>2015-09-26</modified>
  </card>
  <card id="748">
    <name>Altruism</name>
    <rarity>Rare</rarity>
    <level>10</level>
    <effect><![CDATA[Player(s) with highest facility suffers<br />Highest facility: -1<br />Player(s) with lowest facility gains<br />Lowest facility: +1]]></effect>
    <code><![CDATA[
    $myHighest = $t->myData()->detectHighestFacility();
    $myLowest = $t->myData()->detectLowestFacility();
    $myHighestAmount = $t->myData()->$myHighest;
    $myLowestAmount = $t->myData()->$myLowest;

    $hisHighest = $t->hisData()->detectHighestFacility();
    $hisLowest = $t->hisData()->detectLowestFacility();
    $hisHighestAmount = $t->hisData()->$hisHighest;
    $hisLowestAmount = $t->hisData()->$hisLowest;

    if ($myHighestAmount != $myLowestAmount || $myLowestAmount != $hisHighestAmount || $hisHighestAmount != $hisLowestAmount) {
      if ($myHighestAmount >= $hisHighestAmount) {
        $t->myData()->$myHighest-= 1;
      }
      if ($myHighestAmount <= $hisHighestAmount) {
        $t->hisData()->$hisHighest-= 1;
      }
      if ($myLowestAmount <= $hisLowestAmount) {
        $t->myData()->$myLowest+= 1;
      }
      if ($myLowestAmount >= $hisLowestAmount) {
        $t->hisData()->$hisLowest+= 1;
      }
    }
]]></code>
    <created>2015-08-01</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="749">
    <name>Troll commander</name>
    <rarity>Rare</rarity>
    <cost>
      <recruits>25</recruits>
    </cost>
    <level>10</level>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 20<br />Recruits: +15<br />Replace common <b>Horde</b> in hand with uncommon <b>Horde</b>]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(20);
    $t->myData()->addRecruits(15);
    for ($i = 1; $i <= $t->handSize(); $i++) {
      $cur_card = $t->getCard($t->myData()->Hand[$i]);
      if ($i != $t->cardPos() && $cur_card->getRarity() == 'Common' && $cur_card->hasKeyword('Horde')) {
        $t->setCard('my', $i, $t->drawCard($t->getList(['rarity'=>'Uncommon', 'keyword'=>'Horde']), $t->myData()->Hand, $i, 'drawCardList'));
      }
    }
]]></code>
    <created>2015-08-01</created>
    <modified>2015-08-01</modified>
  </card>
  <card id="750">
    <name>White whale</name>
    <rarity>Rare</rarity>
    <cost>
      <gems>26</gems>
    </cost>
    <level>10</level>
    <keywords>Illusion,Aria</keywords>
    <effect><![CDATA[Attack: 50<br />Replace opponent's hand with [card=699/], [card=601/], 2x [card=592/], 2x [card=557/] and 2x [card=40/]]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(50);
    $t->setHandShuffled('his', [699, 601, 592, 592, 557, 557, 40, 40]);
]]></code>
    <created>2016-10-29</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="751">
    <name>Stein's gate</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <level>10</level>
    <keywords>Durable</keywords>
    <effect><![CDATA[Evoke an uncommon card at chosen deck slot from your deck to selected position in hand]]></effect>
    <code><![CDATA[
    if ($t->mode() != $t->cardPos()) {
      $t->setCard('my', $t->mode(), $t->myDeck()->Uncommon[$t->mode()]);
    }
]]></code>
    <created>2016-10-29</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="752">
    <name>Crimson general</name>
    <rarity>Rare</rarity>
    <cost>
      <bricks>9</bricks>
      <gems>9</gems>
      <recruits>9</recruits>
    </cost>
    <modes>3</modes>
    <level>10</level>
    <keywords>Mage,Soldier</keywords>
    <effect><![CDATA[Attack: 24<br />Tower: +16<br />Evoke [card=72/], [card=11/] or [card=374/]]]></effect>
    <code><![CDATA[
    $t->hisData()->attack(24);
    $t->myData()->addTower(16);
    $summons = [1 => 72, 11, 374];
    $t->nextCard($summons[$t->mode()], true);
]]></code>
    <created>2016-10-29</created>
    <modified>2016-12-17</modified>
  </card>
  <card id="753">
    <name>Paper master</name>
    <rarity>Rare</rarity>
    <level>10</level>
    <keywords>Aria</keywords>
    <effect><![CDATA[Summons [card=754/]<br />Stock: -12<br />If not enough stock<br />Enemy wall: +50<br />Always:<br />Attack: 60]]></effect>
    <code><![CDATA[
    $t->myData()->addStock(-12);
    foreach (['Bricks', 'Gems', 'Recruits'] as $resource) {
      if ($t->myData()->$resource < 0) {
        $t->hisData()->addWall(50);
        break;
      }
    }
    $t->hisData()->attack(60);
    $t->nextCard(754);
]]></code>
    <created>2016-10-29</created>
    <modified>2016-10-29</modified>
  </card>
  <card id="754">
    <name>Paper golem</name>
    <rarity>Rare</rarity>
    <level>10</level>
    <keywords>Unliving,Aria,Forbidden</keywords>
    <effect><![CDATA[Bricks prod x2<br />If #<b>Aria</b> in hand > 1<br />Attack: 15<br />If #<b>Aqua</b> in opponent's hand = 0<br />Wall: +15]]></effect>
    <code><![CDATA[
    $t->production()->multiplyBricks(2);
    if ($t->keywordCount($t->myData()->Hand, 'Aria') > 1) {
      $t->hisData()->attack(15);
    }
    if ($t->keywordCount($t->hisData()->Hand, 'Aqua') == 0) {
      $t->myData()->addWall(15);
    }
]]></code>
    <created>2016-10-29</created>
    <modified>2017-09-16</modified>
  </card>
</cards>
