<?xml version="1.0" encoding="utf-8"?>
<!--MArcomage cards database (XML)-->
<cards xmlns="http://arcomage.netvor.sk">
  <card id="0">
    <name>Empty</name>
    <class>None</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect/>
    <code/>
    <created>None</created>
    <modified>None</modified>
  </card>
  <card id="1">
    <name>Basic wall</name>
    <class>Common</class>
    <cost>
      <bricks>1</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Wall = 0<br />Wall: +10<br />else<br />Wall: +3]]></effect>
    <code><![CDATA[if ($mydata->Wall == 0) $mydata->Wall+= 10; else $mydata->Wall+= 3;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="2">
    <name>Foundations</name>
    <class>Common</class>
    <cost>
      <bricks>1</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +2<br />If Tower was damaged during opponent's last round<br />Tower: +5]]></effect>
    <code><![CDATA[if ($mychanges['Tower'] < 0) $mydata->Tower+= 7; else $mydata->Tower+= 2;]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="3">
    <name>Lightning strike</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>11</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy quarry: -1]]></effect>
    <code><![CDATA[$hisdata->Quarry-= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="4">
    <name>Great Wall of China</name>
    <class>Rare</class>
    <cost>
      <bricks>40</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Wall: +N<br />N = Max wall / 2]]></effect>
    <code><![CDATA[$mydata->Wall+= round($max_wall / 2);]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="5">
    <name>Curse</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>45</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Facilities: +1<br />Enemy facilities: -1]]></effect>
    <code><![CDATA[
    $mydata->Quarry+= 1; $mydata->Magic+= 1; $mydata->Dungeons+= 1;
    $hisdata->Quarry-= 1; $hisdata->Magic-= 1; $hisdata->Dungeons-= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="6">
    <name>Red dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>30</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon,Charge (25)</keywords>
    <effect><![CDATA[Attack: 50]]></effect>
    <code><![CDATA[$this->Attack(50, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="7">
    <name>Knight</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier,Charge (3)</keywords>
    <effect><![CDATA[Attack: 7]]></effect>
    <code><![CDATA[$this->Attack(7, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="8">
    <name>Soulstealer</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Gems: +7<br />Enemy gems: -7]]></effect>
    <code><![CDATA[$mydata->Gems+= 7; $hisdata->Gems-= 7;]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="9">
    <name>Stonehenge</name>
    <class>Rare</class>
    <cost>
      <bricks>17</bricks>
      <gems>13</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Magic: +2<br />Summons a rare <b>Mage</b>]]></effect>
    <code><![CDATA[
    $mydata->Magic+= 2;
    $nextcard = $this->DrawCard($carddb->GetList(array('class'=>"Rare", 'keyword'=>"Mage")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-05-01</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="10">
    <name>Iron golem</name>
    <class>Uncommon</class>
    <cost>
      <bricks>18</bricks>
      <gems>0</gems>
      <recruits>12</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Unliving,Skirmisher</keywords>
    <effect><![CDATA[Attack: 21<br />Mode1:<br />Bricks: +8<br />Mode2:<br />Recruits: +6]]></effect>
    <code><![CDATA[
    $this->Attack(21, $hisdata->Tower, $hisdata->Wall);
    if ($mode == 1) $mydata->Bricks+=8;
    elseif ($mode == 2) $mydata->Recruits+= 6;
]]></code>
    <created>2006-11-14</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="11">
    <name>Meditation</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>15</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Gems: +25<br />If last card played was a <b>Mage</b><br />Gems: +8]]></effect>
    <code><![CDATA[
    $mydata->Gems+= 25;
    if (($mylast_card->HasKeyword("Mage")) and ($mylast_action == 'play'))
      $mydata->Gems+= 8;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="12">
    <name>Blacksmith</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Dungeon: +1]]></effect>
    <code><![CDATA[$mydata->Dungeons+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="13">
    <name>Goblin flanker</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 3<br />If matching card doesn't cost recruits<br />Steals 3 random resources]]></effect>
    <code><![CDATA[
    $this->Attack(3, $hisdata->Tower, $hisdata->Wall);
    if ($carddb->GetCard($hisdata->Hand[$cardpos])->GetResources('Recruits') == 0)
      for ($i = 1; $i <= 3; $i++)
      {
        $tmp = mt_rand(0,2);
        if ($tmp == 0) { $mydata->Bricks++; $hisdata->Bricks--; }
        elseif ($tmp == 1) { $mydata->Gems++; $hisdata->Gems--; }
        elseif ($tmp == 2) { $mydata->Recruits++; $hisdata->Recruits--; }
      }
    ]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="14">
    <name>Immolation</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>13</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy magic: -1]]></effect>
    <code><![CDATA[$hisdata->Magic-= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="15">
    <name>Plague</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>7</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Facilities: -1<br />Enemy facilities: -1]]></effect>
    <code><![CDATA[
    $mydata->Quarry-= 1; $mydata->Magic-= 1; $mydata->Dungeons-= 1;
    $hisdata->Quarry-= 1; $hisdata->Magic-= 1; $hisdata->Dungeons-= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="16">
    <name>Mage guild</name>
    <class>Common</class>
    <cost>
      <bricks>5</bricks>
      <gems>2</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +3<br />Stock: +1<br />Summons a <b>Mage</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 3;
    $mydata->Bricks+= 1; $mydata->Gems+= 1; $mydata->Recruits+= 1;
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Mage")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-11-14</created>
    <modified>2007-09-26</modified>
  </card>
  <card id="17">
    <name>Earthquake</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>28</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature</keywords>
    <effect><![CDATA[Enemy tower and Enemy wall is halved (min 10 damage)]]></effect>
    <code><![CDATA[
    $hisdata->Tower-= max(round($hisdata->Tower/2), 10);
    $hisdata->Wall-= max(round($hisdata->Wall/2), 10);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="18">
    <name>Scout tower</name>
    <class>Common</class>
    <cost>
      <bricks>4</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +5]]></effect>
    <code><![CDATA[$mydata->Tower+= 5;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="19">
    <name>Fortification</name>
    <class>Uncommon</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +25]]></effect>
    <code><![CDATA[$mydata->Wall+= 25;]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="20">
    <name>Duelist</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier</keywords>
    <effect><![CDATA[Recruits: +10<br />Discard highest cost non-rare Recruits only card from opponent's hand]]></effect>
    <code><![CDATA[
    $mydata->Recruits+= 10;
    $card_costs = $max_cards = array(); $max = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($hisdata->Hand[$i]);
      if ($cur_card->Class != "Rare" and $cur_card->GetResources('Bricks') == 0 and $cur_card->GetResources('Gems') == 0 and $cur_card->GetResources('Recruits') > 0)
      {
        $cur_cost = $card_costs[$i] = $cur_card->GetResources('Recruits');
        if ($cur_cost > $max) $max = $cur_cost;
      }
    }
    if (count($card_costs) > 0)
    {
      foreach ($card_costs as $i => $cost) if ($cost == $max) $max_cards[] = $i;
      $dis_pos = $max_cards[array_rand($max_cards)];
      $hisdata->Hand[$dis_pos] = $this->DrawCard($his_deck, $hisdata->Hand, $dis_pos, 'DrawCard_different');
      $hisdata->NewCards[$dis_pos] = 1;
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="21">
    <name>Stronghold</name>
    <class>Rare</class>
    <cost>
      <bricks>20</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Tower: +30]]></effect>
    <code><![CDATA[$mydata->Tower+= 30;]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="22">
    <name>Master bricklayer</name>
    <class>Uncommon</class>
    <cost>
      <bricks>9</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Quarry: +1]]></effect>
    <code><![CDATA[$mydata->Quarry+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="23">
    <name>Caravan</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Stock: +1<br />If opponent lowered your stock last round<br />Stock: +1]]></effect>
    <code><![CDATA[
    $tmp = ($mychanges['Bricks'] < 0 or $mychanges['Gems'] < 0 or $mychanges['Recruits'] < 0) ? 2 : 1;
    $mydata->Bricks+= $tmp; $mydata->Gems+= $tmp; $mydata->Recruits+= $tmp;
]]></code>
    <created>2006-05-01</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="24">
    <name>Minotaur</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>3</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Skirmisher</keywords>
    <effect><![CDATA[Attack: 5<br />If Tower < 15<br />Tower: +4]]></effect>
    <code><![CDATA[$this->Attack(5, $hisdata->Tower, $hisdata->Wall); if ($mydata->Tower < 15) $mydata->Tower+= 4;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="25">
    <name>Griffin</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Runic,Far sight</keywords>
    <effect><![CDATA[Attack: 14]]></effect>
    <code><![CDATA[$this->Attack(14, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="26">
    <name>Thief</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Attack: 1<br />Stock: +1<br />Enemy stock: -1]]></effect>
    <code><![CDATA[
    $this->Attack(1, $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks+= 1; $mydata->Gems+= 1; $mydata->Recruits+= 1;
    $hisdata->Bricks-= 1; $hisdata->Gems-= 1; $hisdata->Recruits-= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2007-05-08</modified>
  </card>
  <card id="27">
    <name>Fairy</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Swift</keywords>
    <effect><![CDATA[Stock: +#<b>Holy</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Holy");
    $mydata->Bricks+= $tmp; $mydata->Gems+= $tmp; $mydata->Recruits+= $tmp;
]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="28">
    <name>Vampire</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>17</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 29<br />Gems: -7<br />If #<b>Undead</b> in hand < 4<br />Magic: -1]]></effect>
    <code><![CDATA[
    $this->Attack(29, $hisdata->Tower, $hisdata->Wall); $mydata->Gems-= 7;
    if ($this->KeywordCount($mydata->Hand, "Undead") < 4) $mydata->Magic-= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="29">
    <name>Bloody moon</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy dungeon: -1]]></effect>
    <code><![CDATA[$hisdata->Dungeons-= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="30">
    <name>Magic maelstrom</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>2</modes>
    <keywords/>
    <effect><![CDATA[Magic: +2<br />Gems: +30<br />Mode1:<br />Quarry: -1<br />Mode2:<br />Dungeon: -1]]></effect>
    <code><![CDATA[
    $mydata->Magic+= 2; $mydata->Gems+= 30;
    if ($mode == 1) $mydata->Quarry-= 1;
    elseif ($mode == 2) $mydata->Dungeons-= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="31">
    <name>Risen angel</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>9</gems>
      <recruits>11</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 22 + N<br />Gems: +N<br />N = #<b>Holy</b> in opponent's hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($hisdata->Hand, "Holy");
    $this->Attack(22 + $tmp, $hisdata->Tower, $hisdata->Wall);
    $mydata->Gems+= $tmp;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="32">
    <name>Crimson hawk</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Far sight</keywords>
    <effect><![CDATA[Attack: 16]]></effect>
    <code><![CDATA[$this->Attack(16, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="33">
    <name>Beast farm</name>
    <class>Uncommon</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +5<br />Summons a rare <b>Beast</b>]]></effect>
    <code><![CDATA[
    $mydata->Wall+=5;
    $nextcard = $this->DrawCard($carddb->GetList(array('class'=>"Rare", 'keyword'=>"Beast")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-11-14</created>
    <modified>2010-01-11</modified>
  </card>
  <card id="34">
    <name>Book of magic</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Magic: +1]]></effect>
    <code><![CDATA[$mydata->Magic+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="35">
    <name>Magical tower</name>
    <class>Uncommon</class>
    <cost>
      <bricks>15</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +15<br />If matching card in opponent's hand costs gems<br />Gems: +10]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 15;
    if ($carddb->GetCard($hisdata->Hand[$cardpos])->GetResources('Gems') > 0)
      $mydata->Gems+= 10;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="36">
    <name>Light cavalry</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier,Charge (9)</keywords>
    <effect><![CDATA[Attack: 16]]></effect>
    <code><![CDATA[$this->Attack(16, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2007-09-26</modified>
  </card>
  <card id="37">
    <name>Mystic strike</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction,Banish</keywords>
    <effect><![CDATA[Enemy gems: -12]]></effect>
    <code><![CDATA[$hisdata->Gems-= 12;]]></code>
    <created>2006-05-01</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="38">
    <name>Master thief</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>14</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Stock: +N<br />Enemy stock: -N<br />N = 3 + #<b>Brigand</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Brigand") + 3;
    $mydata->Bricks+= $tmp; $mydata->Gems+= $tmp; $mydata->Recruits+= $tmp;
    $hisdata->Bricks-= $tmp; $hisdata->Gems-= $tmp; $hisdata->Recruits-= $tmp;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="39">
    <name>Reinforced wall</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Skirmisher</keywords>
    <effect><![CDATA[Tower: +2<br />Wall: +3]]></effect>
    <code><![CDATA[$mydata->Tower+= 2; $mydata->Wall+= 3;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="40">
    <name>Sorrow</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Enemy recruits: -20]]></effect>
    <code><![CDATA[$hisdata->Recruits-= 20;]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="41">
    <name>Stone golem</name>
    <class>Common</class>
    <cost>
      <bricks>8</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Unliving,Skirmisher</keywords>
    <effect><![CDATA[Mode1:<br />Wall: +8<br />Mode2:<br />Enemy wall: -9]]></effect>
    <code><![CDATA[if ($mode == 1) $mydata->Wall+=8; elseif ($mode == 2) $hisdata->Wall-= 9;]]></code>
    <created>2006-11-14</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="42">
    <name>Lady Ellena</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Attack: 2<br />Summons a <b>Far sight</b>]]></effect>
    <code><![CDATA[
    $this->Attack(2, $hisdata->Tower, $hisdata->Wall);
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Far sight")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="43">
    <name>Sacrifice</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Magic: -1<br />Gems: +25]]></effect>
    <code><![CDATA[$mydata->Magic-= 1; $mydata->Gems+= 25;]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="44">
    <name>Angel</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>8</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Swift</keywords>
    <effect><![CDATA[Stock: +3N<br />N = #<b>Holy</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = 3 * $this->KeywordCount($mydata->Hand, "Holy");
    $mydata->Bricks+= $tmp; $mydata->Gems+= $tmp; $mydata->Recruits+= $tmp;
]]></code>
    <created>2006-05-01</created>
    <modified>2007-09-26</modified>
  </card>
  <card id="45">
    <name>Marauder</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>3</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Siege</keywords>
    <effect><![CDATA[Attack: 4<br />Enemy tower: -1]]></effect>
    <code><![CDATA[$this->Attack(4, $hisdata->Tower, $hisdata->Wall); $hisdata->Tower-= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="46">
    <name>Ogre</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde,Charge (7),Siege</keywords>
    <effect><![CDATA[Enemy wall: -8]]></effect>
    <code><![CDATA[$hisdata->Wall-= 8;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="47">
    <name>City walls</name>
    <class>Uncommon</class>
    <cost>
      <bricks>20</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +35<br />Bricks: +5]]></effect>
    <code><![CDATA[$mydata->Wall+= 35; $mydata->Bricks+= 5;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="48">
    <name>School of Restoration</name>
    <class>Common</class>
    <cost>
      <bricks>5</bricks>
      <gems>3</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +4<br />Stock: +1<br />Summons a <b>Restoration</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 4;
    $mydata->Bricks+= 1; $mydata->Gems+= 1; $mydata->Recruits+= 1;
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Restoration")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-11-14</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="49">
    <name>Magical clay</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Bricks: +10<br />If last card played was a <b>Mage</b><br />Bricks: +5]]></effect>
    <code><![CDATA[
    $mydata->Bricks+= 10;
    if (($mylast_card->HasKeyword("Mage")) and ($mylast_action == 'play'))
      $mydata->Bricks+= 5;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="50">
    <name>Magical steel</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Recruits: +10<br />If last card played was a <b>Mage</b><br />Recruits: +5]]></effect>
    <code><![CDATA[
    $mydata->Recruits+= 10;
    if (($mylast_card->HasKeyword("Mage")) and ($mylast_action == 'play'))
      $mydata->Recruits+= 5;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="51">
    <name>Samurai</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Discard highest cost non-<b>Durable</b> keyword card from opponent's hand]]></effect>
    <code><![CDATA[
    $card_costs = $max_cards = array(); $max = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($hisdata->Hand[$i]);
      if (!$cur_card->HasKeyword("Durable") AND $cur_card->HasKeyword("any"))
      {
        $cur_cost = $card_costs[$i] = $cur_card->GetResources("");
        if ($cur_cost > $max) $max = $cur_cost;
      }
    }
    if (count($card_costs) > 0)
    {
      foreach ($card_costs as $i => $cost) if ($cost == $max) $max_cards[] = $i;
      $dis_pos = $max_cards[array_rand($max_cards)];
      $hisdata->Hand[$dis_pos] = $this->DrawCard($his_deck, $hisdata->Hand, $dis_pos, 'DrawCard_different');
      $hisdata->NewCards[$dis_pos] = 1;
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="52">
    <name>Pirates</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Attack: 12<br />Enemy stock: -3]]></effect>
    <code><![CDATA[
    $this->Attack(12, $hisdata->Tower, $hisdata->Wall);
    $hisdata->Bricks-= 3; $hisdata->Gems-= 3; $hisdata->Recruits-= 3;
]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="53">
    <name>Sorceress</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage,Swift</keywords>
    <effect><![CDATA[Attack: 6 + #Magic]]></effect>
    <code><![CDATA[$this->Attack((6 + $mydata->Magic), $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="54">
    <name>Battering ram</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Siege</keywords>
    <effect><![CDATA[Enemy wall: -10]]></effect>
    <code><![CDATA[$hisdata->Wall-= 10;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="55">
    <name>School of Nature</name>
    <class>Common</class>
    <cost>
      <bricks>6</bricks>
      <gems>3</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +5<br />Stock: +1<br />Summons a <b>Nature</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 5;
    $mydata->Bricks+= 1; $mydata->Gems+= 1; $mydata->Recruits+= 1;
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Nature")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-11-14</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="56">
    <name>Parapet</name>
    <class>Uncommon</class>
    <cost>
      <bricks>7</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +12]]></effect>
    <code><![CDATA[$mydata->Tower+= 12;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="57">
    <name>Gate</name>
    <class>Common</class>
    <cost>
      <bricks>3</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +7]]></effect>
    <code><![CDATA[$mydata->Wall+= 7;]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="58">
    <name>Academy of Destruction</name>
    <class>Uncommon</class>
    <cost>
      <bricks>8</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +6<br />Stock: +2<br />Summons non-common <b>Destruction</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 6;
    $mydata->Bricks+= 2; $mydata->Gems+= 2; $mydata->Recruits+= 2;
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Destruction"));
    $rare = $carddb->GetList(array('class'=>"Rare", 'keyword'=>"Destruction"));
    $nextcard = $this->DrawCard(array_merge($uncommon, $rare), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-11-14</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="59">
    <name>Flame spitter</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Enemy tower: -9]]></effect>
    <code><![CDATA[$hisdata->Tower-= 9;]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="60">
    <name>Dwarven warriors</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>3</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Attack: 4<br />Bricks: +3]]></effect>
    <code><![CDATA[$this->Attack(4, $hisdata->Tower, $hisdata->Wall); $mydata->Bricks+= 3;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="61">
    <name>Ether dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>25</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon,Banish</keywords>
    <effect><![CDATA[Attack: 50]]></effect>
    <code><![CDATA[$this->Attack(50, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="62">
    <name>Catapult</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>16</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Siege</keywords>
    <effect><![CDATA[Enemy tower: -14]]></effect>
    <code><![CDATA[$hisdata->Tower-= 14;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="63">
    <name>Dark ritual</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>15</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Facilities: -1<br />Enemy tower: -24]]></effect>
    <code><![CDATA[
    $mydata->Quarry-= 1; $mydata->Magic-= 1; $mydata->Dungeons-= 1;
    $hisdata->Tower-= 24;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="64">
    <name>Enlightenment</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +25<br />Facilities: +1<br />Enemy tower: +25<br />Enemy facilities: +1]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 25;
    $mydata->Quarry+= 1; $mydata->Magic+= 1; $mydata->Dungeons+= 1;
    $hisdata->Tower+= 25;
    $hisdata->Quarry+= 1; $hisdata->Magic+= 1; $hisdata->Dungeons+= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="65">
    <name>Academy of Illusion</name>
    <class>Uncommon</class>
    <cost>
      <bricks>9</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +7<br />Stock: +2<br />Summons non-common <b>Illusion</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 7;
    $mydata->Bricks+= 2; $mydata->Gems+= 2; $mydata->Recruits+= 2;
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Illusion"));
    $rare = $carddb->GetList(array('class'=>"Rare", 'keyword'=>"Illusion"));
    $nextcard = $this->DrawCard(array_merge($uncommon, $rare), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-11-14</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="66">
    <name>Manticore</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Frenzy</keywords>
    <effect><![CDATA[Attack: 18]]></effect>
    <code><![CDATA[$this->Attack(18, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="67">
    <name>Magical palace</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>35</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +40]]></effect>
    <code><![CDATA[$mydata->Tower+= 40;]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="68">
    <name>Gladiator</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[Attack: 3<br />Recruits: +2<br />Summons a non-common <b>Barbarian</b>]]></effect>
    <code><![CDATA[
    $this->Attack(3, $hisdata->Tower, $hisdata->Wall);
    $mydata->Recruits+= 2;
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Barbarian"));
    $rare = $carddb->GetList(array('class'=>"Rare", 'keyword'=>"Barbarian"));
    $nextcard = $this->DrawCard(array_merge($uncommon, $rare), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-05-01</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="69">
    <name>Beast mistress</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Frenzy</keywords>
    <effect><![CDATA[Attack: 12]]></effect>
    <code><![CDATA[$this->Attack(12, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="70">
    <name>Stormwind</name>
    <class>Rare</class>
    <cost>
      <bricks>15</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +20<br />Magic: +2]]></effect>
    <code><![CDATA[$mydata->Tower+= 20; $mydata->Magic+= 2;]]></code>
    <created>2006-05-01</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="71">
    <name>Dwarven miners</name>
    <class>Common</class>
    <cost>
      <bricks>3</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Attack: 3<br />Wall: +5]]></effect>
    <code><![CDATA[$this->Attack(3, $hisdata->Tower, $hisdata->Wall); $mydata->Wall+= 5;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="72">
    <name>Tower guards</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>9</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier,Far sight</keywords>
    <effect><![CDATA[Tower: +10]]></effect>
    <code><![CDATA[$mydata->Tower+= 10;]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="73">
    <name>Giant spider</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>7</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Frenzy</keywords>
    <effect><![CDATA[Attack: 10<br />Enemy bricks: -5]]></effect>
    <code><![CDATA[$this->Attack(10, $hisdata->Tower, $hisdata->Wall); $hisdata->Bricks-= 5;]]></code>
    <created>2006-05-01</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="74">
    <name>Highlander</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>14</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Skirmisher</keywords>
    <effect><![CDATA[Attack: 25]]></effect>
    <code><![CDATA[$this->Attack(25, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="75">
    <name>White crocodile</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>7</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Frenzy</keywords>
    <effect><![CDATA[Attack: 15]]></effect>
    <code><![CDATA[$this->Attack(15, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="76">
    <name>Ninja</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Production x0<br />Enemy tower: -3<br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $bricks_production = 0; $gems_production = 0; $recruits_production = 0;
    $hisdata->Tower-= 3; $mydata->Hand[$mode] = $card->ID;
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="77">
    <name>Amazon tribe</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Skirmisher</keywords>
    <effect><![CDATA[Attack: 6<br />Stock: -1<br />If Enemy tower > 40<br />Enemy tower: -4]]></effect>
    <code><![CDATA[
    $this->Attack(6, $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks-= 1; $mydata->Gems-= 1; $mydata->Recruits-= 1;
    if ($hisdata->Tower > 40) $hisdata->Tower-= 4;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="78">
    <name>Unicorn</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Banish,Charge (2)</keywords>
    <effect><![CDATA[Attack: 5<br />Gems: +3]]></effect>
    <code><![CDATA[$this->Attack(5, $hisdata->Tower, $hisdata->Wall); $mydata->Gems+= 3;]]></code>
    <created>2006-05-01</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="79">
    <name>Erosion</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy bricks: -10]]></effect>
    <code><![CDATA[$hisdata->Bricks-= 10;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="80">
    <name>Catastrophe</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>20</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction,Nature</keywords>
    <effect><![CDATA[Each player suffers 5 damage for each facility and 10 resources he has]]></effect>
    <code><![CDATA[
    $my_fac = $mydata->Quarry + $mydata->Magic + $mydata->Dungeons;
    $his_fac = $hisdata->Quarry + $hisdata->Magic + $hisdata->Dungeons;
    $my_res = $mydata->Bricks + $mydata->Gems + $mydata->Recruits;
    $his_res = $hisdata->Bricks + $hisdata->Gems + $hisdata->Recruits;
    $this->Attack(($my_fac + floor($my_res / 10)) * 5, $mydata->Tower, $mydata->Wall);
    $this->Attack(($his_fac + floor($his_res / 10)) * 5, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="81">
    <name>New era</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Facilities: +2<br />Stock: = 0<br />Enemy facilities: +2<br />Enemy stock: = 0]]></effect>
    <code><![CDATA[
    $mydata->Quarry+= 2; $mydata->Magic+= 2; $mydata->Dungeons+= 2;
    $hisdata->Quarry+= 2; $hisdata->Magic+= 2; $hisdata->Dungeons+= 2;
    $mydata->Bricks= 0; $mydata->Gems= 0; $mydata->Recruits= 0;
    $hisdata->Bricks= 0; $hisdata->Gems= 0; $hisdata->Recruits= 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="82">
    <name>Wizard</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage,Far sight</keywords>
    <effect><![CDATA[Attack: #Magic]]></effect>
    <code><![CDATA[$this->Attack($mydata->Magic, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="83">
    <name>Valkyrie</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>14</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Banish,Charge (7)</keywords>
    <effect><![CDATA[Attack: 15<br />Dungeon: +1<br />Enemy dungeon: +1]]></effect>
    <code><![CDATA[
    $this->Attack(15, $hisdata->Tower, $hisdata->Wall);
    $mydata->Dungeons+= 1; $hisdata->Dungeons+= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="84">
    <name>Cold arrow</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>8</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction,Banish</keywords>
    <effect><![CDATA[Attack: 8<br />Enemy gems: -8]]></effect>
    <code><![CDATA[$this->Attack(8, $hisdata->Tower, $hisdata->Wall); $hisdata->Gems-= 8;]]></code>
    <created>2006-05-01</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="85">
    <name>Heavenly warrior</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Far sight</keywords>
    <effect><![CDATA[Attack: 10<br />Enemy gems: -8]]></effect>
    <code><![CDATA[$this->Attack(10, $hisdata->Tower, $hisdata->Wall); $hisdata->Gems-= 8;]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="86">
    <name>Bone dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>30</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon,Undead</keywords>
    <effect><![CDATA[Attack: 40<br />Enemy gems: -20]]></effect>
    <code><![CDATA[$this->Attack(40, $hisdata->Tower, $hisdata->Wall); $hisdata->Gems-= 20;]]></code>
    <created>2006-05-01</created>
    <modified>2007-05-08</modified>
  </card>
  <card id="87">
    <name>Pyramids</name>
    <class>Uncommon</class>
    <cost>
      <bricks>68</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +80]]></effect>
    <code><![CDATA[$mydata->Tower+= 80;]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="88">
    <name>Undead host</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>35</gems>
      <recruits>35</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 40 + 8N<br />N = #<b>Undead</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = ($this->KeywordCount($mydata->Hand, "Undead") * 8) + 40;
    $this->Attack($tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="89">
    <name>Orc regiment</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>60</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 100]]></effect>
    <code><![CDATA[$this->Attack(100, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="90">
    <name>Paladin</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Soldier,Banish</keywords>
    <effect><![CDATA[Attack: 10<br />Gems: +6]]></effect>
    <code><![CDATA[$this->Attack(10, $hisdata->Tower, $hisdata->Wall); $mydata->Gems+= 6;]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="91">
    <name>Corrosion</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>3</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy recruits: -6]]></effect>
    <code><![CDATA[$hisdata->Recruits-= 6;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="92">
    <name>Dragon golem</name>
    <class>Rare</class>
    <cost>
      <bricks>45</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Dragon,Unliving,Charge (16)</keywords>
    <effect><![CDATA[Mode1:<br />Attack: 55<br />Mode2:<br />Wall: +65]]></effect>
    <code><![CDATA[
    if ($mode == 1) $this->Attack(55, $hisdata->Tower, $hisdata->Wall);
    elseif ($mode == 2) $mydata->Wall+= 65;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="93">
    <name>Clay golem</name>
    <class>Uncommon</class>
    <cost>
      <bricks>29</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>3</modes>
    <keywords>Unliving,Siege</keywords>
    <effect><![CDATA[Mode1:<br />Attack: 25<br />Mode2:<br />Wall: +32<br />Mode3:<br />Enemy wall: -35]]></effect>
    <code><![CDATA[
    if ($mode == 1) $this->Attack(25, $hisdata->Tower, $hisdata->Wall);
    elseif ($mode == 2) $mydata->Wall+= 32;
    elseif ($mode == 3) $hisdata->Wall-= 35;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="94">
    <name>Stone gargoyle</name>
    <class>Common</class>
    <cost>
      <bricks>16</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Unliving,Far sight</keywords>
    <effect><![CDATA[Mode1:<br />Attack: 12<br />Mode2:<br />Enemy tower: -7]]></effect>
    <code><![CDATA[
    if ($mode == 1) $this->Attack(12, $hisdata->Tower, $hisdata->Wall);
    elseif ($mode == 2) $hisdata->Tower-= 7;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="95">
    <name>Archer</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier</keywords>
    <effect><![CDATA[Enemy tower: -3]]></effect>
    <code><![CDATA[$hisdata->Tower-= 3;]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="96">
    <name>Pegasus</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Quick,Charge (3)</keywords>
    <effect><![CDATA[Gems: +3]]></effect>
    <code><![CDATA[$mydata->Gems+= 3;]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="97">
    <name>Conscript</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Attack: 1<br />If last card played was a zero cost card<br />Summons a non-common zero cost card]]></effect>
    <code><![CDATA[
    $this->Attack(1, $hisdata->Tower, $hisdata->Wall);
    if ($mylast_card->GetResources("") == 0 and $mylast_action == 'play' and $mylast_card->ID > 0)
    {
      $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'cost'=>"Zero"));
      $rare = $carddb->GetList(array('class'=>"Rare", 'cost'=>"Zero"));
      $nextcard = $this->DrawCard(array_merge($uncommon, $rare), $mydata->Hand, $cardpos, 'DrawCard_list');
    }
 ]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="98">
    <name>Murderer</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>18</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 10<br />Enemy magic: -1]]></effect>
    <code><![CDATA[$this->Attack(10, $hisdata->Tower, $hisdata->Wall); $hisdata->Magic-= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="99">
    <name>Magic rift</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Dungeon: +1<br />Magic: +1<br />Gems: +25<br />Enemy dungeon: +1<br />Enemy magic: +1<br />Enemy gems: -25]]></effect>
    <code><![CDATA[
    $mydata->Dungeons+= 1; $mydata->Magic+= 1; $mydata->Gems+= 25;
    $hisdata->Dungeons+= 1; $hisdata->Magic+= 1; $hisdata->Gems-= 25;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="100">
    <name>Wonder</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Quarry: +5<br />Enemy quarry: +5]]></effect>
    <code><![CDATA[$mydata->Quarry+= 5; $hisdata->Quarry+= 5;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="101">
    <name>Crypt sentry</name>
    <class>Common</class>
    <cost>
      <bricks>6</bricks>
      <gems>0</gems>
      <recruits>4</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Stock: +#<b>Undead</b> in hand (max 6)]]></effect>
    <code><![CDATA[
    $tmp = min($this->KeywordCount($mydata->Hand, "Undead"), 6);
    $mydata->Bricks+= $tmp; $mydata->Gems+= $tmp; $mydata->Recruits+= $tmp;
]]></code>
    <created>2006-11-14</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="102">
    <name>Honor guard</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier</keywords>
    <effect><![CDATA[Tower: +10<br />Recruits: +20]]></effect>
    <code><![CDATA[$mydata->Tower+= 10; $mydata->Recruits+= 20;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="103">
    <name>Vampire countess</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>3</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Stock: +N<br />If N > 6<br />Magic: +1<br />N = #<b>Undead</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Undead");
    $mydata->Bricks+= $tmp; $mydata->Gems+= $tmp; $mydata->Recruits+= $tmp;
    if ($tmp > 6) $mydata->Magic+= 1;
]]></code>
    <created>2006-11-14</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="104">
    <name>Moat</name>
    <class>Uncommon</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Durable</keywords>
    <effect><![CDATA[Wall: +15<br />If not New<br />Wall: +5]]></effect>
    <code><![CDATA[$mydata->Wall+= (isset($mynewflags[$cardpos])) ? 15 : 20;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="105">
    <name>Rejuvenation</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>8</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Summons the last card]]></effect>
    <code><![CDATA[if ($mylast_card->ID > 0) $nextcard = $mylast_card->ID;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="106">
    <name>Troll</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Durable,Horde,Enduring (9)</keywords>
    <effect><![CDATA[Attack: 5]]></effect>
    <code><![CDATA[$this->Attack(5, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="107">
    <name>Alchemy</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Restoration,Durable</keywords>
    <effect><![CDATA[Bricks: +2<br />Recruits: +2]]></effect>
    <code><![CDATA[$mydata->Bricks+= 2; $mydata->Recruits+= 2;]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="108">
    <name>Archmage</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>25</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage</keywords>
    <effect><![CDATA[Attack: 20<br />Enemy stock: -7<br />Summons the last card]]></effect>
    <code><![CDATA[
    $this->Attack(20, $hisdata->Tower, $hisdata->Wall);
    $hisdata->Bricks-= 7; $hisdata->Gems-= 7; $hisdata->Recruits-= 7;
    if ($mylast_card->ID > 0) $nextcard = $mylast_card->ID;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="109">
    <name>Red mage</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>14</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage,Swift</keywords>
    <effect><![CDATA[Attack: 8<br />Enemy stock: -3]]></effect>
    <code><![CDATA[
    $this->Attack(8, $hisdata->Tower, $hisdata->Wall);
    $hisdata->Bricks-= 3; $hisdata->Gems-= 3; $hisdata->Recruits-= 3;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="110">
    <name>Dark knight</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>15</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead,Skirmisher</keywords>
    <effect><![CDATA[Attack: 35<br />Enemy recruits: -10]]></effect>
    <code><![CDATA[$this->Attack(35, $hisdata->Tower, $hisdata->Wall); $hisdata->Recruits-= 10;]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="111">
    <name>Elven fighter</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Attack: 7<br />Gems: +2]]></effect>
    <code><![CDATA[$this->Attack(7, $hisdata->Tower, $hisdata->Wall); $mydata->Gems+= 2;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="112">
    <name>Ghoul</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead,Charge (3)</keywords>
    <effect><![CDATA[Attack: 10]]></effect>
    <code><![CDATA[$this->Attack(10, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="113">
    <name>Skeleton warriors</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>3</gems>
      <recruits>3</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 7<br />If Wall < 12<br />Wall: +4]]></effect>
    <code><![CDATA[$this->Attack(7, $hisdata->Tower, $hisdata->Wall); if ($mydata->Wall < 12) $mydata->Wall+= 4;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="114">
    <name>Drowner</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>2</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Undead</keywords>
    <effect><![CDATA[Attack: 5<br />Wall: +2]]></effect>
    <code><![CDATA[$this->Attack(5, $hisdata->Tower, $hisdata->Wall); $mydata->Wall+= 2;]]></code>
    <created>2006-05-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="115">
    <name>Angel of destruction</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Attack: 30<br />Stock: = 0<br />Enemy stock: = 0]]></effect>
    <code><![CDATA[
    $this->Attack(30, $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks= 0; $mydata->Gems= 0; $mydata->Recruits= 0;
    $hisdata->Bricks= 0; $hisdata->Gems= 0; $hisdata->Recruits= 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="116">
    <name>Telekinesis</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>9</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Tower: +5<br />Enemy tower: -5]]></effect>
    <code><![CDATA[$mydata->Tower+= 5; $hisdata->Tower-= 5;]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="117">
    <name>Mummy</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead,Banish</keywords>
    <effect><![CDATA[Tower: +4<br />If #<b>Undead</b> in hand < 4<br />Gems: -3]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 4;
    if ($this->KeywordCount($mydata->Hand, "Undead") < 4) $mydata->Gems-= 3;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="118">
    <name>Gateway</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>75</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Facilities: +5]]></effect>
    <code><![CDATA[$mydata->Quarry+= 5; $mydata->Magic+= 5; $mydata->Dungeons+= 5;]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="119">
    <name>Haste</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Production x2]]></effect>
    <code><![CDATA[$bricks_production*= 2; $gems_production*= 2; $recruits_production*= 2;]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="120">
    <name>Stalker</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>11</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead,Far sight</keywords>
    <effect><![CDATA[Attack: 11<br />Gems: +5<br />Enemy gems: -5]]></effect>
    <code><![CDATA[
    $this->Attack(11, $hisdata->Tower, $hisdata->Wall);
    $mydata->Gems+= 5; $hisdata->Gems-= 5;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="121">
    <name>Luna the Sorceress</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>25</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage,Far sight</keywords>
    <effect><![CDATA[Attack: 30<br />Magic: +1]]></effect>
    <code><![CDATA[$this->Attack(30, $hisdata->Tower, $hisdata->Wall); $mydata->Magic+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="122">
    <name>Elven scout</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance,Banish</keywords>
    <effect><![CDATA[Attack: 3<br />Gems: +1]]></effect>
    <code><![CDATA[$this->Attack(3, $hisdata->Tower, $hisdata->Wall); $mydata->Gems+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="123">
    <name>Magic fountain</name>
    <class>Uncommon</class>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Tower: +7<br />Production x2]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 7;
    $bricks_production*= 2; $gems_production*= 2; $recruits_production*= 2;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="124">
    <name>Death pact</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>13</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: -70<br />Attack: N<br />N = wall lost]]></effect>
    <code><![CDATA[
    $lowered = $mydata->Wall - max($mydata->Wall - 70, 0);
    $mydata->Wall-= $lowered;
    $this->Attack($lowered, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="125">
    <name>Archangel</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>40</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Restoration,Far sight</keywords>
    <effect><![CDATA[Tower: +15<br />Wall: +15<br />Stock: +15]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 15; $mydata->Wall+= 15;
    $mydata->Bricks+= 15; $mydata->Gems+= 15; $mydata->Recruits+= 15;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="126">
    <name>Green dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>25</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon,Far sight</keywords>
    <effect><![CDATA[Attack: 40]]></effect>
    <code><![CDATA[$this->Attack(40, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="127">
    <name>Black dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>43</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Attack: 60<br />Enemy recruits: -15]]></effect>
    <code><![CDATA[$this->Attack(60, $hisdata->Tower, $hisdata->Wall); $hisdata->Recruits-= 15;]]></code>
    <created>2006-05-01</created>
    <modified>2007-09-26</modified>
  </card>
  <card id="128">
    <name>Ice dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>25</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon,Skirmisher</keywords>
    <effect><![CDATA[Attack: 45<br />Enemy gems: -10]]></effect>
    <code><![CDATA[$this->Attack(45, $hisdata->Tower, $hisdata->Wall); $hisdata->Gems-= 10;]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="129">
    <name>Wealth</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Stock: +8<br />Enemy stock: +8]]></effect>
    <code><![CDATA[
    $mydata->Bricks+= 8; $mydata->Gems+= 8; $mydata->Recruits+= 8;
    $hisdata->Bricks+= 8; $hisdata->Gems+= 8; $hisdata->Recruits+= 8;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="130">
    <name>Sea monster</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>30</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Charge (8)</keywords>
    <effect><![CDATA[Attack: 30<br />If Enemy wall = 0<br />Recruits: +20]]></effect>
    <code><![CDATA[
    $this->Attack(30, $hisdata->Tower, $hisdata->Wall);
    if ($hisdata->Wall <= 0) $mydata->Recruits+= 20;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="131">
    <name>Dragon egg</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>13</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons a <b>Dragon</b><br />If #<b>Dragon</b> in hand > 0<br />it will be a rare <b>Dragon</b>]]></effect>
    <code><![CDATA[
    $filters = ($this->KeywordCount($mydata->Hand, "Dragon") > 0) ? array('class'=>"Rare", 'keyword'=>"Dragon") : array('keyword'=>"Dragon");
    $nextcard = $this->DrawCard($carddb->GetList($filters), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="132">
    <name>Tubular bells</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If #Facilities >= #Enemy facilities<br />Stock: -15<br />Always:<br />Facilities: +1]]></effect>
    <code><![CDATA[
    if (($mydata->Quarry + $mydata->Magic + $mydata->Dungeons) >= ($hisdata->Quarry + $hisdata->Magic + $hisdata->Dungeons))
      { $mydata->Bricks-= 15; $mydata->Gems-= 15; $mydata->Recruits-= 15; }
    $mydata->Quarry+= 1; $mydata->Magic+= 1; $mydata->Dungeons+= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="133">
    <name>Banshee</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>9</gems>
      <recruits>9</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 4N + 4<br />N = #<b>Undead</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Undead");
    $this->Attack((($tmp * 4) + 4), $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2006-11-14</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="134">
    <name>Centaur trainer</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>13</gems>
      <recruits>17</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Horde</keywords>
    <effect><![CDATA[Dungeon: +2<br />Summons a rare <b>Beast</b>]]></effect>
    <code><![CDATA[
    $mydata->Dungeons+= 2;
    $nextcard = $this->DrawCard($carddb->GetList(array('class'=>"Rare", 'keyword'=>"Beast")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-11-14</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="135">
    <name>Stone atronarch</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Unliving</keywords>
    <effect><![CDATA[If Bricks > Enemy bricks<br />Attack: 10<br />else<br/>Bricks: +8]]></effect>
    <code><![CDATA[
    if ($mydata->Bricks > $hisdata->Bricks) $this->Attack(10, $hisdata->Tower, $hisdata->Wall);
    else $mydata->Bricks+= 8;]]></code>
    <created>2007-03-26</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="136">
    <name>Elven enchantress</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance,Mage</keywords>
    <effect><![CDATA[Attack: 9<br />Production x2]]></effect>
    <code><![CDATA[
    $this->Attack(9, $hisdata->Tower, $hisdata->Wall);
    $bricks_production*= 2; $gems_production*= 2; $recruits_production*= 2;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="137">
    <name>Seraphim</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>17</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Far sight</keywords>
    <effect><![CDATA[Attack: 10<br />Tower: +10]]></effect>
    <code><![CDATA[$this->Attack(10, $hisdata->Tower, $hisdata->Wall); $mydata->Tower+= 10;]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="138">
    <name>Devil</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>30</gems>
      <recruits>30</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Attack: 50<br />Enemy stock: -50]]></effect>
    <code><![CDATA[
    $this->Attack(50, $hisdata->Tower, $hisdata->Wall);
    $hisdata->Bricks-= 50; $hisdata->Gems-= 50; $hisdata->Recruits-= 50;
]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="139">
    <name>Avenger</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy</keywords>
    <effect><![CDATA[If Recruits > Enemy recruits<br />Attack: 10<br />else<br/>Recruits: +7]]></effect>
    <code><![CDATA[
    if ($mydata->Recruits > $hisdata->Recruits) $this->Attack(10, $hisdata->Tower, $hisdata->Wall);
    else $mydata->Recruits+= 7;
]]></code>
    <created>2007-03-26</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="140">
    <name>Poacher</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Attack: 5<br />Enemy stock: -2]]></effect>
    <code><![CDATA[
    $this->Attack(5, $hisdata->Tower, $hisdata->Wall);
    $hisdata->Bricks-= 2; $hisdata->Gems-= 2; $hisdata->Recruits-= 2;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="141">
    <name>Tower of Babylon</name>
    <class>Rare</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Durable</keywords>
    <effect><![CDATA[Tower: +10]]></effect>
    <code><![CDATA[$mydata->Tower+= 10;]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="142">
    <name>Basilisk</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast</keywords>
    <effect><![CDATA[Attack: 20<br />Wall: +10<br />Quarry: +1<br />Enemy wall: +10<br />Enemy quarry: +1]]></effect>
    <code><![CDATA[
    $this->Attack(20, $hisdata->Tower, $hisdata->Wall);
    $mydata->Wall+= 10; $mydata->Quarry+= 1;
    $hisdata->Wall+= 10; $hisdata->Quarry+= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="143">
    <name>Clay valley</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>11</gems>
      <recruits>11</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Bricks: +60]]></effect>
    <code><![CDATA[$mydata->Bricks+= 60;]]></code>
    <created>2006-05-01</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="144">
    <name>Necromancer</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>19</gems>
      <recruits>13</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 20<br />Summons rare <b>Undead</b><br />Gain cost of the summoned card (max 13)]]></effect>
    <code><![CDATA[
    $this->Attack(20, $hisdata->Tower, $hisdata->Wall);
    $nextcard = $this->DrawCard($carddb->GetList(array('class'=>"Rare", 'keyword'=>"Undead")), $mydata->Hand, $cardpos, 'DrawCard_list');
    $cur_card = $carddb->GetCard($nextcard);
    $mydata->Bricks+= min($cur_card->GetResources("Bricks"), 13);
    $mydata->Gems+= min($cur_card->GetResources("Gems"), 13);
    $mydata->Recruits+= min($cur_card->GetResources("Recruits"), 13);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="145">
    <name>Necromancy</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons <b>Undead</b> of a rarity based on #<b>Undead</b> in hand (C - 0 to 3, U - 4 to 6, R - 7)]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Undead");
    $rarity = ($tmp == 7) ? 'Rare' : (($tmp < 7 AND $tmp > 3) ? 'Uncommon' : 'Common');
    $nextcard = $this->DrawCard($carddb->GetList(array('class'=>$rarity, 'keyword'=>"Undead")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="146">
    <name>Ancient ruins</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Bricks: +5<br />Gems: +2<br />Recruits: +1]]></effect>
    <code><![CDATA[$mydata->Bricks+= 5; $mydata->Gems+= 2; $mydata->Recruits+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="147">
    <name>Werewolf</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Far sight</keywords>
    <effect><![CDATA[If matching card is Revealed<br />Wall: +12<br />else<br />Attack: 12]]></effect>
    <code><![CDATA[if (!$hidden_cards or isset($hisdata->Revealed[$cardpos])) $mydata->Wall+= 12; else $this->Attack(12, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="148">
    <name>Two towers</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +50<br />Enemy wall: +50]]></effect>
    <code><![CDATA[$mydata->Wall+= 50; $hisdata->Wall+= 50;]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="149">
    <name>Double wall</name>
    <class>Common</class>
    <cost>
      <bricks>6</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +10]]></effect>
    <code><![CDATA[$mydata->Wall+= 10;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="150">
    <name>Conscript army</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Attack: 12<br />Stock: -5<br />Replace matching card and its neigbouring cards with Conscript]]></effect>
    <code><![CDATA[
    $this->Attack(12, $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks-= 5; $mydata->Gems-= 5; $mydata->Recruits-= 5;
    $hisdata->Hand[$cardpos] = 97; $hisdata->NewCards[$cardpos] = 1;
    if ($cardpos > 1) { $hisdata->Hand[$cardpos - 1] = 97; $hisdata->NewCards[$cardpos - 1] = 1; }
    if ($cardpos < 8) { $hisdata->Hand[$cardpos + 1] = 97; $hisdata->NewCards[$cardpos + 1] = 1; }
]]></code>
    <created>2006-05-01</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="151">
    <name>Trebuchet</name>
    <class>Rare</class>
    <cost>
      <bricks>6</bricks>
      <gems>0</gems>
      <recruits>9</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Durable,Siege</keywords>
    <effect><![CDATA[Enemy tower: -6]]></effect>
    <code><![CDATA[$hisdata->Tower-= 6;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="152">
    <name>Micramix</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Switches your hand with opponent's hand]]></effect>
    <code><![CDATA[
    $mydata->Hand[$cardpos] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
    $tmp = $mydata->Hand; $mydata->Hand = $hisdata->Hand; $hisdata->Hand = $tmp;
    $mydata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);
    $hisdata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);
    $nextcard = 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="153">
    <name>Acolyte</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>2</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage</keywords>
    <effect><![CDATA[If Gems > Enemy gems<br />Attack: 10<br />else<br/>Gems: +7]]></effect>
    <code><![CDATA[
    if ($mydata->Gems > $hisdata->Gems) { $this->Attack(10, $hisdata->Tower, $hisdata->Wall); }
    else $mydata->Gems+= 7;
]]></code>
    <created>2007-03-26</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="154">
    <name>Dwarven fortification</name>
    <class>Uncommon</class>
    <cost>
      <bricks>32</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Wall: +40<br />Summons non-common <b>Runic</b>]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 40;
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Runic"));
    $rare = $carddb->GetList(array('class'=>"Rare", 'keyword'=>"Runic"));
    $nextcard = $this->DrawCard(array_merge($uncommon, $rare), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="155">
    <name>Citadel</name>
    <class>Uncommon</class>
    <cost>
      <bricks>20</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Tower: +22]]></effect>
    <code><![CDATA[$mydata->Tower+= 22;]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="156">
    <name>Magic barrier</name>
    <class>Rare</class>
    <cost>
      <bricks>15</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Tower: +#Bricks<br />Wall: +#Gems<br />Bricks: = 0<br />Gems: = 0]]></effect>
    <code><![CDATA[
    $mydata->Wall+= $mydata->Gems; $mydata->Tower+= $mydata->Bricks;
    $mydata->Gems= 0; $mydata->Bricks= 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="157">
    <name>Volcano</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>30</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature</keywords>
    <effect><![CDATA[Enemy tower: -15<br />Enemy wall: -15<br />Enemy stock: -15]]></effect>
    <code><![CDATA[
    $hisdata->Tower-= 15; $hisdata->Wall-= 15;
    $hisdata->Bricks-= 15; $hisdata->Gems-= 15; $hisdata->Recruits-= 15;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="158">
    <name>Flood</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>20</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature</keywords>
    <effect><![CDATA[Enemy wall: -N<br />N = 50 - #Enemy bricks<br />Enemy bricks: -50]]></effect>
    <code><![CDATA[
    $lowered = $hisdata->Bricks - max($hisdata->Bricks - 50, 0);
    $hisdata->Bricks-= $lowered; $hisdata->Wall-= 50 - $lowered;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="159">
    <name>Scepter of summoning</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>15</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons a rare card from your deck]]></effect>
    <code><![CDATA[$nextcard = $this->DrawCard($my_deck->Rare, $mydata->Hand, $cardpos, 'DrawCard_list');]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="160">
    <name>Gnome thief</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>3</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Attack: 1<br />Recruits: +1<br />Gems: +2<br />Enemy recruits: -1<br />Enemy gems: -2]]></effect>
    <code><![CDATA[
    $this->Attack(1, $hisdata->Tower, $hisdata->Wall);
    $mydata->Recruits+= 1;  $mydata->Gems+= 2;
    $hisdata->Recruits-= 1; $hisdata->Gems-= 2;
]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="161">
    <name>Damnation</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>60</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy tower: -20<br />Enemy wall: -20<br />Enemy facilities: -2<br />Enemy stock: -20]]></effect>
    <code><![CDATA[
    $hisdata->Tower-= 20; $hisdata->Wall-= 20;
    $hisdata->Quarry-= 2; $hisdata->Magic-= 2; $hisdata->Dungeons-= 2;
    $hisdata->Bricks-= 20; $hisdata->Gems-= 20; $hisdata->Recruits-= 20;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="162">
    <name>Apprentice</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Magic: +1]]></effect>
    <code><![CDATA[$mydata->Magic+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="163">
    <name>Architect</name>
    <class>Uncommon</class>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Quarry: +1]]></effect>
    <code><![CDATA[$mydata->Quarry+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="164">
    <name>Legendary smith</name>
    <class>Uncommon</class>
    <cost>
      <bricks>6</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Dungeon: +1]]></effect>
    <code><![CDATA[$mydata->Dungeons+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="165">
    <name>Preparations</name>
    <class>Common</class>
    <cost>
      <bricks>7</bricks>
      <gems>0</gems>
      <recruits>7</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Dungeon < Enemy dungeon<br />Dungeon: +1<br />else<br />Recruits: +11]]></effect>
    <code><![CDATA[
    if ($mydata->Dungeons < $hisdata->Dungeons) { $mydata->Dungeons+= 1; }
    else $mydata->Recruits+= 11;
]]></code>
    <created>2007-03-26</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="166">
    <name>Royal dragoons</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>40</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier,Charge (15)</keywords>
    <effect><![CDATA[Attack: 25 + 8N<br />N = #<b>Charge</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Charge");
    $this->Attack(25 + (8 * $tmp), $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="167">
    <name>Dragon squadron</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>70</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Attack: 200]]></effect>
    <code><![CDATA[$this->Attack(200, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2007-05-08</modified>
  </card>
  <card id="168">
    <name>Mirror strike</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>8</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Summons opponent's last card]]></effect>
    <code><![CDATA[if ($hislast_card->ID > 0) $nextcard = $hislast_card->ID;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="169">
    <name>Valhalla</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: -20<br />Wall: +70<br/>Won't lower tower below 1]]></effect>
    <code><![CDATA[
    $mydata->Tower-= 20; $mydata->Tower = max(1, $mydata->Tower);
    $mydata->Wall+= 70;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="170">
    <name>Miracle</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy</keywords>
    <effect><![CDATA[Player(s) with most <b>Holy</b> in hand gains<br />Stock: +8<br />His opponent gains<br />Stock: +2]]></effect>
    <code><![CDATA[
    $my_count = $this->KeywordCount($mydata->Hand, "Holy");
    $his_count = $this->KeywordCount($hisdata->Hand, "Holy");
    if ($my_count >= $his_count)
    {
      $mydata->Bricks+= 8; $mydata->Gems+= 8; $mydata->Recruits+= 8;
      $hisdata->Bricks+= 2; $hisdata->Gems+= 2; $hisdata->Recruits+= 2;
    }
    if ($my_count <= $his_count)
    {
      $mydata->Bricks+= 2; $mydata->Gems+= 2; $mydata->Recruits+= 2;
      $hisdata->Bricks+= 8; $hisdata->Gems+= 8; $hisdata->Recruits+= 8;
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="171">
    <name>Master of the past</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage</keywords>
    <effect><![CDATA[Negates the negative effect of opponent's last round on your tower, wall, facilities and stock]]></effect>
    <code><![CDATA[
    $mydata->Tower-= min(0, $mychanges['Tower']); $mydata->Wall-= min(0, $mychanges['Wall']);
    $mydata->Quarry-= min(0, $mychanges['Quarry']); $mydata->Magic-= min(0, $mychanges['Magic']); $mydata->Dungeons-= min(0, $mychanges['Dungeons']);
    $mydata->Bricks-= min(0, $mychanges['Bricks']); $mydata->Gems-= min(0, $mychanges['Gems']); $mydata->Recruits-= min(0, $mychanges['Recruits']);
]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="172">
    <name>Knight of time</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>11</gems>
      <recruits>11</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage,Swift</keywords>
    <effect><![CDATA[Attack: 14]]></effect>
    <code><![CDATA[$this->Attack(14, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2010-01-11</modified>
  </card>
  <card id="173">
    <name>Lord of time</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>23</gems>
      <recruits>16</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage,Durable,Swift</keywords>
    <effect><![CDATA[Attack: 25<br /><b>Mage</b> tokens: +30]]></effect>
    <code><![CDATA[
    $this->Attack(25, $hisdata->Tower, $hisdata->Wall);
    $tmp = array_search("Mage", $mydata->TokenNames);
    if ($tmp) $mydata->TokenValues[$tmp]+= 30;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="174">
    <name>Time warp</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>11</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Swift</keywords>
    <effect><![CDATA[Production x2]]></effect>
    <code><![CDATA[$bricks_production*= 2; $gems_production*= 2; $recruits_production*= 2;]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="175">
    <name>Cathedral</name>
    <class>Uncommon</class>
    <cost>
      <bricks>27</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy</keywords>
    <effect><![CDATA[Tower: +13<br />Stock: +7]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 13;
    $mydata->Bricks+= 7; $mydata->Gems+= 7; $mydata->Recruits+= 7;
]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="176">
    <name>Chapel</name>
    <class>Common</class>
    <cost>
      <bricks>5</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy</keywords>
    <effect><![CDATA[Tower: +3<br />Stock: +1]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 3;
    $mydata->Bricks+= 1; $mydata->Gems+= 1; $mydata->Recruits+= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="177">
    <name>Prayer</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Gain 1 random resource for each <b>Holy</b> in hand (max 5)<br />Summons <b>Holy</b>]]></effect>
    <code><![CDATA[
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Holy")), $mydata->Hand, $cardpos, 'DrawCard_list');
    $resources = min($this->KeywordCount($mydata->Hand, "Holy"),5);
    if ($resources > 0)
      for ($i = 1; $i <= $resources; $i++)
      {
        $tmp = mt_rand(0,2);
        if ($tmp == 0) $mydata->Bricks++;
        elseif ($tmp == 1) $mydata->Gems++;
        elseif ($tmp == 2) $mydata->Recruits++;
      }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="178">
    <name>Army of darkness</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>13</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: N * M<br />Recruits: = 0<br />N = #Recruits<br />M = #<b>Undead</b> rare cards in hand / 2]]></effect>
    <code><![CDATA[
    $rares = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($mydata->Hand[$i]);
      if ($cur_card->HasKeyword("Undead") and $cur_card->Class == 'Rare') $rares++;
    }
    $this->Attack($mydata->Recruits * round($rares / 2), $hisdata->Tower, $hisdata->Wall);
    $mydata->Recruits= 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="179">
    <name>Redesign</name>
    <class>Rare</class>
    <cost>
      <bricks>15</bricks>
      <gems>15</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower:= +Wall<br />Wall: = 0]]></effect>
    <code><![CDATA[$mydata->Tower+= $mydata->Wall; $mydata->Wall = 0;]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="180">
    <name>Mercenaries</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Production x0<br />Attack: 9 + 9N<br />N = #Facilities that were lowered to 1]]></effect>
    <code><![CDATA[
    $bricks_production = 0; $gems_production = 0; $recruits_production = 0;
    $tmp = 0;
    if ($mydata->Quarry == 1) $tmp++;
    if ($mydata->Magic == 1) $tmp++;
    if ($mydata->Dungeons == 1) $tmp++;
    $this->Attack(9 + 9*$tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="181">
    <name>Genie</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>30</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Attack: 35<br />Stock: +5<br />Enemy stock: -5]]></effect>
    <code><![CDATA[
    $this->Attack(35, $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks+= 5; $mydata->Gems+= 5; $mydata->Recruits+= 5;
    $hisdata->Bricks-= 5; $hisdata->Gems-= 5; $hisdata->Recruits-= 5;
]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="182">
    <name>Efreet</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>35</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[Enemy stock: -20<br />Opponent suffers 1 damage for each resource lost]]></effect>
    <code><![CDATA[
    $res = array('Bricks', 'Gems', 'Recruits'); $dmg = 0;
    foreach ($res as $resource)
    {
      $lowered = $hisdata->$resource - max($hisdata->$resource - 20, 0);
      $hisdata->$resource-= $lowered; $dmg+= $lowered;
    }
    $this->Attack($dmg, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="183">
    <name>Magic lamp</name>
    <class>Common</class>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons<br />If New<br />Genie or Efreet<br />else<br />Magic lamp]]></effect>
    <code><![CDATA[$nextcard = (isset($mynewflags[$cardpos])) ? $this->DrawCard(array(181, 182), $mydata->Hand, $cardpos, 'DrawCard_list') : 183;]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="184">
    <name>Lost city</name>
    <class>Uncommon</class>
    <cost>
      <bricks>10</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +5<br />Stock: +4<br />Summons Genie, Efreet or Scepter of summoning]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 5;
    $mydata->Bricks+= 4; $mydata->Gems+= 4; $mydata->Recruits+= 4;
    $nextcard = $this->DrawCard(array(181, 182, 159), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-05-01</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="185">
    <name>Magic well</name>
    <class>Common</class>
    <cost>
      <bricks>7</bricks>
      <gems>7</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Magic < Enemy magic<br />Magic: +1<br />else<br />Gems: +11]]></effect>
    <code><![CDATA[
    if ($mydata->Magic < $hisdata->Magic) $mydata->Magic+= 1;
    else $mydata->Gems+= 11;
]]></code>
    <created>2007-03-26</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="186">
    <name>Ent</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>14</gems>
      <recruits>7</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance,Nature</keywords>
    <effect><![CDATA[Enemy wall: -40]]></effect>
    <code><![CDATA[$hisdata->Wall-= 40;]]></code>
    <created>2006-05-01</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="187">
    <name>Mithril mine</name>
    <class>Common</class>
    <cost>
      <bricks>7</bricks>
      <gems>7</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Quarry < Enemy quarry<br />Quarry: +1<br />else<br />Bricks: +12]]></effect>
    <code><![CDATA[
    if ($mydata->Quarry < $hisdata->Quarry) $mydata->Quarry+= 1;
    else $mydata->Bricks+= 12;
]]></code>
    <created>2007-03-26</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="188">
    <name>Crenellation</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Wall: +5<br />Enemy tower: -1]]></effect>
    <code><![CDATA[$mydata->Wall+= 5; $hisdata->Tower-= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="189">
    <name>Foundry</name>
    <class>Uncommon</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Tower: +5<br />Recruits prod x3]]></effect>
    <code><![CDATA[$mydata->Tower+= 5; $recruits_production*= 3;]]></code>
    <created>2006-05-01</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="190">
    <name>Elven ranger</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>11</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance,Far sight,Skirmisher</keywords>
    <effect><![CDATA[Attack: 11<br />Gems prod x2]]></effect>
    <code><![CDATA[$this->Attack(11, $hisdata->Tower, $hisdata->Wall); $gems_production*= 2;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="191">
    <name>Ivory tower</name>
    <class>Uncommon</class>
    <cost>
      <bricks>16</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +20]]></effect>
    <code><![CDATA[$mydata->Tower+= 20;]]></code>
    <created>2006-05-01</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="192">
    <name>Fortified castle</name>
    <class>Rare</class>
    <cost>
      <bricks>40</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +45<br />Wall: +25]]></effect>
    <code><![CDATA[$mydata->Tower+= 45; $mydata->Wall+= 25;]]></code>
    <created>2006-05-01</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="193">
    <name>Royal pikemen</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>12</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier,Skirmisher</keywords>
    <effect><![CDATA[Attack: 16]]></effect>
    <code><![CDATA[$this->Attack(16, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="194">
    <name>Draft</name>
    <class>Common</class>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons a <b>Soldier</b><br />If <b>Soldier</b> tokens are set gain recruits cost of the summoned card (max 6)]]></effect>
    <code><![CDATA[
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Soldier")), $mydata->Hand, $cardpos, 'DrawCard_list');
    if (array_search("Soldier", $mydata->TokenNames))
      $mydata->Recruits+= min($carddb->GetCard($nextcard)->GetResources("Recruits"), 6);
]]></code>
    <created>2006-05-01</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="195">
    <name>Fairy dragon</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>15</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon,Quick</keywords>
    <effect><![CDATA[Moves all <b>Dragon</b> cards from opponent's hand to your hand (to matching positions)<br />If there are none<br />Stock: +6]]></effect>
    <code><![CDATA[
    if ($this->KeywordCount($hisdata->Hand, "Dragon") == 0)
      { $mydata->Bricks+= 6; $mydata->Gems+= 6; $mydata->Recruits+= 6; }
    else
      for ($i = 1; $i <= 8; $i++)
        if ($carddb->GetCard($hisdata->Hand[$i])->HasKeyword("Dragon"))
        {
          $mydata->Hand[$i] = $hisdata->Hand[$i];
          $mydata->NewCards[$i] = 1;
          $hisdata->Hand[$i] = $this->DrawCard($his_deck, $hisdata->Hand, $i, 'DrawCard_different');
          $hisdata->NewCards[$i] = 1;
          if ($cardpos == $i) $nextcard = 0;
        }
]]></code>
    <created>2006-05-01</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="196">
    <name>Monastery</name>
    <class>Uncommon</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy</keywords>
    <effect><![CDATA[Tower: +12<br />Summons non-common <b>Holy</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 12;
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Holy"));
    $rare = $carddb->GetList(array('class'=>"Rare", 'keyword'=>"Holy"));
    $nextcard = $this->DrawCard(array_merge($uncommon, $rare), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2006-05-01</created>
    <modified>2010-10-03</modified>
  </card>
  <card id="197">
    <name>Daemon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>13</gems>
      <recruits>13</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight,Charge (10)</keywords>
    <effect><![CDATA[Attack: 20<br />Enemy quarry: -1]]></effect>
    <code><![CDATA[$this->Attack(20, $hisdata->Tower, $hisdata->Wall); $hisdata->Quarry-= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="198">
    <name>Demolition troop</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>19</gems>
      <recruits>19</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Enemy wall: -60<br />If Enemy wall = 0<br />Enemy facilities: -1]]></effect>
    <code><![CDATA[
    $hisdata->Wall-= 60;
    if ($hisdata->Wall <= 0)
      { $hisdata->Quarry-= 1; $hisdata->Magic-= 1; $hisdata->Dungeons-= 1; }
]]></code>
    <created>2006-05-01</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="199">
    <name>Duplication</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>35</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion,Swift</keywords>
    <effect><![CDATA[Stock x2]]></effect>
    <code><![CDATA[$mydata->Bricks= ($mydata->Bricks * 2); $mydata->Gems= ($mydata->Gems * 2); $mydata->Recruits= ($mydata->Recruits * 2);]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="200">
    <name>Inspiration</name>
    <class>Uncommon</class>
    <cost>
      <bricks>5</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +20<br />Enemy tower: +30]]></effect>
    <code><![CDATA[$mydata->Tower+= 20; $hisdata->Tower+= 30;]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="201">
    <name>Ballistae</name>
    <class>Uncommon</class>
    <cost>
      <bricks>15</bricks>
      <gems>0</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Siege</keywords>
    <effect><![CDATA[Wall: +30<br />If #<b>Siege</b> in hand > 1<br />Enemy tower: -10]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 30;
    if ($this->KeywordCount($mydata->Hand, "Siege") > 1) $hisdata->Tower-= 10;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="202">
    <name>Roc</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Runic</keywords>
    <effect><![CDATA[Attack: 17<br />Bricks: +5<br />Enemy bricks: -5]]></effect>
    <code><![CDATA[
    $this->Attack(17, $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks+= 5; $hisdata->Bricks-= 5;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="203">
    <name>Crypt</name>
    <class>Uncommon</class>
    <cost>
      <bricks>15</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons non-common <b>Undead</b><br />Gain cost of the summoned card (max 10)]]></effect>
    <code><![CDATA[
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Undead"));
    $rare = $carddb->GetList(array('class'=>"Rare", 'keyword'=>"Undead"));
    $nextcard = $this->DrawCard(array_merge($uncommon, $rare), $mydata->Hand, $cardpos, 'DrawCard_list');
    $cur_card = $carddb->GetCard($nextcard);
    $mydata->Bricks+= min($cur_card->GetResources("Bricks"), 10);
    $mydata->Gems+= min($cur_card->GetResources("Gems"), 10);
    $mydata->Recruits+= min($cur_card->GetResources("Recruits"), 10);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="204">
    <name>Invisible squad</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Enemy tower: -9]]></effect>
    <code><![CDATA[$hisdata->Tower-= 9;]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="205">
    <name>Danai present</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Enemy stock: +10<br />Replace opponent's hand with non-rare zero cost cards]]></effect>
    <code><![CDATA[
    $hisdata->Bricks+= 10; $hisdata->Gems+= 10; $hisdata->Recruits+= 10;
    $common = $carddb->GetList(array('class'=>"Common", 'cost'=>"Zero"));
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'cost'=>"Zero"));
    $hisdata->Hand = $this->DrawHand_list(array_merge($common, $uncommon));
    $hisdata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="206">
    <name>Drought</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Stock: -8<br />Enemy stock: -8]]></effect>
    <code><![CDATA[
    $mydata->Bricks-= 8; $mydata->Gems-= 8; $mydata->Recruits-= 8;
    $hisdata->Bricks-= 8; $hisdata->Gems-= 8; $hisdata->Recruits-= 8;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="207">
    <name>Shapeshifter</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>8</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Summons selected card in opponent's hand]]></effect>
    <code><![CDATA[$nextcard = $hisdata->Hand[$mode];]]></code>
    <created>2007-03-26</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="208">
    <name>Overseer</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Wall: +30<br />Quarry: -1]]></effect>
    <code><![CDATA[$mydata->Wall+= 30; $mydata->Quarry-= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="209">
    <name>Overlord</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Wall: +70<br />Mode1:<br />Quarry: -1<br />Mode2:<br />Dungeon: -1]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 70;
    if ($mode == 1) $mydata->Quarry-= 1;
    elseif ($mode == 2) $mydata->Dungeons-= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="210">
    <name>Rescue and resistance</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Enemy tower < Tower<br />Tower: -10 <br />Enemy tower: -10<br />else<br />Tower: +10<br />Enemy tower: +10]]></effect>
    <code><![CDATA[
    if ($hisdata->Tower < $mydata->Tower) { $mydata->Tower-= 10; $hisdata->Tower-= 10; }
    else { $mydata->Tower+= 10; $hisdata->Tower+= 10; }
]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="211">
    <name>Hectic offensive</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>13</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Enemy wall - Wall > 10<br />Attack: 25<br />else<br />Attack: 15]]></effect>
    <code><![CDATA[
    if (($hisdata->Wall - $mydata->Wall) > 10) $this->Attack(25, $hisdata->Tower, $hisdata->Wall);
    else $this->Attack(15, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2006-05-01</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="212">
    <name>Rogue</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Brigand,Far sight</keywords>
    <effect><![CDATA[Attack: 2<br />Enemy recruits: -1<br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $this->Attack(2, $hisdata->Tower, $hisdata->Wall); $hisdata->Recruits-= 1;
    $mydata->Hand[$mode] = $card->ID;
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="213">
    <name>Kidnap</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>15</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Quarry: +1 <br />Enemy quarry: -1]]></effect>
    <code><![CDATA[$mydata->Quarry+= 1; $hisdata->Quarry-= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="214">
    <name>Mind control</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>24</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Magic: +1<br />Enemy magic: -1]]></effect>
    <code><![CDATA[$mydata->Magic+= 1; $hisdata->Magic-= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="215">
    <name>Treacherous artifact</name>
    <class>Uncommon</class>
    <cost>
      <bricks>9</bricks>
      <gems>9</gems>
      <recruits>9</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Dungeon: +1<br />Enemy dungeon: -1]]></effect>
    <code><![CDATA[$mydata->Dungeons+= 1; $hisdata->Dungeons-= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="216">
    <name>Salvation</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Quick</keywords>
    <effect><![CDATA[If Tower < 15<br />Tower: +15<br />else<br />Tower: +3]]></effect>
    <code><![CDATA[if ($mydata->Tower < 15) $mydata->Tower+= 15; else $mydata->Tower+= 3;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="217">
    <name>Auxilia</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Wall: +2<br />Production x0<br />Discard your hand except the selected card]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 2;
    $bricks_production = 0; $gems_production = 0; $recruits_production = 0;
    for ($i = 1; $i <= 8; $i++)
      if ($i != $mode)
      {
        $mydata->Hand[$i] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
        $mydata->NewCards[$i] = 1;
      }
]]></code>
    <created>2007-03-26</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="218">
    <name>Mana burn</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>24</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Enemy gems: = 0<br />Enemy magic is halved]]></effect>
    <code><![CDATA[$hisdata->Gems= 0; $hisdata->Magic = round($hisdata->Magic / 2);]]></code>
    <created>2006-11-14</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="219">
    <name>Earth eater</name>
    <class>Uncommon</class>
    <cost>
      <bricks>12</bricks>
      <gems>0</gems>
      <recruits>8</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Mode1:<br />Attack: 16<br />Mode2:<br />Wall: +13<br />Enemy wall: -13]]></effect>
    <code><![CDATA[
    if ($mode == 1) $this->Attack(16, $hisdata->Tower, $hisdata->Wall);
    elseif ($mode == 2) { $mydata->Wall+= 13; $hisdata->Wall-= 13; }
]]></code>
    <created>2007-03-26</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="220">
    <name>Enforcer</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>15</recruits>
    </cost>
    <modes>2</modes>
    <keywords/>
    <effect><![CDATA[Attack: 26<br />Mode1:<br />Stock: -2<br />Mode2:<br />Tower: -5<br />Wall: -5]]></effect>
    <code><![CDATA[
    $this->Attack(26, $hisdata->Tower, $hisdata->Wall);
    if ($mode == 1) { $mydata->Bricks-= 2; $mydata->Gems-= 2; $mydata->Recruits-= 2; }
    elseif ($mode == 2) { $mydata->Tower-= 5; $mydata->Wall-= 5; }
]]></code>
    <created>2007-03-26</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="221">
    <name>Implosion</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>35</gems>
      <recruits>25</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy tower: -N<br />Enemy wall: -N<br />N = 7#Enemy quarry + #Enemy bricks]]></effect>
    <code><![CDATA[
    $tmp = ($hisdata->Quarry * 7) + $hisdata->Bricks;
    $hisdata->Tower-= $tmp; $hisdata->Wall-= $tmp;
]]></code>
    <created>2007-03-26</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="222">
    <name>Water elemental</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>19</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Unliving</keywords>
    <effect><![CDATA[If #Facilities > #Enemy facilities<br />Enemy wall = 0<br />Always:<br />Attack: #Stock - #Enemy stock]]></effect>
    <code><![CDATA[
    $tmp = max(0, $mydata->Quarry + $mydata->Magic + $mydata->Dungeons - $hisdata->Quarry - $hisdata->Magic - $hisdata->Dungeons);
    if ($tmp > 0) { $hisdata->Wall = 0; }
    $tmp = max(0, $mydata->Bricks + $mydata->Gems + $mydata->Recruits - $hisdata->Bricks - $hisdata->Gems - $hisdata->Recruits);
    $this->Attack($tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2007-03-26</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="223">
    <name>Phoenix</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>31</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Rebirth,Flare attack</keywords>
    <effect><![CDATA[Attack: 10N<br />N = #<b>Burning</b> in game]]></effect>
    <code><![CDATA[
    $tmp = ($this->KeywordCount($mydata->Hand, "Burning") + $this->KeywordCount($hisdata->Hand, "Burning"))*10;
    $this->Attack($tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2007-05-08</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="224">
    <name>Tidal wave</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>17</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Player(s) with lowest wall gains<br />Quarry: -1<br />Dungeon: -1]]></effect>
    <code><![CDATA[
    if ($mydata->Wall <= $hisdata->Wall) { $mydata->Quarry-= 1; $mydata->Dungeons-= 1; };
    if ($hisdata->Wall <= $mydata->Wall) { $hisdata->Quarry-= 1; $hisdata->Dungeons-= 1; };
]]></code>
    <created>2007-05-08</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="225">
    <name>Cultists</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Dungeon < Enemy dungeon<br />Enemy dungeon: -2<br />else<br />Dungeon: = 4]]></effect>
    <code><![CDATA[
    if ($mydata->Dungeons < $hisdata->Dungeons) $hisdata->Dungeons-= 2;
    else $mydata->Dungeons = 4;
]]></code>
    <created>2007-05-08</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="226">
    <name>Soul cleaver</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>15</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Magic < Enemy magic<br />Enemy magic: -2<br />else<br />Magic: = 4]]></effect>
    <code><![CDATA[
    if ($mydata->Magic < $hisdata->Magic) $hisdata->Magic-= 2;
    else $mydata->Magic = 4;
]]></code>
    <created>2007-05-08</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="227">
    <name>Earth elemental</name>
    <class>Uncommon</class>
    <cost>
      <bricks>20</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Unliving</keywords>
    <effect><![CDATA[If Quarry < Enemy quarry<br />Enemy quarry: -2<br />else<br />Quarry: = 4]]></effect>
    <code><![CDATA[
    if ($mydata->Quarry < $hisdata->Quarry) $hisdata->Quarry-= 2;
    else $mydata->Quarry = 4;
]]></code>
    <created>2007-05-08</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="228">
    <name>Forgotten castle</name>
    <class>Uncommon</class>
    <cost>
      <bricks>46</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +35<br/>Stock: +10]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 35;
    $mydata->Bricks+= 10; $mydata->Gems+= 10; $mydata->Recruits+= 10;
]]></code>
    <created>2007-05-08</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="229">
    <name>Apocalyptic rain</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>34</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction,Nature</keywords>
    <effect><![CDATA[Attack: N * M / 3<br />N = #Bricks<br />M = #Magic<br />Bricks: = 0]]></effect>
    <code><![CDATA[
    $this->Attack(round(($mydata->Bricks * $mydata->Magic) / 3), $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks= 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="230">
    <name>Locust swarm</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>16</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Enemy wall < 5<br />Attack: 35<br />else<br />Attack: 11]]></effect>
    <code><![CDATA[
    if ($hisdata->Wall < 5) $this->Attack(35, $hisdata->Tower, $hisdata->Wall);
    else $this->Attack(11, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2007-05-08</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="231">
    <name>Blind guardian</name>
    <class>Uncommon</class>
    <cost>
      <bricks>4</bricks>
      <gems>4</gems>
      <recruits>4</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +12]]></effect>
    <code><![CDATA[$mydata->Tower+= 12;]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="232">
    <name>Governour</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Attack: 20<br />Tower: +10<br />Wall: +10<br />Production x2]]></effect>
    <code><![CDATA[
    $this->Attack(20, $hisdata->Tower, $hisdata->Wall);
    $mydata->Tower+= 10; $mydata->Wall+= 10;
    $bricks_production*= 2; $gems_production*= 2; $recruits_production*= 2;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="233">
    <name>Magic academy</name>
    <class>Rare</class>
    <cost>
      <bricks>15</bricks>
      <gems>15</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Durable</keywords>
    <effect><![CDATA[Tower: +15<br />Magic: +1]]></effect>
    <code><![CDATA[$mydata->Tower+= 15; $mydata->Magic+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2006-05-01</modified>
  </card>
  <card id="234">
    <name>Manufactory</name>
    <class>Rare</class>
    <cost>
      <bricks>15</bricks>
      <gems>0</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Durable</keywords>
    <effect><![CDATA[Tower: +15<br />Dungeon: +1]]></effect>
    <code><![CDATA[$mydata->Tower+= 15; $mydata->Dungeons+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="235">
    <name>Architect academy</name>
    <class>Rare</class>
    <cost>
      <bricks>30</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Durable</keywords>
    <effect><![CDATA[Tower: +15<br />Quarry: +1]]></effect>
    <code><![CDATA[$mydata->Tower+= 15; $mydata->Quarry+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="236">
    <name>Centaur tribe</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Beast,Horde</keywords>
    <effect><![CDATA[Attack: 12<br />Mode1:<br />Tower: -2<br />Mode2:<br />Wall: -4]]></effect>
    <code><![CDATA[
    $this->Attack(12, $hisdata->Tower, $hisdata->Wall);
    if ($mode == 1) $mydata->Tower-= 2; elseif ($mode == 2) $mydata->Wall-= 4;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="237">
    <name>Guard post</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Tower: +3<br />Recruits: +1]]></effect>
    <code><![CDATA[$mydata->Tower+= 3; $mydata->Recruits+= 1;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="238">
    <name>Fortified wall</name>
    <class>Common</class>
    <cost>
      <bricks>4</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +8]]></effect>
    <code><![CDATA[$mydata->Wall+= 8;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="239">
    <name>Golden dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>35</gems>
      <recruits>35</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Attack: 110]]></effect>
    <code><![CDATA[$this->Attack(110, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="240">
    <name>Orc grunt</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 9]]></effect>
    <code><![CDATA[$this->Attack(9, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="241">
    <name>Blizzard</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>30</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature</keywords>
    <effect><![CDATA[Enemy stock: -20]]></effect>
    <code><![CDATA[$hisdata->Bricks-= 20; $hisdata->Gems-= 20; $hisdata->Recruits-= 20;]]></code>
    <created>2006-05-01</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="242">
    <name>Tornado</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>33</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature</keywords>
    <effect><![CDATA[Enemy stock: = 0]]></effect>
    <code><![CDATA[$hisdata->Bricks= 0; $hisdata->Gems= 0; $hisdata->Recruits= 0;]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="243">
    <name>Thieves with honor</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Enemy tower: -6<br />Enemy stock: +2]]></effect>
    <code><![CDATA[
    $hisdata->Tower-= 6;
    $hisdata->Bricks+= 2; $hisdata->Gems+= 2; $hisdata->Recruits+= 2;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="244">
    <name>Assassins</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>7</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Enemy tower: -5<br />Enemy stock: -2]]></effect>
    <code><![CDATA[
    $hisdata->Tower-= 5;
    $hisdata->Bricks-= 2; $hisdata->Gems-= 2; $hisdata->Recruits-= 2;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="245">
    <name>Sabotage tunnel</name>
    <class>Uncommon</class>
    <cost>
      <bricks>35</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Enemy tower: -20<br />Enemy bricks: -10<br />Enemy recruits: -10]]></effect>
    <code><![CDATA[$hisdata->Tower-= 20; $hisdata->Bricks-= 10; $hisdata->Recruits-= 10;]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="246">
    <name>Siege golem</name>
    <class>Rare</class>
    <cost>
      <bricks>24</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Unliving,Durable,Siege</keywords>
    <effect><![CDATA[Enemy tower: -10<br />Enemy wall: -10]]></effect>
    <code><![CDATA[$hisdata->Tower-= 10; $hisdata->Wall-= 10;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="247">
    <name>Wind</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Enemy wall: -1<br />Enemy stock: -1]]></effect>
    <code><![CDATA[
    $hisdata->Wall-= 1;
    $hisdata->Bricks-= 1; $hisdata->Gems-= 1; $hisdata->Recruits-= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="248">
    <name>Searing fire</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[Tower: -2<br />Wall: -5<br />Stock: -2<br />Enemy tower: -2<br />Enemy wall: -5<br />Enemy stock: -2]]></effect>
    <code><![CDATA[
    $mydata->Bricks-= 2; $mydata->Gems-= 2; $mydata->Recruits-= 2;
    $mydata->Tower-= 2; $mydata->Wall-= 5;
    $hisdata->Bricks-= 2; $hisdata->Gems-= 2; $hisdata->Recruits-= 2;
    $hisdata->Tower-= 2; $hisdata->Wall-= 5;
]]></code>
    <created>2007-05-08</created>
    <modified>2007-08-18</modified>
  </card>
  <card id="249">
    <name>Wall shift</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Switches wall with enemy wall]]></effect>
    <code><![CDATA[$tmp = $mydata->Wall; $mydata->Wall= $hisdata->Wall; $hisdata->Wall= $tmp;]]></code>
    <created>2006-11-14</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="250">
    <name>Dragon whelp</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>3</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Dragon</keywords>
    <effect><![CDATA[Attack: 5]]></effect>
    <code><![CDATA[$this->Attack(5, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2007-05-08</created>
    <modified>2007-05-08</modified>
  </card>
  <card id="251">
    <name>Tribute</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Players discard up to 3 non-rare cards]]></effect>
    <code><![CDATA[
    $mydata->Hand[$cardpos] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
    $mydata->NewCards[$cardpos] = 1;
    $my_storage = $his_storage = array();
    for ($i = 1; $i <= 8; $i++)
    {
      if ($carddb->GetCard($mydata->Hand[$i])->Class != "Rare") $my_storage[] = $i;
      if ($carddb->GetCard($hisdata->Hand[$i])->Class != "Rare") $his_storage[] = $i;
    }
    $count = min(count($my_storage), count($his_storage), 3);
    if ($count > 0)
    {
      shuffle($my_storage); shuffle($his_storage);
      for ($k = 0; $k < $count; $k++)
      {
        $i = $my_storage[$k]; $j = $his_storage[$k];
        $mydata->Hand[$i] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
        $hisdata->Hand[$j] = $this->DrawCard($his_deck, $hisdata->Hand, $cardpos, 'DrawCard_random');
        $mydata->NewCards[$i] = 1;
        $hisdata->NewCards[$j] = 1;
      }
    }
    $nextcard = 0;
]]></code>
    <created>2007-05-08</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="252">
    <name>Black market</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Production x0<br />Switches selected non-rare card with its matching non-rare card (can't target self)]]></effect>
    <code><![CDATA[
    $bricks_production = 0; $gems_production = 0; $recruits_production = 0;
    if ($mode != $cardpos and $carddb->GetCard($mydata->Hand[$mode])->Class != "Rare" and $carddb->GetCard($hisdata->Hand[$mode])->Class != "Rare")
    {
      $tmp = $mydata->Hand[$mode];
      $mydata->Hand[$mode] = $hisdata->Hand[$mode];
      $mydata->NewCards[$mode] = 1;
      $hisdata->Hand[$mode] = $tmp;
      $hisdata->NewCards[$mode] = 1;
    }
]]></code>
    <created>2007-05-08</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="253">
    <name>Necropolis</name>
    <class>Rare</class>
    <cost>
      <bricks>30</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Tower: +10<br />Gems: +10<br />Replace your hand with non-rare <b>Undead</b> cards]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 10; $mydata->Gems+= 10;
    $common = $carddb->GetList(array('class'=>"Common", 'keyword'=>"Undead"));
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Undead"));
    $mydata->Hand = $this->DrawHand_list(array_merge($common, $uncommon));
    $mydata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1); $nextcard = 0;
]]></code>
    <created>2006-11-14</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="254">
    <name>Lava spectre</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>11</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[Attack: 10<br />If #<b>Burning</b> in hand > 3<br />Enemy magic: -1]]></effect>
    <code><![CDATA[
    $this->Attack(10, $hisdata->Tower, $hisdata->Wall);
    if ($this->KeywordCount($mydata->Hand, "Burning") > 3) $hisdata->Magic-= 1;
]]></code>
    <created>2007-05-08</created>
    <modified>2007-09-26</modified>
  </card>
  <card id="255">
    <name>Evolution</name>
    <class>Rare</class>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Swift</keywords>
    <effect><![CDATA[Discard all cards (opponent can't draw rare cards)]]></effect>
    <code><![CDATA[
    $mydata->Hand = $this->DrawHand_random($my_deck);
    $hisdata->Hand = $this->DrawHand_norare($his_deck);
    $mydata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);
    $hisdata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);
    $nextcard = 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="256">
    <name>Bronze golem</name>
    <class>Common</class>
    <cost>
      <bricks>4</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Unliving,Banish</keywords>
    <effect><![CDATA[Enemy wall: -6]]></effect>
    <code><![CDATA[$hisdata->Wall-= 6;]]></code>
    <created>2007-08-19</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="257">
    <name>Wisp</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Illusion</keywords>
    <effect><![CDATA[Tower: +2<br />Enemy tower: -2]]></effect>
    <code><![CDATA[$mydata->Tower+= 2; $hisdata->Tower-= 2;]]></code>
    <created>2007-08-19</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="258">
    <name>Giant bear</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>4</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Runic</keywords>
    <effect><![CDATA[Attack: 4<br />Recruits: +3]]></effect>
    <code><![CDATA[$this->Attack(4, $hisdata->Tower, $hisdata->Wall); $mydata->Recruits+= 3;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="259">
    <name>Dire wolves</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>9</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Horde</keywords>
    <effect><![CDATA[Attack: 9<br />Recruits prod x2]]></effect>
    <code><![CDATA[$this->Attack(9, $hisdata->Tower, $hisdata->Wall); $recruits_production*= 2;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="260">
    <name>Burglar</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Attack: 2<br />Stock: +2<br />Enemy stock: -2]]></effect>
    <code><![CDATA[
    $this->Attack(2, $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks+= 2; $mydata->Gems+= 2; $mydata->Recruits+= 2;
    $hisdata->Bricks-= 2; $hisdata->Gems-= 2; $hisdata->Recruits-= 2;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="261">
    <name>Absorption</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>4</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Recruits: +4<br />Enemy recruits: -4]]></effect>
    <code><![CDATA[$mydata->Recruits+= 4; $hisdata->Recruits-= 4;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="262">
    <name>Magical forge</name>
    <class>Common</class>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +7]]></effect>
    <code><![CDATA[$mydata->Wall+= 7;]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="263">
    <name>Saints day</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Stock: +4<br />Production x0]]></effect>
    <code><![CDATA[
    $mydata->Bricks+= 4; $mydata->Gems+= 4; $mydata->Recruits+= 4;
    $bricks_production = 0; $gems_production = 0; $recruits_production = 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2007-09-26</modified>
  </card>
  <card id="264">
    <name>Second chance</name>
    <class>Uncommon</class>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Discard all cards in hand]]></effect>
    <code><![CDATA[
    $mydata->Hand = $this->DrawHand_random($my_deck);
    $mydata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1); $nextcard = 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="265">
    <name>Residence of Gods</name>
    <class>Rare</class>
    <cost>
      <bricks>50</bricks>
      <gems>50</gems>
      <recruits>50</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Instant resource accumulation victory]]></effect>
    <code><![CDATA[$mydata->Bricks = ceil($res_vic / 3); $mydata->Gems = ceil($res_vic / 3); $mydata->Recruits = ceil($res_vic / 3);]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="266">
    <name>Defense improvement</name>
    <class>Uncommon</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>2</modes>
    <keywords/>
    <effect><![CDATA[Mode1:<br />Wall: +20<br />Mode2:<br />Tower: +10]]></effect>
    <code><![CDATA[if ($mode == 1) $mydata->Wall+= 20; elseif ($mode == 2) $mydata->Tower+= 10;]]></code>
    <created>2006-05-01</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="267">
    <name>University</name>
    <class>Uncommon</class>
    <cost>
      <bricks>6</bricks>
      <gems>6</gems>
      <recruits>6</recruits>
    </cost>
    <modes>3</modes>
    <keywords/>
    <effect><![CDATA[Mode1:<br />Quarry: +1<br />Mode2:<br />Magic: +1<br />Mode3:<br />Dungeon: +1]]></effect>
    <code><![CDATA[
    if ($mode == 1) $mydata->Quarry+= 1;
    elseif ($mode == 2) $mydata->Magic+= 1;
    elseif ($mode == 3) $mydata->Dungeons+= 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="268">
    <name>Reserve forces</name>
    <class>Uncommon</class>
    <cost>
      <bricks>17</bricks>
      <gems>0</gems>
      <recruits>17</recruits>
    </cost>
    <modes>2</modes>
    <keywords/>
    <effect><![CDATA[Mode1:<br />Attack: 34<br />Mode2:<br />Wall: +38]]></effect>
    <code><![CDATA[
    if ($mode == 1) $this->Attack(34, $hisdata->Tower, $hisdata->Wall);
    elseif ($mode == 2) $mydata->Wall+= 38;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="269">
    <name>Militia</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Wall: +1<br />Discard a card from hand]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 1;
    if ($mode != $cardpos)
    {
      $mydata->Hand[$mode] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
      $mydata->NewCards[$mode] = 1;
    }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="270">
    <name>Intrigue</name>
    <class>Uncommon</class>
    <cost>
      <bricks>6</bricks>
      <gems>6</gems>
      <recruits>6</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Discard a card from opponent's hand]]></effect>
    <code><![CDATA[
    $hisdata->Hand[$mode] = $this->DrawCard($his_deck, $hisdata->Hand, $mode, 'DrawCard_different');
    $hisdata->NewCards[$mode] = 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="271">
    <name>Stone archer</name>
    <class>Common</class>
    <cost>
      <bricks>3</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Enemy tower: -2<br />Stock: +1]]></effect>
    <code><![CDATA[$hisdata->Tower-= 2; $mydata->Bricks+= 1; $mydata->Gems+= 1; $mydata->Recruits+= 1;]]></code>
    <created>2007-08-19</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="272">
    <name>Elven archer</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance,Far sight</keywords>
    <effect><![CDATA[If Wall > Enemy wall<br />Enemy tower: -7<br />else<br />Attack: 6]]></effect>
    <code><![CDATA[
    if ($mydata->Wall > $hisdata->Wall) $hisdata->Tower-= 7;
    else $this->Attack(6, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2007-08-19</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="273">
    <name>Merchant</name>
    <class>Common</class>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>3</modes>
    <keywords/>
    <effect><![CDATA[Mode1:<br />Bricks: +6<br />Mode2:<br />Gems: +4<br />Mode3:<br />Recruits: +5]]></effect>
    <code><![CDATA[
    if ($mode == 1) $mydata->Bricks+= 6;
    elseif ($mode == 2) $mydata->Gems+= 4;
    elseif ($mode == 3) $mydata->Recruits+= 5;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="274">
    <name>Hidden treasure</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Gems: +2<br />Recruits: +1<br />If last card played was a zero cost card<br />Gems: +1<br />Recruits: +1]]></effect>
    <code><![CDATA[
    if ($mylast_card->GetResources("") == 0 and $mylast_action == 'play' and $mylast_card->ID > 0)
      { $mydata->Gems+= 3; $mydata->Recruits+= 2; }
    else
      { $mydata->Gems+= 2; $mydata->Recruits+= 1; }
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="275">
    <name>Clay pit</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Bricks prod x2]]></effect>
    <code><![CDATA[$bricks_production*= 2;]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="276">
    <name>Border fortress</name>
    <class>Uncommon</class>
    <cost>
      <bricks>45</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +25<br />Wall: +50]]></effect>
    <code><![CDATA[$mydata->Tower+= 25; $mydata->Wall+= 50;]]></code>
    <created>2006-05-01</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="277">
    <name>King's elite guard</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>30</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier</keywords>
    <effect><![CDATA[Tower: +35]]></effect>
    <code><![CDATA[$mydata->Tower+= 35;]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="278">
    <name>Guard tower</name>
    <class>Common</class>
    <cost>
      <bricks>5</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>2</modes>
    <keywords/>
    <effect><![CDATA[Mode1:<br />Wall: +8<br />Mode2:<br />Tower: +5]]></effect>
    <code><![CDATA[if ($mode == 1) $mydata->Wall+= 8; elseif ($mode == 2) $mydata->Tower+= 5;]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="279">
    <name>Heavy infantry</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Soldier,Skirmisher</keywords>
    <effect><![CDATA[Mode1:<br />Attack: 7<br />Mode2:<br />Wall: +7]]></effect>
    <code><![CDATA[
    if ($mode == 1) $this->Attack(7, $hisdata->Tower, $hisdata->Wall);
    elseif ($mode == 2) $mydata->Wall+= 7;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="280">
    <name>Word of power</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>25</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Durable,Far sight</keywords>
    <effect><![CDATA[Move selected card from opponent's hand to matching position in hand]]></effect>
    <code><![CDATA[
    $mydata->Hand[$mode] = $hisdata->Hand[$mode];
    $hisdata->Hand[$mode] = $this->DrawCard($his_deck, $hisdata->Hand, $mode, 'DrawCard_different');
    $mydata->NewCards[$mode] = 1; $hisdata->NewCards[$mode] = 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="281">
    <name>Berserker</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[Attack: 13 - 5N<br />N = Tower / Max tower]]></effect>
    <code><![CDATA[$this->Attack(13 - round(5*($mydata->Tower/$max_tower)), $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="282">
    <name>Luxury tax</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Players lose N% of each resource<br />N is relative tower height]]></effect>
    <code><![CDATA[
    $my_ratio = $mydata->Tower / $max_tower;
    $mydata->Bricks-= round($mydata->Bricks * $my_ratio);
    $mydata->Gems-= round($mydata->Gems * $my_ratio);
    $mydata->Recruits-= round($mydata->Recruits * $my_ratio);
    $his_ratio = $hisdata->Tower / $max_tower;
    $hisdata->Bricks-= round($hisdata->Bricks * $his_ratio);
    $hisdata->Gems-= round($hisdata->Gems * $his_ratio);
    $hisdata->Recruits-= round($hisdata->Recruits * $his_ratio);
]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="283">
    <name>Return to the beginning</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower and Wall of both players are set to the same height as was at the start of the game]]></effect>
    <code><![CDATA[
    $mydata->Tower= $init_tower; $mydata->Wall= $init_wall;
    $hisdata->Tower= $init_tower; $hisdata->Wall= $init_wall;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="284">
    <name>Jealousy</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>13</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Tower < 50 and Enemy tower > 60<br />Enemy tower: -25<br />else<br />Enemy tower: -10]]></effect>
    <code><![CDATA[
    if (($mydata->Tower < 50)&&($hisdata->Tower > 60)) $hisdata->Tower-= 25;
    else $hisdata->Tower-= 10;
]]></code>
    <created>2006-05-01</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="285">
    <name>All-elemental attack</name>
    <class>Rare</class>
    <cost>
      <bricks>18</bricks>
      <gems>18</gems>
      <recruits>18</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction,Nature</keywords>
    <effect><![CDATA[Attack: #Stock<br />Stock: = 0]]></effect>
    <code><![CDATA[
    $this->Attack(($mydata->Bricks + $mydata->Gems + $mydata->Recruits), $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks= 0; $mydata->Gems= 0; $mydata->Recruits= 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="286">
    <name>Sabotage</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>25</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Enemy tower is halved]]></effect>
    <code><![CDATA[$hisdata->Tower-= round($hisdata->Tower / 2);]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="287">
    <name>Revolt</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Recruits: +20<br />Replace your hand with non-rare Recruits only no support keyword attack cards]]></effect>
    <code><![CDATA[
    $common = $carddb->GetList(array('class'=>"Common", 'cost'=>"Green", 'advanced'=>"Attack:", 'support'=>"No keywords"));
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'cost'=>"Green", 'advanced'=>"Attack:", 'support'=>"No keywords"));
    $mydata->Hand = $this->DrawHand_list(array_merge($common, $uncommon));
    $mydata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);
    $mydata->Recruits+= 20; $nextcard = 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="288">
    <name>Cursed amulet</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Replace a card in opponent's hand with self<br />Raises opponent's stock based on replaced card rarity (C-1, U-3, R-8)]]></effect>
    <code><![CDATA[
    $rarities = array('Common' => 1, 'Uncommon' => 3, 'Rare' => 8);
    $rarity = $carddb->GetCard($hisdata->Hand[$mode])->Class;
    $tmp = $rarities[$rarity];
    $hisdata->Bricks+= $tmp; $hisdata->Gems+= $tmp; $hisdata->Recruits+= $tmp;
    $hisdata->Hand[$mode] = $card->ID; $hisdata->NewCards[$mode] = 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="289">
    <name>Baron's keep</name>
    <class>Common</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Tower: +3<br />Wall: +7]]></effect>
    <code><![CDATA[$mydata->Tower+= 3; $mydata->Wall+= 7;]]></code>
    <created>2006-05-01</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="290">
    <name>Warlord's keep</name>
    <class>Uncommon</class>
    <cost>
      <bricks>30</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Tower: +15<br />Wall: +30]]></effect>
    <code><![CDATA[$mydata->Tower+= 15; $mydata->Wall+= 30;]]></code>
    <created>2006-05-01</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="291">
    <name>General's army</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Recruits: +35<br />Replace your hand with Light and Heavy infantry, Knight, Crusader, Royal pikemen, Light cavalry, Siege breakers, and Royal dragoons]]></effect>
    <code><![CDATA[
    $hand = array (367, 279, 7, 305, 193, 36, 322, 166);
    shuffle($hand); $newcards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);
    $keys = array_keys($newcards); $mydata->Hand = array_combine($keys, $hand);
    $mydata->NewCards = $newcards; $nextcard = 0; $mydata->Recruits+= 35;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="292">
    <name>Sacred forest</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Replace your hand with Elven: market, ranger, apprentice, warlock, sorcereer, priestesses, enchantress and Princess of elves]]></effect>
    <code><![CDATA[
    $hand = array (629, 653, 655, 527, 190, 136, 526, 599);
    shuffle($hand); $newcards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);
    $keys = array_keys($newcards); $mydata->Hand = array_combine($keys, $hand);
    $mydata->NewCards = $newcards; $nextcard = 0;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="293">
    <name>Plague thrower</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>13</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Durable</keywords>
    <effect><![CDATA[Recruits prod x0<br />Enemy stock: -1<br />Enemy tower: -12]]></effect>
    <code><![CDATA[
    $recruits_production = 0;
    $hisdata->Bricks-= 1; $hisdata->Gems-= 1; $hisdata->Recruits-= 1;
    $hisdata->Tower-= 12;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="294">
    <name>Plan of salvation</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Bricks: +25<br />Replace your hand with Bricks only Wall + no support keyword cards]]></effect>
    <code><![CDATA[
    $mydata->Hand = $this->DrawHand_list($carddb->GetList(array('cost'=>"Red", 'advanced'=>"Wall: +", 'support'=>"No keywords")));
    $mydata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);
    $mydata->Bricks+= 25; $nextcard = 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="295">
    <name>Architectural improvement</name>
    <class>Rare</class>
    <cost>
      <bricks>25</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Bricks: +40<br />Replace your hand with no keyword Bricks only Tower + no support keyword cards]]></effect>
    <code><![CDATA[
    $mydata->Hand = $this->DrawHand_list($carddb->GetList(array('keyword'=>"No keywords", 'cost'=>"Red", 'advanced'=>"Tower: +", 'support'=>"No keywords")));
    $mydata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);
    $mydata->Bricks+= 40; $nextcard = 0;
]]></code>
    <created>2006-05-01</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="296">
    <name>Hidden traps</name>
    <class>Uncommon</class>
    <cost>
      <bricks>5</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Skirmisher</keywords>
    <effect><![CDATA[Wall: +14]]></effect>
    <code><![CDATA[$mydata->Wall+= 14;]]></code>
    <created>2006-05-01</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="297">
    <name>Palisade</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +3]]></effect>
    <code><![CDATA[$mydata->Wall+= 3;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="298">
    <name>Vampire lord</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>20</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Undead,Durable,Quick</keywords>
    <effect><![CDATA[Attack: 25<br />Magic: -1<br />Replace a card in hand with Vampire]]></effect>
    <code><![CDATA[
    $this->Attack(25, $hisdata->Tower, $hisdata->Wall);
    $mydata->Magic-= 1; $mydata->Hand[$mode] = 28;  $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2006-05-01</created>
    <modified>2008-01-29</modified>
  </card>
  <card id="299">
    <name>Angry mob</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Attack: #Facilities<br />Stock: -2]]></effect>
    <code><![CDATA[$this->Attack($mydata->Quarry + $mydata->Magic + $mydata->Dungeons, $hisdata->Tower, $hisdata->Wall); $mydata->Bricks-= 2; $mydata->Gems-= 2; $mydata->Recruits-= 2;]]></code>
    <created>2006-05-01</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="300">
    <name>Tremors</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>2</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy tower: -1<br />Enemy wall: -2<br />Enemy bricks: -4]]></effect>
    <code><![CDATA[$hisdata->Tower-= 1; $hisdata->Wall-= 2; $hisdata->Bricks-= 4;]]></code>
    <created>2006-05-01</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="301">
    <name>Lookout towers</name>
    <class>Common</class>
    <cost>
      <bricks>8</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[If Tower < Wall and Tower < 45<br />Tower: +12<br />else<br />Tower: +6]]></effect>
    <code><![CDATA[
    if (($mydata->Tower < $mydata->Wall) and ($mydata->Tower < 45)) $mydata->Tower+= 12;
    else $mydata->Tower+= 6;
]]></code>
    <created>2007-08-19</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="302">
    <name>Titan's left arm</name>
    <class>Common</class>
    <cost>
      <bricks>7</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Titan,Unliving</keywords>
    <effect><![CDATA[Stock: +#<b>Unliving</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Unliving");
    $mydata->Bricks+= $tmp; $mydata->Gems+= $tmp; $mydata->Recruits+= $tmp;
]]></code>
    <created>2007-08-19</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="303">
    <name>Titan's right arm</name>
    <class>Common</class>
    <cost>
      <bricks>7</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Titan,Unliving</keywords>
    <effect><![CDATA[Tower: +N<br />Wall: +N<br />N = #<b>Unliving</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Unliving");
    $mydata->Tower+= $tmp; $mydata->Wall+= $tmp;
]]></code>
    <created>2007-08-19</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="304">
    <name>Nightmare</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>13</gems>
      <recruits>13</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Charge (10)</keywords>
    <effect><![CDATA[Attack: 20]]></effect>
    <code><![CDATA[$this->Attack(20, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2007-08-19</created>
    <modified>2009-11-12</modified>
  </card>
  <card id="305">
    <name>Crusader</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>13</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Soldier</keywords>
    <effect><![CDATA[Attack: 12<br />If #<b>Soldier</b> in hand > 3<br />Enemy dungeon: -1]]></effect>
    <code><![CDATA[
    $this->Attack(12, $hisdata->Tower, $hisdata->Wall);
    $tmp = $this->KeywordCount($mydata->Hand, "Soldier"); if ($tmp > 3) $hisdata->Dungeons-= 1;
]]></code>
    <created>2007-08-19</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="306">
    <name>Obsidian gargoyle</name>
    <class>Uncommon</class>
    <cost>
      <bricks>15</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Attack: 13<br />If #<b>Unliving</b> in hand > 4<br />Quarry: +1]]></effect>
    <code><![CDATA[
    $this->Attack(13, $hisdata->Tower, $hisdata->Wall);
    $tmp = $this->KeywordCount($mydata->Hand, "Unliving"); if ($tmp > 4) $mydata->Quarry+= 1;
]]></code>
    <created>2007-08-19</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="307">
    <name>Necromancy amplifier</name>
    <class>Uncommon</class>
    <cost>
      <bricks>9</bricks>
      <gems>9</gems>
      <recruits>9</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Upgrades rarities of all <b>Undead</b> in hand]]></effect>
    <code><![CDATA[
    $rarities = array();
    $upgrades = array("Common" => "Uncommon", "Uncommon" => "Rare");
    for ($i = 1; $i <= 8; $i++)
      if ($carddb->GetCard($mydata->Hand[$i])->HasKeyword("Undead"))
        $rarities[$i] = $carddb->GetCard($mydata->Hand[$i])->Class;
    foreach ($rarities as $index => $val)
      if (($val == "Common") OR (($val == "Uncommon")))
      {
        $mydata->Hand[$index] = $this->DrawCard($carddb->GetList(array('class'=>$upgrades[$val], 'keyword'=>"Undead")), $mydata->Hand, $cardpos, 'DrawCard_list');
        $mydata->NewCards[$index] = 1;
      }
]]></code>
    <created>2007-08-19</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="308">
    <name>Mud elemental</name>
    <class>Uncommon</class>
    <cost>
      <bricks>18</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Wall: +9N<br />N = #<b>Unliving</b> in hand (max 5)]]></effect>
    <code><![CDATA[$tmp = min(5, $this->KeywordCount($mydata->Hand, "Unliving")); $mydata->Wall+= 9*$tmp;]]></code>
    <created>2007-08-19</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="309">
    <name>Rock elemental</name>
    <class>Uncommon</class>
    <cost>
      <bricks>20</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Tower: +6N<br />N = #<b>Unliving</b> in hand (max 5)]]></effect>
    <code><![CDATA[$tmp = min(5, $this->KeywordCount($mydata->Hand, "Unliving")); $mydata->Tower+= 6*$tmp;]]></code>
    <created>2007-08-19</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="310">
    <name>Titan's head</name>
    <class>Uncommon</class>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Titan,Unliving,Far sight</keywords>
    <effect><![CDATA[Tower:+ 8<br />If #<b>Unliving</b> in hand > 4<br />Magic: +1]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 8;
    $tmp = $this->KeywordCount($mydata->Hand, "Unliving");
    if ($tmp > 4) $mydata->Magic+= 1;
]]></code>
    <created>2007-08-19</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="311">
    <name>Titan's legs</name>
    <class>Uncommon</class>
    <cost>
      <bricks>12</bricks>
      <gems>12</gems>
      <recruits>12</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Titan,Unliving</keywords>
    <effect><![CDATA[Tower: +11<br />Wall: +16<br />Stock: +2]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 11; $mydata->Wall+= 16;
    $mydata->Bricks+= 2; $mydata->Gems+= 2; $mydata->Recruits+= 2;
]]></code>
    <created>2007-08-19</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="312">
    <name>Titan's heart</name>
    <class>Uncommon</class>
    <cost>
      <bricks>7</bricks>
      <gems>7</gems>
      <recruits>7</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Titan,Unliving</keywords>
    <effect><![CDATA[Tower: +6<br />Wall: +9<br />If #<b>Unliving</b> in hand > 4<br />Quarry: +1]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 6; $mydata->Wall+= 9;
    $tmp = $this->KeywordCount($mydata->Hand, "Unliving");
    if ($tmp > 4) $mydata->Quarry+= 1;
]]></code>
    <created>2007-08-19</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="313">
    <name>Tartarus gate</name>
    <class>Uncommon</class>
    <cost>
      <bricks>4</bricks>
      <gems>4</gems>
      <recruits>4</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons a non-common <b>Titan</b>]]></effect>
    <code><![CDATA[
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Titan"));
    $rare = $carddb->GetList(array('class'=>"Rare", 'keyword'=>"Titan"));
    $nextcard = $this->DrawCard(array_merge($uncommon, $rare), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2007-08-19</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="314">
    <name>Crugg the Destroyer</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>26</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Siege</keywords>
    <effect><![CDATA[Enemy tower: -6N<br />Enemy wall: -9N<br />N = #<b>Barbarian</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Barbarian");
    $hisdata->Tower-= 6*$tmp; $hisdata->Wall-= 9*$tmp;
]]></code>
    <created>2007-08-19</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="315">
    <name>Completion ritual</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>11</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Titan</keywords>
    <effect><![CDATA[If all <b>Titan</b> cards are present in hand<br />Instant destruction victory<br />else<br />Summons a <b>Titan</b> not present in hand]]></effect>
    <code><![CDATA[
    if (in_array(302, $mydata->Hand) and in_array(303, $mydata->Hand) and in_array(310, $mydata->Hand) and in_array(311, $mydata->Hand) and in_array(312, $mydata->Hand))
      { $hisdata->Tower= 0; $hisdata->Wall= 0; }
    else
    {
      $titans = array_diff($carddb->GetList(array('keyword'=>"Titan")), $mydata->Hand);
      if (count($titans) > 0)
        $nextcard = $this->DrawCard($titans, $mydata->Hand, $cardpos, 'DrawCard_list');
    }
]]></code>
    <created>2007-08-19</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="316">
    <name>Lich</name>
    <class>Uncommon</class>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Discard a card from opponent's hand<br />Summons <b>Undead</b> of the same rarity as discarded card]]></effect>
    <code><![CDATA[
    $rarity = $carddb->GetCard($hisdata->Hand[$mode])->Class;
    $hisdata->Hand[$mode] = $this->DrawCard($his_deck, $hisdata->Hand, $mode, 'DrawCard_different');
    $hisdata->NewCards[$mode] = 1;
    $nextcard = $this->DrawCard($carddb->GetList(array('class'=>$rarity, 'keyword'=>"Undead")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2007-10-04</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="317">
    <name>Heavy cavalry</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>25</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier,Charge (18)</keywords>
    <effect><![CDATA[Attack: 22]]></effect>
    <code><![CDATA[$this->Attack(22, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2007-10-04</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="318">
    <name>Fallen knight</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>14</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Undead,Enduring (6),Charge (7)</keywords>
    <effect><![CDATA[Attack: 10<br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $this->Attack(10, $hisdata->Tower, $hisdata->Wall);
    $mydata->Hand[$mode] = $card->ID;
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2007-10-04</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="319">
    <name>Fire guardian</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>2</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Mage</keywords>
    <effect><![CDATA[Wall: +10<br />If last card played wasn't <b>Burning</b><br />Gems: -4]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 10;
    if (!(($mylast_card->HasKeyword("Burning")) and ($mylast_action == 'play')))
      $mydata->Gems-= 4;
]]></code>
    <created>2007-10-04</created>
    <modified>2010-01-11</modified>
  </card>
  <card id="320">
    <name>Last hope</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Quick</keywords>
    <effect><![CDATA[If Tower < 10 and Wall = 0<br />Tower = 25<br />Wall = 15<br />else<br />Stock: +1]]></effect>
    <code><![CDATA[
    if (($mydata->Tower < 10) && ($mydata->Wall == 0))
      { $mydata->Tower= 25; $mydata->Wall= 15; }
    else
      { $mydata->Bricks+= 1; $mydata->Gems+= 1; $mydata->Recruits+= 1; }
]]></code>
    <created>2007-10-04</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="321">
    <name>Unholy shrine</name>
    <class>Uncommon</class>
    <cost>
      <bricks>26</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Discard up to 5 <b>Undead</b> from hand except the selected card<br />Wall: +10N<br />N = #discarded cards]]></effect>
    <code><![CDATA[
    $storage = array();
    for ($i = 1; $i <= 8; $i++)
      if ($carddb->GetCard($mydata->Hand[$i])->HasKeyword("Undead") and $i != $mode and $i != $cardpos)
        $storage[$i] = $i;
    shuffle($storage); $tmp = 0;
    for ($i = 0; ($i < count($storage) AND ($i < 5)); $i++)
    {
      $mydata->Hand[$storage[$i]] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
      $mydata->NewCards[$storage[$i]] = 1; $tmp++;
    }
    $mydata->Wall+= $tmp*10;
]]></code>
    <created>2007-11-25</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="322">
    <name>Siege breakers</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier,Siege</keywords>
    <effect><![CDATA[Attack: 8N<br />If N > 4<br />Wall: +15<br />N = #<b>Soldier</b> in hand (max 4)]]></effect>
    <code><![CDATA[
    $soldiers = $this->KeywordCount($mydata->Hand, "Soldier");
    $tmp = min(4, $soldiers);
    $this->Attack(8*$tmp, $hisdata->Tower, $hisdata->Wall);
    if ($soldiers > 4) $mydata->Wall+= 15;
]]></code>
    <created>2007-10-04</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="323">
    <name>Beastmaster</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>15</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Beast,Durable</keywords>
    <effect><![CDATA[Mode1:<br />Replace opponent's hand with non-rare <b>Beast</b> cards<br />Mode2:<br />Attack: 5N<br />N = #<b>Beast</b> in game]]></effect>
    <code><![CDATA[
    if ($mode == 1)
    {
      $common = $carddb->GetList(array('class'=>"Common", 'keyword'=>"Beast"));
      $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Beast"));
      $hisdata->Hand = $this->DrawHand_list(array_merge($common, $uncommon));
      $hisdata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);
    }
    elseif ($mode == 2)
    {
      $tmp = $this->KeywordCount($mydata->Hand, "Beast");
      $tmp+= $this->KeywordCount($hisdata->Hand, "Beast");
      $this->Attack(5*$tmp, $hisdata->Tower, $hisdata->Wall);
    }
]]></code>
    <created>2007-10-04</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="324">
    <name>Wolf raiders</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>9</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Beast,Frenzy</keywords>
    <effect><![CDATA[Mode1:<br />Stock: +N<br />Mode2:<br />Attack: 3N<br />N = #<b>Beast</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Beast");
    if ($mode == 1) { $mydata->Bricks+= $tmp; $mydata->Gems+= $tmp; $mydata->Recruits+= $tmp; }
    elseif ($mode == 2) $this->Attack(3*$tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2007-10-04</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="325">
    <name>Cleansing</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy</keywords>
    <effect><![CDATA[Replace up to N common non-<b>Holy</b> keyword cards in opponent's hand with common <b>Holy</b><br />N = #<b>Holy</b> in hand (max 4)]]></effect>
    <code><![CDATA[
    $count = min(4, $this->KeywordCount($mydata->Hand, "Holy"));
    $storage = array();
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($hisdata->Hand[$i]);
      if ($cur_card->HasKeyword('any') AND !$cur_card->HasKeyword('Holy') AND $cur_card->Class == 'Common')
        $storage[] = $i;
    }
    if (count($storage) > 0)
    {
      shuffle($storage);
      for ($i = 0; ($i < count($storage)) AND ($i < $count); $i++)
      {
        $cur_pos = $storage[$i];
        $hisdata->Hand[$cur_pos] = $this->DrawCard($carddb->GetList(array('class'=>'Common', 'keyword'=>"Holy")), $hisdata->Hand, $cur_pos, 'DrawCard_list');
        $hisdata->NewCards[$cur_pos] = 1;
      }
    }
]]></code>
    <created>2007-11-25</created>
    <modified>2010-10-03</modified>
  </card>
  <card id="326">
    <name>Guardian angel</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>16</gems>
      <recruits>12</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy</keywords>
    <effect><![CDATA[Attack: 2N<br />Wall: +4N<br />N = #<b>Soldier</b> + #<b>Holy</b> in hand (max 8)]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Soldier") + $this->KeywordCount($mydata->Hand, "Holy");
    $tmp = min(8 ,$tmp);
    $this->Attack(2*$tmp, $hisdata->Tower, $hisdata->Wall); $mydata->Wall+= 4*$tmp;
]]></code>
    <created>2007-11-25</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="327">
    <name>Temple of light</name>
    <class>Common</class>
    <cost>
      <bricks>3</bricks>
      <gems>3</gems>
      <recruits>3</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Holy,Far sight</keywords>
    <effect><![CDATA[Tower: +3<br />Replace a card in hand with <b>Holy</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 3;
    $mydata->Hand[$mode] = $this->DrawCard($carddb->GetList(array('keyword'=>"Holy")), $mydata->Hand, $cardpos, 'DrawCard_list');
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2007-10-04</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="328">
    <name>Tribes of east</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>2</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons a <b>Barbarian</b><br />If <b>Barbarian</b> tokens are set<br />Stock: +3]]></effect>
    <code><![CDATA[
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Barbarian")), $mydata->Hand, $cardpos, 'DrawCard_list');
    if (array_search("Barbarian", $mydata->TokenNames)) { $mydata->Bricks+= 3; $mydata->Gems+= 3; $mydata->Recruits+= 3; }
]]></code>
    <created>2007-10-04</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="329">
    <name>Conjurer</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Mage,Nature</keywords>
    <effect><![CDATA[Gems: +6<br />Wall: +3<br />Production x0<br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $mydata->Gems+= 6; $mydata->Wall+= 3;
    $bricks_production = 0; $gems_production = 0; $recruits_production = 0;
    $mydata->Hand[$mode] = $card->ID;
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2007-10-04</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="330">
    <name>Emissary of the afterlife</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>12</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[If last card played was <b>Undead</b> support, replace cards in hand with your discarded <b>Undead</b><br />Attack: 10N<br />N = #replaced cards]]></effect>
    <code><![CDATA[
    if (($mylast_action == 'play') AND in_array($mylast_card->ID, $carddb->GetList(array('support'=>"Undead"))))
    {
      $dis_cards = array();
      if (count($discarded_cards[0]) > 0) $dis_cards = array_merge($discarded_cards[0], $dis_cards);
      if (count($hisdata->DisCards[1]) > 0) $dis_cards = array_merge($hisdata->DisCards[1], $dis_cards);
      $storage = array();
      for ($i = 0; $i < count($dis_cards); $i++)
        if ($carddb->GetCard($dis_cards[$i])->HasKeyword("Undead"))
          $storage[] = $dis_cards[$i];
      if (count($storage) > 0)
      {
        if (count($storage) > 8) $storage = array_slice($storage, 0, 8);
        $trans = array();
        for ($i = 0; $i < 8; $i++) $trans[$i] = $i + 1;
        shuffle($trans);
        for ($i = 0; $i < count($storage); $i++)
        {
          $mydata->Hand[$trans[$i]] = $storage[$i];
          $mydata->NewCards[$trans[$i]] = 1;
          if ($trans[$i] == $cardpos) $nextcard = 0;
        }
        $this->Attack(count($storage)*10, $hisdata->Tower, $hisdata->Wall);
      }
    }
]]></code>
    <created>2007-11-25</created>
    <modified>2010-10-11</modified>
  </card>
  <card id="331">
    <name>Benediction</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Restoration</keywords>
    <effect><![CDATA[Each player's stock raised by #<b>Holy</b> in his hand (max 4)]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Holy"); $tmp = min($tmp,4);
    $mydata->Bricks+= $tmp; $mydata->Gems+= $tmp; $mydata->Recruits+= $tmp;
    $tmp = $this->KeywordCount($hisdata->Hand, "Holy"); $tmp = min($tmp,4);
    $hisdata->Bricks+= $tmp; $hisdata->Gems+= $tmp; $hisdata->Recruits+= $tmp;
]]></code>
    <created>2007-11-25</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="332">
    <name>Retribution</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>2</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Recruits prod x2<br />If Tower or Wall was damaged during opponent's last round<br />Enemy stock: -2]]></effect>
    <code><![CDATA[
    $recruits_production*= 2;
    if (($mychanges['Tower'] < 0) OR ($mychanges['Wall'] < 0))
      { $hisdata->Bricks-= 2; $hisdata->Gems-= 2; $hisdata->Recruits-= 2; }
]]></code>
    <created>2007-11-25</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="333">
    <name>Death wave</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>7</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Attack: 4N<br />N = #<b>Undead</b> in hand (max 5) - #<b>Holy</b> in opponent's hand]]></effect>
    <code><![CDATA[
    $undead = $this->KeywordCount($mydata->Hand, "Undead");
    $holy = $this->KeywordCount($hisdata->Hand, "Holy");
    $attack = max(min($undead, 5) - $holy, 0) * 4;
    $this->Attack($attack, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2007-11-25</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="334">
    <name>Tarkhan</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>7</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Siege</keywords>
    <effect><![CDATA[If last card played was a <b>Barbarian</b><br />Enemy wall: -7<br />Always:<br />Attack: 7]]></effect>
    <code><![CDATA[
    if (($mylast_card->HasKeyword("Barbarian")) and ($mylast_action == 'play')) $hisdata->Wall-= 7;
    $this->Attack(7, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2007-11-25</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="335">
    <name>Flaming mirage</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>11</gems>
      <recruits>11</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[Attack: 21<br />If last card was <b>Burning</b> up to 2 copies of that card will replace non-rare non-<b>Burning</b> cards in hand]]></effect>
    <code><![CDATA[
    $this->Attack(21, $hisdata->Tower, $hisdata->Wall);
    if ($mylast_card->HasKeyword("Burning"))
    {
      $storage = array();
      for ($i = 1; $i <= 8; $i++)
      {
        $cur_card = $carddb->GetCard($mydata->Hand[$i]);
        if (!($cur_card->HasKeyword("Burning")) AND ($cur_card->Class != 'Rare'))
          $storage[] = $i;
      }
      $count = min(count($storage), 2);
      if ($count > 0)
      {
        shuffle($storage);
        for ($k = 0; $k < $count; $k++)
        {
          $i = $storage[$k];
          $mydata->Hand[$i] = $mydata->LastCard[$mylastcardindex];
          $mydata->NewCards[$i] = 1;
        }
      }
    }
]]></code>
    <created>2007-11-25</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="336">
    <name>Eternal flame</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>2</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[Summons <b>Burning</b><br />If last card played was <b>Burning</b> it will be that card]]></effect>
    <code><![CDATA[
    if (($mylast_card->HasKeyword("Burning")) and ($mylast_action == 'play'))
      $nextcard = $mydata->LastCard[$mylastcardindex];
    else
      $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Burning")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2007-11-25</created>
    <modified>2007-11-25</modified>
  </card>
  <card id="337">
    <name>Warlord</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>19</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[If last card played was a <b>Barbarian</b><br />Enemy wall: -17<br />Always:<br />Attack: 20]]></effect>
    <code><![CDATA[
    if (($mylast_card->HasKeyword("Barbarian")) and ($mylast_action == 'play'))
      $hisdata->Wall-= 17;
    $this->Attack(20, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2007-11-25</created>
    <modified>2008-01-29</modified>
  </card>
  <card id="338">
    <name>Moonlight unicorn</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>30</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Legend,Swift</keywords>
    <effect><![CDATA[Attack: 26<br />If last card played was a <b>Mage</b><br />Gems prod x4]]></effect>
    <code><![CDATA[
    if (($mylast_card->HasKeyword("Mage")) and ($mylast_action == 'play'))
      $gems_production*= 4;
    $this->Attack(26, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2007-11-25</created>
    <modified>2009-12-24</modified>
  </card>
  <card id="339">
    <name>Prince of thieves</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[If not New<br />Steals the difference between opponent's stock and stock (max 15, min 5)]]></effect>
    <code><![CDATA[
    if (!isset($mynewflags[$cardpos]))
    {
      $tmp = min(15, max(5, $hisdata->Bricks - $mydata->Bricks));
      $mydata->Bricks+= $tmp; $hisdata->Bricks-= $tmp;
      $tmp = min(15, max(5, $hisdata->Gems - $mydata->Gems));
      $mydata->Gems+= $tmp; $hisdata->Gems-= $tmp;
      $tmp = min(15, max(5, $hisdata->Recruits - $mydata->Recruits));
      $mydata->Recruits+= $tmp; $hisdata->Recruits-= $tmp;
    }
]]></code>
    <created>2007-11-25</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="340">
    <name>Fanatic</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Soldier</keywords>
    <effect><![CDATA[If Tower < Enemy tower<br />Attack: 12<br />else<br />Attack: 6]]></effect>
    <code><![CDATA[
    if ($mydata->Tower < $hisdata->Tower)
      $this->Attack(12, $hisdata->Tower, $hisdata->Wall);
    else
      $this->Attack(6, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2008-02-12</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="341">
    <name>Zealot</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>11</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Soldier</keywords>
    <effect><![CDATA[Attack: 10 + 3N<br />N = #<b>Soldier</b> + #<b>Holy</b> in hand (max 7)]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Soldier") + $this->KeywordCount($mydata->Hand, "Holy");
    $this->Attack(10 + 3*min(7, $tmp), $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2008-02-12</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="342">
    <name>Heresy</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Replace up to 3 non-<b>Holy</b> common cards in hand with Fanatics]]></effect>
    <code><![CDATA[
    $mydata->Hand[$cardpos] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
    $nextcard = 0; $temp_array = array();
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($mydata->Hand[$i]);
      if (!$cur_card->HasKeyword("Holy") AND ($cur_card->Class == 'Common')) $temp_array[] = $i;
    }
    if (count($temp_array) > 0)
    {
      shuffle($temp_array);
      for ($i = 0; ($i < count($temp_array)) AND ($i < 3); $i++)
      {
        $mydata->Hand[$temp_array[$i]] = 340;
        $mydata->NewCards[$temp_array[$i]] = 1;
      }
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="343">
    <name>Death before dishonor</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Replace all Zealots in hand with Avenging angels and all Fanatics in hand with Zealots]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= 8; $i++)
      if ($mydata->Hand[$i] == 340)
        { $mydata->Hand[$i] = 341; $mydata->NewCards[$i] = 1; }
      elseif ($mydata->Hand[$i] == 341)
        { $mydata->Hand[$i] = 461; $mydata->NewCards[$i] = 1; }
]]></code>
    <created>2008-02-12</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="344">
    <name>Warchief</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[Wall: +15<br />If last card played was a <b>Barbarian</b><br />Attack: N<br />N = recruits cost of last card played]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 15;
    if (($mylast_card->HasKeyword("Barbarian")) and ($mylast_action == 'play'))
      $this->Attack($mylast_card->GetResources("Recruits"), $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2008-02-12</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="345">
    <name>Devastator</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>46</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[Enemy wall: -10N<br />N = #<b>Barbarian</b> in hand<br />Attack: 40]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Barbarian");
    $hisdata->Wall-= $tmp * 10;
    $this->Attack(40, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2008-02-12</created>
    <modified>2008-02-12</modified>
  </card>
  <card id="346">
    <name>Overpower</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons a <b>Frenzy</b><br />Gain recruits cost of the summoned card (max 10)]]></effect>
    <code><![CDATA[
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Frenzy")), $mydata->Hand, $cardpos, 'DrawCard_list');
    $mydata->Recruits+= min(10, $carddb->GetCard($nextcard)->GetResources("Recruits"));
]]></code>
    <created>2008-02-12</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="347">
    <name>Call of the wilds</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Upgrades rarities of all <b>Beast</b> in hand<br />Production x0]]></effect>
    <code><![CDATA[
    $bricks_production = 0; $gems_production = 0; $recruits_production = 0;
    $rarities = array();
    $upgrades = array("Common" => "Uncommon", "Uncommon" => "Rare");
    for ($i = 1; $i <= 8; $i++)
      if ($carddb->GetCard($mydata->Hand[$i])->HasKeyword("Beast"))
        $rarities[$i] = $carddb->GetCard($mydata->Hand[$i])->Class;
    foreach ($rarities as $index => $val)
      if ($val == "Common" or ($val == "Uncommon"))
      {
        $mydata->Hand[$index] = $this->DrawCard($carddb->GetList(array('class'=>$upgrades[$val], 'keyword'=>"Beast")), $mydata->Hand, $cardpos, 'DrawCard_list');
        $mydata->NewCards[$index] = 1;
      }
]]></code>
    <created>2008-02-12</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="348">
    <name>Time lock</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Enemy stock: -5<br />If opponent played <b>Swift</b> last round<br />Enemy stock: -7]]></effect>
    <code><![CDATA[
    $found = false;
    for ($i = 1; $i <= $hislastcardindex; $i++)
      if ($carddb->GetCard($hisdata->LastCard[$i])->HasKeyword("Swift") AND ($hisdata->LastAction[$i] == 'play'))
        { $found = true; break; }
    if ($found)
      { $hisdata->Bricks-= 12; $hisdata->Gems-= 12; $hisdata->Recruits-= 12; }
    else
      { $hisdata->Bricks-= 5; $hisdata->Gems-= 5; $hisdata->Recruits-= 5; }
]]></code>
    <created>2008-02-12</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="349">
    <name>Reuse the rubble</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If last card was <b>Unliving</b><br />Tower: +N / 3<br />Wall: +N / 2<br />N = bricks cost of last card]]></effect>
    <code><![CDATA[
    if ($mylast_card->HasKeyword("Unliving"))
    {
      $tmp = $mylast_card->GetResources("Bricks");
      $mydata->Tower+= round($tmp / 3); $mydata->Wall+= round($tmp / 2);
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2008-02-12</modified>
  </card>
  <card id="350">
    <name>Eternal guardian</name>
    <class>Uncommon</class>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead,Durable</keywords>
    <effect><![CDATA[If last card played was <b>Undead</b><br />Attack: N / 2<br />Tower: +N / 3<br />Wall: +N / 2<br />N = cost of last card played]]></effect>
    <code><![CDATA[
    if (($mylast_card->HasKeyword("Undead")) and ($mylast_action == 'play'))
    {
      $tmp = $mylast_card->GetResources("");
      $this->Attack(round($tmp / 2), $hisdata->Tower, $hisdata->Wall);
      $mydata->Tower+= round($tmp / 3); $mydata->Wall+= round($tmp / 2);
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="351">
    <name>Golden scepter</name>
    <class>Common</class>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons<br />If New<br />Scepter of summoning<br />else<br />Golden scepter]]></effect>
    <code><![CDATA[$nextcard = (isset($mynewflags[$cardpos])) ? 159 : 351;]]></code>
    <created>2008-02-12</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="352">
    <name>Azure unicorn</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Legend</keywords>
    <effect><![CDATA[Attack: 15<br />If Magic > Enemy magic<br />Attack: 19]]></effect>
    <code><![CDATA[
    if ($mydata->Magic > $hisdata->Magic) $this->Attack(34, $hisdata->Tower, $hisdata->Wall);
    else $this->Attack(15, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2008-02-12</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="353">
    <name>Glacial temple</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>2</modes>
    <keywords/>
    <effect><![CDATA[Magic: -1<br />Mode1:<br />Quarry: +1<br />Mode2:<br />Dungeon: +1]]></effect>
    <code><![CDATA[
    $mydata->Magic-= 1;
    if ($mode == 1) $mydata->Quarry+= 1;
    elseif ($mode == 2) $mydata->Dungeons+= 1;
]]></code>
    <created>2008-02-12</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="354">
    <name>Sorcerer's outpost</name>
    <class>Uncommon</class>
    <cost>
      <bricks>10</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +9<br />Wall: +15<br />If #<b>Legend</b> in hand > 0<br />Magic: +1]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 9; $mydata->Wall+= 15;
    if ($this->KeywordCount($mydata->Hand, "Legend") > 0) $mydata->Magic+= 1;
]]></code>
    <created>2008-02-12</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="355">
    <name>Witcher</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Players discard all keyword cards<br />Players suffer 7 damage for each card they discarded]]></effect>
    <code><![CDATA[
    $j = 0;
    for ($i = 1; $i <= 8; $i++)
      if (($carddb->GetCard($mydata->Hand[$i])->HasKeyword("any")) AND ($i != $cardpos))
      {
        $mydata->Hand[$i] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
        $mydata->NewCards[$i] = 1;
        $j++;
      }
    $this->Attack($j * 7, $mydata->Tower, $mydata->Wall);
    $j = 0;
    for ($i = 1; $i <= 8; $i++)
      if ($carddb->GetCard($hisdata->Hand[$i])->HasKeyword("any"))
      {
        $hisdata->Hand[$i] = $this->DrawCard($his_deck, $hisdata->Hand, $cardpos, 'DrawCard_random');
        $hisdata->NewCards[$i] = 1;
        $j++;
      }
    $this->Attack($j * 7, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2008-02-12</created>
    <modified>2008-02-12</modified>
  </card>
  <card id="356">
    <name>Abyssal viper</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Beast</keywords>
    <effect><![CDATA[If targeting self, gain recruits cost of the matching card (max 10), else replace a card in hand with self]]></effect>
    <code><![CDATA[
    if ($mode == $cardpos)
      $mydata->Recruits+= min($carddb->GetCard($hisdata->Hand[$cardpos])->GetResources("Recruits"), 10);
    else
    {
      $mydata->Hand[$mode] = $card->ID;
      $mydata->NewCards[$mode] = 1;
    }
]]></code>
    <created>2008-02-12</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="357">
    <name>Warlock</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>3</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage,Undead</keywords>
    <effect><![CDATA[Attack: 3<br />Enemy gems: -1<br />Enemy recruits: -3]]></effect>
    <code><![CDATA[
    $this->Attack(3, $hisdata->Tower, $hisdata->Wall);
    $hisdata->Gems-= 1;  $hisdata->Recruits-= 3;
]]></code>
    <created>2008-02-12</created>
    <modified>2008-02-12</modified>
  </card>
  <card id="358">
    <name>Sandworm</name>
    <class>Uncommon</class>
    <cost>
      <bricks>18</bricks>
      <gems>0</gems>
      <recruits>18</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Siege</keywords>
    <effect><![CDATA[Enemy tower: -16<br />Enemy wall: -20]]></effect>
    <code><![CDATA[$hisdata->Tower-= 16; $hisdata->Wall-= 20;]]></code>
    <created>2008-02-12</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="359">
    <name>Determined defense</name>
    <class>Common</class>
    <cost>
      <bricks>8</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +10<br />If #<b>Charge</b> in opponent's hand > 0 or #<b>Enduring</b> in hand > 0<br />Wall: +8]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, 'Enduring') + $this->KeywordCount($hisdata->Hand, 'Charge');
    $mydata->Wall+= ($tmp > 0) ? 18 : 10;
]]></code>
    <created>2008-02-12</created>
    <modified>2010-10-11</modified>
  </card>
  <card id="360">
    <name>Wildfire gem</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Flare attack</keywords>
    <effect><![CDATA[Stock: -3]]></effect>
    <code><![CDATA[$mydata->Bricks-= 3; $mydata->Gems-= 3; $mydata->Recruits-= 3;]]></code>
    <created>2008-07-30</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="361">
    <name>Devilkin</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[Attack: 5<br />If last card played was <b>Burning</b> or a <b>Mage</b><br />Enemy stock: -3]]></effect>
    <code><![CDATA[
    $this->Attack(5, $hisdata->Tower, $hisdata->Wall);
    if (($mylast_card->HasKeyword("Burning") or $mylast_card->HasKeyword("Mage")) and ($mylast_action == 'play'))
      { $hisdata->Bricks-= 3; $hisdata->Gems-= 3; $hisdata->Recruits-= 3; }
]]></code>
    <created>2008-07-30</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="362">
    <name>Petrified minotaur</name>
    <class>Common</class>
    <cost>
      <bricks>7</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Unliving</keywords>
    <effect><![CDATA[Wall: +5<br />Enemy wall: -5<br />Attack: 5]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 5; $hisdata->Wall-= 5;
    $this->Attack(5, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="363">
    <name>Supply units</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Discard lowest recruits cost <b>Soldier</b> from hand to gain<br />Stock: +3]]></effect>
    <code><![CDATA[
    $storage = array(); $min = 1000;
    for ($i = 1; $i <= 8; $i++)
      if ($carddb->GetCard($mydata->Hand[$i])->HasKeyword("Soldier"))
      {
        $storage[$i] = $carddb->GetCard($mydata->Hand[$i])->GetResources("Recruits");
        $min = min($storage[$i], $min);
      }
    if (count($storage) > 0)
    {
      $min_array = array();
      foreach ($storage as $c_pos => $c_cost)
        if ($c_cost == $min) $min_array[$c_pos] = $min;
      $discarded_pos = array_rand($min_array);
      $mydata->Hand[$discarded_pos] = $this->DrawCard($my_deck, $mydata->Hand, $discarded_pos, 'DrawCard_random');
      $mydata->NewCards[$discarded_pos] = 1;
      $mydata->Bricks+= 3; $mydata->Gems+= 3; $mydata->Recruits+= 3;
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="364">
    <name>Judge</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If opponent lowered your stock last round he loses twice the amount of lost stock (max 8)<br />No effect on Judge]]></effect>
    <code><![CDATA[
    if ((($mychanges['Bricks'] < 0) OR ($mychanges['Gems'] < 0) OR ($mychanges['Recruits'] < 0)) AND $hislast_card->ID != 364)
    {
      $hisdata->Bricks+= min(0, max(-8, 2 * $mychanges['Bricks']));
      $hisdata->Gems+= min(0, max(-8, 2 * $mychanges['Gems']));
      $hisdata->Recruits+= min(0, max(-8, 2 * $mychanges['Recruits']));
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="365">
    <name>Infiltrator</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Mode1:<br />Enemy tower: -5<br />Mode2:<br />Recruits: +4<br />Enemy recruits: -6]]></effect>
    <code><![CDATA[
    if ($mode == 1) $hisdata->Tower-= 5;
    elseif ($mode == 2)
    {
      $mydata->Recruits+= 4;
      $hisdata->Recruits-= 6;
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="366">
    <name>Graceful charity</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy</keywords>
    <effect><![CDATA[If opponent lowered your stock last round you regain lost stock (max 6)]]></effect>
    <code><![CDATA[
    if (($mychanges['Bricks'] < 0) OR ($mychanges['Gems'] < 0) OR ($mychanges['Recruits'] < 0))
    {
      $mydata->Bricks-= min(0, max(-6, $mychanges['Bricks']));
      $mydata->Gems-= min(0, max(-6, $mychanges['Gems']));
      $mydata->Recruits-= min(0, max(-6, $mychanges['Recruits']));
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="367">
    <name>Light infantry</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier</keywords>
    <effect><![CDATA[If #<b>Charge</b> in opponent's hand > 0<br />Attack: 4<br />else<br />Attack: 10]]></effect>
    <code><![CDATA[$this->Attack((($this->KeywordCount($hisdata->Hand, "Charge") > 0) ? 4 : 10), $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2008-07-30</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="368">
    <name>Goblin saboteur</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>4</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 4<br />If opponent raised his wall by more than 8 last round<br />Enemy wall: -12]]></effect>
    <code><![CDATA[
    $this->Attack(4, $hisdata->Tower, $hisdata->Wall);
    if ($hischanges['Wall'] > 8) $hisdata->Wall-= 12;
]]></code>
    <created>2008-07-30</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="369">
    <name>Keeper of souls</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>16</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Burning</keywords>
    <effect><![CDATA[Attack: 13 + 2N<br />Recruits: + N<br />N = #<b>Burning</b> + #<b>Beast</b> in game]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Beast") + $this->KeywordCount($mydata->Hand, "Burning") + $this->KeywordCount($hisdata->Hand, "Beast") + $this->KeywordCount($hisdata->Hand, "Burning");
    $this->Attack(13 + 2*$tmp, $hisdata->Tower, $hisdata->Wall);
    $mydata->Recruits+= $tmp;
]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="370">
    <name>Dragon patrol</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>16</gems>
      <recruits>16</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon,Soldier,Charge (9)</keywords>
    <effect><![CDATA[Attack: 23<br />If #<b>Dragon</b> in hand > 1<br />Enemy tower: -11]]></effect>
    <code><![CDATA[
    $this->Attack(23, $hisdata->Tower, $hisdata->Wall);
    if ($this->KeywordCount($mydata->Hand, "Dragon") > 1) $hisdata->Tower-= 11;
]]></code>
    <created>2008-07-30</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="371">
    <name>Frost unicorn</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>32</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Legend</keywords>
    <effect><![CDATA[Attack: 35<br />If #<b>Legend</b> in hand > 1 and #<b>Mage</b> in hand > 0<br />Gems: +20<br />Magic: +1]]></effect>
    <code><![CDATA[
    $this->Attack(35, $hisdata->Tower, $hisdata->Wall);
    if ($this->KeywordCount($mydata->Hand, "Legend") > 1 and $this->KeywordCount($mydata->Hand, "Mage") > 0)
      { $mydata->Magic+= 1; $mydata->Gems+= 20; }
]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="372">
    <name>Corpses behemoth</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>22</gems>
      <recruits>22</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Discard all <b>Undead</b> from hand except the selected card<br />Attack: 9N<br />N = #discarded cards]]></effect>
    <code><![CDATA[
    $tmp = 0;
    for ($i = 1; $i <= 8; $i++)
      if (($carddb->GetCard($mydata->Hand[$i])->HasKeyword("Undead")) AND ($i != $mode) AND ($i != $cardpos))
      {
        $mydata->Hand[$i] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
        $mydata->NewCards[$i] = 1; $tmp++;
      }
    $this->Attack($tmp*9, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="373">
    <name>Sphinx</name>
    <class>Uncommon</class>
    <cost>
      <bricks>16</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Discard a card from opponent's hand<br />If #<b>Unliving</b> in hand > 3<br />Gain half cost of the discarded card (max 20)]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Unliving");
    if ($tmp > 3)
    {
      $mydata->Bricks+= min(round($carddb->GetCard($hisdata->Hand[$mode])->GetResources("Bricks") / 2),20);
      $mydata->Gems+= min(round($carddb->GetCard($hisdata->Hand[$mode])->GetResources("Gems") / 2),20);
      $mydata->Recruits+= min(round($carddb->GetCard($hisdata->Hand[$mode])->GetResources("Recruits") / 2),20);
    }
    $hisdata->Hand[$mode] = $this->DrawCard($his_deck, $hisdata->Hand, $mode, 'DrawCard_different');
    $hisdata->NewCards[$mode] = 1;
]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="374">
    <name>Chain lightning</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>16</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction,Nature</keywords>
    <effect><![CDATA[Enemy tower: -11<br />If last card played was a <b>Mage</b><br />Enemy stock: -5]]></effect>
    <code><![CDATA[
    $hisdata->Tower-= 11;
    if (($mylast_card->HasKeyword("Mage")) and ($mylast_action == 'play'))
      { $hisdata->Bricks-= 5; $hisdata->Gems-= 5; $hisdata->Recruits-= 5; }
]]></code>
    <created>2008-07-30</created>
    <modified>2008-07-30</modified>
  </card>
  <card id="375">
    <name>Stilshrine of Miriam</name>
    <class>Uncommon</class>
    <cost>
      <bricks>13</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Tower: +7<br />Wall: +11<br />Production x3]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 7; $mydata->Wall+= 11;
    $bricks_production*= 3; $gems_production*= 3; $recruits_production*= 3;
]]></code>
    <created>2008-07-30</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="376">
    <name>Imperial griffin</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>31</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Soldier,Charge (19)</keywords>
    <effect><![CDATA[If #<b>Beast</b> in hand > 1 and #<b>Soldier</b> in hand > 1<br />Attack: 30<br />else<br />Enemy wall: -30]]></effect>
    <code><![CDATA[
    if (($this->KeywordCount($mydata->Hand, "Beast")) > 1 and ($this->KeywordCount($mydata->Hand, "Soldier") > 1))
      $this->Attack(30, $hisdata->Tower, $hisdata->Wall);
    else $hisdata->Wall-= 30;
]]></code>
    <created>2008-07-30</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="377">
    <name>Mountain king</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>14</gems>
      <recruits>16</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic,Durable</keywords>
    <effect><![CDATA[Attack: 24<br />Negates the negative effect of opponent's last round on tower and wall]]></effect>
    <code><![CDATA[
    $this->Attack(24, $hisdata->Tower, $hisdata->Wall);
    $mydata->Tower-= min(0, $mychanges['Tower']); $mydata->Wall-= min(0, $mychanges['Wall']);
]]></code>
    <created>2008-07-30</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="378">
    <name>Ice revenant</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>28</gems>
      <recruits>28</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead</keywords>
    <effect><![CDATA[Attack: 60<br />If last card played was Necromancy amplifier, Crypt, Lich or Necromancy<br />Attack: 45]]></effect>
    <code><![CDATA[
    $bonus = false; $temp_array = array(203, 307, 145, 316);
    if (in_array($mydata->LastCard[$mylastcardindex], $temp_array) and ($mylast_action == 'play'))
      $bonus = true;
    $this->Attack(60 + (($bonus) ? 45 : 0), $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2008-07-30</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="379">
    <name>Castle beyond looking glass</name>
    <class>Rare</class>
    <cost>
      <bricks>20</bricks>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: = Max tower / 2<br />Wall: = Max wall / 2<br />Stock: +5]]></effect>
    <code><![CDATA[
    $mydata->Tower = round($max_tower / 2); $mydata->Wall = round($max_wall / 2);
    $mydata->Bricks+= 5; $mydata->Gems+= 5; $mydata->Recruits+= 5;
]]></code>
    <created>2008-07-30</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="380">
    <name>Order of the White Lotus</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If not New<br />Balances (average) both players' tower, wall, facilities and stock]]></effect>
    <code><![CDATA[
    if (!isset($mynewflags[$cardpos]))
    {
      $temp_array = array("Tower", "Wall", "Quarry", "Magic", "Dungeons", "Bricks", "Gems", "Recruits");
      foreach ($temp_array as $attribute)
        $mydata->$attribute = $hisdata->$attribute = round(($mydata->$attribute + $hisdata->$attribute) / 2);
    }
]]></code>
    <created>2008-07-30</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="381">
    <name>Purified ashes</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Gain 1 random resource]]></effect>
    <code><![CDATA[
    $tmp = mt_rand(0,2);
    if ($tmp == 0) $mydata->Bricks++;
    elseif ($tmp == 1) $mydata->Gems++;
    elseif ($tmp == 2) $mydata->Recruits++;
]]></code>
    <created>2008-12-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="382">
    <name>Priest</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Banish</keywords>
    <effect><![CDATA[If #<b>Holy</b> in hand > 1<br />Gems: +3<br />If #<b>Soldier</b> in hand > 1<br />Recruits: +3]]></effect>
    <code><![CDATA[
      if ($this->KeywordCount($mydata->Hand, "Holy") > 1) $mydata->Gems+= 3;
      if ($this->KeywordCount($mydata->Hand, "Soldier") > 1) $mydata->Recruits+= 3;
]]></code>
    <created>2008-12-24</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="383">
    <name>Mountain of faith</name>
    <class>Rare</class>
    <cost>
      <bricks>12</bricks>
      <gems>12</gems>
      <recruits>12</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Replace your hand with Temple guard, Fairy, Heavenly warrior, Paladin, Cathedral, Knight Templar, Seraphim and Angel]]></effect>
    <code><![CDATA[
    $hand = array (503, 27, 85, 90, 175, 473, 137, 44); shuffle($hand);
    $newcards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1); $keys = array_keys($newcards);
    $mydata->Hand = array_combine($keys, $hand); $mydata->NewCards = $newcards; $nextcard = 0;
]]></code>
    <created>2008-12-24</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="384">
    <name>Last order</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>3</modes>
    <keywords/>
    <effect><![CDATA[Summons<br />Mode1:<br />Earth elemental<br />Mode2:<br />Soul cleaver<br />Mode3:<br />Cultists]]></effect>
    <code><![CDATA[
    if ($mode == 1) $nextcard = 227;
    elseif ($mode == 2) $nextcard = 226;
    elseif ($mode == 3) $nextcard = 225;
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="385">
    <name>Sharpshooters</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>13</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Soldier,Far sight</keywords>
    <effect><![CDATA[Mode1:<br />Enemy recruits: -15<br />Mode2:<br />Enemy tower: -10]]></effect>
    <code><![CDATA[if ($mode == 1) $hisdata->Recruits-= 15; elseif ($mode == 2) $hisdata->Tower-= 10;]]></code>
    <created>2008-12-24</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="386">
    <name>Sheath your swords</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Replace all non-rare recruits or mixed cost attack cards with Merchant, Caravan or Palisade]]></effect>
    <code><![CDATA[
    $green_c = $carddb->GetList(array('class'=>"Common", 'cost'=>"Green", 'advanced'=>"Attack:"));
    $green_u = $carddb->GetList(array('class'=>"Uncommon", 'cost'=>"Green", 'advanced'=>"Attack:"));
    $mixed_c = $carddb->GetList(array('class'=>"Common", 'cost'=>"Mixed", 'advanced'=>"Attack:"));
    $mixed_u = $carddb->GetList(array('class'=>"Uncommon", 'cost'=>"Mixed", 'advanced'=>"Attack:"));
    $attack_cards = array_unique(array_merge($green_c, $green_u, $mixed_c, $mixed_u));
    for ($i = 1; $i <= 8; $i++)
      if (in_array($mydata->Hand[$i], $attack_cards) and $i != $cardpos)
      {
        $mydata->Hand[$i] = $this->DrawCard(array(23, 273, 297), $mydata->Hand, $i, 'DrawCard_list');
        $mydata->NewCards[$i] = 1;
      }
    for ($i = 1; $i <= 8; $i++)
      if (in_array($hisdata->Hand[$i], $attack_cards))
      {
        $hisdata->Hand[$i] = $this->DrawCard(array(23, 273, 297), $hisdata->Hand, $i, 'DrawCard_list');
        $hisdata->NewCards[$i] = 1;
      }
]]></code>
    <created>2008-12-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="387">
    <name>Corrosion cloud</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>4</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[If Enemy wall = 0<br />Enemy stock: -4<br />else<br />Enemy wall: -9]]></effect>
    <code><![CDATA[
    if ($hisdata->Wall <= 0) { $hisdata->Bricks-= 4; $hisdata->Gems-= 4; $hisdata->Recruits-= 4; }
    else $hisdata->Wall-= 9;
]]></code>
    <created>2008-12-24</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="388">
    <name>Greed is good</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Player(s) with highest stock (total sum) gains 25% of his current stock]]></effect>
    <code><![CDATA[
    $my_res = $mydata->Bricks + $mydata->Gems + $mydata->Recruits;
    $his_res = $hisdata->Bricks + $hisdata->Gems + $hisdata->Recruits;
    if (($my_res) >= ($his_res))
    {
      $mydata->Bricks+= round($mydata->Bricks * 0.25);
      $mydata->Gems+= round($mydata->Gems * 0.25);
      $mydata->Recruits+= round($mydata->Recruits * 0.25);
    }
    if (($my_res) <= ($his_res))
    {
      $hisdata->Bricks+= round($hisdata->Bricks * 0.25);
      $hisdata->Gems+= round($hisdata->Gems * 0.25);
      $hisdata->Recruits+= round($hisdata->Recruits * 0.25);
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="389">
    <name>Bank</name>
    <class>Rare</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>4</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Durable</keywords>
    <effect><![CDATA[Gain 25% of your stock (max 25 of each)]]></effect>
    <code><![CDATA[
    $mydata->Bricks+= min(round($mydata->Bricks * 0.25), 25);
    $mydata->Gems+= min(round($mydata->Gems * 0.25), 25);
    $mydata->Recruits+= min(round($mydata->Recruits * 0.25), 25);
]]></code>
    <created>2008-12-24</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="390">
    <name>Anomaly sphere</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Negates the positive effect of opponent's last round on his tower, wall, facilities and stock]]></effect>
    <code><![CDATA[
    $hisdata->Tower-= max(0, $hischanges['Tower']); $hisdata->Wall-= max(0, $hischanges['Wall']);
    $hisdata->Quarry-= max(0, $hischanges['Quarry']); $hisdata->Magic-= max(0, $hischanges['Magic']); $hisdata->Dungeons-= max(0, $hischanges['Dungeons']);
    $hisdata->Bricks-= max(0, $hischanges['Bricks']); $hisdata->Gems-= max(0, $hischanges['Gems']); $hisdata->Recruits-= max(0, $hischanges['Recruits']);]]></code>
    <created>2008-12-24</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="391">
    <name>Road to Valhalla</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: -10<br />Wall: +20]]></effect>
    <code><![CDATA[$mydata->Tower-= 10; $mydata->Wall+= 20;]]></code>
    <created>2008-12-24</created>
    <modified>2010-04-11</modified>
  </card>
  <card id="392">
    <name>Road to Tartarus</name>
    <class>Common</class>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons Tartarus gate]]></effect>
    <code><![CDATA[$nextcard = 313;]]></code>
    <created>2008-12-24</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="393">
    <name>Druid</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Alliance,Mage</keywords>
    <effect><![CDATA[Attack: 5<br />Replace a card in hand with a <b>Nature</b> or a <b>Restoration</b>]]></effect>
    <code><![CDATA[
    $this->Attack(5, $hisdata->Tower, $hisdata->Wall);
    $restoration = $carddb->GetList(array('keyword'=>"Restoration"));
    $nature = $carddb->GetList(array('keyword'=>"Nature"));
    $mydata->Hand[$mode] = $this->DrawCard(array_merge($restoration, $nature), $mydata->Hand, $cardpos, 'DrawCard_list');
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="394">
    <name>Ranger</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>4</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Attack: 7<br />Recruits prod x2<br />Replace a card in hand with <b>Alliance</b>]]></effect>
    <code><![CDATA[
    $this->Attack(7, $hisdata->Tower, $hisdata->Wall);
    $recruits_production*= 2;
    $mydata->Hand[$mode] = $this->DrawCard($carddb->GetList(array('keyword'=>"Alliance")), $mydata->Hand, $cardpos, 'DrawCard_list');
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2008-12-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="395">
    <name>Frontier outpost</name>
    <class>Common</class>
    <cost>
      <bricks>6</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Wall > 7<br />Tower: +10<br />Wall: -7<br />else<br />Wall: +7]]></effect>
    <code><![CDATA[if ($mydata->Wall > 7) { $mydata->Wall-= 7; $mydata->Tower+= 10; } else $mydata->Wall+= 7;]]></code>
    <created>2008-12-24</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="396">
    <name>Crystal golem</name>
    <class>Common</class>
    <cost>
      <bricks>10</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Unliving</keywords>
    <effect><![CDATA[Attack: N<br />Wall: +3N<br />N = #<b>Holy</b> + #<b>Unliving</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Holy") + $this->KeywordCount($mydata->Hand, "Unliving");
    $this->Attack($tmp, $hisdata->Tower, $hisdata->Wall); $mydata->Wall+= 3*$tmp;
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="397">
    <name>Rainbow dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>26</gems>
      <recruits>26</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon,Legend</keywords>
    <effect><![CDATA[Attack: 8N<br />Stock: +2N<br />N = #different keywords in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->CountDistinctKeywords($mydata->Hand);
    $this->Attack($tmp * 8, $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks+= $tmp * 2; $mydata->Gems+= $tmp * 2; $mydata->Recruits+= $tmp * 2;
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="398">
    <name>Shadow unicorn</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>15</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Legend</keywords>
    <effect><![CDATA[Attack: 25<br />Magic: +1<br />Enemy magic: -1<br />Discard a <b>Mage</b> from hand to gain<br />Gems: +30]]></effect>
    <code><![CDATA[
    $this->Attack(25, $hisdata->Tower, $hisdata->Wall); $mydata->Magic+= 1; $hisdata->Magic-= 1;
    $storage = array();
    for ($i = 1; $i <= 8; $i++)
      if ($carddb->GetCard($mydata->Hand[$i])->HasKeyword("Mage"))
        $storage[] = $i;
    if (count($storage) > 0)
    {
      $discarded_pos = $storage[array_rand($storage)];
      $mydata->Hand[$discarded_pos] = $this->DrawCard($my_deck, $mydata->Hand, $discarded_pos, 'DrawCard_random');
      $mydata->NewCards[$discarded_pos] = 1;
      $mydata->Gems+= 30;
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="399">
    <name>Wizard's cottage</name>
    <class>Common</class>
    <cost>
      <bricks>3</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +2<br />Wall: +3<br />Summons a non-rare <b>Mage</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 2; $mydata->Wall+= 3;
    $common = $carddb->GetList(array('class'=>"Common", 'keyword'=>"Mage"));
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Mage"));
    $nextcard = $this->DrawCard(array_merge($common, $uncommon), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="400">
    <name>Mask of the phantasm</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>8</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Summons selected card in hand]]></effect>
    <code><![CDATA[if ($mode != $cardpos) $nextcard = $mydata->Hand[$mode];]]></code>
    <created>2008-12-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="401">
    <name>Invocation</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +N<br />Wall: +N<br />N = #Bricks / 5<br />Enemy stock: -M<br />M = #Gems / 5]]></effect>
    <code><![CDATA[
    $tmp = round($mydata->Bricks / 5); $mydata->Tower+= $tmp; $mydata->Wall+= $tmp;
    $tmp = round($mydata->Gems / 5); $hisdata->Bricks-= $tmp; $hisdata->Gems-= $tmp; $hisdata->Recruits-= $tmp;
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="402">
    <name>Abyssal scavenger</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Returns 1/3 of cost of opponent's last card (max 4)]]></effect>
    <code><![CDATA[
    $tmp_card = $hislast_card;
    $mydata->Bricks+= min(round($tmp_card->GetResources("Bricks") / 3), 4);
    $mydata->Gems+= min(round($tmp_card->GetResources("Gems") / 3), 4);
    $mydata->Recruits+= min(round($tmp_card->GetResources("Recruits") / 3), 4);
]]></code>
    <created>2008-12-24</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="403">
    <name>Dark legion</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>40</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Recruits: +80<br />Replace your hand with Orc regiment, 2 Orc grunts, Ogre, Troll, Orc brute, Goblin flanker and Goblin saboteur]]></effect>
    <code><![CDATA[
    $hand = array (13, 502, 240, 240, 368, 46, 106, 89); shuffle($hand);
    $newcards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1); $keys = array_keys($newcards);
    $mydata->Hand = array_combine($keys, $hand); $mydata->NewCards = $newcards;
    $nextcard = 0; $mydata->Recruits+= 80;
]]></code>
    <created>2008-12-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="404">
    <name>Thor</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>21</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Mage,Swift</keywords>
    <effect><![CDATA[Attack: 20<br />Enemy tower: -15<br />Summons Chain lightning]]></effect>
    <code><![CDATA[$this->Attack(20, $hisdata->Tower, $hisdata->Wall); $hisdata->Tower-= 15; $nextcard = 374;]]></code>
    <created>2008-12-24</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="405">
    <name>Mountain sentry</name>
    <class>Uncommon</class>
    <cost>
      <bricks>4</bricks>
      <gems>4</gems>
      <recruits>4</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic,Durable,Skirmisher</keywords>
    <effect><![CDATA[Production x0<br />Negates the negative effect of opponent's last round on wall (max 20)]]></effect>
    <code><![CDATA[
    $bricks_production = 0; $gems_production = 0; $recruits_production = 0;
    $mydata->Wall-= min(0, max(-20, $mychanges['Wall']));
]]></code>
    <created>2008-12-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="406">
    <name>War elephant</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>39</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Soldier,Skirmisher</keywords>
    <effect><![CDATA[If #<b>Beast</b> in hand > 1 and #<b>Soldier</b> in hand > 1<br />Enemy wall is halved<br />Always:<br />Attack: 35]]></effect>
    <code><![CDATA[
    if ($this->KeywordCount($mydata->Hand, "Beast") > 1 and $this->KeywordCount($mydata->Hand, "Soldier") > 1)
      $hisdata->Wall = round($hisdata->Wall/2);
    $this->Attack(35, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2008-12-24</created>
    <modified>2010-10-11</modified>
  </card>
  <card id="407">
    <name>Dwarven fortress</name>
    <class>Rare</class>
    <cost>
      <bricks>32</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Tower: = 40<br />Wall: +50<br />If last card played was non-common <b>Runic</b><br />Wall: = Max wall]]></effect>
    <code><![CDATA[
    $mydata->Tower = 40;
    if (($mylast_card->HasKeyword("Runic")) and ($mylast_action == 'play') AND ($mylast_card->Class != 'Common'))
      $mydata->Wall = $max_wall;
    else $mydata->Wall+= 50;
]]></code>
    <created>2008-12-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="408">
    <name>Bounty hunter</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>14</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Banish</keywords>
    <effect><![CDATA[Attack: 13<br />Discard a <b>Legend</b> from opponent's hand to gain<br />Enemy magic: -1]]></effect>
    <code><![CDATA[
    $this->Attack(13, $hisdata->Tower, $hisdata->Wall);
    $storage = array();
    for ($i = 1; $i <= 8; $i++)
      if ($carddb->GetCard($hisdata->Hand[$i])->HasKeyword("Legend"))
        $storage[] = $i;
    if (count($storage) > 0)
    {
      $discarded_pos = $storage[array_rand($storage)];
      $hisdata->Hand[$discarded_pos] = $this->DrawCard($his_deck, $hisdata->Hand, $discarded_pos, 'DrawCard_different');
      $hisdata->NewCards[$discarded_pos] = 1;
      $hisdata->Magic-= 1;
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="409">
    <name>Monster slayer</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier,Skirmisher</keywords>
    <effect><![CDATA[Attack: 16<br />Discard highest rarity <b>Unliving</b>, <b>Undead</b> or <b>Dragon</b> from opponent's hand]]></effect>
    <code><![CDATA[
    $this->Attack(16, $hisdata->Tower, $hisdata->Wall);
    $storage = array("Common" => array(), "Uncommon" => array(), "Rare" => array());
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($hisdata->Hand[$i]);
      $rarity = $cur_card->Class;
      if ($cur_card->HasKeyword("Dragon") OR $cur_card->HasKeyword("Undead") OR $cur_card->HasKeyword("Unliving"))
        $storage[$rarity][] = $i;
    }
    if ((count($storage['Common']) + count($storage['Uncommon']) + count($storage['Rare'])) > 0)
    {
      shuffle($storage['Common']); shuffle($storage['Uncommon']); shuffle($storage['Rare']);
      $storage_temp = array_merge($storage['Common'], $storage['Uncommon'], $storage['Rare']);
      $discarded_pos = array_pop($storage_temp);
      $hisdata->Hand[$discarded_pos] = $this->DrawCard($his_deck, $hisdata->Hand, $discarded_pos, 'DrawCard_different');
      $hisdata->NewCards[$discarded_pos] = 1;
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="410">
    <name>Shadow fairy</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Far sight</keywords>
    <effect><![CDATA[If #<b>Holy</b> in opponent's hand > 0<br />Enemy tower: -1<br />else<br />Stock: +1<br />Enemy stock: -1]]></effect>
    <code><![CDATA[
    if ($this->KeywordCount($hisdata->Hand, "Holy") > 0) $hisdata->Tower-= 1;
    else
    {
      $mydata->Bricks+= 1; $mydata->Gems+= 1; $mydata->Recruits+= 1;
      $hisdata->Bricks-= 1; $hisdata->Gems-= 1; $hisdata->Recruits-= 1;
    }
]]></code>
    <created>2008-12-24</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="411">
    <name>Wolf spirit</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>4</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Illusion</keywords>
    <effect><![CDATA[Attack: 5<br />If last card played was a <b>Beast</b><br />Recruits: +3]]></effect>
    <code><![CDATA[
    $this->Attack(5, $hisdata->Tower, $hisdata->Wall);
    if (($mylast_card->HasKeyword("Beast")) and ($mylast_action == 'play')) $mydata->Recruits+= 3;
]]></code>
    <created>2008-12-24</created>
    <modified>2008-12-24</modified>
  </card>
  <card id="412">
    <name>Hungry dead</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand,Undead,Durable,Enduring (12)</keywords>
    <effect><![CDATA[If New<br />Enemy wall: -5<br />else<br />Enemy stock: -4]]></effect>
    <code><![CDATA[
    if (isset($mynewflags[$cardpos])) $hisdata->Wall-= 5;
    else { $hisdata->Bricks-= 4; $hisdata->Gems-= 4; $hisdata->Recruits-= 4; }
]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="413">
    <name>Colonialism</name>
    <class>Common</class>
    <cost>
      <bricks>3</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Recruits < 11<br /> Recruits x2<br />else<br />Recruits: +6]]></effect>
    <code><![CDATA[
    if ($mydata->Recruits < 11) $mydata->Recruits = ($mydata->Recruits * 2);
    else $mydata->Recruits+= 6;
]]></code>
    <created>2009-04-11</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="414">
    <name>Mediator</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Discard a card from opponent's hand and pay half its cost<br />If not enough stock<br />Matching facility: -1]]></effect>
    <code><![CDATA[
    $dis_card = $carddb->GetCard($hisdata->Hand[$mode]);
    $hisdata->Hand[$mode] = $this->DrawCard($his_deck, $hisdata->Hand, $mode, 'DrawCard_different');
    $hisdata->NewCards[$mode] = 1;
    $resources = array('Quarry' => 'Bricks', 'Magic' => 'Gems', 'Dungeons' => 'Recruits');
    foreach ($resources as $facility => $resource)
    {
      $mydata->$resource-= round($dis_card->GetResources($resource) / 2);
      if ($mydata->$resource < 0) $mydata->$facility-= 1;
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="415">
    <name>Goblin intruder</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Replace a non-rare highest rarity card in opponent's hand with Goblin intruder]]></effect>
    <code><![CDATA[
    $storage = array("Common" => array(), "Uncommon" => array());
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($hisdata->Hand[$i]);
      $rarity = $cur_card->Class;
      if ($rarity != 'Rare' AND $cur_card->ID != 415) $storage[$rarity][] = $i;
    }
    if ((count($storage['Common']) + count($storage['Uncommon'])) > 0)
    {
      shuffle($storage['Common']); shuffle($storage['Uncommon']);
      $storage_temp = array_merge($storage['Common'], $storage['Uncommon']);
      $discarded_pos = array_pop($storage_temp);
      $hisdata->Hand[$discarded_pos] = 415;
      $hisdata->NewCards[$discarded_pos] = 1;
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="416">
    <name>Perfect shot</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>7</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction,Siege</keywords>
    <effect><![CDATA[If New<br />Enemy tower: -6<br />else<br />Attack: 6]]></effect>
    <code><![CDATA[
    if (isset($mynewflags[$cardpos])) $hisdata->Tower-= 6;
    else $this->Attack(6, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2009-04-11</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="417">
    <name>New development</name>
    <class>Common</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +7<br />If New<br />Tower: +3<br />Bricks: +3]]></effect>
    <code><![CDATA[
    if (isset($mynewflags[$cardpos])) { $mydata->Tower+= 10; $mydata->Bricks+= 3; }
    else $mydata->Tower+= 7;
]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="418">
    <name>Power surge</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: -8<br />If New<br />Magic: +1<br />else<br />Gems: +12]]></effect>
    <code><![CDATA[
    $mydata->Tower-= 8;
    if (isset($mynewflags[$cardpos])) $mydata->Magic+= 1; else $mydata->Gems+= 12;
]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="419">
    <name>Elementalist</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>11</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage,Swift,Banish</keywords>
    <effect><![CDATA[Players discard up to 6 <b>Unliving</b> cards<br />Players lose 10 bricks and 1 quarry for each card they discarded above 4]]></effect>
    <code><![CDATA[
    $my_temp = $his_temp = array();
    for ($i = 1; $i <= 8; $i++)
    {
      if ($carddb->GetCard($mydata->Hand[$i])->HasKeyword("Unliving")) $my_temp[$i] = $i;
      if ($carddb->GetCard($hisdata->Hand[$i])->HasKeyword("Unliving")) $his_temp[$i] = $i;
    }
    shuffle($my_temp); shuffle($his_temp);
    if (count($my_temp) > 0)
    {
      for ($i = 0; ($i < count($my_temp)) AND ($i < 6); $i++)
      {
        $mydata->Hand[$my_temp[$i]] = $this->DrawCard($my_deck, $mydata->Hand, $my_temp[$i], 'DrawCard_random');
        $mydata->NewCards[$my_temp[$i]] = 1;
      }
      $amount = max(($i - 4), 0); $mydata->Bricks-= $amount * 10; $mydata->Quarry-= $amount;
    }
    if (count($his_temp) > 0)
    {
      for ($j = 0; ($j < count($his_temp)) AND ($j < 6); $j++)
      {
        $hisdata->Hand[$his_temp[$j]] = $this->DrawCard($his_deck, $hisdata->Hand, $his_temp[$j], 'DrawCard_random');
        $hisdata->NewCards[$his_temp[$j]] = 1;
      }
      $amount = max(($j - 4), 0); $hisdata->Bricks-= $amount * 10; $hisdata->Quarry-= $amount;
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="420">
    <name>Shrine</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Wall is divisible by 10<br />Wall: +9<br />Gems: +4<br />else<br />Wall: +4]]></effect>
    <code><![CDATA[
    if (($mydata->Wall % 10) == 0) {$mydata->Wall+= 9; $mydata->Gems+= 4; }
    else $mydata->Wall+= 4;
]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="421">
    <name>Gleaners</name>
    <class>Common</class>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Gain resources equal to opponent's lowest and highest facility prod]]></effect>
    <code><![CDATA[
    $maximum = max($hisdata->Quarry, $hisdata->Magic, $hisdata->Dungeons);
    $minimum = min($hisdata->Quarry, $hisdata->Magic, $hisdata->Dungeons);
    $facilities = array('Quarry' => 'Bricks', 'Magic' => 'Gems', 'Dungeons' => 'Recruits');
    $top = $bottom = array();
    foreach ($facilities as $facility => $resource)
    {
      if ($hisdata->$facility == $maximum) $top[] = $facility;
      if ($hisdata->$facility == $minimum) $bottom[] = $facility;
    }
    if (count($top) == 3)
    {
      shuffle($top);
      $chosen_facility_max = array_pop($top);
      $chosen_facility_min = array_pop($top);
    }
    else
    {
      $chosen_facility_max = $top[array_rand($top)];
      $chosen_facility_min = $bottom[array_rand($bottom)];
    }
    $mydata->$facilities[$chosen_facility_max]+= $hisdata->$chosen_facility_max;
    $mydata->$facilities[$chosen_facility_min]+= $hisdata->$chosen_facility_min;
]]></code>
    <created>2009-04-11</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="422">
    <name>Death prophet</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Stock: -1<br />Summons Plague, Catastrophe or Death prophet]]></effect>
    <code><![CDATA[
    $mydata->Bricks-= 1; $mydata->Gems-= 1; $mydata->Recruits-= 1;
    $nextcard = $this->DrawCard(array(15, 80, 422), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2009-04-11</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="423">
    <name>Pirate ghostship</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand,Undead</keywords>
    <effect><![CDATA[Enemy stock: -2<br />If #<b>Brigand</b> in hand + #<b>Undead</b> in hand > 3<br />Stock: +2]]></effect>
    <code><![CDATA[
    $hisdata->Bricks-= 2; $hisdata->Gems-= 2; $hisdata->Recruits-= 2;
    if (($this->KeywordCount($mydata->Hand, "Brigand") + $this->KeywordCount($mydata->Hand, "Undead")) > 3)
      { $mydata->Bricks+= 2; $mydata->Gems+= 2; $mydata->Recruits+= 2; }
]]></code>
    <created>2009-04-11</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="424">
    <name>Corsairs</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>4</gems>
      <recruits>13</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Attack: 11<br />Steals stock equal to opponent's normal production<br />Summons a non-common <b>Brigand</b>]]></effect>
    <code><![CDATA[
    $this->Attack(11, $hisdata->Tower, $hisdata->Wall);
    $resources = array('Quarry' => 'Bricks', 'Magic' => 'Gems', 'Dungeons' => 'Recruits');
    foreach ($resources as $facility => $resource)
    {
      $mydata->$resource+= $hisdata->$facility;
      $hisdata->$resource-= $hisdata->$facility;
    }
    $uncommon = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Brigand"));
    $rare = $carddb->GetList(array('class'=>"Rare", 'keyword'=>"Brigand"));
    $nextcard = $this->DrawCard(array_merge($uncommon, $rare), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="425">
    <name>Ice queen</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Discard all <b>Mage</b> cards<br />Players gain 4 gems, 4 tower and 8 wall for each card they discarded]]></effect>
    <code><![CDATA[
    $my_counter = $his_counter = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      if (($carddb->GetCard($mydata->Hand[$i])->HasKeyword("Mage")) AND ($i != $cardpos))
      {
        $mydata->Hand[$i] = $this->DrawCard($my_deck, $mydata->Hand, $i, 'DrawCard_random');
        $mydata->NewCards[$i] = 1;
        $my_counter++;
      }
      if ($carddb->GetCard($hisdata->Hand[$i])->HasKeyword("Mage"))
      {
        $hisdata->Hand[$i] = $this->DrawCard($his_deck, $hisdata->Hand, $i, 'DrawCard_random');
        $hisdata->NewCards[$i] = 1;
        $his_counter++;
      }
    }
    $mydata->Tower+= $my_counter * 4; $mydata->Wall+= $my_counter * 8; $mydata->Gems+= $my_counter * 4;
    $hisdata->Tower+= $his_counter * 4; $hisdata->Wall+= $his_counter * 8; $hisdata->Gems+= $his_counter * 4;
]]></code>
    <created>2009-04-11</created>
    <modified>2009-12-24</modified>
  </card>
  <card id="426">
    <name>Arthoria the Saber</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>24</gems>
      <recruits>24</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Legend,Durable,Swift,Far sight,Enduring (25)</keywords>
    <effect><![CDATA[Attack: 15]]></effect>
    <code><![CDATA[$this->Attack(15, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2009-04-11</created>
    <modified>2010-10-11</modified>
  </card>
  <card id="427">
    <name>Darkforge</name>
    <class>Rare</class>
    <cost>
      <bricks>18</bricks>
      <gems>9</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Recruits prod x10]]></effect>
    <code><![CDATA[$recruits_production*= 10;]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="428">
    <name>Spectral dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>40</gems>
      <recruits>50</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon,Undead</keywords>
    <effect><![CDATA[Attack: 150<br />Gems: +20]]></effect>
    <code><![CDATA[$this->Attack(150, $hisdata->Tower, $hisdata->Wall); $mydata->Gems+= 20;]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="429">
    <name>Valley of thousand rivers</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Player(s) with most <b>Alliance</b>, <b>Legend</b> and <b>Mage</b> gains<br />Lowest facility: +1]]></effect>
    <code><![CDATA[
    $my_count = $this->KeywordCount($mydata->Hand, "Alliance") + $this->KeywordCount($mydata->Hand, "Legend") + $this->KeywordCount($mydata->Hand, "Mage");
    $his_count = $this->KeywordCount($hisdata->Hand, "Alliance") + $this->KeywordCount($hisdata->Hand, "Legend") + $this->KeywordCount($hisdata->Hand, "Mage");
    if ($my_count >= $his_count)
    {
      $min = min($mydata->Quarry, $mydata->Magic, $mydata->Dungeons);
      $facilities = array('Quarry', 'Magic', 'Dungeons'); $temp = array();
      foreach ($facilities as $facility) if ($mydata->$facility == $min) $temp[] = $facility;
      $chosen_facility = $temp[array_rand($temp)];
      $mydata->$chosen_facility+= 1;
    }
    if ($my_count <= $his_count)
    {
      $min = min($hisdata->Quarry, $hisdata->Magic, $hisdata->Dungeons);
      $facilities = array('Quarry', 'Magic', 'Dungeons'); $temp = array();
      foreach ($facilities as $facility) if ($hisdata->$facility == $min) $temp[] = $facility;
      $chosen_facility = $temp[array_rand($temp)];
      $hisdata->$chosen_facility+= 1;
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="430">
    <name>Messenger</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Summons an uncommon card not from your deck]]></effect>
    <code><![CDATA[$nextcard = $this->DrawCard(array_diff($carddb->GetList(array('class'=>"Uncommon")), $my_deck->Uncommon), $mydata->Hand, $cardpos, 'DrawCard_list');]]></code>
    <created>2009-04-11</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="431">
    <name>Divine intervention</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Player(s) with most <b>Holy</b> in hand gains<br />Tower: +9<br />Wall: +17]]></effect>
    <code><![CDATA[
    $my_count = $this->KeywordCount($mydata->Hand, "Holy");
    $his_count = $this->KeywordCount($hisdata->Hand, "Holy");
    if ($my_count >= $his_count) { $mydata->Tower+= 9; $mydata->Wall+= 17; }
    if ($my_count <= $his_count) { $hisdata->Tower+= 9; $hisdata->Wall+= 17; }
]]></code>
    <created>2009-04-11</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="432">
    <name>Fair trade</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Player(s) with lowest stock gains<br />Stock: +15<br />His opponent gains<br />Facilities: +1]]></effect>
    <code><![CDATA[
    $my_count = $mydata->Bricks + $mydata->Gems + $mydata->Recruits;
    $his_count = $hisdata->Bricks + $hisdata->Gems + $hisdata->Recruits;
    if ($my_count >= $his_count)
    {
      $mydata->Quarry+= 1; $mydata->Magic+= 1; $mydata->Dungeons+= 1;
      $hisdata->Bricks+= 15; $hisdata->Gems+= 15; $hisdata->Recruits+= 15;
    }
    if ($my_count <= $his_count)
    {
      $hisdata->Quarry+= 1; $hisdata->Magic+= 1; $hisdata->Dungeons+= 1;
      $mydata->Bricks+= 15; $mydata->Gems+= 15; $mydata->Recruits+= 15;
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="433">
    <name>Moon priestess</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Players discard their highest and lowest cost card]]></effect>
    <code><![CDATA[
    $my_low = $my_high = $his_low = $his_high = $my_costs = $his_costs = array();
    $my_min = $his_min = 1000; $my_max = $his_max = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      if ($i != $cardpos)
      {
        $cur_cost = $my_costs[$i] = $carddb->GetCard($mydata->Hand[$i])->GetResources("");
        if ($cur_cost < $my_min) $my_min = $cur_cost;
        if ($cur_cost > $my_max) $my_max = $cur_cost;
      }
      $cur_cost = $his_costs[$i] = $carddb->GetCard($hisdata->Hand[$i])->GetResources("");
      if ($cur_cost < $his_min) $his_min = $cur_cost;
      if ($cur_cost > $his_max) $his_max = $cur_cost;
    }
    for ($i = 1; $i <= 8; $i++)
    {
      if ($i != $cardpos)
      {
        $cur_cost = $my_costs[$i];
        if ($cur_cost == $my_min) $my_low[] = $i;
        if ($cur_cost == $my_max) $my_high[] = $i;
      }
      $cur_cost = $his_costs[$i];
      if ($cur_cost == $his_min) $his_low[] = $i;
      if ($cur_cost == $his_max) $his_high[] = $i;
    }
    
    if ($my_min == $my_max)
    {
      shuffle($my_high);
      $my_low_dis = array_pop($my_high);
      $my_high_dis = array_pop($my_high);
    }
    else
    {
      $my_low_dis = $my_low[array_rand($my_low)];
      $my_high_dis = $my_high[array_rand($my_high)];
    }
    $mydata->Hand[$my_low_dis] = $this->DrawCard($my_deck, $mydata->Hand, $my_low_dis, 'DrawCard_different');
    $mydata->Hand[$my_high_dis] = $this->DrawCard($my_deck, $mydata->Hand, $my_high_dis, 'DrawCard_different');
    $mydata->NewCards[$my_low_dis] = 1;
    $mydata->NewCards[$my_high_dis] = 1;
    
    if ($his_min == $his_max)
    {
      shuffle($his_high);
      $his_low_dis = array_pop($his_high);
      $his_high_dis = array_pop($his_high);
    }
    else
    {
      $his_low_dis = $his_low[array_rand($his_low)];
      $his_high_dis = $his_high[array_rand($his_high)];
    }
    $hisdata->Hand[$his_low_dis] = $this->DrawCard($his_deck, $hisdata->Hand, $his_low_dis, 'DrawCard_different');
    $hisdata->Hand[$his_high_dis] = $this->DrawCard($his_deck, $hisdata->Hand, $his_high_dis, 'DrawCard_different');
    $hisdata->NewCards[$his_low_dis] = 1;
    $hisdata->NewCards[$his_high_dis] = 1;
]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="434">
    <name>Outnumbered and outmatched</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Recruits - Enemy recruits > 35<br />Recruits: -35<br />Enemy tower: = 1<br />Enemy wall: = 0]]></effect>
    <code><![CDATA[
    if (($mydata->Recruits - $hisdata->Recruits) > 35)
      { $mydata->Recruits-= 35; $hisdata->Tower = 1; $hisdata->Wall = 0; }
]]></code>
    <created>2009-04-11</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="435">
    <name>Alastor flame of heavens</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>25</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Holy,Banish</keywords>
    <effect><![CDATA[Gems: +50<br />Magic: +1]]></effect>
    <code><![CDATA[$mydata->Gems+= 50; $mydata->Magic+= 1;]]></code>
    <created>2009-04-11</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="436">
    <name>Watchtower</name>
    <class>Uncommon</class>
    <cost>
      <bricks>18</bricks>
      <gems>0</gems>
      <recruits>13</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +16<br />Enemy tower: -6<br />If #<b>Far sight</b> and #<b>Siege</b> in hand > 0<br />Enemy tower: -10]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 16;
    if ($this->KeywordCount($mydata->Hand, "Far sight") > 0 AND $this->KeywordCount($mydata->Hand, "Siege") > 0)
      $hisdata->Tower-= 16;
    else $hisdata->Tower-= 6;
]]></code>
    <created>2009-04-11</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="437">
    <name>Battlements</name>
    <class>Common</class>
    <cost>
      <bricks>7</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +7<br />If #<b>Siege</b> in hand > 0<br />Enemy tower: -4]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 7;
    if ($this->KeywordCount($mydata->Hand, "Siege") > 0) $hisdata->Tower-= 4;
]]></code>
    <created>2009-04-11</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="438">
    <name>Phoenix feather</name>
    <class>Common</class>
    <cost>
      <bricks>6</bricks>
      <gems>6</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[If #<b>Burning</b> in hand = 2<br />Summons Phoenix<br />else<br />Gems: +14]]></effect>
    <code><![CDATA[
    if ($this->KeywordCount($mydata->Hand, "Burning") == 2) $nextcard = 223;
    else $mydata->Gems+= 14;
]]></code>
    <created>2009-04-11</created>
    <modified>2009-06-22</modified>
  </card>
  <card id="439">
    <name>Revenge of the fallen</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>7</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Player(s) with fewest <b>Undead</b> in hand gains<br />Highest facility: -1]]></effect>
    <code><![CDATA[
    $my_count = $this->KeywordCount($mydata->Hand, "Undead");
    $his_count = $this->KeywordCount($hisdata->Hand, "Undead");
    if ($my_count <= $his_count)
    {
      $max = max($mydata->Quarry, $mydata->Magic, $mydata->Dungeons);
      $facilities = array('Quarry', 'Magic', 'Dungeons'); $temp = array();
      foreach ($facilities as $facility) if ($mydata->$facility == $max) $temp[] = $facility;
      $chosen_facility = $temp[array_rand($temp)];
      $mydata->$chosen_facility-= 1;
    }
    if ($my_count >= $his_count)
    {
      $max = max($hisdata->Quarry, $hisdata->Magic, $hisdata->Dungeons);
      $facilities = array('Quarry', 'Magic', 'Dungeons'); $temp = array();
      foreach ($facilities as $facility) if ($hisdata->$facility == $max) $temp[] = $facility;
      $chosen_facility = $temp[array_rand($temp)];
      $hisdata->$chosen_facility-= 1;
    }
]]></code>
    <created>2009-04-11</created>
    <modified>2009-04-11</modified>
  </card>
  <card id="440">
    <name>Dragonling</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Gems prod x2]]></effect>
    <code><![CDATA[$gems_production*= 2;]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="441">
    <name>Troll bridge</name>
    <class>Uncommon</class>
    <cost>
      <bricks>22</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Wall: +15<br />Dungeon: +1<br />If #Troll in hand > 0<br />Attack: 15]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 15; $mydata->Dungeons+= 1; $found = false;
    for ($i = 1; $i <= 8; $i++)
      if ((!$found) AND ($mydata->Hand[$i] == 106)) $found = true;
    if ($found) $this->Attack(15, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2009-07-22</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="442">
    <name>Dark forest</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>17</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature</keywords>
    <effect><![CDATA[Wall: +20<br />Recruits: +2N<br />N = #<b>Beast</b> + #<b>Nature</b> in hand]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 20;
    $mydata->Recruits+= ($this->KeywordCount($mydata->Hand, "Beast") + $this->KeywordCount($mydata->Hand, "Nature")) * 2;
]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="443">
    <name>Vulture</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>11</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast</keywords>
    <effect><![CDATA[Attack: 10<br />If last card was discarded bonus attack based on discarded card rarity (C-8, U-16, R-28)]]></effect>
    <code><![CDATA[
    $this->Attack(10, $hisdata->Tower, $hisdata->Wall);
    if ($mylast_action == 'discard')
    {
      $damage = array('Common' => 8, 'Uncommon' => 16, 'Rare' => 28);
      $this->Attack($damage[$mylast_card->Class], $hisdata->Tower, $hisdata->Wall);
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="444">
    <name>Firewall</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>36</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[Wall: +40<br />Attack: 5N<br />N = #<b>Burning</b> in hand]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 40;
    $this->Attack(($this->KeywordCount($mydata->Hand, "Burning") * 5), $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="445">
    <name>Poltergeist</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion,Undead</keywords>
    <effect><![CDATA[Opponent's lowest resource: -8]]></effect>
    <code><![CDATA[
    $min = min($hisdata->Bricks, $hisdata->Gems, $hisdata->Recruits);
    $res = array("Bricks" => $hisdata->Bricks, "Gems" => $hisdata->Gems, "Recruits" => $hisdata->Recruits);
    $temp = array();
    foreach ($res as $resource => $r_value)
      if ($r_value == $min) $temp[$resource] = $r_value;
    $chosen = array_rand($temp);
    $hisdata->$chosen-= 8;
]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="446">
    <name>Treant</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>25</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature,Siege</keywords>
    <effect><![CDATA[Enemy wall: -22<br />Attack: 18]]></effect>
    <code><![CDATA[$hisdata->Wall-= 22; $this->Attack(18, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2006-05-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="447">
    <name>Imperial army</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>45</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier,Charge (45),Siege</keywords>
    <effect><![CDATA[Attack: 45]]></effect>
    <code><![CDATA[$this->Attack(45, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2009-07-22</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="448">
    <name>Giant</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>25</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Attack: 35<br />Discard all common cards]]></effect>
    <code><![CDATA[
    $this->Attack(35, $hisdata->Tower, $hisdata->Wall);
    for ($i = 1; $i <= 8; $i++)
      if (($i != $cardpos) AND ($carddb->GetCard($mydata->Hand[$i])->Class == 'Common'))
      {
        $mydata->Hand[$i] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
        $mydata->NewCards[$i] = 1;
      }
    for ($i = 1; $i <= 8; $i++)
      if ($carddb->GetCard($hisdata->Hand[$i])->Class == 'Common')
      {
        $hisdata->Hand[$i] = $this->DrawCard($his_deck, $hisdata->Hand, $i, 'DrawCard_random');
        $hisdata->NewCards[$i] = 1;
      }
]]></code>
    <created>2009-07-22</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="449">
    <name>Halfling rogue</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Summons selected zero cost card in hand (can't summon self)]]></effect>
    <code><![CDATA[
    if ($cardpos != $mode and $carddb->GetCard($mydata->Hand[$mode])->GetResources('') == 0)
      $nextcard = $mydata->Hand[$mode];
]]></code>
    <created>2009-07-22</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="450">
    <name>White shrine</name>
    <class>Rare</class>
    <cost>
      <bricks>22</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Restoration</keywords>
    <effect><![CDATA[Tower: +10<br />Highest facility: +1<br />Lowest facility: +2]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 10;
    $max = max($mydata->Quarry, $mydata->Magic, $mydata->Dungeons);
    $fac = array("Quarry" => $mydata->Quarry, "Magic" => $mydata->Magic, "Dungeons" => $mydata->Dungeons);
    $temp_max = array();
    foreach ($fac as $facility => $f_value)
      if ($f_value == $max) $temp_max[$facility] = $f_value;
    $chosen_max = array_rand($temp_max);
    $mydata->$chosen_max+= 1;
    $min = min($mydata->Quarry, $mydata->Magic, $mydata->Dungeons);
    $fac = array("Quarry" => $mydata->Quarry, "Magic" => $mydata->Magic, "Dungeons" => $mydata->Dungeons);
    $temp_min = array();
    foreach ($fac as $facility => $f_value)
      if ($f_value == $min) $temp_min[$facility] = $f_value;
    $chosen_min = array_rand($temp_min);
    $mydata->$chosen_min+= 2;
]]></code>
    <created>2009-07-22</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="451">
    <name>Siege preparations</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Recruits: +9<br />Enemy wall: +8]]></effect>
    <code><![CDATA[$mydata->Recruits+= 9; $hisdata->Wall+= 8;]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="452">
    <name>Invaders</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Enemy wall: -3<br />Replace a card in hand with self]]></effect>
    <code><![CDATA[
    $hisdata->Wall-= 3; $mydata->Hand[$mode] = $card->ID;
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2009-07-22</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="453">
    <name>Ancient sage</name>
    <class>Rare</class>
    <cost>
      <bricks>10</bricks>
      <gems>10</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Legend,Nature</keywords>
    <effect><![CDATA[Production xN<br />N = #<b>Alliance</b> + #<b>Nature</b> in hand (max 5)]]></effect>
    <code><![CDATA[
    $tmp = min($this->KeywordCount($mydata->Hand, "Alliance") + $this->KeywordCount($mydata->Hand, "Nature"), 5);
    $bricks_production*= $tmp; $gems_production*= $tmp; $recruits_production*= $tmp;
]]></code>
    <created>2009-07-22</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="454">
    <name>Dryad</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature,Banish</keywords>
    <effect><![CDATA[Enemy wall: -6]]></effect>
    <code><![CDATA[$hisdata->Wall-= 6;]]></code>
    <created>2009-07-22</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="455">
    <name>Imp</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>2</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Banish</keywords>
    <effect><![CDATA[Gems: +N<br />Enemy gems: -N<br />N = #Enemy magic]]></effect>
    <code><![CDATA[$mydata->Gems+= $hisdata->Magic; $hisdata->Gems-= $hisdata->Magic;]]></code>
    <created>2009-07-22</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="456">
    <name>Prosperity</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Restoration</keywords>
    <effect><![CDATA[If Stock < Enemy stock<br />Stock: +12<br />else<br />Stock: +6<br />Enemy stock: +6]]></effect>
    <code><![CDATA[
    $my_count = $mydata->Bricks + $mydata->Gems + $mydata->Recruits;
    $his_count = $hisdata->Bricks + $hisdata->Gems + $hisdata->Recruits;
    if ($my_count < $his_count)
      { $mydata->Bricks+= 12; $mydata->Gems+= 12; $mydata->Recruits+= 12; }
    else
    {
      $mydata->Bricks+= 6; $mydata->Gems+= 6; $mydata->Recruits+= 6;
      $hisdata->Bricks+= 6; $hisdata->Gems+= 6; $hisdata->Recruits+= 6;
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="457">
    <name>Chaos wizard</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>4</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage,Durable</keywords>
    <effect><![CDATA[Attack: 5<br />Discard a common card from hand]]></effect>
    <code><![CDATA[
    $this->Attack(5, $hisdata->Tower, $hisdata->Wall);
    $storage = array();
    for ($i = 1; $i <= 8; $i++)
      if (($i != $cardpos) AND ($carddb->GetCard($mydata->Hand[$i])->Class == 'Common'))
        $storage[] = $i;
    if (count($storage) > 0)
    {
      $dis_index = $storage[array_rand($storage)];
      $mydata->Hand[$dis_index] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
      $mydata->NewCards[$dis_index] = 1;
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="458">
    <name>Dark warrior</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Attack: Opponent's lowest resource (max 12, min 6)]]></effect>
    <code><![CDATA[$this->Attack(max(min($hisdata->Bricks, $hisdata->Gems, $hisdata->Recruits, 12), 6), $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="459">
    <name>Dark flame</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[Discard all common zero cost cards (can't draw rare cards)]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= 8; $i++)
      if ($i != $cardpos)
      {
        $cur_card = $carddb->GetCard($mydata->Hand[$i]);
        if (($cur_card->GetResources('') == 0) AND ($cur_card->Class == 'Common'))
        {
          $mydata->Hand[$i] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_norare');
          $mydata->NewCards[$i] = 1;
        }
      }
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($hisdata->Hand[$i]);
      if (($cur_card->GetResources('') == 0) AND ($cur_card->Class == 'Common'))
      {
        $hisdata->Hand[$i] = $this->DrawCard($his_deck, $hisdata->Hand, $i, 'DrawCard_norare');
        $hisdata->NewCards[$i] = 1;
      }
    }
]]></code>
    <created>2009-07-22</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="460">
    <name>Work in progress</name>
    <class>Common</class>
    <cost>
      <bricks>3</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic,Durable,Far sight</keywords>
    <effect><![CDATA[Tower: +3]]></effect>
    <code><![CDATA[$mydata->Tower+= 3;]]></code>
    <created>2009-07-22</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="461">
    <name>Avenging angel</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>25</gems>
      <recruits>30</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Banish</keywords>
    <effect><![CDATA[Attack: Max tower - Tower]]></effect>
    <code><![CDATA[$this->Attack($max_tower - $mydata->Tower, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2009-07-22</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="462">
    <name>Relic hunter</name>
    <class>Uncommon</class>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If #<b>Titan</b> in hand > 0<br />Discard all non-<b>Titan</b> cards from hand]]></effect>
    <code><![CDATA[
    if ($this->KeywordCount($mydata->Hand, "Titan") > 0)
      for ($i = 1; $i <= 8; $i++)
        if (($i != $cardpos) AND !$carddb->GetCard($mydata->Hand[$i])->HasKeyword('Titan'))
        {
          $mydata->Hand[$i] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
          $mydata->NewCards[$i] = 1;
        }
]]></code>
    <created>2009-07-22</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="463">
    <name>Fire elemental</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>20</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Rebirth,Enduring (8)</keywords>
    <effect><![CDATA[Attack: 17]]></effect>
    <code><![CDATA[$this->Attack(17, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="464">
    <name>Chimera</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>30</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Frenzy</keywords>
    <effect><![CDATA[Enemy tower: -20<br />Enemy wall: -20<br />Attack: 20]]></effect>
    <code><![CDATA[
    $hisdata->Tower-= 20; $hisdata->Wall-= 20;
    $this->Attack(20, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="465">
    <name>Merchant ship</name>
    <class>Uncommon</class>
    <cost>
      <bricks>7</bricks>
      <gems>7</gems>
      <recruits>7</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Lowest facility: +1<br />Lowest resource prod x3]]></effect>
    <code><![CDATA[
    $min = min($mydata->Quarry, $mydata->Magic, $mydata->Dungeons);
    $fac = array("Quarry" => $mydata->Quarry, "Magic" => $mydata->Magic, "Dungeons" => $mydata->Dungeons);
    $temp = array();
    foreach ($fac as $facility => $f_value)
      if ($f_value == $min) $temp[$facility] = $f_value;
    $chosen = array_rand($temp);
    $mydata->$chosen+= 1;
    $min = min($mydata->Bricks, $mydata->Gems, $mydata->Recruits);
    $res = array("Bricks" => $mydata->Bricks, "Gems" => $mydata->Gems, "Recruits" => $mydata->Recruits);
    $temp = array();
    foreach ($res as $resource => $r_value)
      if ($r_value == $min) $temp[$resource] = $r_value;
    $chosen = array_rand($temp);
    if ($chosen == 'Bricks') $bricks_production*= 3;
    elseif ($chosen == 'Gems') $gems_production*= 3;
    elseif ($chosen == 'Recruits') $recruits_production*= 3;
]]></code>
    <created>2009-07-22</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="466">
    <name>Oasis</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>3</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Player(s) with lowest wall gains<br />Stock: +6]]></effect>
    <code><![CDATA[
    if ($mydata->Wall <= $hisdata->Wall)
      { $mydata->Bricks+= 6; $mydata->Gems+= 6; $mydata->Recruits+= 6; }
    if ($mydata->Wall >= $hisdata->Wall)
      { $hisdata->Bricks+= 6; $hisdata->Gems+= 6; $hisdata->Recruits+= 6; }
]]></code>
    <created>2009-07-22</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="467">
    <name>Wind witch</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>20</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Mage,Swift</keywords>
    <effect><![CDATA[Attack: 18<br />Gems prod x3<br />Replace a card in opponent's hand with Wind]]></effect>
    <code><![CDATA[
    $this->Attack(18, $hisdata->Tower, $hisdata->Wall);
    $gems_production*= 3;
    $hisdata->Hand[$mode] = 247; $hisdata->NewCards[$mode] = 1;
]]></code>
    <created>2009-10-24</created>
    <modified>2009-12-24</modified>
  </card>
  <card id="468">
    <name>Strive for height</name>
    <class>Common</class>
    <cost>
      <bricks>4</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Wall is not divisible by 15<br />Wall is raised up to the next height that is divisible by 15]]></effect>
    <code><![CDATA[$mydata->Wall = ceil($mydata->Wall/15) * 15;]]></code>
    <created>2009-10-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="469">
    <name>Soul sacrifice</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>2</modes>
    <keywords/>
    <effect><![CDATA[Mode1:<br />Tower: -5<br />Stock: +4<br />Mode2:<br />Tower: -10<br />Stock: +8]]></effect>
    <code><![CDATA[
    if ($mode == 1) { $mydata->Tower-=5; $mydata->Bricks+= 4; $mydata->Gems+= 4; $mydata->Recruits+= 4; }
    elseif ($mode == 2) { $mydata->Tower-=10; $mydata->Bricks+= 8; $mydata->Gems+= 8; $mydata->Recruits+= 8; }
]]></code>
    <created>2009-10-24</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="470">
    <name>Dark templar</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Attack: 15<br />Discard all cards with cost below 10]]></effect>
    <code><![CDATA[
    $this->Attack(15, $hisdata->Tower, $hisdata->Wall);
    for ($i = 1; $i <= 8; $i++)
    {
      if (($i != $cardpos) AND ($carddb->GetCard($mydata->Hand[$i])->GetResources('') < 10))
      {
        $mydata->Hand[$i] = $this->DrawCard($my_deck, $mydata->Hand, $i, 'DrawCard_random');
        $mydata->NewCards[$i] = 1;
      }
      if ($carddb->GetCard($hisdata->Hand[$i])->GetResources('') < 10)
      {
        $hisdata->Hand[$i] = $this->DrawCard($his_deck, $hisdata->Hand, $i, 'DrawCard_random');
        $hisdata->NewCards[$i] = 1;
      }
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2009-10-24</modified>
  </card>
  <card id="471">
    <name>Mysterious egg</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons Griffin, Roc or Rainbow Dragon]]></effect>
    <code><![CDATA[$nextcard = $this->DrawCard(array(25, 202, 397), $mydata->Hand, $cardpos, 'DrawCard_list');]]></code>
    <created>2009-10-24</created>
    <modified>2009-10-24</modified>
  </card>
  <card id="472">
    <name>Pirate bay</name>
    <class>Uncommon</class>
    <cost>
      <bricks>25</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +10<br />Enemy stock: -3<br />Replace up to 3 non-<b>Brigand</b> non-rare cards in hand with non-common <b>Brigand</b>]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 10;
    $hisdata->Bricks-= 3; $hisdata->Gems-= 3; $hisdata->Recruits-= 3;
    $mydata->Hand[$cardpos] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
    $nextcard = 0; $storage = array();
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($mydata->Hand[$i]);
      if (!$cur_card->HasKeyword("Brigand") AND ($cur_card->Class != 'Rare'))
        $storage[] = $i;
    }
    if (count($storage) > 0)
    {
      shuffle($storage);
      $brigand_list = array_merge($carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Brigand")), $carddb->GetList(array('class'=>"Rare", 'keyword'=>"Brigand")));
      for ($i = 0; ($i < count($storage)) AND ($i < 3); $i++)
      {
        $mydata->Hand[$storage[$i]] = $this->DrawCard($brigand_list, $mydata->Hand, $cardpos, 'DrawCard_list');
        $mydata->NewCards[$storage[$i]] = 1;
      }
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2009-10-24</modified>
  </card>
  <card id="473">
    <name>Knight templar</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>27</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Soldier</keywords>
    <effect><![CDATA[Attack: 48<br />Won't lower enemy tower below 15]]></effect>
    <code><![CDATA[
    $tmp = min($hisdata->Tower, 15);
    $this->Attack(48, $hisdata->Tower, $hisdata->Wall); $hisdata->Tower = max($hisdata->Tower, $tmp);
]]></code>
    <created>2009-10-24</created>
    <modified>2009-10-24</modified>
  </card>
  <card id="474">
    <name>Market week</name>
    <class>Rare</class>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Replace your hand with Merchant, Caravan, Wealth, Merchant ship, Fair trade, Greed is good, Prosperity and Bank]]></effect>
    <code><![CDATA[
    $hand = array (273, 23, 129, 465, 432, 388, 456, 389); shuffle($hand);
    $newcards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1); $keys = array_keys($newcards);
    $mydata->Hand = array_combine($keys, $hand); $mydata->NewCards = $newcards; $nextcard = 0;
]]></code>
    <created>2009-10-24</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="475">
    <name>Wishing lagoon</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>3</modes>
    <keywords/>
    <effect><![CDATA[Summons<br />Mode1:<br />Pyramids<br />Mode2:<br />Gateway<br />Mode3:<br />Orc Regiment]]></effect>
    <code><![CDATA[
    if ($mode == 1) $nextcard = 87;
    elseif ($mode == 2) $nextcard = 118;
    elseif ($mode == 3) $nextcard = 89;
]]></code>
    <created>2009-10-24</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="476">
    <name>Doppelganger</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[If targeting self and not New, summons matching card, else replace a card in hand with self]]></effect>
    <code><![CDATA[
    if (!isset($mynewflags[$cardpos]) AND $mode == $cardpos)
      $nextcard = $hisdata->Hand[$cardpos];
    else
    {
      $mydata->Hand[$mode] = $card->ID;
      $mydata->NewCards[$mode] = 1;
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="477">
    <name>Trigger trap</name>
    <class>Common</class>
    <cost>
      <bricks>5</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Enemy tower: -3<br />If matching card is New and not New<br />Enemy tower: -5]]></effect>
    <code><![CDATA[
    if (!isset($mynewflags[$cardpos]) AND isset($hisnewflags[$cardpos])) $hisdata->Tower-=8;
    else $hisdata->Tower-=3;
]]></code>
    <created>2009-10-24</created>
    <modified>2009-10-26</modified>
  </card>
  <card id="478">
    <name>Renewal</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Adds New flag to the selected card in hand<br />Gems: +2]]></effect>
    <code><![CDATA[$mydata->NewCards[$mode] = 1; $mydata->Gems+= 2;]]></code>
    <created>2009-10-24</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="479">
    <name>Mirror golem</name>
    <class>Common</class>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion,Unliving</keywords>
    <effect><![CDATA[Attack based on matching card in opponent's hand (C-7, U-14, R-21)]]></effect>
    <code><![CDATA[
    $damage = array('Common' => 7, 'Uncommon' => 14, 'Rare' => 21);
    $this->Attack($damage[$carddb->GetCard($hisdata->Hand[$cardpos])->Class], $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2009-10-24</created>
    <modified>2009-12-24</modified>
  </card>
  <card id="480">
    <name>Ambush</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>4</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[If targeting self and not New, discard the matching card, else replace a card in hand with self]]></effect>
    <code><![CDATA[
    if (!isset($mynewflags[$cardpos]) AND $mode == $cardpos)
    {
      $hisdata->Hand[$cardpos] = $this->DrawCard($his_deck, $hisdata->Hand, $cardpos, 'DrawCard_different');
      $hisdata->NewCards[$cardpos] = 1;
    }
    else
    {
      $mydata->Hand[$mode] = $card->ID;
      $mydata->NewCards[$mode] = 1;
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="481">
    <name>Ghost rider</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion,Undead,Charge (1)</keywords>
    <effect><![CDATA[If Enemy wall > 20<br />Gems: +3<br />Always:<br />Attack: 7]]></effect>
    <code><![CDATA[
    if ($hisdata->Wall > 20) $mydata->Gems+= 3;
    $this->Attack(7, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2009-10-24</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="482">
    <name>Wicked Ritual</name>
    <class>Rare</class>
    <cost>
      <bricks>20</bricks>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Discard all <b>Titan</b> cards from hand<br />Attack: 30N<br />N = #unique discarded cards]]></effect>
    <code><![CDATA[
    $storage = array();
    for ($i = 1; $i <= 8; $i++)
    {
      if (($i != $cardpos) AND ($carddb->GetCard($mydata->Hand[$i])->HasKeyword("Titan")))
      {
        $storage[] = $mydata->Hand[$i];
        $mydata->Hand[$i] = $this->DrawCard($my_deck, $mydata->Hand, $i, 'DrawCard_random');
        $mydata->NewCards[$i] = 1;
      }
    }
    if (count($storage) > 0)
    {
      $storage = array_unique($storage);
      $discarded = count($storage);
      $this->Attack(30 * $discarded, $hisdata->Tower, $hisdata->Wall);
    }
]]></code>
    <created>2009-10-24</created>
    <modified>2009-10-24</modified>
  </card>
  <card id="483">
    <name>Mentor</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>2</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Magic: +1<br />Enemy magic: +1]]></effect>
    <code><![CDATA[$mydata->Magic+= 1; $hisdata->Magic+= 1;]]></code>
    <created>2009-10-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="484">
    <name>Treant sapling</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature</keywords>
    <effect><![CDATA[Enemy wall: -6<br />Attack: 5]]></effect>
    <code><![CDATA[$hisdata->Wall-= 6; $this->Attack(5, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2009-07-22</created>
    <modified>2009-07-22</modified>
  </card>
  <card id="485">
    <name>Undead cavalry</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>18</gems>
      <recruits>18</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Undead,Charge (16)</keywords>
    <effect><![CDATA[Attack: 29]]></effect>
    <code><![CDATA[$this->Attack(29, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2009-10-24</created>
    <modified>2009-10-24</modified>
  </card>
  <card id="486">
    <name>Magic sanctuary</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Player(s) with lowest gems gains<br />Gems: +6<br />His opponent gains<br />Gems: +2]]></effect>
    <code><![CDATA[
    if ($mydata->Gems < $hisdata->Gems) { $mydata->Gems+= 6; $hisdata->Gems+= 2; }
    elseif ($hisdata->Gems < $mydata->Gems) { $hisdata->Gems+= 6; $mydata->Gems+= 2; }
    else { $mydata->Gems+= 8; $hisdata->Gems+= 8; }
]]></code>
    <created>2009-10-24</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="487">
    <name>Moon shrine</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Players gain 1 stock for each zero cost card and lose 1 stock for each non zero cost card in their hand]]></effect>
    <code><![CDATA[
    $my_gain = $his_gain = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      if ($i != $cardpos)
      {
        if ($carddb->GetCard($mydata->Hand[$i])->GetResources('') == 0) $my_gain++;
        else $my_gain--;
      }
      if ($carddb->GetCard($hisdata->Hand[$i])->GetResources('') == 0) $his_gain++;
      else $his_gain--;
    }
    $mydata->Bricks+= $my_gain; $mydata->Gems+= $my_gain; $mydata->Recruits+= $my_gain;
    $hisdata->Bricks+= $his_gain; $hisdata->Gems+= $his_gain; $hisdata->Recruits+= $his_gain;
]]></code>
    <created>2009-10-24</created>
    <modified>2010-02-27</modified>
  </card>
  <card id="488">
    <name>Gate guardian</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>16</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 24<br />Wall: +16]]></effect>
    <code><![CDATA[$this->Attack(24, $hisdata->Tower, $hisdata->Wall); $mydata->Wall+= 16;]]></code>
    <created>2009-10-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="489">
    <name>Imp cache</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +4<br />Highest resource: -3<br />Lowest resource: +4]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 4;
    $max = max($mydata->Bricks, $mydata->Gems, $mydata->Recruits);
    $res = array("Bricks" => $mydata->Bricks, "Gems" => $mydata->Gems, "Recruits" => $mydata->Recruits);
    $temp_max = array();
    foreach ($res as $resource => $r_value)
      if ($r_value == $max) $temp_max[$resource] = $r_value;
    $chosen_max = array_rand($temp_max);
    $mydata->$chosen_max-= 3;
    $min = min($mydata->Bricks, $mydata->Gems, $mydata->Recruits);
    $res = array("Bricks" => $mydata->Bricks, "Gems" => $mydata->Gems, "Recruits" => $mydata->Recruits);
    $temp_min = array();
    foreach ($res as $resource => $r_value)
      if ($r_value == $min) $temp_min[$resource] = $r_value;
    $chosen_min = array_rand($temp_min);
    $mydata->$chosen_min+= 4;
]]></code>
    <created>2009-10-24</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="490">
    <name>Magic portal</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Replace a card in hand with uncommon card from your deck<br />Summons selected card]]></effect>
    <code><![CDATA[
    if ($mode != $cardpos)
    {
      $nextcard = $mydata->Hand[$mode];
      $mydata->Hand[$mode] = $this->DrawCard($my_deck->Uncommon, $mydata->Hand, $cardpos, 'DrawCard_list');
      $mydata->NewCards[$mode] = 1;
    }
    else $nextcard = $this->DrawCard($my_deck->Uncommon, $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2009-10-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="491">
    <name>Dark pegasus</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>13</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Swift</keywords>
    <effect><![CDATA[If Wall > Enemy wall<br />Enemy tower: -8<br />else<br />Gems prod x2]]></effect>
    <code><![CDATA[
    if ($mydata->Wall > $hisdata->Wall) $hisdata->Tower-= 8;
    else $gems_production*= 2;
]]></code>
    <created>2009-11-16</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="492">
    <name>Lighthouse</name>
    <class>Uncommon</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Tower: +13]]></effect>
    <code><![CDATA[$mydata->Tower+= 13;]]></code>
    <created>2010-01-20</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="493">
    <name>Oracle</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Gems: +#revealed cards in opponent's hand (max 4)]]></effect>
    <code><![CDATA[
    $tmp = 0;
    for ($i = 1; $i <= 8; $i++)
      if (!$hidden_cards OR isset($hisdata->Revealed[$i])) $tmp++;
    $tmp = min($tmp, 4); $mydata->Gems+= $tmp;
]]></code>
    <created>2010-01-20</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="494">
    <name>Scepter of evolution</name>
    <class>Uncommon</class>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Replace your hand with 4 commons, 3 uncommons and 1 rare from your deck]]></effect>
    <code><![CDATA[
    $trans = array('Common', 'Common', 'Common', 'Common', 'Uncommon', 'Uncommon', 'Uncommon', 'Rare');
    shuffle($trans);
    for ($i = 1; $i <= 8; $i++)
      $mydata->Hand[$i] = $this->DrawCard($my_deck->$trans[$i-1], $mydata->Hand, $i, 'DrawCard_list');
    $mydata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1); $nextcard = 0;
]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="495">
    <name>Globe of Myr</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Durable</keywords>
    <effect><![CDATA[Production x0<br />Replace a card in hand with <b>Swift</b>]]></effect>
    <code><![CDATA[
    $bricks_production = 0; $gems_production = 0; $recruits_production = 0;
    $mydata->Hand[$mode] = $this->DrawCard($carddb->GetList(array('keyword'=>"Swift")), $mydata->Hand, $cardpos, 'DrawCard_list');
    $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2010-01-20</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="496">
    <name>Spring wood</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature,Restoration</keywords>
    <effect><![CDATA[Wall: +3<br />If opponent lowered your stock last round<br />Production x2]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 3;
    if ($mychanges['Bricks'] < 0 or $mychanges['Gems'] < 0 or $mychanges['Recruits'] < 0)
      { $bricks_production*= 2; $gems_production*= 2; $recruits_production*= 2; }
]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="497">
    <name>Elemental storm</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>13</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Replace matching card in opponent's hand and its neigbouring cards with Wind]]></effect>
    <code><![CDATA[
    $hisdata->Hand[$cardpos] = 247; $hisdata->NewCards[$cardpos] = 1;
    if ($cardpos > 1)
      { $hisdata->Hand[$cardpos - 1] = 247; $hisdata->NewCards[$cardpos - 1] = 1; }
    if ($cardpos < 8)
      { $hisdata->Hand[$cardpos + 1] = 247; $hisdata->NewCards[$cardpos + 1] = 1; }
]]></code>
    <created>2010-01-20</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="498">
    <name>Thief hideout</name>
    <class>Uncommon</class>
    <cost>
      <bricks>20</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +10<br />Wall: +15<br />Enemy stock: -3]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 10; $mydata->Wall+= 15;
    $hisdata->Bricks-= 3; $hisdata->Gems-= 3; $hisdata->Recruits-= 3;
]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="499">
    <name>Citadel of Myr</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>38</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower x2]]></effect>
    <code><![CDATA[$mydata->Tower*= 2;]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="500">
    <name>Forest dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>36</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon,Nature</keywords>
    <effect><![CDATA[Attack: 10N<br />N = #<b>Nature</b> in game]]></effect>
    <code><![CDATA[$this->Attack(10 * ($this->KeywordCount($mydata->Hand, "Nature") + $this->KeywordCount($hisdata->Hand, "Nature")), $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2010-01-20</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="501">
    <name>Secret temple</name>
    <class>Common</class>
    <cost>
      <bricks>4</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>3</modes>
    <keywords/>
    <effect><![CDATA[Mode1:<br />Wall: +6<br />Mode2:<br />Gems: +4<br />Mode3:<br />Enemy recruits: -3]]></effect>
    <code><![CDATA[
    if ($mode == 1) $mydata->Wall+= 6;
    elseif ($mode == 2) $mydata->Gems+= 4;
    elseif ($mode == 3) $hisdata->Recruits-= 3;
]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="502">
    <name>Orc brute</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde,Siege</keywords>
    <effect><![CDATA[Enemy tower: -3<br />Enemy wall: -4]]></effect>
    <code><![CDATA[$hisdata->Tower-= 3; $hisdata->Wall-= 4;]]></code>
    <created>2010-01-20</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="503">
    <name>Temple guard</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Soldier</keywords>
    <effect><![CDATA[Wall: +5<br />If #<b>Holy</b> in hand > 1<br />Tower: +3<br />If #<b>Soldier</b> in hand > 1<br />Attack: 5]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 5;
    if ($this->KeywordCount($mydata->Hand, "Holy") > 1) $mydata->Tower+= 3;
    if ($this->KeywordCount($mydata->Hand, "Soldier") > 1) $this->Attack(5, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="504">
    <name>Piranhas</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Skirmisher</keywords>
    <effect><![CDATA[Attack: 1<br />If New<br />Attack: 4]]></effect>
    <code><![CDATA[$this->Attack(((isset($mynewflags[$cardpos])) ? 5 : 1), $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2010-01-20</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="505">
    <name>Kraken</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>25</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Attack: 25<br />Enemy highest facility: -1]]></effect>
    <code><![CDATA[$this->Attack(25, $hisdata->Tower, $hisdata->Wall);
    $max = max($hisdata->Quarry, $hisdata->Magic, $hisdata->Dungeons);
    $fac = array("Quarry" => $hisdata->Quarry, "Magic" => $hisdata->Magic, "Dungeons" => $hisdata->Dungeons);
    $temp_max = array();
    foreach ($fac as $facility => $f_value)
      if ($f_value == $max) $temp_max[$facility] = $f_value;
    $chosen_max = array_rand($temp_max);
    $hisdata->$chosen_max-= 1;
]]></code>
    <created>2010-01-20</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="506">
    <name>Water dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>30</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Dragon</keywords>
    <effect><![CDATA[Attack: 40<br />Stock: +10]]></effect>
    <code><![CDATA[
      $this->Attack(40, $hisdata->Tower, $hisdata->Wall);
      $mydata->Bricks+= 10; $mydata->Gems+= 10; $mydata->Recruits+= 10;
]]></code>
    <created>2010-01-20</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="507">
    <name>Sea lord</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Far sight</keywords>
    <effect><![CDATA[Attack: 20<br />Gems: +15<br />Recruits: +15]]></effect>
    <code><![CDATA[
    $this->Attack(20, $hisdata->Tower, $hisdata->Wall);
    $mydata->Gems+= 15; $mydata->Recruits+= 15;
]]></code>
    <created>2010-01-20</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="508">
    <name>Javeliner</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>7</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Enemy tower is not divisible by 10<br />Enemy tower is lowered to the next height that is divisible by 10]]></effect>
    <code><![CDATA[$hisdata->Tower = floor($hisdata->Tower/10) * 10;]]></code>
    <created>2010-01-20</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="509">
    <name>Breeze</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Gain 1 random resource for each New card in game]]></effect>
    <code><![CDATA[
    $count = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      if (isset($mynewflags[$i])) $count++;
      if (isset($hisnewflags[$i])) $count++;
    }
    for ($i = 1; $i <= $count; $i++)
    {
      $tmp = mt_rand(0,2);
      if ($tmp == 0) $mydata->Bricks++;
      elseif ($tmp == 1) $mydata->Gems++;
      elseif ($tmp == 2) $mydata->Recruits++;
    }
]]></code>
    <created>2010-01-20</created>
    <modified>2010-01-20</modified>
  </card>
  <card id="510">
    <name>Master hunter</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>13</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[Attack: 13<br />Wall: +2N<br />Enemy recruits: -N<br />N = recruits cost of highest cost <b>Beast</b>, <b>Frenzy</b> or <b>Horde</b> in opponent's hand]]></effect>
    <code><![CDATA[$this->Attack(13, $hisdata->Tower, $hisdata->Wall);
    $max = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($hisdata->Hand[$i]);
      if ($cur_card->HasKeyword("Beast") or $cur_card->HasKeyword("Frenzy") or $cur_card->HasKeyword("Horde"))
        $max = max($max, $cur_card->GetResources("Recruits"));
    }
    $mydata->Wall+= $max * 2;
    $hisdata->Recruits-= $max;
]]></code>
    <created>2010-01-20</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="511">
    <name>Farm</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +2<br />Wall: +2<br />If last card was discarded<br />Stock: +4]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 2; $mydata->Wall+= 2;
    if ($mylast_action == "discard")
      { $mydata->Bricks+= 4; $mydata->Gems+= 4; $mydata->Recruits+= 4; }
]]></code>
    <created>2010-01-20</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="512">
    <name>Reinforced gate</name>
    <class>Common</class>
    <cost>
      <bricks>7</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Wall < Tower<br />Wall: +12<br />else<br />Wall: +6]]></effect>
    <code><![CDATA[if ($mydata->Wall < $mydata->Tower) $mydata->Wall+= 12; else $mydata->Wall+= 6;]]></code>
    <created>2010-03-14</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="513">
    <name>Veteran militia</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Quick</keywords>
    <effect><![CDATA[Replace a card in hand with a card of the same rarity (can't summon self)]]></effect>
    <code><![CDATA[
    $class = $carddb->GetCard($mydata->Hand[$mode])->Class;
    $mydata->Hand[$mode] = $this->DrawCard(array_diff($my_deck->$class, array($card->ID, $mydata->Hand[$mode])), $mydata->Hand, $cardpos, 'DrawCard_list');
    $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2010-03-14</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="514">
    <name>Firestorm</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>26</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Destruction</keywords>
    <effect><![CDATA[Player(s) with fewest <b>Burning</b> cards gains<br />Stock: -10<br />Respective player suffers 1 damage for each resource lost]]></effect>
    <code><![CDATA[
    $my_count = $this->KeywordCount($mydata->Hand, "Burning");
    $his_count = $this->KeywordCount($hisdata->Hand, "Burning");
    $res = array('Bricks', 'Gems', 'Recruits');
    $my_dmg = $his_dmg = 0;
    if ($my_count <= $his_count)
      foreach ($res as $resource)
      {
        $lowered = $mydata->$resource - max($mydata->$resource - 10, 0);
        $mydata->$resource-= $lowered;
        $my_dmg+= $lowered;
      }
    if ($my_count >= $his_count)
      foreach ($res as $resource)
      {
        $lowered = $hisdata->$resource - max($hisdata->$resource - 10, 0);
        $hisdata->$resource-= $lowered;
        $his_dmg+= $lowered;
      }
    if ($my_dmg > 0) $this->Attack($my_dmg, $mydata->Tower, $mydata->Wall);
    if ($his_dmg > 0) $this->Attack($his_dmg, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-03-14</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="515">
    <name>Koschei the Deathless</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Legend,Undead,Durable</keywords>
    <effect><![CDATA[Attack: 20]]></effect>
    <code><![CDATA[$this->Attack(20, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="516">
    <name>Frozen flame</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[If last card played was <b>Burning</b><br />Returns half of its cost (max 5)]]></effect>
    <code><![CDATA[
    if (($mylast_card->HasKeyword("Burning")) and ($mylast_action == 'play'))
    {
      $mydata->Bricks+= min(round($mylast_card->GetResources("Bricks") / 2), 5);
      $mydata->Gems+= min(round($mylast_card->GetResources("Gems") / 2), 5);
      $mydata->Recruits+= min(round($mylast_card->GetResources("Recruits") / 2), 5);
    }
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="517">
    <name>Cockatrice</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>25</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast</keywords>
    <effect><![CDATA[Attack: 20<br />Bricks: +N<br />N = #Enemy recruits / 2<br />Enemy recruits: = 0]]></effect>
    <code><![CDATA[
    $this->Attack(20, $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks+= round($hisdata->Recruits / 2); $hisdata->Recruits = 0;
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="518">
    <name>Thieves guild</name>
    <class>Common</class>
    <cost>
      <bricks>5</bricks>
      <gems>0</gems>
      <recruits>2</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +3<br />Enemy stock: -1<br />Summons a <b>Brigand</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 3;
    $hisdata->Bricks-= 1; $hisdata->Gems-= 1; $hisdata->Recruits-= 1;
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Brigand")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="519">
    <name>Lake fairy</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Nature</keywords>
    <effect><![CDATA[Gems: +N<br />N = #<b>Nature</b> in hand (max 4)<br />Replace a card in hand with common <b>Nature</b>]]></effect>
    <code><![CDATA[
    $mydata->Gems+= min($this->KeywordCount($mydata->Hand, "Nature"), 4);
    $mydata->Hand[$mode] = $this->DrawCard($carddb->GetList(array('class'=>"Common", 'keyword'=>"Nature")), $mydata->Hand, $cardpos, 'DrawCard_list');
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2010-03-14</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="520">
    <name>Desert outpost</name>
    <class>Uncommon</class>
    <cost>
      <bricks>17</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +5<br />Wall: +10<br />Gems: +5<br />Recruits: +5]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 5; $mydata->Wall+= 10;
    $mydata->Gems+= 5; $mydata->Recruits+= 5;
]]></code>
    <created>2010-03-14</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="521">
    <name>Mermaid</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Enemy tower: -2<br />Enemy wall: -2<br />Enemy stock: -2]]></effect>
    <code><![CDATA[
    $hisdata->Tower-= 2; $hisdata->Wall-= 2;
    $hisdata->Bricks-= 2; $hisdata->Gems-= 2; $hisdata->Recruits-= 2;
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="522">
    <name>Sunken ruins</name>
    <class>Common</class>
    <cost>
      <bricks>3B</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Tower: +N / 2<br />Wall: +N<br />N = #<b>Aqua</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Aqua");
    $mydata->Tower+= round($tmp/2); $mydata->Wall+= $tmp;
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="523">
    <name>Whale</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>30</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Enemy tower: -10<br />Enemy wall: -10<br />Enemy stock: -10]]></effect>
    <code><![CDATA[
    $hisdata->Tower-= 10; $hisdata->Wall-= 10;
    $hisdata->Bricks-= 10; $hisdata->Gems-= 10; $hisdata->Recruits-= 10;
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="524">
    <name>Sea serpent</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Siege</keywords>
    <effect><![CDATA[If Enemy wall = 0<br />Enemy stock: -7<br />else<br />Enemy tower: -3<br />Enemy wall: -7]]></effect>
    <code><![CDATA[
    if ($hisdata->Wall == 0)
      { $hisdata->Bricks-= 7; $hisdata->Gems-= 7; $hisdata->Recruits-= 7; }
    else
      { $hisdata->Tower-= 3; $hisdata->Wall-= 7; }
]]></code>
    <created>2010-03-14</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="525">
    <name>Poseidon's wrath</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>30</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Player(s) with fewest <b>Aqua</b> in hand gains<br />Tower: -15<br />Wall: -15<br />Stock: -10]]></effect>
    <code><![CDATA[
    $my_count = $this->KeywordCount($mydata->Hand, "Aqua");
    $his_count = $this->KeywordCount($hisdata->Hand, "Aqua");
    if ($my_count <= $his_count)
    {
      $mydata->Tower-= 15;
      $mydata->Wall-= 15;
      $mydata->Bricks-= 10;
      $mydata->Gems-= 10;
      $mydata->Recruits-= 10;
    }
    if ($my_count >= $his_count)
    {
      $hisdata->Tower-= 15;
      $hisdata->Wall-= 15;
      $hisdata->Bricks-= 10;
      $hisdata->Gems-= 10;
      $hisdata->Recruits-= 10;
    }
]]></code>
    <created>2010-03-14</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="526">
    <name>Princess of elves</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Stock: +5<br />Summons a rare card from opponent's deck]]></effect>
    <code><![CDATA[
    $mydata->Bricks+= 5; $mydata->Gems+= 5; $mydata->Recruits+= 5;
    $nextcard = $this->DrawCard($his_deck->Rare, $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2010-03-14</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="527">
    <name>Elven priestesses</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance,Holy</keywords>
    <effect><![CDATA[Lowest facility prod x2]]></effect>
    <code><![CDATA[
    $min = min($mydata->Quarry, $mydata->Magic, $mydata->Dungeons);
    $fac = array("Quarry" => $mydata->Quarry, "Magic" => $mydata->Magic, "Dungeons" => $mydata->Dungeons);
    $temp = array();
    foreach ($fac as $facility => $f_value)
      if ($f_value == $min) $temp[$facility] = $f_value;
    $chosen = array_rand($temp);
    if ($chosen == 'Quarry') $bricks_production*= 2;
    elseif ($chosen == 'Magic') $gems_production*= 2;
    elseif ($chosen == 'Dungeons') $recruits_production*= 2;
]]></code>
    <created>2010-03-14</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="528">
    <name>Legacy of Barbz</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Replace a card in hand of player(s) with most common cards with a rare card from his deck]]></effect>
    <code><![CDATA[
    $my_storage = $his_storage = array();
    for ($i = 1; $i <= 8; $i++)
    {
      if ($carddb->GetCard($mydata->Hand[$i])->Class == 'Common') $my_storage[] = $i;
      if ($carddb->GetCard($hisdata->Hand[$i])->Class == 'Common') $his_storage[] = $i;
    }
    if ((count($my_storage) > 0) AND (count($my_storage) >= count($his_storage)))
    {
      $pos = $my_storage[array_rand($my_storage)];
      $mydata->Hand[$pos] = $this->DrawCard($my_deck->Rare, $mydata->Hand, $pos, 'DrawCard_list');
      $mydata->NewCards[$pos] = 1;
    }
    if ((count($his_storage) > 0) AND (count($my_storage) <= count($his_storage)))
    {
      $pos = $his_storage[array_rand($his_storage)];
      $hisdata->Hand[$pos] = $this->DrawCard($his_deck->Rare, $hisdata->Hand, $pos, 'DrawCard_list');
      $hisdata->NewCards[$pos] = 1;
    }
]]></code>
    <created>2010-03-14</created>
    <modified>2011-01-24</modified>
  </card>
  <card id="529">
    <name>Waterfall</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Wall: -5<br />Stock: +3]]></effect>
    <code><![CDATA[
    $mydata->Wall-= 5;
    $mydata->Bricks+= 3; $mydata->Gems+= 3; $mydata->Recruits+= 3;
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="530">
    <name>Ocean queen</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Attack: 40<br />If last card played was an <b>Aqua</b><br />Bonus attack based on card rarity (C-10, U-25, R-50)]]></effect>
    <code><![CDATA[
    if (($mylast_card->HasKeyword("Aqua")) and ($mylast_action == 'play'))
    {
      $dmg = array('Common' => 10, 'Uncommon' => 25, 'Rare' => 50);
      $bonus = $dmg[$mylast_card->Class];
    }
    else $bonus = 0;
    $this->Attack(40 + $bonus, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="531">
    <name>Exiled</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Brigand</keywords>
    <effect><![CDATA[Attack: 7<br />If #<b>Aqua</b> in opponent's hand > 0<br />Enemy stock: -3]]></effect>
    <code><![CDATA[
    $this->Attack(7, $hisdata->Tower, $hisdata->Wall);
    $tmp = $this->KeywordCount($hisdata->Hand, "Aqua");
    if ($tmp > 0) { $hisdata->Bricks-= 3; $hisdata->Gems-= 3; $hisdata->Recruits-= 3; }
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="532">
    <name>Pixie</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Players gain 1 stock for each common card and lose 1 stock for each non-common card in their hand]]></effect>
    <code><![CDATA[
    $my_gain = $his_gain = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      if ($carddb->GetCard($mydata->Hand[$i])->Class == 'Common') $my_gain++;
      else $my_gain--;
      if ($carddb->GetCard($hisdata->Hand[$i])->Class == 'Common') $his_gain++;
      else $his_gain--;
    }
    $mydata->Bricks+= $my_gain; $mydata->Gems+= $my_gain; $mydata->Recruits+= $my_gain;
    $hisdata->Bricks+= $his_gain; $hisdata->Gems+= $his_gain; $hisdata->Recruits+= $his_gain;
]]></code>
    <created>2010-03-14</created>
    <modified>2010-03-14</modified>
  </card>
  <card id="533">
    <name>Chaos gargoyle</name>
    <class>Common</class>
    <cost>
      <bricks>6</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic,Unliving,Durable</keywords>
    <effect><![CDATA[Attack: 5<br />Discard a common card from hand<br />If discarded card wasn't <b>Unliving</b><br />Wall: +5]]></effect>
    <code><![CDATA[
    $this->Attack(5, $hisdata->Tower, $hisdata->Wall);
    $storage = array();
    for ($i = 1; $i <= 8; $i++)
      if (($i != $cardpos) AND ($carddb->GetCard($mydata->Hand[$i])->Class == 'Common'))
        $storage[] = $i;
    if (count($storage) > 0)
    {
      $dis_index = $storage[array_rand($storage)];
      if (!$carddb->GetCard($mydata->Hand[$dis_index])->HasKeyword("Unliving")) $mydata->Wall+= 5;
      $mydata->Hand[$dis_index] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_random');
      $mydata->NewCards[$dis_index] = 1;
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="534">
    <name>Sniper</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier,Far sight</keywords>
    <effect><![CDATA[Attack: 6<br />If #<b>Quick</b> + #<b>Swift</b> in opponent's hand > 0<br />Enemy tower: -6]]></effect>
    <code><![CDATA[
    $this->Attack(6, $hisdata->Tower, $hisdata->Wall);
    if (($this->KeywordCount($hisdata->Hand, "Quick") > 0) OR ($this->KeywordCount($hisdata->Hand, "Swift") > 0))
      $hisdata->Tower-= 6;
]]></code>
    <created>2010-06-21</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="535">
    <name>Urk the Conqueror</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>30</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Durable,Banish</keywords>
    <effect><![CDATA[If last card played was a non-common <b>Barbarian</b><br />Enemy wall: -20<br />Always:<br />Attack: 35]]></effect>
    <code><![CDATA[
    if (($mylast_card->HasKeyword("Barbarian")) and ($mylast_action == 'play') AND ($mylast_card->Class != 'Common'))
      $hisdata->Wall-= 20;
    $this->Attack(35, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="536">
    <name>Rage of Urk</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>18</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Frenzy</keywords>
    <effect><![CDATA[If New<br />Enemy wall: -13<br />Always:<br />Attack: 22]]></effect>
    <code><![CDATA[
    if (isset($mynewflags[$cardpos])) $hisdata->Wall-= 13;
    $this->Attack(22, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="537">
    <name>Minaret</name>
    <class>Common</class>
    <cost>
      <bricks>5</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Player(s) with fewest different keywords in hand gains +10 tower]]></effect>
    <code><![CDATA[
    $mine = $this->CountDistinctKeywords($mydata->Hand);
    $his = $this->CountDistinctKeywords($hisdata->Hand);
    if ($mine <= $his) $mydata->Tower+= 10;
    if ($mine >= $his) $hisdata->Tower+= 10;
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="538">
    <name>Forest guardian</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Nature</keywords>
    <effect><![CDATA[Attack: #<b>Beast</b> + #<b>Nature</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Beast") + $this->KeywordCount($mydata->Hand, "Nature");
    $this->Attack($tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="539">
    <name>Book of life</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>4</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature</keywords>
    <effect><![CDATA[Summons a <b>Beast</b> or a <b>Nature</b><br />If New<br />non-common<br />else<br />non-rare]]></effect>
    <code><![CDATA[
    $tmp = (isset($mynewflags[$cardpos])) ? 'Rare' : 'Common';
    $uncommon_b = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Beast"));
    $other_b = $carddb->GetList(array('class'=>$tmp, 'keyword'=>"Beast"));
    $uncommon_n = $carddb->GetList(array('class'=>"Uncommon", 'keyword'=>"Nature"));
    $other_n = $carddb->GetList(array('class'=>$tmp, 'keyword'=>"Nature"));
    $nextcard = $this->DrawCard(array_unique(array_merge($uncommon_b, $other_b, $uncommon_n, $other_n)), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="540">
    <name>White lady</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Player(s) with highest tower gains +2 stock]]></effect>
    <code><![CDATA[
    if ($mydata->Tower >= $hisdata->Tower)
      { $mydata->Bricks+= 2; $mydata->Gems+= 2; $mydata->Recruits+= 2; }
    if ($mydata->Tower <= $hisdata->Tower)
      { $hisdata->Bricks+= 2; $hisdata->Gems+= 2; $hisdata->Recruits+= 2; }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="541">
    <name>Forest spirit</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Nature</keywords>
    <effect><![CDATA[Attack: 12 + N<br />Wall: +2N<br />N = #<b>Beast</b> + #<b>Nature</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Beast") + $this->KeywordCount($mydata->Hand, "Nature");
    $this->Attack(12 + $tmp, $hisdata->Tower, $hisdata->Wall); $mydata->Wall+= 2 * $tmp;
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="542">
    <name>Seth</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>15</gems>
      <recruits>15</recruits>
    </cost>
    <modes>3</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Mode1:<br />Enemy tower: -20<br />Mode2:<br />Enemy wall: -50<br />Mode3:<br />Enemy stock: -15]]></effect>
    <code><![CDATA[
    if ($mode == 1) $hisdata->Tower-=20;
    elseif ($mode == 2) $hisdata->Wall-= 50;
    elseif ($mode == 3) { $hisdata->Bricks-= 15; $hisdata->Gems-= 15; $hisdata->Recruits-= 15; }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="543">
    <name>Deathwood shaman</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>12</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature,Undead</keywords>
    <effect><![CDATA[Stock: +2N<br />Enemy wall: -6M<br />N = #<b>Nature</b> in hand<br />M = #<b>Undead</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Undead");
    $hisdata->Wall-= 6* $tmp;
    $tmp = $this->KeywordCount($mydata->Hand, "Nature");
    $mydata->Bricks+= 2 * $tmp; $mydata->Gems+= 2 * $tmp; $mydata->Recruits+= 2 * $tmp;
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="544">
    <name>Black unicorn</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>16</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Legend,Banish</keywords>
    <effect><![CDATA[If #rare cards in hand > 0<br />Attack: 15<br />else<br />Attack: 25]]></effect>
    <code><![CDATA[
    $found = false;
    for ($i = 1; $i <= 8; $i++)
      if ($carddb->GetCard($mydata->Hand[$i])->Class == "Rare") $found = true;
    $this->Attack(((!$found) ? 25 : 15), $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="545">
    <name>Elven marksman</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Gems prod x2<br />Enemy tower: -N<br />Attack: 8 - N<br />N = #<b>Alliance</b> in hand]]></effect>
    <code><![CDATA[
    $gems_production*= 2;
    $tmp = $this->KeywordCount($mydata->Hand, "Alliance");
    $hisdata->Tower-= $tmp;
    if ($tmp < 8) $this->Attack(8 - $tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-06-21</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="546">
    <name>Dwarven elder</name>
    <class>Rare</class>
    <cost>
      <bricks>12</bricks>
      <gems>12</gems>
      <recruits>12</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Attack: N<br />Wall: +3N<br />N = sum of all facilities in game]]></effect>
    <code><![CDATA[
    $facilities = $mydata->Quarry + $mydata->Magic + $mydata->Dungeons + $hisdata->Quarry + $hisdata->Magic + $hisdata->Dungeons;
    $this->Attack($facilities, $hisdata->Tower, $hisdata->Wall);
    $mydata->Wall+= 3*$facilities;
]]></code>
    <created>2010-06-21</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="547">
    <name>Flame lord</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>15</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Far sight</keywords>
    <effect><![CDATA[Attack: 25<br />Summons Eternal flame]]></effect>
    <code><![CDATA[$this->Attack(25, $hisdata->Tower, $hisdata->Wall); $nextcard = 336;]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="548">
    <name>War wolf</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Horde</keywords>
    <effect><![CDATA[Attack: 8<br />Recruits: +6]]></effect>
    <code><![CDATA[$this->Attack(8, $hisdata->Tower, $hisdata->Wall); $mydata->Recruits+= 6;]]></code>
    <created>2010-06-21</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="549">
    <name>Goblin regiment</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Attack: 30<br />Replace all common cards in hand with Goblin flankers<br />Recruits: +2N<br />N = #replaced cards]]></effect>
    <code><![CDATA[
    $this->Attack(30, $hisdata->Tower, $hisdata->Wall); $tmp = 0;
    for ($i = 1; $i <= 8; $i++)
      if (($i != $cardpos) AND ($carddb->GetCard($mydata->Hand[$i])->Class == 'Common'))
        { $mydata->Hand[$i] = 13; $mydata->NewCards[$i] = 1; $tmp++; }
    $mydata->Recruits+= $tmp * 2;
]]></code>
    <created>2010-06-21</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="550">
    <name>Sea priestess</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Restoration</keywords>
    <effect><![CDATA[Summons an <b>Aqua</b><br />If last card played was an <b>Aqua</b><br />Stock: +1]]></effect>
    <code><![CDATA[
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Aqua")), $mydata->Hand, $cardpos, 'DrawCard_list');
    if (($mylast_card->HasKeyword("Aqua")) and ($mylast_action == 'play'))
      { $mydata->Bricks+= 1; $mydata->Gems+= 1; $mydata->Recruits+= 1; }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="551">
    <name>Spectral siren</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Undead</keywords>
    <effect><![CDATA[Attack: 12<br />Enemy recruits: -2N<br />N = #<b>Aqua</b> in hand]]></effect>
    <code><![CDATA[
    $this->Attack(12, $hisdata->Tower, $hisdata->Wall);
    $tmp = $this->KeywordCount($mydata->Hand, "Aqua");
    $hisdata->Recruits-= 2 * $tmp;
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="552">
    <name>Leviathan</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>30</gems>
      <recruits>50</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Enemy tower: -80<br />Enemy wall: -100]]></effect>
    <code><![CDATA[$hisdata->Tower-= 80; $hisdata->Wall-= 100;]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="553">
    <name>Hidden lagoon</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Wall: +N / 2<br />Stock: +N / 3<br />N = #<b>Aqua</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Aqua");
    $tmp_stock = (int)round($tmp / 3); $mydata->Wall+= (int)round($tmp / 2);
    $mydata->Bricks+= $tmp_stock; $mydata->Gems+= $tmp_stock; $mydata->Recruits+= $tmp_stock;
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="554">
    <name>Northern fortress</name>
    <class>Uncommon</class>
    <cost>
      <bricks>35</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +40<br />If matching card is New or New<br />Tower: +20]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 40;
    if (isset($mynewflags[$cardpos]) OR isset($hisnewflags[$cardpos])) $mydata->Tower+= 20;
]]></code>
    <created>2010-06-21</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="555">
    <name>Trickster</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>3</gems>
      <recruits>3</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Opponent's tokens are destroyed<br />Gain 1 random resource for each 10 destroyed tokens of the same kind]]></effect>
    <code><![CDATA[
    $tmp = 0;
    foreach ($hisdata->TokenValues as $i => $value)
      if ($value > 0)
        { $tmp+= floor($value / 10); $hisdata->TokenValues[$i] = 0; }
    if ($tmp > 0)
      for ($i = 1; $i <= $tmp; $i++)
      {
        $type = mt_rand(0,2);
        if ($type == 0) $mydata->Bricks++;
        elseif ($type == 1) $mydata->Gems++;
        elseif ($type == 2) $mydata->Recruits++;
      }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="556">
    <name>Dwarven watchtower</name>
    <class>Common</class>
    <cost>
      <bricks>8</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Tower: +6<br />Summons <b>Runic</b> of the same rarity as matching card]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 6;
    $rarity = $carddb->GetCard($hisdata->Hand[$cardpos])->Class;
    $nextcard = $this->DrawCard($carddb->GetList(array('class'=>$rarity, 'keyword'=>"Runic")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2010-06-21</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="557">
    <name>Confusion</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Stock: +4<br />Replace a card in opponent's hand with a rare card from your deck]]></effect>
    <code><![CDATA[
    $mydata->Bricks+= 4; $mydata->Gems+= 4; $mydata->Recruits+= 4;
    $hisdata->Hand[$mode] = $this->DrawCard($my_deck->Rare, $hisdata->Hand, $cardpos, 'DrawCard_list');
    $hisdata->NewCards[$mode] = 1;
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="558">
    <name>Magic spring</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Gain 1 random resource for each different keyword in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->CountDistinctKeywords($mydata->Hand);
    if ($tmp > 0)
      for ($i = 1; $i <= $tmp; $i++)
      {
        $type = mt_rand(0,2);
        if ($type == 0) $mydata->Bricks++;
        elseif ($type == 1) $mydata->Gems++;
        elseif ($type == 2) $mydata->Recruits++;
      }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="559">
    <name>River thief</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>4</gems>
      <recruits>4</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Brigand</keywords>
    <effect><![CDATA[Attack: 4<br />Enemy stock: -2<br />If #<b>Aqua</b> in hand > 2<br />Stock: +2]]></effect>
    <code><![CDATA[
    $this->Attack(4, $hisdata->Tower, $hisdata->Wall);
    $hisdata->Bricks-= 2; $hisdata->Gems-= 2; $hisdata->Recruits-= 2;
    if ($this->KeywordCount($mydata->Hand, "Aqua") > 2)
      { $mydata->Bricks+= 2; $mydata->Gems+= 2; $mydata->Recruits+= 2; }
]]></code>
    <created>2010-06-21</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="560">
    <name>Sea gate</name>
    <class>Uncommon</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Far sight</keywords>
    <effect><![CDATA[Wall: +15<br />Discard highest rarity <b>Aqua</b> from opponent's hand]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 15;
    $storage = array("Common" => array(), "Uncommon" => array(), "Rare" => array());
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($hisdata->Hand[$i]);
      $rarity = $cur_card->Class;
      if ($cur_card->HasKeyword("Aqua")) $storage[$rarity][] = $i;
    }
    if ((count($storage['Common']) + count($storage['Uncommon']) + count($storage['Rare'])) > 0)
    {
      shuffle($storage['Common']); shuffle($storage['Uncommon']); shuffle($storage['Rare']);
      $storage_temp = array_merge($storage['Common'], $storage['Uncommon'], $storage['Rare']);
      $discarded_pos = array_pop($storage_temp);
      $hisdata->Hand[$discarded_pos] = $this->DrawCard($his_deck, $hisdata->Hand, $discarded_pos, 'DrawCard_different');
      $hisdata->NewCards[$discarded_pos] = 1;
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="561">
    <name>Arcane bolt</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Destruction</keywords>
    <effect><![CDATA[Enemy stock: -2<br />If <b>Mage</b> tokens > 60<br />Enemy stock: -3]]></effect>
    <code><![CDATA[
    $tmp = array_search("Mage", $mydata->TokenNames);
    $reduction = ($tmp AND $mydata->TokenValues[$tmp] > 60) ? 5 : 2;
    $hisdata->Bricks-= $reduction; $hisdata->Gems-= $reduction; $hisdata->Recruits-= $reduction;
]]></code>
    <created>2010-06-21</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="562">
    <name>Divine guidance</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Mode1:<br />Wall: +10<br />Mode2:<br />Recruits: +7]]></effect>
    <code><![CDATA[
    if ($mode == 1) $mydata->Wall+= 10; elseif ($mode == 2) $mydata->Recruits+= 7;
]]></code>
    <created>2010-06-21</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="563">
    <name>Lancer</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Soldier,Banish,Skirmisher</keywords>
    <effect><![CDATA[Attack: 10<br />Discard all <b>Quick</b> and <b>Swift</b> from opponent's hand]]></effect>
    <code><![CDATA[
    $this->Attack(10, $hisdata->Tower, $hisdata->Wall);
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $carddb->GetCard($hisdata->Hand[$i]);
      if ($cur_card->HasKeyword("Quick") OR $cur_card->HasKeyword("Swift"))
      {
        $hisdata->Hand[$i] = $this->DrawCard($his_deck, $hisdata->Hand, $i, 'DrawCard_random');
        $hisdata->NewCards[$i] = 1;
      }
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="564">
    <name>Summon master</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage</keywords>
    <effect><![CDATA[If <b>Mage</b> tokens > 50<br />Summons a <b>Legend</b><br /><b>Mage</b> tokens = 0<br />else<br /><b>Mage</b> tokens: +40]]></effect>
    <code><![CDATA[
    $tmp = array_search("Mage", $mydata->TokenNames);
    if ($tmp)
    {
      if ($mydata->TokenValues[$tmp] > 50)
      {
        $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Legend")), $mydata->Hand, $cardpos, 'DrawCard_list');
        $mydata->TokenValues[$tmp] = 0;
      }
      else $mydata->TokenValues[$tmp]+= 40;
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-07-22</modified>
  </card>
  <card id="565">
    <name>Titan's worshipper</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>10</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons a <b>Titan</b> not present in hand]]></effect>
    <code><![CDATA[
    $titans = array_diff($carddb->GetList(array('keyword'=>"Titan")), $mydata->Hand);
    if (count($titans) > 0) $nextcard = $this->DrawCard($titans, $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="566">
    <name>Wheat farm</name>
    <class>Common</class>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Stock: +2N<br />N = #Wheat farm in hand]]></effect>
    <code><![CDATA[
    $tmp = 0;
    for ($i = 1; $i <= 8; $i++)
      if ($mydata->Hand[$i] == 566) $tmp++;
    $tmp = 2*$tmp;
    $mydata->Bricks+= $tmp; $mydata->Gems+= $tmp; $mydata->Recruits+= $tmp;
]]></code>
    <created>2010-06-21</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="567">
    <name>Jungle river</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Aqua,Nature</keywords>
    <effect><![CDATA[Recruits: +3<br />Enemy wall: -3<br />Replace a card in hand with Piranhas]]></effect>
    <code><![CDATA[
    $mydata->Recruits+= 3;
    $hisdata->Wall-= 3; $mydata->Hand[$mode] = 504;
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2010-06-21</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="568">
    <name>Flesh golem</name>
    <class>Common</class>
    <cost>
      <bricks>8</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Undead,Unliving</keywords>
    <effect><![CDATA[Attack: 6<br />Wall: +4<br />Mode1:<br />Bricks: +8<br />Mode2:<br />Recruits: +6]]></effect>
    <code><![CDATA[
    $this->Attack(6, $hisdata->Tower, $hisdata->Wall); $mydata->Wall+= 4;
    if ($mode == 1) $mydata->Bricks+=8; elseif ($mode == 2) $mydata->Recruits+= 6;
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="569">
    <name>Dream shift</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>9</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Replace your hand with cards from your deck of the same rarity as replaced cards]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= 8; $i++)
      if ($i != $cardpos)
      {
        $rarity = $carddb->GetCard($mydata->Hand[$i])->Class;
        $mydata->Hand[$i] = $this->DrawCard(array_diff($my_deck->$rarity, array(569, $mydata->Hand[$i])), $mydata->Hand, $i, 'DrawCard_list');
      }
    $mydata->NewCards = array(1=> 1, 1, 1, 1, 1, 1, 1, 1);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="570">
    <name>Swamp</name>
    <class>Common</class>
    <cost>
      <bricks>4</bricks>
      <gems>3</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Skirmisher</keywords>
    <effect><![CDATA[Wall: +8<br />Enemy stock: -1]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 8;
    $hisdata->Bricks-= 1; $hisdata->Gems-= 1; $hisdata->Recruits-= 1;
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="571">
    <name>Flame obelisk</name>
    <class>Uncommon</class>
    <cost>
      <bricks>12</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +15<br />Replace neighbouring cards with <b>Burning</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 15;
    if ($cardpos > 1)
    {
      $mydata->Hand[$cardpos - 1] = $this->DrawCard($carddb->GetList(array('keyword'=>"Burning")), $mydata->Hand, $cardpos, 'DrawCard_list');
      $mydata->NewCards[$cardpos - 1] = 1;
    }
    if ($cardpos < 8)
    {
      $mydata->Hand[$cardpos + 1] = $this->DrawCard($carddb->GetList(array('keyword'=>"Burning")), $mydata->Hand, $cardpos, 'DrawCard_list');
      $mydata->NewCards[$cardpos + 1] = 1;
    }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="572">
    <name>Stables</name>
    <class>Common</class>
    <cost>
      <bricks>4</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +2<br />Wall: +4<br />If <b>Soldier</b> tokens are set<br />Summons a <b>Soldier</b> with <b>Charge</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 2; $mydata->Wall+= 4;
    if (array_search("Soldier", $mydata->TokenNames))
      {
        $soldier = $carddb->GetList(array('keyword'=>"Soldier"));
        $charge = $carddb->GetList(array('keyword'=>"Charge"));
        $nextcard = $this->DrawCard(array_intersect($soldier, $charge), $mydata->Hand, $cardpos, 'DrawCard_list');
      }
]]></code>
    <created>2010-06-21</created>
    <modified>2010-06-21</modified>
  </card>
  <card id="573">
    <name>Laputa the Flying fortress</name>
    <class>Rare</class>
    <cost>
      <bricks>18</bricks>
      <gems>18</gems>
      <recruits>18</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower = Max tower - Tower<br />If Wall > 35<br />Wall = Max wall - Wall]]></effect>
    <code><![CDATA[
    $mydata->Tower = $max_tower - $mydata->Tower;
    if ($mydata->Wall > 35) $mydata->Wall = $max_wall - $mydata->Wall;
]]></code>
    <created>2010-06-21</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="574">
    <name>Alucard</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight,Banish,Skirmisher</keywords>
    <effect><![CDATA[Attack: 35<br />If #different keywords in hand > #different keywords in opponent's hand<br />Attack: 30]]></effect>
    <code><![CDATA[
    $tmp = ($this->CountDistinctKeywords($mydata->Hand) > $this->CountDistinctKeywords($hisdata->Hand)) ? 65 : 35;
    $this->Attack($tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-06-21</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="575">
    <name>Chateau</name>
    <class>Common</class>
    <cost>
      <bricks>10</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[If Tower < 15 or Wall < 15<br />Tower: +5<br />Wall: +12<br />else<br />Tower: +3<br />Wall: +8]]></effect>
    <code><![CDATA[
    if ($mydata->Tower < 15 OR $mydata->Wall < 15)
      { $mydata->Tower+= 5; $mydata->Wall+= 12; }
    else
      { $mydata->Tower+= 3; $mydata->Wall+= 8; }
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="576">
    <name>Necroent</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>20</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature,Undead</keywords>
    <effect><![CDATA[Enemy wall: -23<br />Attack: 15<br />If #<b>Nature</b> in hand > 4<br />Recruits: +20<br />If #<b>Undead</b> in hand > 4<br />Gems: +20]]></effect>
    <code><![CDATA[
    $hisdata->Wall-= 23; $this->Attack(15, $hisdata->Tower, $hisdata->Wall);
    if ($this->KeywordCount($mydata->Hand, 'Nature') > 4) $mydata->Recruits+= 20;
    if ($this->KeywordCount($mydata->Hand, 'Undead') > 4) $mydata->Gems+= 20;
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="577">
    <name>Seiryu</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>50</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Attack: 10N<br />N = #Magic + #Enemy magic]]></effect>
    <code><![CDATA[
    $tmp = $mydata->Magic + $hisdata->Magic;
    $this->Attack(10 * $tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="578">
    <name>Deathwood necromancer</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature,Undead</keywords>
    <effect><![CDATA[Gems: +#<b>Undead</b> in hand (max 4)<br />Recruits: +#<b>Nature</b> in hand (max 4)]]></effect>
    <code><![CDATA[
    $mydata->Gems+= min(4, $this->KeywordCount($mydata->Hand, 'Undead'));
    $mydata->Recruits+= min(4, $this->KeywordCount($mydata->Hand, 'Nature'));
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="579">
    <name>Citadel towers</name>
    <class>Uncommon</class>
    <cost>
      <bricks>17</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Far sight</keywords>
    <effect><![CDATA[If Tower < Wall<br />Tower: +25<br />else<br />Tower: +12]]></effect>
    <code><![CDATA[if ($mydata->Tower < $mydata->Wall) $mydata->Tower+= 25; else $mydata->Tower+= 12;]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="580">
    <name>Wizard's tower</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>3</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +N<br />N = 3 + #Magic]]></effect>
    <code><![CDATA[$mydata->Tower+= 3 + $mydata->Magic;]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="581">
    <name>Mountain berserker</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[Attack: 7<br />Stock: +2]]></effect>
    <code><![CDATA[
    $this->Attack(7, $hisdata->Tower, $hisdata->Wall);
    $mydata->Bricks+= 2; $mydata->Gems+= 2; $mydata->Recruits+= 2;
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="582">
    <name>Magical defense</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>7</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[Wall: +7<br />Bricks: +5]]></effect>
    <code><![CDATA[$mydata->Wall+= 7; $mydata->Bricks+= 5;]]></code>
    <created>2010-09-10</created>
    <modified>2010-10-03</modified>
  </card>
  <card id="583">
    <name>Moon castle</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Players gain 1 stock for each non-keyword card and lose 1 stock for each different keyword in their hand]]></effect>
    <code><![CDATA[
    $mine = $his = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      if (!$carddb->GetCard($mydata->Hand[$i])->HasKeyword('any')) $mine++;
      if (!$carddb->GetCard($hisdata->Hand[$i])->HasKeyword('any')) $his++;
    }
    $my_gain = $mine - $this->CountDistinctKeywords($mydata->Hand);
    $his_gain = $his - $this->CountDistinctKeywords($hisdata->Hand);
    $mydata->Bricks+= $my_gain; $mydata->Gems+= $my_gain; $mydata->Recruits+= $my_gain;
    $hisdata->Bricks+= $his_gain; $hisdata->Gems+= $his_gain; $hisdata->Recruits+= $his_gain;
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="584">
    <name>Chaos dwarf</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>3</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Replace a card in hand with self<br />Raises tower and wall based on replaced card rarity (C-2, U-5, R-10)]]></effect>
    <code><![CDATA[
    $rarities = array('Common' => 2, 'Uncommon' => 5, 'Rare' => 10);
    $cur_rarity = $carddb->GetCard($mydata->Hand[$mode])->Class;
    $mydata->Tower+= $rarities[$cur_rarity];
    $mydata->Wall+= $rarities[$cur_rarity];
    $mydata->Hand[$mode] = $card->ID;
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2010-09-10</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="585">
    <name>Barbz's pupil</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Brigand</keywords>
    <effect><![CDATA[Summons selected non-rare card in opponent's hand]]></effect>
    <code><![CDATA[if ($carddb->GetCard($hisdata->Hand[$mode])->Class != 'Rare') $nextcard = $hisdata->Hand[$mode];]]></code>
    <created>2010-09-10</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="586">
    <name>Mithril miner</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Highest facility prod x2]]></effect>
    <code><![CDATA[
    $max = max($mydata->Quarry, $mydata->Magic, $mydata->Dungeons);
    $fac = array("Quarry" => $mydata->Quarry, "Magic" => $mydata->Magic, "Dungeons" => $mydata->Dungeons);
    $temp = array();
    foreach ($fac as $facility => $f_value)
      if ($f_value == $max) $temp[$facility] = $f_value;
    $chosen = array_rand($temp);
    if ($chosen == 'Quarry') $bricks_production*= 2;
    elseif ($chosen == 'Magic') $gems_production*= 2;
    elseif ($chosen == 'Dungeons') $recruits_production*= 2;
]]></code>
    <created>2010-09-10</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="587">
    <name>Working together</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +#common cards in hand]]></effect>
    <code><![CDATA[
    $tmp = 0;
    for ($i = 1; $i <= 8; $i++)
      if ($carddb->GetCard($mydata->Hand[$i])->Class == 'Common') $tmp++;
    $mydata->Tower+= $tmp;
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="588">
    <name>Harvest fairy</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Replace a card in hand with Wheat farm]]></effect>
    <code><![CDATA[
    $mydata->Hand[$mode] = 566;
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2010-09-10</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="589">
    <name>Librarian</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>7</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Mage</keywords>
    <effect><![CDATA[Attack: 3<br /><b>Mage</b> tokens: +30]]></effect>
    <code><![CDATA[
    $this->Attack(3, $hisdata->Tower, $hisdata->Wall);
    $tmp = array_search("Mage", $mydata->TokenNames);
    if ($tmp) $mydata->TokenValues[$tmp]+= 30;
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-23</modified>
  </card>
  <card id="590">
    <name>Golem Messenger</name>
    <class>Common</class>
    <cost>
      <bricks>9</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Tower: +4<br />Wall: +6<br />Summons <b>Unliving</b>]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 4; $mydata->Wall+= 6;
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Unliving")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="591">
    <name>Colossus of Kran</name>
    <class>Rare</class>
    <cost>
      <bricks>40</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Unliving,Siege</keywords>
    <effect><![CDATA[Attack: 30 + 4N<br />Quarry: +N / 2<br />N = #<b>Unliving</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Unliving");
    $this->Attack(30 + 4 * $tmp, $hisdata->Tower, $hisdata->Wall);
    $mydata->Quarry+= round($tmp/2);
]]></code>
    <created>2010-09-10</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="592">
    <name>Eternal dream</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>4</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Illusion</keywords>
    <effect><![CDATA[If last card played was a rare<br />Summons a rare card]]></effect>
    <code><![CDATA[
    if ($mylast_card->Class == "Rare")
      $nextcard = $this->DrawCard($carddb->GetList(array('class'=>"Rare")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="593">
    <name>Witch rider</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>20</gems>
      <recruits>12</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Gems: +8<br />If #<b>Far sight</b> in hand > 0<br />Enemy tower: -18<br />else<br />Attack: 20]]></effect>
    <code><![CDATA[
    $mydata->Gems+= 8;
    if ($this->KeywordCount($mydata->Hand, "Far sight") > 0) $hisdata->Tower-= 18;
    else $this->Attack(20, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-09-10</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="594">
    <name>Desert traveler</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Attack: 8<br />Opponent loses 14 random resources<br />Replace matching card with Caravan]]></effect>
    <code><![CDATA[
    $this->Attack(8, $hisdata->Tower, $hisdata->Wall);
    for ($i = 1; $i <= 14; $i++)
    {
      $tmp = mt_rand(0,2);
      if ($tmp == 0) $hisdata->Bricks--;
      elseif ($tmp == 1) $hisdata->Gems--;
      elseif ($tmp == 2) $hisdata->Recruits--;
    }
    $hisdata->Hand[$cardpos] = 23; $hisdata->NewCards[$cardpos] = 1;
]]></code>
    <created>2010-09-10</created>
    <modified>2010-11-01</modified>
  </card>
  <card id="595">
    <name>Thug</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>4</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Opponent loses 5 random resources<br />Replace non-rare matching card with Palisade]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= 5; $i++)
    {
      $tmp = mt_rand(0,2);
      if ($tmp == 0) $hisdata->Bricks--;
      elseif ($tmp == 1) $hisdata->Gems--;
      elseif ($tmp == 2) $hisdata->Recruits--;
    }
    if ($carddb->GetCard($hisdata->Hand[$cardpos])->Class != "Rare")
      { $hisdata->Hand[$cardpos] = 297; $hisdata->NewCards[$cardpos] = 1; }
]]></code>
    <created>2010-09-10</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="596">
    <name>Myr's academy</name>
    <class>Rare</class>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Replace your hand with Red mage, Conjurer, Wizard, Chaos wizard, Librarian, Summon master, Sorceress and Wind witch<br />Gems prod x3]]></effect>
    <code><![CDATA[
    $hand = array (329, 82, 457, 589, 109, 564, 53, 467); shuffle($hand);
    $newcards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1); $keys = array_keys($newcards);
    $mydata->Hand = array_combine($keys, $hand); $mydata->NewCards = $newcards;
    $nextcard = 0; $gems_production*= 3;
]]></code>
    <created>2010-09-10</created>
    <modified>2010-09-10</modified>
  </card>
  <card id="597">
    <name>Fireball</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>4</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Siege</keywords>
    <effect><![CDATA[Attack: 3 + N / 10<br />N = <b>Mage</b> tokens<br />If Enemy tower > 45<br />Enemy tower: -5]]></effect>
    <code><![CDATA[
    $tmp = array_search("Mage", $mydata->TokenNames);
    $dmg = ($tmp) ? round($mydata->TokenValues[$tmp]/10) : 0;
    $this->Attack(3 + $dmg, $hisdata->Tower, $hisdata->Wall);
    if ($hisdata->Tower > 45) $hisdata->Tower-= 5;
]]></code>
    <created>2010-09-10</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="598">
    <name>Urk's tribe</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Charge (2)</keywords>
    <effect><![CDATA[Attack: 8 <br />You lose 6 random resources]]></effect>
    <code><![CDATA[
    $this->Attack(8, $hisdata->Tower, $hisdata->Wall);
    for ($i = 1; $i <= 6; $i++)
    {
      $tmp = mt_rand(0,2);
      if ($tmp == 0) $mydata->Bricks--;
      elseif ($tmp == 1) $mydata->Gems--;
      elseif ($tmp == 2) $mydata->Recruits--;
    }
]]></code>
    <created>2010-09-10</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="599">
    <name>Elven warlock</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>24</gems>
      <recruits>18</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance,Mage</keywords>
    <effect><![CDATA[Attack: 8N<br />N = #Magic<br />Gems prod x6<br />]]></effect>
    <code><![CDATA[
    $this->Attack(8*$mydata->Magic, $hisdata->Tower, $hisdata->Wall);
    $gems_production*= 6;
]]></code>
    <created>2010-10-03</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="600">
    <name>Battle rager</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>16</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Skirmisher,Frenzy</keywords>
    <effect><![CDATA[If #<b>Frenzy</b> in hand > 1<br />Attack: 10<br />else<br />Attack: 21]]></effect>
    <code><![CDATA[
    $tmp = ($this->KeywordCount($mydata->Hand, "Frenzy") > 1) ? 10 : 21;
    $this->Attack($tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2010-10-03</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="601">
    <name>Whirlwind</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Quick</keywords>
    <effect><![CDATA[Enemy wall: -3<br />Enemy stock: -1<br />Shuffles your hand]]></effect>
    <code><![CDATA[
    $hisdata->Wall-= 3;
    $hisdata->Bricks-= 1; $hisdata->Gems-= 1; $hisdata->Recruits-= 1;
    $mydata->Hand[$cardpos] = $this->DrawCard($my_deck, $mydata->Hand, $cardpos, 'DrawCard_norare');
    $nextcard = 0; $hand = $mydata->Hand; shuffle($hand);
    $newcards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1); $keys = array_keys($newcards);
    $mydata->Hand = array_combine($keys, $hand); $mydata->NewCards = $newcards;
]]></code>
    <created>2010-10-03</created>
    <modified>2010-10-03</modified>
  </card>
  <card id="602">
    <name>Northern mountains</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Wall: +15<br />Enemy wall: +15<br />Summons a <b>Barbarian</b>]]></effect>
    <code><![CDATA[
    $mydata->Wall+= 15; $hisdata->Wall+= 15;
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Barbarian")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2010-10-03</created>
    <modified>2010-10-03</modified>
  </card>
  <card id="603">
    <name>Wolf mistress</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Beast,Frenzy</keywords>
    <effect><![CDATA[Attack: 6<br />Summons <b>Frenzy</b>]]></effect>
    <code><![CDATA[
    $this->Attack(6, $hisdata->Tower, $hisdata->Wall);
    $nextcard = $this->DrawCard($carddb->GetList(array('keyword'=>"Frenzy")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2010-10-03</created>
    <modified>2010-10-03</modified>
  </card>
  <card id="604">
    <name>Byakko</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>20</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Durable</keywords>
    <effect><![CDATA[Dungeon: +1<br />Attack: 10N<br />N = #Dungeon - #Enemy dungeon<br />Recruits prod x0]]></effect>
    <code><![CDATA[
    $mydata->Dungeons+= 1; $tmp = max(0, $mydata->Dungeons - $hisdata->Dungeons);
    $this->Attack(10*$tmp, $hisdata->Tower, $hisdata->Wall); $recruits_production = 0;
]]></code>
    <created>2010-10-03</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="605">
    <name>Reinforcements</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Recruits prod x0<br />Replace a card in hand with Recruits only no support keyword attack card]]></effect>
    <code><![CDATA[
    $recruits_production = 0;
    $mydata->Hand[$mode] = $this->DrawCard($carddb->GetList(array('cost'=>"Green", 'advanced'=>"Attack:", 'support'=>"No keywords")), $mydata->Hand, $mode, 'DrawCard_list');
    if ($mode == $cardpos) $nextcard = 0;
    else $mydata->NewCards[$mode] = 1;
]]></code>
    <created>2010-10-03</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="606">
    <name>Poison frog</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>2</gems>
      <recruits>3</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Quick</keywords>
    <effect><![CDATA[Attack: 2<br />Enemy recruits: -1]]></effect>
    <code><![CDATA[$this->Attack(2, $hisdata->Tower, $hisdata->Wall); $hisdata->Recruits-= 1;]]></code>
    <created>2010-10-03</created>
    <modified>2010-10-03</modified>
  </card>
  <card id="607">
    <name>Fire fox</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>3</gems>
      <recruits>3</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Burning</keywords>
    <effect><![CDATA[Gems: +#<b>Burning</b> in game (max 7)<br />Recruits: +#<b>Beast</b> in hand (max 7)]]></effect>
    <code><![CDATA[
    $mydata->Gems+= min(7, $this->KeywordCount($mydata->Hand, "Burning") + $this->KeywordCount($hisdata->Hand, "Burning"));
    $mydata->Recruits+= min(7, $this->KeywordCount($mydata->Hand, "Beast"));
]]></code>
    <created>2010-10-03</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="608">
    <name>Purifying fire</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning,Holy</keywords>
    <effect><![CDATA[Players discard all non-rare cards not from their deck (can't draw rare cards)]]></effect>
    <code><![CDATA[
    $my_cards = array_merge($my_deck->Common, $my_deck->Uncommon);
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $mydata->Hand[$i];
      if ($carddb->GetCard($cur_card)->Class != "Rare" AND !in_array($cur_card, $my_cards) AND $i != $cardpos)
      {
        $mydata->Hand[$i] = $this->DrawCard($my_deck, $mydata->Hand, $i, 'DrawCard_norare');
        $mydata->NewCards[$i] = 1;
      }
    }
    $his_cards = array_merge($his_deck->Common, $his_deck->Uncommon);
    for ($i = 1; $i <= 8; $i++)
    {
      $cur_card = $hisdata->Hand[$i];
      if ($carddb->GetCard($cur_card)->Class != "Rare" AND !in_array($cur_card, $his_cards))
      {
        $hisdata->Hand[$i] = $this->DrawCard($his_deck, $hisdata->Hand, $i, 'DrawCard_norare');
        $hisdata->NewCards[$i] = 1;
      }
    }
]]></code>
    <created>2010-10-03</created>
    <modified>2010-12-24</modified>
  </card>
  <card id="609">
    <name>Warhound</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>4</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Soldier,Charge (2)</keywords>
    <effect><![CDATA[Wall: +6]]></effect>
    <code><![CDATA[$mydata->Wall+= 6;]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="610">
    <name>Succubus</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[Attack: 14<br />Discard a non-rare card from opponent's hand<br />Summons the discarded card]]></effect>
    <code><![CDATA[
    $this->Attack(14, $hisdata->Tower, $hisdata->Wall);
    if ($carddb->GetCard($hisdata->Hand[$mode])->Class != "Rare")
    {
      $nextcard = $hisdata->Hand[$mode];
      $hisdata->Hand[$mode] = $this->DrawCard($his_deck, $hisdata->Hand, $mode, 'DrawCard_different');
      $hisdata->NewCards[$mode] = 1;
    }
]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="611">
    <name>Infinite weapon works</name>
    <class>Rare</class>
    <cost>
      <bricks>1</bricks>
      <gems>1</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Durable</keywords>
    <effect><![CDATA[Production x0<br />Recruits: +20]]></effect>
    <code><![CDATA[
    $bricks_production = 0; $gems_production = 0; $recruits_production = 0;
    $mydata->Recruits+= 20;
]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="612">
    <name>Corrupted woods</name>
    <class>Rare</class>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Nature,Undead</keywords>
    <effect><![CDATA[Wall: +5N<br />Enemy wall: -5M<br />Stock: +(N + M)<br />N = #<b>Nature</b> in hand<br />M = #<b>Undead</b> in hand]]></effect>
    <code><![CDATA[
    $nature = $this->KeywordCount($mydata->Hand, "Nature");
    $undead = $this->KeywordCount($mydata->Hand, "Undead");
    $tmp = $nature + $undead;
    $mydata->Wall+= 5*$nature; $hisdata->Wall-= 5*$undead;
    $mydata->Bricks+= $tmp; $mydata->Gems+= $tmp; $mydata->Recruits+= $tmp;
]]></code>
    <created>2011-01-01</created>
    <modified>2011-02-12</modified>
  </card>
  <card id="613">
    <name>Atlantis</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Replace your hand with Mermaid, Hidden lagoon, Sea priestess, Sea gate, Sea lord, Kraken, Ocean queen and Water dragon]]></effect>
    <code><![CDATA[
    $hand = array (521, 553, 550, 560, 507, 505, 530, 506); shuffle($hand);
    $newcards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1); $keys = array_keys($newcards);
    $mydata->Hand = array_combine($keys, $hand); $mydata->NewCards = $newcards; $nextcard = 0;
]]></code>
    <created>2011-01-01</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="614">
    <name>Crystal cavern</name>
    <class>Rare</class>
    <cost>
      <bricks>15</bricks>
      <gems>15</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Facilities: +2]]></effect>
    <code><![CDATA[$mydata->Quarry+= 2; $mydata->Magic+= 2; $mydata->Dungeons+= 2;]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="615">
    <name>Ancient dragon</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>18</gems>
      <recruits>18</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Attack: 45<br />Mode1:<br />Magic: +1<br />Mode2:<br />Dungeon: +1]]></effect>
    <code><![CDATA[
    $this->Attack(45, $hisdata->Tower, $hisdata->Wall);
    if ($mode == 1) $mydata->Magic+= 1; elseif ($mode == 2) $mydata->Dungeons+= 1;
]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="616">
    <name>Genbu</name>
    <class>Rare</class>
    <cost>
      <bricks>30</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Unliving</keywords>
    <effect><![CDATA[Attack: 10N<br />Tower: +10M<br />N = #Quarry<br />M = #Enemy quarry]]></effect>
    <code><![CDATA[
    $this->Attack(10 * $mydata->Quarry, $hisdata->Tower, $hisdata->Wall);
    $mydata->Tower+= 10 * $hisdata->Quarry;
]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="617">
    <name>Dwarven forge</name>
    <class>Uncommon</class>
    <cost>
      <bricks>15</bricks>
      <gems>12</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Lowest facility: +2]]></effect>
    <code><![CDATA[
    $min = min($mydata->Quarry, $mydata->Magic, $mydata->Dungeons);
    $fac = array("Quarry" => $mydata->Quarry, "Magic" => $mydata->Magic, "Dungeons" => $mydata->Dungeons);
    $temp = array();
    foreach ($fac as $facility => $f_value)
      if ($f_value == $min) $temp[$facility] = $f_value;
    $chosen = array_rand($temp);
    $mydata->$chosen+= 2;
]]></code>
    <created>2011-01-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="618">
    <name>Dwarven guard</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>16</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Attack: 10<br />If matching card is not New<br />Attack: 15]]></effect>
    <code><![CDATA[
    $tmp = (isset($hisnewflags[$cardpos])) ? 10 : 25;
    $this->Attack($tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2011-01-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="619">
    <name>Dwarven wall</name>
    <class>Common</class>
    <cost>
      <bricks>6</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Wall: +N<br />N = #Facilities]]></effect>
    <code><![CDATA[$mydata->Wall+= $mydata->Quarry + $mydata->Magic + $mydata->Dungeons;]]></code>
    <created>2011-01-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="620">
    <name>Wish</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Discard your hand and draw new starting hand]]></effect>
    <code><![CDATA[
    $mydata->Hand = $this->DrawHand_initial($my_deck);
    $mydata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1); $nextcard = 0;
]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="621">
    <name>Warpriest</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>9</gems>
      <recruits>9</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Holy,Mage</keywords>
    <effect><![CDATA[Attack: 6 + 2N<br />N = #Magic + #Dungeon]]></effect>
    <code><![CDATA[
    $tmp = $mydata->Magic + $mydata->Dungeons;
    $this->Attack(6 + 2 * $tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="622">
    <name>Dragon nest</name>
    <class>Rare</class>
    <cost>
      <bricks>11</bricks>
      <gems>11</gems>
      <recruits>11</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Magic: +1<br />Dungeon: +1<br />Summons a rare <b>Dragon</b>]]></effect>
    <code><![CDATA[
    $mydata->Magic+= 1; $mydata->Dungeons+= 1;
    $nextcard = $this->DrawCard($carddb->GetList(array('class'=>"Rare", 'keyword'=>"Dragon")), $mydata->Hand, $cardpos, 'DrawCard_list');
]]></code>
    <created>2011-01-01</created>
    <modified>2011-01-01</modified>
  </card>
  <card id="623">
    <name>Reunion of the tribes</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Recruits x2<br />Enemy wall: +120<br />Replace your hand with Marauder, Tarkhan, Berserker, Gladiator, Warchief, Devastator, Warlord and Urk the Conqueror]]></effect>
    <code><![CDATA[
    $mydata->Recruits = $mydata->Recruits * 2; $hisdata->Wall+= 120;
    $hand = array (45, 334, 281, 68, 344, 345, 337, 535); shuffle($hand);
    $newcards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1); $keys = array_keys($newcards);
    $mydata->Hand = array_combine($keys, $hand); $mydata->NewCards = $newcards; $nextcard = 0;
]]></code>
    <created>2011-01-01</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="624">
    <name>Dwarven dome</name>
    <class>Common</class>
    <cost>
      <bricks>7</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[If Tower < 50<br />Tower: +7<br />else<br />Wall: +9]]></effect>
    <code><![CDATA[if ($mydata->Tower < 50) $mydata->Tower+= 7; else $mydata->Wall+= 9;]]></code>
    <created>2011-04-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="625">
    <name>Shifting mass</name>
    <class>Common</class>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Summons highest cost card in game]]></effect>
    <code><![CDATA[
    $high = $costs = array();
    $max = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      if ($i != $cardpos)
      {
        $cur_cost = $costs[$i] = $carddb->GetCard($mydata->Hand[$i])->GetResources("");
        if ($cur_cost > $max) $max = $cur_cost;
      }
      $cur_cost = $costs[$i + 8] = $carddb->GetCard($hisdata->Hand[$i])->GetResources("");
      if ($cur_cost > $max) $max = $cur_cost;
    }
    for ($i = 1; $i <= 8; $i++)
    {
      if ($i != $cardpos and $costs[$i] == $max) $high[] = $mydata->Hand[$i];
      if ($costs[$i + 8] == $max) $high[] = $hisdata->Hand[$i];
    }
    $nextcard = $high[array_rand($high)];
]]></code>
    <created>2011-04-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="626">
    <name>Petrify</name>
    <class>Common</class>
    <cost>
      <bricks>2</bricks>
      <gems>2</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Tower: +3<br />Replace a non-<b>Unliving</b> card in hand with <b>Unliving</b> card of the same rarity]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 3;
    $selected = $carddb->GetCard($mydata->Hand[$mode]);
    if (!$selected->HasKeyword("Unliving"))
    {
      $mydata->Hand[$mode] = $this->DrawCard($carddb->GetList(array('class'=>$selected->Class, 'keyword'=>"Unliving")), $mydata->Hand, $mode, 'DrawCard_list');
      $mydata->NewCards[$mode] = 1;
    }
]]></code>
    <created>2011-04-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="627">
    <name>Shadow wolf</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Illusion</keywords>
    <effect><![CDATA[Attack: 4<br />Discard highest rarity discarding or replacing non-rare card from opponent's hand]]></effect>
    <code><![CDATA[
    $this->Attack(4, $hisdata->Tower, $hisdata->Wall);
    $storage = array("Common" => array(), "Uncommon" => array());
    $target_cards = array_merge($carddb->GetList(array('advanced'=>"Discard ")), $carddb->GetList(array('advanced'=>"Replace ")));
    
    for ($i = 1; $i <= 8; $i++)
      if (in_array($hisdata->Hand[$i], $target_cards))
      {
        $dis_card = $carddb->GetCard($hisdata->Hand[$i]);
        $dis_class = $dis_card->Class;
        if ($dis_class != 'Rare') $storage[$dis_class][] = $i;
      }
    
    if ((count($storage['Common']) + count($storage['Uncommon'])) > 0)
    {
      shuffle($storage['Common']); shuffle($storage['Uncommon']);
      $storage_temp = array_merge($storage['Common'], $storage['Uncommon']);
      $discarded_pos = array_pop($storage_temp);
      $hisdata->Hand[$discarded_pos] = $this->DrawCard($his_deck, $hisdata->Hand, $discarded_pos, 'DrawCard_different');
      $hisdata->NewCards[$discarded_pos] = 1;
    }
]]></code>
    <created>2011-04-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="628">
    <name>Pet dragon</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>5</gems>
      <recruits>5</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Attack: 8<br />Mode1:<br />Gems: +3<br />Mode2:<br />Recruits: +3]]></effect>
    <code><![CDATA[
    $this->Attack(8, $hisdata->Tower, $hisdata->Wall);
    if ($mode == 1) $mydata->Gems+=3;
    elseif ($mode == 2) $mydata->Recruits+= 3;
]]></code>
    <created>2011-04-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="629">
    <name>Elven apprentice</name>
    <class>Common</class>
    <cost>
      <bricks>4</bricks>
      <gems>4</gems>
      <recruits>4</recruits>
    </cost>
    <modes>3</modes>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Summons<br />Mode1:<br />Master bricklayer<br />Mode2:<br />Book of magic<br />Mode3:<br />Blacksmith]]></effect>
    <code><![CDATA[
    if ($mode == 1) $nextcard = 22;
    elseif ($mode == 2) $nextcard = 34;
    elseif ($mode == 3) $nextcard = 12;
]]></code>
    <created>2011-04-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="630">
    <name>Goblin tower</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Tower: +7<br />Production x0]]></effect>
    <code><![CDATA[$mydata->Tower+= 7; $bricks_production = 0; $gems_production = 0; $recruits_production = 0;]]></code>
    <created>2011-04-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="631">
    <name>Dwarven castle</name>
    <class>Uncommon</class>
    <cost>
      <bricks>5</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>2</modes>
    <keywords>Runic</keywords>
    <effect><![CDATA[Mode1:<br />Tower: = 18<br />Mode2:<br />Wall: = 21]]></effect>
    <code><![CDATA[if ($mode == 1) $mydata->Tower = 18; elseif ($mode == 2) $mydata->Wall = 21;]]></code>
    <created>2011-04-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="632">
    <name>Priestess of light</name>
    <class>Uncommon</class>
    <cost>
      <bricks>2</bricks>
      <gems>2</gems>
      <recruits>2</recruits>
    </cost>
    <modes>3</modes>
    <keywords>Alliance,Holy</keywords>
    <effect><![CDATA[Mode1:<br />Bricks prod x3<br />Mode2:<br />Gems prod x3<br />Mode3:<br />Recruits prod x3]]></effect>
    <code><![CDATA[
    if ($mode == 1) $bricks_production*= 3;
    elseif ($mode == 2) $gems_production*= 3;
    elseif ($mode == 3) $recruits_production*= 3;
]]></code>
    <created>2011-04-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="633">
    <name>Scylla</name>
    <class>Uncommon</class>
    <cost>
      <bricks>0</bricks>
      <gems>18</gems>
      <recruits>15</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Skirmisher</keywords>
    <effect><![CDATA[Enemy wall: -9<br />Attack: N<br />N = #Enemy tower (max 30)]]></effect>
    <code><![CDATA[$hisdata->Wall-= 9; $this->Attack(min(30, $hisdata->Tower), $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2011-04-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="634">
    <name>Suzaku</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>42</gems>
      <recruits>42</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Burning</keywords>
    <effect><![CDATA[Attack: 10N<br />N = sum of three highest facilities in game]]></effect>
    <code><![CDATA[
    $facilities = array($mydata->Quarry, $mydata->Magic, $mydata->Dungeons, $hisdata->Quarry, $hisdata->Magic, $hisdata->Dungeons);
    sort($facilities);
    $sum = 0;
    for ($i = 1; $i <= 3; $i++)
    {
      $val = array_pop($facilities);
      $sum+= $val;
    }
    $this->Attack(10*$sum, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2011-04-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="635">
    <name>Hydra</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon</keywords>
    <effect><![CDATA[Replace neighbouring cards with Hydra<br />Attack: 5N<br />N = #Hydra cards in game]]></effect>
    <code><![CDATA[
    if ($cardpos > 1)
      { $mydata->Hand[$cardpos - 1] = 635; $mydata->NewCards[$cardpos - 1] = 1; }
    if ($cardpos < 8)
      { $mydata->Hand[$cardpos + 1] = 635; $mydata->NewCards[$cardpos + 1] = 1; }
    $tmp = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      if ($mydata->Hand[$i] == 635) $tmp++;
      if ($hisdata->Hand[$i] == 635) $tmp++;
    }
    $this->Attack(5*$tmp, $hisdata->Tower, $hisdata->Wall);
]]></code>
    <created>2011-04-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="636">
    <name>Mirror elemental</name>
    <class>Rare</class>
    <cost>
      <bricks>5</bricks>
      <gems>5</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords>Illusion,Unliving</keywords>
    <effect><![CDATA[Wall: +15<br />Replace a card in hand with Mirror golem]]></effect>
    <code><![CDATA[$mydata->Wall+= 15; $mydata->Hand[$mode] = 479; if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;]]></code>
    <created>2011-04-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="637">
    <name>Bahamut</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>75</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Dragon,Legend</keywords>
    <effect><![CDATA[Enemy wall: -80<br />Attack: 150]]></effect>
    <code><![CDATA[$hisdata->Wall-= 80; $this->Attack(150, $hisdata->Tower, $hisdata->Wall);]]></code>
    <created>2011-04-24</created>
    <modified>2011-04-24</modified>
  </card>
  <card id="638">
    <name>Standstill</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Tower: +5<br />Wall: +10<br />Enemy tower: +5<br />Enemy wall: +10]]></effect>
    <code><![CDATA[$mydata->Tower+= 5; $mydata->Wall+= 10; $hisdata->Tower+= 5; $hisdata->Wall+= 10;]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="639">
    <name>Goblin heap</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Horde</keywords>
    <effect><![CDATA[Wall: +10<br />Bricks prod x0<br />Recruits prod x0]]></effect>
    <code><![CDATA[$mydata->Wall+= 10; $bricks_production = 0; $recruits_production = 0;]]></code>
    <created>2011-09-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="640">
    <name>Gorgon</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Bricks: +6<br />Recruits: -6<br />Enemy bricks: +6<br />Enemy recruits: -6]]></effect>
    <code><![CDATA[$mydata->Bricks+= 6; $mydata->Recruits-= 6; $hisdata->Bricks+= 6; $hisdata->Recruits-= 6;]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="641">
    <name>Samurai princess</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Discard all rare cards from opponent's hand (opponent can't draw rare cards)]]></effect>
    <code><![CDATA[
    for ($i = 1; $i <= 8; $i++)
      if ($carddb->GetCard($hisdata->Hand[$i])->Class == 'Rare')
      {
        $hisdata->Hand[$i] = $this->DrawCard($his_deck, $hisdata->Hand, $i, 'DrawCard_norare');
        $hisdata->NewCards[$i] = 1;
      }
    ]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="642">
    <name>Arcane tome</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>1</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Magic: +1<br />Replace a card in hand with Book of magic]]></effect>
    <code><![CDATA[
    $mydata->Magic+= 1; $mydata->Hand[$mode] = 34;
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
    ]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="643">
    <name>Mason</name>
    <class>Rare</class>
    <cost>
      <bricks>1</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Quarry: +1<br />Replace a card in hand with Master bricklayer]]></effect>
    <code><![CDATA[
    $mydata->Quarry+= 1; $mydata->Hand[$mode] = 22;
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
    ]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="644">
    <name>Forge master</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>1</recruits>
    </cost>
    <modes>8</modes>
    <keywords/>
    <effect><![CDATA[Dungeon: +1<br />Replace a card in hand with Blacksmith]]></effect>
    <code><![CDATA[
    $mydata->Dungeons+= 1; $mydata->Hand[$mode] = 12;
    if ($mode == $cardpos) $nextcard = 0; else $mydata->NewCards[$mode] = 1;
    ]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="645">
    <name>Ancient power</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Players gain 1 stock for each rare card and each <b>Dragon</b> in their hand]]></effect>
    <code><![CDATA[
    $mine = $his = 0;
    for ($i = 1; $i <= 8; $i++)
    {
      if ($i != $cardpos and $carddb->GetCard($mydata->Hand[$i])->Class == 'Rare') $mine++;
      if ($carddb->GetCard($hisdata->Hand[$i])->Class == 'Rare') $his++;
    }
    $mine+= $this->KeywordCount($mydata->Hand, "Dragon");
    $his+= $this->KeywordCount($hisdata->Hand, "Dragon");
    $mydata->Bricks+= $mine; $mydata->Gems+= $mine; $mydata->Recruits+= $mine;
    $hisdata->Bricks+= $his; $hisdata->Gems+= $his; $hisdata->Recruits+= $his;
    ]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="646">
    <name>Northern archer</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>3</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian,Far sight</keywords>
    <effect><![CDATA[Enemy tower: -N<br />Enemy wall: +N<br />N = #<b>Barbarian</b> in hand]]></effect>
    <code><![CDATA[
    $tmp = $this->KeywordCount($mydata->Hand, "Barbarian");
    $hisdata->Tower-= $tmp; $hisdata->Wall+= $tmp;
    ]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="647">
    <name>Guardian spirit</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>2</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Restoration</keywords>
    <effect><![CDATA[Tower: +2<br />If Tower or Wall was damaged during opponent's last round<br />Wall: +8]]></effect>
    <code><![CDATA[$mydata->Tower+= 2; if ($mychanges['Tower'] < 0 or $mychanges['Wall'] < 0) $mydata->Wall+= 8;]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="648">
    <name>Water ritual</name>
    <class>Rare</class>
    <cost>
      <bricks>8</bricks>
      <gems>8</gems>
      <recruits>8</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua</keywords>
    <effect><![CDATA[Summons Ocean queen]]></effect>
    <code><![CDATA[$nextcard = 530;]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="649">
    <name>Zeus</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>30</gems>
      <recruits>30</recruits>
    </cost>
    <modes>0</modes>
    <keywords/>
    <effect><![CDATA[Enemy tower = 10<br />Enemy wall = 10]]></effect>
    <code><![CDATA[$hisdata->Tower = 10; $hisdata->Wall = 10;]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="650">
    <name>Baku</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>6</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Beast,Illusion</keywords>
    <effect><![CDATA[Attack: 6<br />Summons a card from opponent's deck]]></effect>
    <code><![CDATA[$this->Attack(6, $hisdata->Tower, $hisdata->Wall); $nextcard = $this->DrawCard($his_deck, $mydata->Hand, $cardpos, 'DrawCard_random');]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="651">
    <name>Amazon</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>0</gems>
      <recruits>6</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Barbarian</keywords>
    <effect><![CDATA[Attack: 7<br />If Enemy wall > 40<br />Enemy wall: -10]]></effect>
    <code><![CDATA[$this->Attack(7, $hisdata->Tower, $hisdata->Wall); if ($hisdata->Wall > 40) $hisdata->Wall-= 10;]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="652">
    <name>Tsunami</name>
    <class>Rare</class>
    <cost>
      <bricks>0</bricks>
      <gems>15</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Aqua,Durable</keywords>
    <effect><![CDATA[Discard opponent's hand (opponent can't draw rare cards)]]></effect>
    <code><![CDATA[$hisdata->Hand = $this->DrawHand_norare($his_deck); $hisdata->NewCards = array (1=> 1, 1, 1, 1, 1, 1, 1, 1);]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="653">
    <name>Elven sorcereer</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <gems>3</gems>
      <recruits>0</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Alliance,Mage</keywords>
    <effect><![CDATA[Attack: 3<br />If Gems < Enemy gems<br />Gems prod x2]]></effect>
    <code><![CDATA[$this->Attack(3, $hisdata->Tower, $hisdata->Wall); if ($mydata->Gems < $hisdata->Gems) $gems_production*= 2;]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
  <card id="654">
    <name>Academy</name>
    <class>Rare</class>
    <cost>
      <bricks>10</bricks>
      <gems>10</gems>
      <recruits>10</recruits>
    </cost>
    <modes>0</modes>
    <keywords>Durable</keywords>
    <effect><![CDATA[Tower: +15<br />Lowest facility: +1<br />Production x0]]></effect>
    <code><![CDATA[
    $mydata->Tower+= 15;
    $min = min($mydata->Quarry, $mydata->Magic, $mydata->Dungeons);
    $facilities = array('Quarry', 'Magic', 'Dungeons'); $temp = array();
    foreach ($facilities as $facility) if ($mydata->$facility == $min) $temp[] = $facility;
    $chosen_facility = $temp[array_rand($temp)];
    $mydata->$chosen_facility+= 1;
    $bricks_production = 0; $gems_production = 0; $recruits_production = 0;
    ]]></code>
    <created>2011-09-24</created>
    <modified>2011-12-24</modified>
  </card>
  <card id="655">
    <name>Elven market</name>
    <class>Common</class>
    <cost>
      <bricks>0</bricks>
      <recruits>1</recruits>
      <gems>0</gems>
    </cost>
    <modes>0</modes>
    <keywords>Alliance</keywords>
    <effect><![CDATA[Production x2<br />You lose 1 random resource for each non-<b>Alliance</b> card in hand]]></effect>
    <code><![CDATA[
    $bricks_production*= 2; $gems_production*= 2; $recruits_production*= 2;
    for ($i = 1; $i <= 8; $i++)
      if ($i != $cardpos and !$carddb->GetCard($mydata->Hand[$i])->HasKeyword("Alliance"))
      {
        $tmp = mt_rand(0,2);
        if ($tmp == 0) $mydata->Bricks--;
        elseif ($tmp == 1) $mydata->Gems--;
        elseif ($tmp == 2) $mydata->Recruits--;
      }
    ]]></code>
    <created>2011-09-24</created>
    <modified>2011-09-24</modified>
  </card>
</cards>
