INSERT INTO `messages` (`Author`, `Recipient`, `Subject`, `Content`, `AuthorDelete`, `RecipientDelete`, `Unread`, `GameID`, `Created`) SELECT `Player1` as `Author`, `Player2` as `Recipient`, "" as `Subject`, "" as `Content`, "no" as `AuthorDelete`, "no" as `RecipientDelete`, "yes" as `Unread`, `GameID`, NOW() as `Created`  FROM `games` WHERE `State` = "waiting" AND `GameID` NOT IN (SELECT `GameID` FROM `messages` WHERE `GameID` > 0) ;